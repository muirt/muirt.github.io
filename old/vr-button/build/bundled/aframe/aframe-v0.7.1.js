(function(t){if("object"===("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!==typeof module)module.exports=t();else if("function"===typeof define&&define.amd)define([],t);else{var r;r="undefined"===typeof window?"undefined"===typeof global?"undefined"===typeof self?this:self:global:window,r.AFRAME=t()}})(function(){var t=Number.MAX_VALUE,r=Math.tan,a=Math.atan,o=Math.acos,n=Math.round,s=Math.sign,l=Math.max,p=Math.LN2,u=Math.log,g=Math.abs,d=String.fromCharCode,m=Math.min,h=Math.floor,M=Math.sqrt,y=Math.pow,E=Math.sin,A=Math.cos,L=Math.PI,i;return function d(p,t,n){function r(i,o){if(!t[i]){if(!p[i]){var c="function"==typeof require&&require;if(!o&&c)return c(i,!0);if(s)return s(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var m=t[i]={exports:{}};p[i][0].call(m.exports,function(t){var a=p[i][1][t];return r(a?a:t)},m,m.exports,d,p,t,n)}return t[i].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,r,a){(function(t){var o=function(){this._tweens={},this._tweensAddedDuringUpdate={}};o.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,r){var a=Object.keys(this._tweens);if(0===a.length)return!1;for(t=void 0===t?s.now():t;0<a.length;){this._tweensAddedDuringUpdate={};for(var o=0;o<a.length;o++)!1===this._tweens[a[o]].update(t)&&(this._tweens[a[o]]._isPlaying=!1,r||delete this._tweens[a[o]]);a=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var s=new o;s.Group=o,s._nextId=0,s.nextId=function(){return s._nextId++},s.now="undefined"===typeof window&&"undefined"!==typeof t?function(){var r=t.hrtime();return 1e3*r[0]+r[1]/1e6}:"undefined"!==typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0===Date.now?function(){return new Date().getTime()}:Date.now,s.Tween=function(t,r){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=s.Easing.Linear.None,this._interpolationFunction=s.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=r||s,this._id=s.nextId()},s.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,r){return this._valuesEnd=t,void 0!==r&&(this._duration=r),this},start:function(t){for(var r in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0===t?s.now():t,this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[r]instanceof Array){if(0===this._valuesEnd[r].length)continue;this._valuesEnd[r]=[this._object[r]].concat(this._valuesEnd[r])}void 0!==this._object[r]&&(this._valuesStart[r]=this._object[r],!1===this._valuesStart[r]instanceof Array&&(this._valuesStart[r]*=1),this._valuesStartRepeat[r]=this._valuesStart[r]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback.call(this._object,this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var t=0,r=this._chainedTweens.length;t<r;t++)this._chainedTweens[t].stop()},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var r,a,o;if(t<this._startTime)return!0;for(r in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback.call(this._object,this._object),this._onStartCallbackFired=!0),a=(t-this._startTime)/this._duration,a=1<a?1:a,o=this._easingFunction(a),this._valuesEnd)if(void 0!==this._valuesStart[r]){var n=this._valuesStart[r]||0,s=this._valuesEnd[r];s instanceof Array?this._object[r]=this._interpolationFunction(s,o):("string"===typeof s&&("+"===s.charAt(0)||"-"===s.charAt(0)?s=n+parseFloat(s):s=parseFloat(s)),"number"===typeof s&&(this._object[r]=n+(s-n)*o))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,o),1===a){if(0<this._repeat){for(r in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"===typeof this._valuesEnd[r]&&(this._valuesStartRepeat[r]+=parseFloat(this._valuesEnd[r])),this._yoyo){var l=this._valuesStartRepeat[r];this._valuesStartRepeat[r]=this._valuesEnd[r],this._valuesEnd[r]=l}this._valuesStart[r]=this._valuesStartRepeat[r]}return this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0===this._repeatDelayTime?t+this._delayTime:t+this._repeatDelayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object,this._object);for(var d=0,i=this._chainedTweens.length;d<i;d++)this._chainedTweens[d].start(this._startTime+this._duration);return!1}return!0}},s.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return 1>(t*=2)?0.5*t*t:-0.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return 1>(t*=2)?0.5*t*t*t:0.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return 1>(t*=2)?0.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return 1>(t*=2)?0.5*t*t*t*t*t:0.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-A(t*L/2)},Out:function(t){return E(t*L/2)},InOut:function(t){return 0.5*(1-A(L*t))}},Exponential:{In:function(t){return 0===t?0:y(1024,t-1)},Out:function(t){return 1===t?1:1-y(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:1>(t*=2)?0.5*y(1024,t-1):0.5*(-y(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-M(1-t*t)},Out:function(t){return M(1- --t*t)},InOut:function(t){return 1>(t*=2)?-0.5*(M(1-t*t)-1):0.5*(M(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-y(2,10*(t-1))*E(5*(t-1.1)*L)},Out:function(t){return 0===t?0:1===t?1:y(2,-10*t)*E(5*(t-0.1)*L)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,1>t?-0.5*y(2,10*(t-1))*E(5*(t-1.1)*L):0.5*y(2,-10*(t-1))*E(5*(t-1.1)*L)+1)}},Back:{In:function(t){var r=1.70158;return t*t*((r+1)*t-r)},Out:function(t){var r=1.70158;return--t*t*((r+1)*t+r)+1},InOut:function(t){var r=1.525*1.70158;return 1>(t*=2)?0.5*(t*t*((r+1)*t-r)):0.5*((t-=2)*t*((r+1)*t+r)+2)}},Bounce:{In:function(t){return 1-s.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+0.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+0.9375:7.5625*(t-=2.625/2.75)*t+0.984375},InOut:function(t){return 0.5>t?0.5*s.Easing.Bounce.In(2*t):0.5*s.Easing.Bounce.Out(2*t-1)+0.5}}},s.Interpolation={Linear:function(t,r){var a=t.length-1,o=a*r,n=h(o),i=s.Interpolation.Utils.Linear;return 0>r?i(t[0],t[1],o):1<r?i(t[a],t[a-1],a-o):i(t[n],t[n+1>a?a:n+1],o-n)},Bezier:function(t,r){for(var a=0,o=t.length-1,n=y,l=s.Interpolation.Utils.Bernstein,d=0;d<=o;d++)a+=n(1-r,o-d)*n(r,d)*t[d]*l(o,d);return a},CatmullRom:function(t,r){var a=t.length-1,o=a*r,n=h(o),i=s.Interpolation.Utils.CatmullRom;return t[0]===t[a]?(0>r&&(n=h(o=a*(1+r))),i(t[(n-1+a)%a],t[n],t[(n+1)%a],t[(n+2)%a],o-n)):0>r?t[0]-(i(t[0],t[0],t[1],t[1],-o)-t[0]):1<r?t[a]-(i(t[a],t[a],t[a-1],t[a-1],o-a)-t[a]):i(t[n?n-1:0],t[n],t[a<n+1?a:n+1],t[a<n+2?a:n+2],o-n)},Utils:{Linear:function(r,a,i){return(a-r)*i+r},Bernstein:function(t,r){var a=s.Interpolation.Utils.Factorial;return a(t)/a(r)/a(t-r)},Factorial:function(){var t=[1];return function(r){var a=1;if(t[r])return t[r];for(var o=r;1<o;o--)a*=o;return t[r]=a,a}}(),CatmullRom:function(r,a,i,o,n){var t=0.5*(i-r),s=0.5*(o-a),l=n*n;return(2*a-2*i+t+s)*(n*l)+(-3*a+3*i-2*t-s)*l+t*n+a}}},function(t){"function"===typeof i&&i.amd?i([],function(){return s}):"undefined"!==typeof r&&"object"===("undefined"===typeof a?"undefined":babelHelpers.typeof(a))?r.exports=s:t!==void 0&&(t.TWEEN=s)}(this)}).call(this,t("_process"))},{_process:6}],2:[function(t,r){var a=Object.prototype.toString;r.exports=function(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===a.call(t.buffer)||Array.isArray(t)}},{}],3:[function(t,r){r.exports=function(t,r){return"number"===typeof t?t:"number"===typeof r?r:0}},{}],4:[function(t,r,a){"use strict";function o(t){var r=t.length;if(0<r%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[r-2]?2:"="===t[r-1]?1:0}function n(t){return l[63&t>>18]+l[63&t>>12]+l[63&t>>6]+l[63&t]}function s(t,r,a){for(var o=[],s=r,i;s<a;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(n(i));return o.join("")}a.byteLength=function(t){return 3*t.length/4-o(t)},a.toByteArray=function(t){var r=t.length,a,i,n,s,l;s=o(t),l=new p(3*r/4-s),i=0<s?r-4:r;var c=0;for(a=0;a<i;a+=4)n=d[t.charCodeAt(a)]<<18|d[t.charCodeAt(a+1)]<<12|d[t.charCodeAt(a+2)]<<6|d[t.charCodeAt(a+3)],l[c++]=255&n>>16,l[c++]=255&n>>8,l[c++]=255&n;return 2===s?(n=d[t.charCodeAt(a)]<<2|d[t.charCodeAt(a+1)]>>4,l[c++]=255&n):1===s&&(n=d[t.charCodeAt(a)]<<10|d[t.charCodeAt(a+1)]<<4|d[t.charCodeAt(a+2)]>>2,l[c++]=255&n>>8,l[c++]=255&n),l},a.fromByteArray=function(t){for(var r=t.length,a=r%3,o="",n=[],d=16383,p=0,i=r-a,c;p<i;p+=d)n.push(s(t,p,p+d>i?i:p+d));return 1===a?(c=t[r-1],o+=l[c>>2],o+=l[63&c<<4],o+="=="):2===a&&(c=(t[r-2]<<8)+t[r-1],o+=l[c>>10],o+=l[63&c>>4],o+=l[63&c<<2],o+="="),n.push(o),n.join("")};for(var l=[],d=[],p="undefined"===typeof Uint8Array?Array:Uint8Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,i=c.length;u<i;++u)l[u]=c[u],d[c.charCodeAt(u)]=u;d[45]=62,d[95]=63},{}],5:[function(t,r){"use strict";r.exports={createLink:function(t,r){var a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");for(var o in i.href=t,i.rel="stylesheet",r)if(r.hasOwnProperty(o)){var n=r[o];i.setAttribute("data-"+o,n)}a.appendChild(i)},createStyle:function(t,r){var a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");for(var o in i.type="text/css",r)if(r.hasOwnProperty(o)){var n=r[o];i.setAttribute("data-"+o,n)}i.sheet?(i.innerHTML=t,i.sheet.cssText=t,a.appendChild(i)):i.styleSheet?(a.appendChild(i),i.styleSheet.cssText=t):(i.appendChild(document.createTextNode(t)),a.appendChild(i))}}},{}],6:[function(t,r){function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===a||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(r){try{return u.call(null,t,0)}catch(r){return u.call(this,t,0)}}}function n(t){if(m===clearTimeout)return clearTimeout(t);if((m===i||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(t);try{return m(t)}catch(r){try{return m.call(null,t)}catch(r){return m.call(this,t)}}}function s(){h&&f&&(h=!1,f.length?g=f.concat(g):y=-1,g.length&&l())}function l(){if(!h){var t=o(s);h=!0;for(var r=g.length;r;){for(f=g,g=[];++y<r;)f&&f[y].run();y=-1,r=g.length}f=null,h=!1,n(t)}}function d(t,r){this.fun=t,this.array=r}function p(){}var c=r.exports={},u,m;(function(){try{u="function"===typeof setTimeout?setTimeout:a}catch(t){u=a}try{m="function"===typeof clearTimeout?clearTimeout:i}catch(t){m=i}})();var g=[],h=!1,y=-1,f;c.nextTick=function(t){var r=Array(arguments.length-1);if(1<arguments.length)for(var a=1;a<arguments.length;a++)r[a-1]=arguments[a];g.push(new d(t,r)),1!==g.length||h||o(l)},d.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=p,c.addListener=p,c.once=p,c.off=p,c.removeListener=p,c.removeAllListeners=p,c.emit=p,c.prependListener=p,c.prependOnceListener=p,c.listeners=function(){return[]},c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],7:[function(t,r){var o=t("buffer").Buffer;r.exports=function(t,r){if(o.isBuffer(t)&&o.isBuffer(r)){if("function"===typeof t.equals)return t.equals(r);if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(t[a]!==r[a])return!1;return!0}}},{buffer:8}],8:[function(t,r,a){(function(r){"use strict";function i(){return n.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,r){if(i()<r)throw new RangeError("Invalid typed array length");return n.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r),t.__proto__=n.prototype):(null===t&&(t=new n(r)),t.length=r),t}function n(t,r,a){if(!n.TYPED_ARRAY_SUPPORT&&!(this instanceof n))return new n(t,r,a);if("number"===typeof t){if("string"===typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,a)}function s(t,r,a,i){if("number"===typeof r)throw new TypeError("\"value\" argument must not be a number");return"undefined"!==typeof ArrayBuffer&&r instanceof ArrayBuffer?f(t,r,a,i):"string"===typeof r?u(t,r,a):M(t,r)}function l(t){if("number"!==typeof t)throw new TypeError("\"size\" argument must be a number");else if(0>t)throw new RangeError("\"size\" argument must not be negative")}function p(t,r,a,i){return l(r),0>=r?o(t,r):void 0===a?o(t,r):"string"===typeof i?o(t,r).fill(a,i):o(t,r).fill(a)}function c(t,r){if(l(r),t=o(t,0>r?0:0|x(r)),!n.TYPED_ARRAY_SUPPORT)for(var a=0;a<r;++a)t[a]=0;return t}function u(t,r,a){if(("string"!==typeof a||""===a)&&(a="utf8"),!n.isEncoding(a))throw new TypeError("\"encoding\" must be a valid string encoding");var i=0|E(r,a);t=o(t,i);var s=t.write(r,a);return s!==i&&(t=t.slice(0,s)),t}function g(t,r){var a=0>r.length?0:0|x(r.length);t=o(t,a);for(var n=0;n<a;n+=1)t[n]=255&r[n];return t}function f(t,r,a,i){if(r.byteLength,0>a||r.byteLength<a)throw new RangeError("'offset' is out of bounds");if(r.byteLength<a+(i||0))throw new RangeError("'length' is out of bounds");return r=void 0===a&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,a):new Uint8Array(r,a,i),n.TYPED_ARRAY_SUPPORT?(t=r,t.__proto__=n.prototype):t=g(t,r),t}function M(t,r){if(n.isBuffer(r)){var a=0|x(r.length);return(t=o(t,a),0===t.length)?t:(r.copy(t,0,0,a),t)}if(r){if("undefined"!==typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!==typeof r.length||$(r.length)?o(t,0):g(t,r);if("Buffer"===r.type&&re(r.data))return g(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function x(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function E(t,r){if(n.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var a=t.length;if(0===a)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":case void 0:return X(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*a;case"hex":return a>>>1;case"base64":return K(t).length;default:if(i)return X(t).length;r=(""+r).toLowerCase(),i=!0;}}function v(t,r,a){var i=!1;if((void 0===r||0>r)&&(r=0),r>this.length)return"";if((void 0===a||a>this.length)&&(a=this.length),0>=a)return"";if(a>>>=0,r>>>=0,a<=r)return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,r,a);case"utf8":case"utf-8":return _(this,r,a);case"ascii":return O(this,r,a);case"latin1":case"binary":return z(this,r,a);case"base64":return I(this,r,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,r,a);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0;}}function A(t,r,a){var o=t[r];t[r]=t[a],t[a]=o}function T(t,r,a,i,o){if(0===t.length)return-1;if("string"===typeof a?(i=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648),a=+a,isNaN(a)&&(a=o?0:t.length-1),0>a&&(a=t.length+a),a>=t.length){if(o)return-1;a=t.length-1}else if(0>a)if(o)a=0;else return-1;if("string"===typeof r&&(r=n.from(r,i)),n.isBuffer(r))return 0===r.length?-1:b(t,r,a,i,o);if("number"===typeof r)return r&=255,n.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,r,a):Uint8Array.prototype.lastIndexOf.call(t,r,a):b(t,[r],a,i,o);throw new TypeError("val must be string, number or Buffer")}function b(t,r,a,o,n){function s(t,r){return 1===l?t[r]:t.readUInt16BE(r*l)}var l=1,d=t.length,p=r.length;if(void 0!==o&&(o=(o+"").toLowerCase(),"ucs2"===o||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(2>t.length||2>r.length)return-1;l=2,d/=2,p/=2,a/=2}var c;if(n){var i=-1;for(c=a;c<d;c++)if(s(t,c)!==s(r,-1===i?0:c-i))-1!==i&&(c-=c-i),i=-1;else if(-1===i&&(i=c),c-i+1===p)return i*l}else for(a+p>d&&(a=d-p),c=a;0<=c;c--){for(var u=!0,m=0;m<p;m++)if(s(t,c+m)!==s(r,m)){u=!1;break}if(u)return c}return-1}function L(t,r,a,o){a=+a||0;var n=t.length-a;o?(o=+o,o>n&&(o=n)):o=n;var s=r.length;if(0!==s%2)throw new TypeError("Invalid hex string");o>s/2&&(o=s/2);for(var l=0,i;l<o;++l){if(i=parseInt(r.substr(2*l,2),16),isNaN(i))return l;t[a+l]=i}return l}function N(t,r,a,i){return J(X(r,t.length-a),t,a,i)}function D(t,r,a,i){return J(q(r),t,a,i)}function w(t,r,a,i){return D(t,r,a,i)}function C(t,r,a,i){return J(K(r),t,a,i)}function S(t,r,a,i){return J(Z(r,t.length-a),t,a,i)}function I(t,r,a){return 0===r&&a===t.length?ee.fromByteArray(t):ee.fromByteArray(t.slice(r,a))}function _(t,r,a){a=m(t.length,a);for(var o=[],n=r;n<a;){var i=t[n],s=null,l=239<i?4:223<i?3:191<i?2:1;if(n+l<=a){var d,p,c,u;1===l?128>i&&(s=i):2===l?(d=t[n+1],128===(192&d)&&(u=(31&i)<<6|63&d,127<u&&(s=u))):3===l?(d=t[n+1],p=t[n+2],128===(192&d)&&128===(192&p)&&(u=(15&i)<<12|(63&d)<<6|63&p,2047<u&&(55296>u||57343<u)&&(s=u))):4===l?(d=t[n+1],p=t[n+2],c=t[n+3],128===(192&d)&&128===(192&p)&&128===(192&c)&&(u=(15&i)<<18|(63&d)<<12|(63&p)<<6|63&c,65535<u&&1114112>u&&(s=u))):void 0}null===s?(s=65533,l=1):65535<s&&(s-=65536,o.push(55296|1023&s>>>10),s=56320|1023&s),o.push(s),n+=l}return j(o)}function j(t){var r=t.length;if(r<=ae)return d.apply(String,t);for(var a="",o=0;o<r;)a+=d.apply(String,t.slice(o,o+=ae));return a}function O(t,r,a){var o="";a=m(t.length,a);for(var n=r;n<a;++n)o+=d(127&t[n]);return o}function z(t,r,a){var o="";a=m(t.length,a);for(var n=r;n<a;++n)o+=d(t[n]);return o}function R(t,r,a){var o=t.length;(!r||0>r)&&(r=0),(!a||0>a||a>o)&&(a=o);for(var n="",s=r;s<a;++s)n+=W(t[s]);return n}function U(t,r,a){for(var o=t.slice(r,a),n="",s=0;s<o.length;s+=2)n+=d(o[s]+256*o[s+1]);return n}function P(t,r,a){if(0!==t%1||0>t)throw new RangeError("offset is not uint");if(t+r>a)throw new RangeError("Trying to access beyond buffer length")}function B(t,r,a,i,o,s){if(!n.isBuffer(t))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(r>o||r<s)throw new RangeError("\"value\" argument is out of bounds");if(a+i>t.length)throw new RangeError("Index out of range")}function k(t,r,a,o){0>r&&(r=65535+r+1);for(var n=0,i=m(t.length-a,2);n<i;++n)t[a+n]=(r&255<<8*(o?n:1-n))>>>8*(o?n:1-n)}function F(t,r,a,o){0>r&&(r=4294967295+r+1);for(var n=0,i=m(t.length-a,4);n<i;++n)t[a+n]=255&r>>>8*(o?n:3-n)}function G(t,r,a,i){if(a+i>t.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range")}function V(t,r,a,i,o){return o||G(t,r,a,4,3.4028234663852886e38,-3.4028234663852886e38),te.write(t,r,a,i,23,4),a+4}function H(t,r,a,i,o){return o||G(t,r,a,8,1.7976931348623157e308,-1.7976931348623157e308),te.write(t,r,a,i,52,8),a+8}function Q(t){if(t=Y(t).replace(ie,""),2>t.length)return"";for(;0!==t.length%4;)t+="=";return t}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function W(t){return 16>t?"0"+t.toString(16):t.toString(16)}function X(t,r){r=r||Infinity;for(var a=t.length,o=null,n=[],s=0,i;s<a;++s){if(i=t.charCodeAt(s),55295<i&&57344>i){if(!o){if(56319<i){-1<(r-=3)&&n.push(239,191,189);continue}else if(s+1===a){-1<(r-=3)&&n.push(239,191,189);continue}o=i;continue}if(56320>i){-1<(r-=3)&&n.push(239,191,189),o=i;continue}i=(o-55296<<10|i-56320)+65536}else o&&-1<(r-=3)&&n.push(239,191,189);if(o=null,128>i){if(0>(r-=1))break;n.push(i)}else if(2048>i){if(0>(r-=2))break;n.push(192|i>>6,128|63&i)}else if(65536>i){if(0>(r-=3))break;n.push(224|i>>12,128|63&i>>6,128|63&i)}else if(1114112>i){if(0>(r-=4))break;n.push(240|i>>18,128|63&i>>12,128|63&i>>6,128|63&i)}else throw new Error("Invalid code point")}return n}function q(t){for(var r=[],a=0;a<t.length;++a)r.push(255&t.charCodeAt(a));return r}function Z(t,r){for(var a=[],o=0,i,n,s;o<t.length&&!(0>(r-=2));++o)i=t.charCodeAt(o),n=i>>8,s=i%256,a.push(s),a.push(n);return a}function K(t){return ee.toByteArray(Q(t))}function J(t,r,a,o){for(var n=0;n<o&&!(n+a>=r.length||n>=t.length);++n)r[n+a]=t[n];return n}function $(t){return t!==t}var ee=t("base64-js"),te=t("ieee754"),re=t("isarray");a.Buffer=n,a.SlowBuffer=function(t){return+t!=t&&(t=0),n.alloc(+t)},a.INSPECT_MAX_BYTES=50,n.TYPED_ARRAY_SUPPORT=r.TYPED_ARRAY_SUPPORT===void 0?function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}():r.TYPED_ARRAY_SUPPORT,a.kMaxLength=i(),n.poolSize=8192,n._augment=function(t){return t.__proto__=n.prototype,t},n.from=function(t,r,a){return s(null,t,r,a)},n.TYPED_ARRAY_SUPPORT&&(n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0})),n.alloc=function(t,r,a){return p(null,t,r,a)},n.allocUnsafe=function(t){return c(null,t)},n.allocUnsafeSlow=function(t){return c(null,t)},n.isBuffer=function(t){return!!(null!=t&&t._isBuffer)},n.compare=function(t,r){if(!n.isBuffer(t)||!n.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var a=t.length,o=r.length,s=0,i=m(a,o);s<i;++s)if(t[s]!==r[s]){a=t[s],o=r[s];break}return a<o?-1:o<a?1:0},n.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},n.concat=function(t,r){if(!re(t))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===t.length)return n.alloc(0);var a;if(r===void 0)for(r=0,a=0;a<t.length;++a)r+=t[a].length;var i=n.allocUnsafe(r),o=0;for(a=0;a<t.length;++a){var s=t[a];if(!n.isBuffer(s))throw new TypeError("\"list\" argument must be an Array of Buffers");s.copy(i,o),o+=s.length}return i},n.byteLength=E,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var t=this.length;if(0!==t%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)A(this,r,r+1);return this},n.prototype.swap32=function(){var t=this.length;if(0!==t%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)A(this,r,r+3),A(this,r+1,r+2);return this},n.prototype.swap64=function(){var t=this.length;if(0!==t%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)A(this,r,r+7),A(this,r+1,r+6),A(this,r+2,r+5),A(this,r+3,r+4);return this},n.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?_(this,0,t):v.apply(this,arguments)},n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===n.compare(this,t)},n.prototype.inspect=function(){var t="",r=a.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},n.prototype.compare=function(t,r,a,o,s){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===a&&(a=t?t.length:0),void 0===o&&(o=0),void 0===s&&(s=this.length),0>r||a>t.length||0>o||s>this.length)throw new RangeError("out of range index");if(o>=s&&r>=a)return 0;if(o>=s)return-1;if(r>=a)return 1;if(r>>>=0,a>>>=0,o>>>=0,s>>>=0,this===t)return 0;for(var l=s-o,d=a-r,p=m(l,d),c=this.slice(o,s),u=t.slice(r,a),g=0;g<p;++g)if(c[g]!==u[g]){l=c[g],d=u[g];break}return l<d?-1:d<l?1:0},n.prototype.includes=function(t,r,a){return-1!==this.indexOf(t,r,a)},n.prototype.indexOf=function(t,r,a){return T(this,t,r,a,!0)},n.prototype.lastIndexOf=function(t,r,a){return T(this,t,r,a,!1)},n.prototype.write=function(t,r,a,i){if(void 0===r)i="utf8",a=this.length,r=0;else if(void 0===a&&"string"===typeof r)i=r,a=this.length,r=0;else if(isFinite(r))r|=0,isFinite(a)?(a|=0,void 0===i&&(i="utf8")):(i=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-r;if((void 0===a||a>o)&&(a=o),0<t.length&&(0>a||0>r)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var n=!1;;)switch(i){case"hex":return L(this,t,r,a);case"utf8":case"utf-8":return N(this,t,r,a);case"ascii":return D(this,t,r,a);case"latin1":case"binary":return w(this,t,r,a);case"base64":return C(this,t,r,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,r,a);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),n=!0;}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ae=4096;n.prototype.slice=function(t,r){var a=this.length;t=~~t,r=r===void 0?a:~~r,0>t?(t+=a,0>t&&(t=0)):t>a&&(t=a),0>r?(r+=a,0>r&&(r=0)):r>a&&(r=a),r<t&&(r=t);var o;if(n.TYPED_ARRAY_SUPPORT)o=this.subarray(t,r),o.__proto__=n.prototype;else{var s=r-t;o=new n(s,void 0);for(var l=0;l<s;++l)o[l]=this[l+t]}return o},n.prototype.readUIntLE=function(t,r,a){t|=0,r|=0,a||P(t,r,this.length);for(var o=this[t],n=1,s=0;++s<r&&(n*=256);)o+=this[t+s]*n;return o},n.prototype.readUIntBE=function(t,r,a){t|=0,r|=0,a||P(t,r,this.length);for(var i=this[t+--r],o=1;0<r&&(o*=256);)i+=this[t+--r]*o;return i},n.prototype.readUInt8=function(t,r){return r||P(t,1,this.length),this[t]},n.prototype.readUInt16LE=function(t,r){return r||P(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUInt16BE=function(t,r){return r||P(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUInt32LE=function(t,r){return r||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},n.prototype.readUInt32BE=function(t,r){return r||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},n.prototype.readIntLE=function(t,r,a){t|=0,r|=0,a||P(t,r,this.length);for(var o=this[t],n=1,s=0;++s<r&&(n*=256);)o+=this[t+s]*n;return n*=128,o>=n&&(o-=y(2,8*r)),o},n.prototype.readIntBE=function(t,r,a){t|=0,r|=0,a||P(t,r,this.length);for(var o=r,i=1,n=this[t+--o];0<o&&(i*=256);)n+=this[t+--o]*i;return i*=128,n>=i&&(n-=y(2,8*r)),n},n.prototype.readInt8=function(t,r){return r||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},n.prototype.readInt16LE=function(t,r){r||P(t,2,this.length);var a=this[t]|this[t+1]<<8;return 32768&a?4294901760|a:a},n.prototype.readInt16BE=function(t,r){r||P(t,2,this.length);var a=this[t+1]|this[t]<<8;return 32768&a?4294901760|a:a},n.prototype.readInt32LE=function(t,r){return r||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,r){return r||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,r){return r||P(t,4,this.length),te.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,r){return r||P(t,4,this.length),te.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,r){return r||P(t,8,this.length),te.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,r){return r||P(t,8,this.length),te.read(this,t,!1,52,8)},n.prototype.writeUIntLE=function(t,r,a,o){if(t=+t,r|=0,a|=0,!o){var n=y(2,8*a)-1;B(this,t,r,a,n,0)}var s=1,l=0;for(this[r]=255&t;++l<a&&(s*=256);)this[r+l]=255&t/s;return r+a},n.prototype.writeUIntBE=function(t,r,a,o){if(t=+t,r|=0,a|=0,!o){var n=y(2,8*a)-1;B(this,t,r,a,n,0)}var s=a-1,i=1;for(this[r+s]=255&t;0<=--s&&(i*=256);)this[r+s]=255&t/i;return r+a},n.prototype.writeUInt8=function(t,r,a){return t=+t,r|=0,a||B(this,t,r,1,255,0),n.TYPED_ARRAY_SUPPORT||(t=h(t)),this[r]=255&t,r+1},n.prototype.writeUInt16LE=function(t,r,a){return t=+t,r|=0,a||B(this,t,r,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):k(this,t,r,!0),r+2},n.prototype.writeUInt16BE=function(t,r,a){return t=+t,r|=0,a||B(this,t,r,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):k(this,t,r,!1),r+2},n.prototype.writeUInt32LE=function(t,r,a){return t=+t,r|=0,a||B(this,t,r,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):F(this,t,r,!0),r+4},n.prototype.writeUInt32BE=function(t,r,a){return t=+t,r|=0,a||B(this,t,r,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):F(this,t,r,!1),r+4},n.prototype.writeIntLE=function(t,r,a,o){if(t=+t,r|=0,!o){var n=y(2,8*a-1);B(this,t,r,a,n-1,-n)}var s=0,i=1,l=0;for(this[r]=255&t;++s<a&&(i*=256);)0>t&&0===l&&0!==this[r+s-1]&&(l=1),this[r+s]=255&(t/i>>0)-l;return r+a},n.prototype.writeIntBE=function(t,r,a,o){if(t=+t,r|=0,!o){var n=y(2,8*a-1);B(this,t,r,a,n-1,-n)}var s=a-1,i=1,l=0;for(this[r+s]=255&t;0<=--s&&(i*=256);)0>t&&0===l&&0!==this[r+s+1]&&(l=1),this[r+s]=255&(t/i>>0)-l;return r+a},n.prototype.writeInt8=function(t,r,a){return t=+t,r|=0,a||B(this,t,r,1,127,-128),n.TYPED_ARRAY_SUPPORT||(t=h(t)),0>t&&(t=255+t+1),this[r]=255&t,r+1},n.prototype.writeInt16LE=function(t,r,a){return t=+t,r|=0,a||B(this,t,r,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):k(this,t,r,!0),r+2},n.prototype.writeInt16BE=function(t,r,a){return t=+t,r|=0,a||B(this,t,r,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):k(this,t,r,!1),r+2},n.prototype.writeInt32LE=function(t,r,a){return t=+t,r|=0,a||B(this,t,r,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):F(this,t,r,!0),r+4},n.prototype.writeInt32BE=function(t,r,a){return t=+t,r|=0,a||B(this,t,r,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),n.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):F(this,t,r,!1),r+4},n.prototype.writeFloatLE=function(t,r,a){return V(this,t,r,!0,a)},n.prototype.writeFloatBE=function(t,r,a){return V(this,t,r,!1,a)},n.prototype.writeDoubleLE=function(t,r,a){return H(this,t,r,!0,a)},n.prototype.writeDoubleBE=function(t,r,a){return H(this,t,r,!1,a)},n.prototype.copy=function(t,r,a,o){if(a||(a=0),o||0===o||(o=this.length),r>=t.length&&(r=t.length),r||(r=0),0<o&&o<a&&(o=a),o===a)return 0;if(0===t.length||0===this.length)return 0;if(0>r)throw new RangeError("targetStart out of bounds");if(0>a||a>=this.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-r<o-a&&(o=t.length-r+a);var s=o-a,l;if(this===t&&a<r&&r<o)for(l=s-1;0<=l;--l)t[l+r]=this[l+a];else if(1e3>s||!n.TYPED_ARRAY_SUPPORT)for(l=0;l<s;++l)t[l+r]=this[l+a];else Uint8Array.prototype.set.call(t,this.subarray(a,a+s),r);return s},n.prototype.fill=function(t,r,a,o){if("string"===typeof t){if("string"===typeof r?(o=r,r=0,a=this.length):"string"===typeof a&&(o=a,a=this.length),1===t.length){var s=t.charCodeAt(0);256>s&&(t=s)}if(void 0!==o&&"string"!==typeof o)throw new TypeError("encoding must be a string");if("string"===typeof o&&!n.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"===typeof t&&(t&=255);if(0>r||this.length<r||this.length<a)throw new RangeError("Out of range index");if(a<=r)return this;r>>>=0,a=a===void 0?this.length:a>>>0,t||(t=0);var l;if("number"===typeof t)for(l=r;l<a;++l)this[l]=t;else{var i=n.isBuffer(t)?t:X(new n(t,o).toString()),d=i.length;for(l=0;l<a-r;++l)this[l+r]=i[l%d]}return this};var ie=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{"base64-js":4,ieee754:18,isarray:9}],9:[function(t,r){var a={}.toString;r.exports=Array.isArray||function(t){return"[object Array]"==a.call(t)}},{}],10:[function(t,r,a){function i(){var t;try{t=a.storage.debug}catch(t){}return t}a=r.exports=t("./debug"),a.log=function(){return"object"===("undefined"===typeof console?"undefined":babelHelpers.typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(){var t=arguments,r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" "),!r)return t;var a="color: "+this.color;t=[t[0],a,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"===t||(i++,"%c"===t&&(o=i))}),t.splice(o,0,a),t},a.save=function(t){try{null==t?a.storage.removeItem("debug"):a.storage.debug=t}catch(t){}},a.load=i,a.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},a.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],a.formatters.j=function(t){return JSON.stringify(t)},a.enable(i())},{"./debug":11}],11:[function(t,r,a){function i(){return a.colors[o++%a.colors.length]}a=r.exports=function(t){function r(){}function o(){var t=o;null==t.useColors&&(t.useColors=a.useColors()),null==t.color&&t.useColors&&(t.color=i());var r=Array.prototype.slice.call(arguments);r[0]=a.coerce(r[0]),"string"!==typeof r[0]&&(r=["%o"].concat(r));var n=0;r[0]=r[0].replace(/%([a-z%])/g,function(i,o){if("%%"===i)return i;n++;var s=a.formatters[o];if("function"===typeof s){var l=r[n];i=s.call(t,l),r.splice(n,1),n--}return i}),"function"===typeof a.formatArgs&&(r=a.formatArgs.apply(t,r));var s=o.log||a.log||console.log.bind(console);s.apply(t,r)}r.enabled=!1,o.enabled=!0;var n=a.enabled(t)?o:r;return n.namespace=t,n},a.coerce=function(t){return t instanceof Error?t.stack||t.message:t},a.disable=function(){a.enable("")},a.enable=function(t){a.save(t);for(var r=(t||"").split(/[\s,]+/),o=r.length,n=0;n<o;n++)r[n]&&(t=r[n].replace(/\*/g,".*?"),"-"===t[0]?a.skips.push(new RegExp("^"+t.substr(1)+"$")):a.names.push(new RegExp("^"+t+"$")))},a.enabled=function(t){var r,i;for(r=0,i=a.skips.length;r<i;r++)if(a.skips[r].test(t))return!1;for(r=0,i=a.names.length;r<i;r++)if(a.names[r].test(t))return!0;return!1},a.names=[],a.skips=[],a.formatters={};var o=0},{}],12:[function(t,r){"use strict";function a(t){if(null===t||t===void 0)throw new TypeError("Sources cannot be null or undefined");return Object(t)}function o(t,r,a){var o=r[a];if(void 0!==o&&null!==o){if(s.call(t,a)&&(void 0===t[a]||null===t[a]))throw new TypeError("Cannot convert undefined or null to object ("+a+")");t[a]=s.call(t,a)&&n(o)?i(Object(t[a]),r[a]):o}}function i(t,r){if(t===r)return t;for(var a in r=Object(r),r)s.call(r,a)&&o(t,r,a);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(r),d=0;d<n.length;d++)l.call(r,n[d])&&o(t,r,n[d]);return t}var n=t("is-obj"),s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;r.exports=function(t){t=a(t);for(var r=1;r<arguments.length;r++)i(t,arguments[r]);return t}},{"is-obj":22}],13:[function(){(function(ee,te,n,t){"use strict";function re(a,i){for(var t=0,o=a.length;t<o;t++)ue(a[t],i)}function r(a){for(var o=0,t=a.length,n;o<t;o++)n=a[o],fe(n,b[i(n)])}function ae(r){return function(a){j(a)&&(ue(a,r),re(a.querySelectorAll(w),r))}}function i(a){var i=F.call(a,"is"),t=a.nodeName.toUpperCase(),o=E.call(y,i?v+i.toUpperCase():d+t);return i&&-1<o&&!ie(t,i)?-1:o}function ie(r,a){return-1<w.indexOf(r+"[is=\""+a+"\"]")}function oe(o){var s=o.currentTarget,t=o.attrChange,n=o.attrName,r=o.target;G&&(!r||r===s)&&s.attributeChangedCallback&&"style"!==n&&o.prevValue!==o.newValue&&s.attributeChangedCallback(n,t===o[a]?null:o.prevValue,t===o[l]?null:o.newValue)}function ne(r){var a=ae(r);return function(t){Y.push(a,t.target)}}function se(t){Q&&(Q=!1,t.currentTarget.removeEventListener(he,se)),re((t.target||te).querySelectorAll(w),t.detail===o?o:ge),B&&pe()}function le(r,a){var t=this;R.call(t,r,a),K.call(t,{target:t})}function de(r,a){D(r,a),$?$.observe(r,H):(q&&(r.setAttribute=le,r[me]=J(r),r.addEventListener(p,K)),r.addEventListener(c,oe)),r.createdCallback&&G&&(r.created=!0,r.createdCallback(),r.created=!1)}function pe(){for(var r=0,t=k.length,a;r<t;r++)a=k[r],h.contains(a)||(t--,k.splice(r--,1),ue(a,o))}function ce(t){throw new Error("A "+t+" type is already registered")}function ue(a,s){var t=i(a),r;-1<t&&(ye(a,b[t]),t=0,s!==ge||a[ge]?s===o&&!a[o]&&(a[ge]=!1,a[o]=!0,t=1):(a[o]=!1,a[ge]=!0,t=1,B&&0>E.call(k,a)&&k.push(a)),t&&(r=a[s+"Callback"])&&r.call(a))}if(!(t in te)){var me="__"+t+(1e5*Math.random()>>0),ge="attached",o="detached",u="extends",a="ADDITION",s="MODIFICATION",l="REMOVAL",c="DOMAttrModified",he="DOMContentLoaded",p="DOMSubtreeModified",d="<",v="=",m=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,g=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],y=[],b=[],w="",h=te.documentElement,E=y.indexOf||function(r){for(var a=this.length;a--&&this[a]!==r;);return a},x=n.prototype,T=x.hasOwnProperty,f=x.isPrototypeOf,N=n.defineProperty,C=n.getOwnPropertyDescriptor,L=n.getOwnPropertyNames,A=n.getPrototypeOf,S=n.setPrototypeOf,M=!!n.__proto__,_=n.create||function t(r){return r?(t.prototype=r,new t):this},D=S||(M?function(r,a){return r.__proto__=a,r}:L&&C?function(){function r(a,o){for(var t=L(o),r=0,i=t.length,s;r<i;r++)s=t[r],T.call(a,s)||N(a,s,C(o,s))}return function(a,t){do r(a,t);while((t=A(t))&&!f.call(t,a));return a}}():function(r,a){for(var t in a)r[t]=a[t];return r}),O=ee.MutationObserver||ee.WebKitMutationObserver,P=(ee.HTMLElement||ee.Element||ee.Node).prototype,B=!f.call(P,h),j=B?function(t){return 1===t.nodeType}:function(t){return f.call(P,t)},k=B&&[],I=P.cloneNode,F=P.getAttribute,R=P.setAttribute,U=P.removeAttribute,z=te.createElement,H=O&&{attributes:!0,characterData:!0,attributeOldValue:!0},W=O||function(){q=!1,h.removeEventListener(c,W)},V=ee.requestAnimationFrame||ee.webkitRequestAnimationFrame||ee.mozRequestAnimationFrame||ee.msRequestAnimationFrame||function(t){setTimeout(t,10)},X=!1,q=!0,Q=!0,G=!0,Y,K,Z,J,$,ye,fe;S||M?(ye=function(r,a){f.call(a,r)||de(r,a)},fe=de):(ye=function(r,a){r[me]||(r[me]=n(!0),de(r,a))},fe=ye),B?(q=!1,function(){var d=C(P,"addEventListener"),p=d.value,n=function(r){var a=new CustomEvent(c,{bubbles:!0});a.attrName=r,a.prevValue=F.call(this,r),a.newValue=null,a[l]=a.attrChange=2,U.call(this,r),this.dispatchEvent(a)},r=function(o,t){var n=this.hasAttribute(o),r=n&&F.call(this,o);e=new CustomEvent(c,{bubbles:!0}),R.call(this,o,t),e.attrName=o,e.prevValue=n?r:null,e.newValue=t,n?e[s]=e.attrChange=1:e[a]=e.attrChange=0,this.dispatchEvent(e)},i=function(o){var l=o.currentTarget,t=l[me],n=o.propertyName,r;t.hasOwnProperty(n)&&(t=t[n],r=new CustomEvent(c,{bubbles:!0}),r.attrName=t.name,r.prevValue=t.value||null,r.newValue=t.value=l[n]||null,null==r.prevValue?r[a]=r.attrChange=0:r[s]=r.attrChange=1,l.dispatchEvent(r))};d.value=function(a,o,t){a===c&&this.attributeChangedCallback&&this.setAttribute!==r&&(this[me]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,p.call(this,"propertychange",i)),p.call(this,a,o,t)},N(P,"addEventListener",d)}()):O||(h.addEventListener(c,W),h.setAttribute(me,1),h.removeAttribute(me),q&&(K=function(o){var d=this,t,n,r;if(d===o.target){for(r in t=d[me],d[me]=n=J(d),n){if(!(r in t))return Z(0,d,r,t[r],n[r],a);if(n[r]!==t[r])return Z(1,d,r,t[r],n[r],s)}for(r in t)if(!(r in n))return Z(2,d,r,t[r],n[r],l)}},Z=function(a,l,d,p,c,u){var s={attrChange:a,currentTarget:l,attrName:d,prevValue:p,newValue:c};s[u]=a,oe(s)},J=function(a){for(var l={},r=a.attributes,i=0,s=r.length,o,t;i<s;i++)o=r[i],t=o.name,"setAttribute"!==t&&(l[t]=o.value);return l})),te[t]=function(a,t){if(l=a.toUpperCase(),X||(X=!0,O?($=function(l,d){function t(a,i){for(var t=0,o=a.length;t<o;i(a[t++]));}return new O(function(n){for(var r=0,p=n.length,a,i,s;r<p;r++)a=n[r],"childList"===a.type?(t(a.addedNodes,l),t(a.removedNodes,d)):(i=a.target,G&&i.attributeChangedCallback&&"style"!==a.attributeName&&(s=F.call(i,a.attributeName),s!==a.oldValue&&i.attributeChangedCallback(a.attributeName,a.oldValue,s)))})}(ae(ge),ae(o)),$.observe(te,{childList:!0,subtree:!0})):(Y=[],V(function t(){for(;Y.length;)Y.shift().call(null,Y.shift());V(t)}),te.addEventListener("DOMNodeInserted",ne(ge)),te.addEventListener("DOMNodeRemoved",ne(o))),te.addEventListener(he,se),te.addEventListener("readystatechange",se),te.createElement=function(a,n){var t=z.apply(te,arguments),r=""+a,i=E.call(y,(n?v:d)+(n||r).toUpperCase()),s=-1<i;return n&&(t.setAttribute("is",n=n.toLowerCase()),s&&(s=ie(r.toUpperCase(),n))),G=!te.createElement.innerHTMLHelper,s&&fe(t,b[i]),t},P.cloneNode=function(a){var o=I.call(this,!!a),t=i(o);return-1<t&&fe(o,b[t]),a&&r(o.querySelectorAll(w)),o}),-2<E.call(y,v+l)+E.call(y,d+l)&&ce(a),!m.test(l)||-1<E.call(g,l))throw new Error("The type "+a+" is invalid");var n=function(){return s?te.createElement(f,l):te.createElement(f)},p=t||x,s=T.call(p,u),f=s?t[u].toUpperCase():l,l,c;return s&&-1<E.call(y,d+f)&&ce(f),c=y.push((s?v:d)+l)-1,w=w.concat(w.length?",":"",s?f+"[is=\""+a.toLowerCase()+"\"]":f),n.prototype=b[c]=T.call(p,"prototype")?p.prototype:_(P),re(te.querySelectorAll(w),ge),n}}})(window,document,Object,"registerElement")},{}],14:[function(t,r){r.exports=function(t){return"int8"===t?Int8Array:"int16"===t?Int16Array:"int32"===t?Int32Array:"uint8"===t?Uint8Array:"uint16"===t?Uint16Array:"uint32"===t?Uint32Array:"float32"===t?Float32Array:"float64"===t?Float64Array:"array"===t?Array:"uint8_clamped"===t?Uint8ClampedArray:void 0}},{}],15:[function(t,r){var a=t("dtype");r.exports=function(t,r,o){if(!t)throw new TypeError("must specify data as first parameter");if(o=0|+(o||0),Array.isArray(t)&&Array.isArray(t[0])){var n=t[0].length,s=t.length*n;r&&"string"!==typeof r||(r=new(a(r||"float32"))(s+o));var l=r.length-o;if(s!==l)throw new Error("source length "+s+" ("+n+"x"+t.length+") does not match destination length "+l);for(var d=0,i=o;d<t.length;d++)for(var p=0;p<n;p++)r[i++]=t[d][p]}else if(!r||"string"===typeof r){var c=a(r||"float32");0===o?r=new c(t):(r=new c(t.length+o),r.set(t,o))}else r.set(t,o);return r}},{dtype:14}],16:[function(t,r){function a(t,r,a){for(var o=0,i=t.length;o<i;o++)l.call(t,o)&&r.call(a,t[o],o,t)}function i(t,r,a){for(var o=0,i=t.length;o<i;o++)r.call(a,t.charAt(o),o,t)}function o(t,r,a){for(var i in t)l.call(t,i)&&r.call(a,t[i],i,t)}var n=t("is-function");r.exports=function(t,r,l){if(!n(r))throw new TypeError("iterator must be a function");3>arguments.length&&(l=this),"[object Array]"===s.call(t)?a(t,r,l):"string"===typeof t?i(t,r,l):o(t,r,l)};var s=Object.prototype.toString,l=Object.prototype.hasOwnProperty},{"is-function":21}],17:[function(t,r){(function(t){var a;a="undefined"===typeof window?"undefined"===typeof t?"undefined"===typeof self?{}:self:t:window,r.exports=a}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{}],18:[function(t,r,a){a.read=function(t,r,a,o,n){var l=8*n-o-1,p=(1<<l)-1,c=p>>1,u=-7,g=a?n-1:0,i=a?-1:1,d=t[r+g],s,h;for(g+=i,s=d&(1<<-u)-1,d>>=-u,u+=l;0<u;s=256*s+t[r+g],g+=i,u-=8);for(h=s&(1<<-u)-1,s>>=-u,u+=o;0<u;h=256*h+t[r+g],g+=i,u-=8);if(0===s)s=1-c;else{if(s===p)return h?NaN:(d?-1:1)*Infinity;h+=y(2,o),s-=c}return(d?-1:1)*h*y(2,s-o)},a.write=function(t,r,a,o,n,l){var f=8*l-n-1,M=(1<<f)-1,x=M>>1,E=23===n?5.960464477539063e-8-6.617444900424222e-24:0,v=o?0:l-1,i=o?1:-1,d=0>r||0===r&&0>1/r?1:0,s,A,m;for(r=g(r),isNaN(r)||r===Infinity?(A=isNaN(r)?1:0,s=M):(s=h(u(r)/p),1>r*(m=y(2,-s))&&(s--,m*=2),r+=1<=s+x?E/m:E*y(2,1-x),2<=r*m&&(s++,m/=2),s+x>=M?(A=0,s=M):1<=s+x?(A=(r*m-1)*y(2,n),s+=x):(A=r*y(2,x-1)*y(2,n),s=0));8<=n;t[a+v]=255&A,v+=i,A/=256,n-=8);for(s=s<<n|A,f+=n;0<f;t[a+v]=255&s,v+=i,s/=256,f-=8);t[a+v-i]|=128*d}},{}],19:[function(t,r){r.exports="function"===typeof Object.create?function(t,r){t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,r){t.super_=r;var a=function(){};a.prototype=r.prototype,t.prototype=new a,t.prototype.constructor=t}},{}],20:[function(t,r){function a(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function i(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&a(t.slice(0,0))}r.exports=function(t){return null!=t&&(a(t)||i(t)||!!t._isBuffer)}},{}],21:[function(t,r){r.exports=function(t){var r=a.call(t);return"[object Function]"===r||"function"===typeof t&&"[object RegExp]"!==r||"undefined"!==typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var a=Object.prototype.toString},{}],22:[function(t,r){"use strict";r.exports=function(t){var r="undefined"===typeof t?"undefined":babelHelpers.typeof(t);return null!==t&&("object"===r||"function"===r)}},{}],23:[function(t,r){function a(t){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(t)}function i(t){return new Function(["return function "+t+"() {","  return this._"+t,"}"].join("\n"))()}function o(t,r){if(!t.chars||0===t.chars.length)return null;var a=u(t.chars,r);return 0<=a?t.chars[a]:null}function n(t){for(var r=0;r<y.length;r++){var a=y[r].charCodeAt(0),i=u(t.chars,a);if(0<=i)return t.chars[i].height}return 0}function s(t){for(var r=0;r<M.length;r++){var a=M[r].charCodeAt(0),i=u(t.chars,a);if(0<=i)return t.chars[i]}return 0}function d(t){for(var r=0;r<x.length;r++){var a=x[r].charCodeAt(0),i=u(t.chars,a);if(0<=i)return t.chars[i].height}return 0}function p(t,r,a){if(!t.kernings||0===t.kernings.length)return 0;for(var o=t.kernings,n=0,i;n<o.length;n++)if(i=o[n],i.first===r&&i.second===a)return i.amount;return 0}function c(t){if("center"===t)return T;return"right"===t?b:A}function u(t,r,a){a=a||0;for(var o=a;o<t.length;o++)if(t[o].id===r)return o;return-1}var g=t("word-wrapper"),h=t("xtend"),f=t("as-number"),y=["x","e","a","o","n","s","r","c","u","m","v","w","z"],M=["m","w"],x=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],E=9,v=32,A=0,T=1,b=2;r.exports=function(t){return new a(t)},a.prototype.update=function(t){if(t=h({measure:this._measure},t),this._opt=t,this._opt.tabSize=f(this._opt.tabSize,4),!t.font)throw new Error("must provide a valid bitmap font");var r=this.glyphs,a=t.text||"",o=t.font;this._setupSpaceGlyphs(o);var i=g.lines(a,t),s=t.width||0;r.length=0;var u=i.reduce(function(t,r){return l(t,r.width,s)},0),m=0,M=0,y=f(t.lineHeight,o.common.lineHeight),x=o.common.base,E=y-x,v=t.letterSpacing||0,A=y*i.length-E,L=c(this._opt.align);M-=A,this._width=u,this._height=A,this._descender=y-x,this._baseline=x,this._xHeight=n(o),this._capHeight=d(o),this._lineHeight=y,this._ascender=y-E-this._xHeight;var N=this;i.forEach(function(t,n){for(var s=t.start,l=t.end,d=t.width,c=s,g;c<l;c++){var h=a.charCodeAt(c),f=N.getGlyph(o,h);if(f){g&&(m+=p(o,g.id,f.id));var x=m;L===T?x+=(u-d)/2:L===b&&(x+=u-d),r.push({position:[x,M],data:f,index:c,line:n}),m+=f.xadvance+v,g=f}}M+=y,m=0}),this._linesTotal=i.length},a.prototype._setupSpaceGlyphs=function(t){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,t.chars&&0!==t.chars.length){var r=o(t,v)||s(t)||t.chars[0],a=this._opt.tabSize*r.xadvance;this._fallbackSpaceGlyph=r,this._fallbackTabGlyph=h(r,{x:0,y:0,xadvance:a,id:E,xoffset:0,yoffset:0,width:0,height:0})}},a.prototype.getGlyph=function(t,r){var a=o(t,r);if(a)return a;return r===E?this._fallbackTabGlyph:r===v?this._fallbackSpaceGlyph:null},a.prototype.computeMetrics=function(t,r,a,o){var n=this._opt.letterSpacing||0,s=this._opt.font,l=0,d=0,c=0,u,g;if(!s.chars||0===s.chars.length)return{start:r,end:r,width:0};a=m(t.length,a);for(var h=r;h<a;h++){var i=t.charCodeAt(h),u=this.getGlyph(s,i);if(u){var y=u.xoffset,f=g?p(s,g.id,u.id):0;l+=f;var M=l+u.xadvance+n,x=l+u.width;if(x>=o||M>=o)break;l=M,d=x,g=u}c++}return g&&(d+=g.xoffset),{start:r,end:r+c,width:d}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(function(t){Object.defineProperty(a.prototype,t,{get:i(t),configurable:!0})})},{"as-number":3,"word-wrapper":72,xtend:75}],24:[function(t,r){(function(a){function i(t){var r=Object.prototype.toString;return"[object ArrayBuffer]"===r.call(t)}function o(t){if(m)return u(t,{responseType:"arraybuffer"});if("undefined"===typeof self.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var r=new self.XMLHttpRequest;return r.overrideMimeType("text/plain; charset=x-user-defined"),u({xhr:r},t)}var n=t("xhr"),s=function(){},l=t("parse-bmfont-ascii"),d=t("parse-bmfont-xml"),p=t("parse-bmfont-binary"),c=t("./lib/is-binary"),u=t("xtend"),m=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();r.exports=function(t,r){r="function"===typeof r?r:s,"string"===typeof t?t={uri:t}:!t&&(t={});var u=t.binary;u&&(t=o(t)),n(t,function(o,n,u){if(o)return r(o);if(!/^2/.test(n.statusCode))return r(new Error("http status code: "+n.statusCode));if(!u)return r(new Error("no body result"));var m=!1;if(i(u)){var g=new Uint8Array(u);u=new a(g,"binary")}c(u)&&(m=!0,"string"===typeof u&&(u=new a(u,"binary"))),m||(a.isBuffer(u)&&(u=u.toString(t.encoding)),u=u.trim());var h;try{var y=n.headers["content-type"];h=m?p(u):/json/.test(y)||"{"===u.charAt(0)?JSON.parse(u):/xml/.test(y)||"<"===u.charAt(0)?d(u):l(u)}catch(t){r(new Error("error parsing font "+t.message)),r=s}r(null,h)})}}).call(this,t("buffer").Buffer)},{"./lib/is-binary":25,buffer:8,"parse-bmfont-ascii":27,"parse-bmfont-binary":28,"parse-bmfont-xml":29,xhr:73,xtend:75}],25:[function(t,r){(function(a){var i=t("buffer-equal"),o=new a([66,77,70,3]);r.exports=function(t){return"string"===typeof t?"BMF"===t.substring(0,3):4<t.length&&i(t.slice(0,4),o)}}).call(this,t("buffer").Buffer)},{buffer:8,"buffer-equal":7}],26:[function(t,r){"use strict";function a(t){if(null===t||t===void 0)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;r.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var r={},a=0;10>a;a++)r["_"+d(a)]=a;var i=Object.getOwnPropertyNames(r).map(function(t){return r[t]});if("0123456789"!==i.join(""))return!1;var o={};return["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t"].forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}()?Object.assign:function(t){for(var r=a(t),l=1,s,d;l<arguments.length;l++){for(var p in s=Object(arguments[l]),s)i.call(s,p)&&(r[p]=s[p]);if(o){d=o(s);for(var c=0;c<d.length;c++)n.call(s,d[c])&&(r[d[c]]=s[d[c]])}}return r}},{}],27:[function(t,r){function a(t,r){if(t=t.replace(/\t+/g," ").trim(),!t)return null;var a=t.indexOf(" ");if(-1===a)throw new Error("no named row at line "+r);var n=t.substring(0,a);t=t.substring(a+1),t=t.replace(/letter=[\'\"]\S+[\'\"]/gi,""),t=t.split("="),t=t.map(function(t){return t.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var s=[],l=0,i;l<t.length;l++)i=t[l],0===l?s.push({key:i[0],data:""}):l===t.length-1?s[s.length-1].data=o(i[0]):(s[s.length-1].data=o(i[0]),s.push({key:i[1],data:""}));var d={key:n,data:{}};return s.forEach(function(t){d.data[t.key]=t.data}),d}function o(t){return t&&0!==t.length?0===t.indexOf("\"")||0===t.indexOf("'")?t.substring(1,t.length-1):-1===t.indexOf(",")?parseInt(t,10):i(t):""}function i(t){return t.split(",").map(function(t){return parseInt(t,10)})}r.exports=function(t){if(!t)throw new Error("no data provided");t=t.toString().trim();var r={pages:[],chars:[],kernings:[]},o=t.split(/\r\n?|\n/g);if(0===o.length)throw new Error("no data in BMFont file");for(var n=0,i;n<o.length;n++)if(i=a(o[n],n),i)if("page"===i.key){if("number"!==typeof i.data.id)throw new Error("malformed file at line "+n+" -- needs page id=N");if("string"!==typeof i.data.file)throw new Error("malformed file at line "+n+" -- needs page file=\"path\"");r.pages[i.data.id]=i.data.file}else if("chars"===i.key||"kernings"===i.key);else"char"===i.key?r.chars.push(i.data):"kerning"===i.key?r.kernings.push(i.data):r[i.key]=i.data;return r}},{}],28:[function(t,r){function a(t,r,a){if(a>r.length-1)return 0;var i=r.readUInt8(a++),p=r.readInt32LE(a);return a+=4,1===i?t.info=o(r,a):2===i?t.common=n(r,a):3===i?t.pages=s(r,a,p):4===i?t.chars=l(r,a,p):5===i?t.kernings=d(r,a,p):void 0,5+p}function o(t,r){var a={size:t.readInt16LE(r)},i=t.readUInt8(r+2);return a.smooth=1&i>>7,a.unicode=1&i>>6,a.italic=1&i>>5,a.bold=1&i>>4,1&i>>3&&(a.fixedHeight=1),a.charset=t.readUInt8(r+3)||"",a.stretchH=t.readUInt16LE(r+4),a.aa=t.readUInt8(r+6),a.padding=[t.readInt8(r+7),t.readInt8(r+8),t.readInt8(r+9),t.readInt8(r+10)],a.spacing=[t.readInt8(r+11),t.readInt8(r+12)],a.outline=t.readUInt8(r+13),a.face=c(t,r+14),a}function n(t,r){var a={lineHeight:t.readUInt16LE(r),base:t.readUInt16LE(r+2),scaleW:t.readUInt16LE(r+4),scaleH:t.readUInt16LE(r+6),pages:t.readUInt16LE(r+8)},i=t.readUInt8(r+10);return a.packed=0,a.alphaChnl=t.readUInt8(r+11),a.redChnl=t.readUInt8(r+12),a.greenChnl=t.readUInt8(r+13),a.blueChnl=t.readUInt8(r+14),a}function s(t,r,a){for(var i=[],o=p(t,r),n=o.length+1,s=0;s<a/n;s++)i[s]=t.slice(r,r+o.length).toString("utf8"),r+=n;return i}function l(t,r,a){for(var i=[],o=0;o<a/20;o++){var n={},s=20*o;n.id=t.readUInt32LE(r+0+s),n.x=t.readUInt16LE(r+4+s),n.y=t.readUInt16LE(r+6+s),n.width=t.readUInt16LE(r+8+s),n.height=t.readUInt16LE(r+10+s),n.xoffset=t.readInt16LE(r+12+s),n.yoffset=t.readInt16LE(r+14+s),n.xadvance=t.readInt16LE(r+16+s),n.page=t.readUInt8(r+18+s),n.chnl=t.readUInt8(r+19+s),i[o]=n}return i}function d(t,r,a){for(var i=[],o=0;o<a/10;o++){var n={},s=10*o;n.first=t.readUInt32LE(r+0+s),n.second=t.readUInt32LE(r+4+s),n.amount=t.readInt16LE(r+8+s),i[o]=n}return i}function p(t,r){for(var a=r;a<t.length&&!(0===t[a]);a++);return t.slice(r,a)}function c(t,r){return p(t,r).toString("utf8")}var u=[66,77,70];r.exports=function(t){if(6>t.length)throw new Error("invalid buffer length for BMFont");var r=u.every(function(r,a){return t.readUInt8(a)===r});if(!r)throw new Error("BMFont missing BMF byte header");var o=3,i=t.readUInt8(o++);if(3<i)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var n={kernings:[],chars:[]},s=0;5>s;s++)o+=a(n,t,o);return n}},{}],29:[function(t,r){function a(t){var r=i(t);return r.reduce(function(t,r){var a=o(r.nodeName);return t[a]=r.nodeValue,t},{})}function i(t){for(var r=[],a=0;a<t.attributes.length;a++)r.push(t.attributes[a]);return r}function o(t){return l[t.toLowerCase()]||t}var n=t("./parse-attribs"),s=t("xml-parse-from-string"),l={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};r.exports=function(t){t=t.toString();var r=s(t),o={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(t){var i=r.getElementsByTagName(t)[0];i&&(o[t]=n(a(i)))});var l=r.getElementsByTagName("pages")[0];if(!l)throw new Error("malformed file -- no <pages> element");for(var d=l.getElementsByTagName("page"),c=0;c<d.length;c++){var i=d[c],p=parseInt(i.getAttribute("id"),10),u=i.getAttribute("file");if(isNaN(p))throw new Error("malformed file -- page \"id\" attribute is NaN");if(!u)throw new Error("malformed file -- needs page \"file\" attribute");o.pages[parseInt(p,10)]=u}return["chars","kernings"].forEach(function(t){var s=r.getElementsByTagName(t)[0];if(s)for(var l=t.substring(0,t.length-1),d=s.getElementsByTagName(l),p=0,i;p<d.length;p++)i=d[p],o[t].push(n(a(i)))}),o}},{"./parse-attribs":30,"xml-parse-from-string":74}],30:[function(t,r){function a(t){return t.split(",").map(function(t){return parseInt(t,10)})}var i="chasrset";r.exports=function(t){for(var r in i in t&&(t.charset=t[i],delete t[i]),t)if("face"===r||"charset"===r)continue;else t[r]="padding"===r||"spacing"===r?a(t[r]):parseInt(t[r],10);return t}},{}],31:[function(t,r){var a=t("trim"),i=t("for-each"),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};r.exports=function(t){if(!t)return{};var r={};return i(a(t).split("\n"),function(t){var i=t.indexOf(":"),n=a(t.slice(0,i)).toLowerCase(),s=a(t.slice(i+1));"undefined"===typeof r[n]?r[n]=s:o(r[n])?r[n].push(s):r[n]=[r[n],s]}),r}},{"for-each":16,trim:46}],32:[function(t,r,a){(function(t){function r(t,r){for(var a=0,o=t.length-1,i;0<=o;o--)i=t[o],"."===i?t.splice(o,1):".."===i?(t.splice(o,1),a++):a&&(t.splice(o,1),a--);if(r)for(;a--;a)t.unshift("..");return t}function o(t,r){if(t.filter)return t.filter(r);for(var a=[],o=0;o<t.length;o++)r(t[o],o,t)&&a.push(t[o]);return a}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(t){return i.exec(t).slice(1)};a.resolve=function(){for(var a="",n=!1,s=arguments.length-1,i;-1<=s&&!n;s--){if(i=0<=s?arguments[s]:t.cwd(),"string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");else if(!i)continue;a=i+"/"+a,n="/"===i.charAt(0)}return a=r(o(a.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+a||"."},a.normalize=function(t){var i=a.isAbsolute(t),n="/"===s(t,-1);return t=r(o(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&n&&(t+="/"),(i?"/":"")+t},a.isAbsolute=function(t){return"/"===t.charAt(0)},a.join=function(){var t=Array.prototype.slice.call(arguments,0);return a.normalize(o(t,function(t){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},a.relative=function(t,r){function o(t){for(var r=0;r<t.length&&""===t[r];r++);for(var a=t.length-1;0<=a&&""===t[a];a--);return r>a?[]:t.slice(r,a-r+1)}t=a.resolve(t).substr(1),r=a.resolve(r).substr(1);for(var n=o(t.split("/")),s=o(r.split("/")),l=m(n.length,s.length),d=l,p=0;p<l;p++)if(n[p]!==s[p]){d=p;break}for(var i=[],p=d;p<n.length;p++)i.push("..");return i=i.concat(s.slice(d)),i.join("/")},a.sep="/",a.delimiter=":",a.dirname=function(t){var r=n(t),a=r[0],i=r[1];return a||i?(i&&(i=i.substr(0,i.length-1)),a+i):"."},a.basename=function(t,r){var a=n(t)[2];return r&&a.substr(-1*r.length)===r&&(a=a.substr(0,a.length-r.length)),a},a.extname=function(t){return n(t)[3]};var s=function(t,r,a){return t.substr(r,a)}}).call(this,t("_process"))},{_process:6}],33:[function(t,r){(function(t){var a=t.performance||{},i=function(){for(var t=["now","webkitNow","msNow","mozNow","oNow"];t.length;){var r=t.shift();if(r in a)return a[r].bind(a)}var i=Date.now||function(){return new Date().getTime()},o=(a.timing||{}).navigationStart||i();return function(){return i()-o}}();i.performanceNow=a.now,i.noConflict=function(){a.now=i.performanceNow},i.conflict=function(){a.now=i},i.conflict(),r.exports=i}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{}],34:[function(t,r){(function(t){function a(t,r){return function(){t.apply(r,arguments)}}function i(t){if("object"!==babelHelpers.typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],p(t,a(n,this),a(s,this))}function o(t){var r=this;return null===this._state?void this._deferreds.push(t):void u(function(){var a=r._state?t.onFulfilled:t.onRejected;if(null===a)return void(r._state?t.resolve:t.reject)(r._value);var i;try{i=a(r._value)}catch(r){return void t.reject(r)}t.resolve(i)})}function n(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===("undefined"===typeof t?"undefined":babelHelpers.typeof(t))||"function"===typeof t)){var r=t.then;if("function"===typeof r)return void p(a(r,t),a(n,this),a(s,this))}this._state=!0,this._value=t,l.call(this)}catch(t){s.call(this,t)}}function s(t){this._state=!1,this._value=t,l.call(this)}function l(){for(var t=0,r=this._deferreds.length;t<r;t++)o.call(this,this._deferreds[t]);this._deferreds=null}function d(t,r,a,i){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof r?r:null,this.resolve=a,this.reject=i}function p(t,r,a){var i=!1;try{t(function(t){i||(i=!0,r(t))},function(t){i||(i=!0,a(t))})}catch(t){if(i)return;i=!0,a(t)}}var c=setTimeout,u="function"===typeof setImmediate&&setImmediate||function(t){c(t,1)},m=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};i.prototype["catch"]=function(t){return this.then(null,t)},i.prototype.then=function(t,r){var a=this;return new i(function(i,n){o.call(a,new d(t,r,i,n))})},i.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&m(arguments[0])?arguments[0]:arguments);return new i(function(r,a){function o(s,i){try{if(i&&("object"===("undefined"===typeof i?"undefined":babelHelpers.typeof(i))||"function"===typeof i)){var l=i.then;if("function"===typeof l)return void l.call(i,function(t){o(s,t)},a)}t[s]=i,0===--n&&r(t)}catch(t){a(t)}}if(0===t.length)return r([]);for(var n=t.length,s=0;s<t.length;s++)o(s,t[s])})},i.resolve=function(t){return t&&"object"===("undefined"===typeof t?"undefined":babelHelpers.typeof(t))&&t.constructor===i?t:new i(function(r){r(t)})},i.reject=function(t){return new i(function(r,a){a(t)})},i.race=function(t){return new i(function(r,a){for(var o=0,i=t.length;o<i;o++)t[o].then(r,a)})},i._setImmediateFn=function(t){u=t},"undefined"!==typeof r&&r.exports?r.exports=i:!t.Promise&&(t.Promise=i)})(this)},{}],35:[function(t,r){var o=t("dtype"),n=t("an-array"),s=t("is-buffer"),l=[0,2,3],d=[2,1,3];r.exports=function(t,r){t&&(n(t)||s(t))||(r=t||{},t=null),r="number"===typeof r?{count:r}:r||{};for(var p="string"===typeof r.type?r.type:"uint16",u="number"===typeof r.count?r.count:1,m=r.start||0,g=!1===r.clockwise?d:l,h=g[0],a=g[1],y=g[2],c=6*u,f=t||new(o(p))(c),M=0,i=0,E;M<c;M+=6,i+=4)E=M+m,f[E+0]=i+0,f[E+1]=i+1,f[E+2]=i+2,f[E+3]=i+h,f[E+4]=i+a,f[E+5]=i+y;return f}},{"an-array":2,dtype:14,"is-buffer":20}],36:[function(t,r){function a(t,r){r=r||{};var a=r.preserveNumbers,n={};return o(t).map(function(t){return t.trim()}).filter(Boolean).forEach(function(t){var r=t.indexOf(":"),o=t.substr(0,r).trim(),s=t.substr(r+1).trim();a&&i(s)&&(s=+s),n[o]=s}),n}function i(t){return!isNaN(parseFloat(t))&&isFinite(t)}function o(t){for(var r=[],a=0,i=/url\([^\)]+$/,o="",n;a<t.length;){if(n=t.indexOf(";",a),-1===n&&(n=t.length),o+=t.substring(a,n),i.test(o)){o+=";",a=n+1;continue}r.push(o),o="",a=n+1}return r}function n(t){return Object.keys(t).map(function(r){return r+":"+t[r]}).join(";")}r.exports.parse=a,r.exports.stringify=n,r.exports.normalize=function(t,r){return n(a(t,r))}},{}],37:[function(t,r){function a(t){c.call(this),"string"===typeof t&&(t={text:t}),this._opt=l({},t),t&&this.update(t)}var i=t("layout-bmfont-text"),o=t("inherits"),n=t("quad-indices"),s=t("three-buffer-vertex-data"),l=t("object-assign"),d=t("./lib/vertices"),p=t("./lib/utils"),c=THREE.BufferGeometry;r.exports=function(t){return new a(t)},o(a,c),a.prototype.update=function(t){if("string"===typeof t&&(t={text:t}),t=l({},this._opt,t),!t.font)throw new TypeError("must specify a { font } in options");this.layout=i(t);var r=!1!==t.flipY,a=t.font,o=a.common.scaleW,p=a.common.scaleH,c=this.layout.glyphs.filter(function(t){var r=t.data;return 0<r.width*r.height});this.visibleGlyphs=c;var u=d.positions(c),m=d.uvs(c,o,p,r),g=n({clockwise:!0,type:"uint16",count:c.length});if(s.index(this,g,1,"uint16"),s.attr(this,"position",u,2),s.attr(this,"uv",m,2),!t.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(t.multipage){var h=d.pages(c);s.attr(this,"page",h,1)}},a.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var t=this.attributes.position.array,r=this.attributes.position.itemSize;return t&&r&&!(2>t.length)?void(p.computeSphere(t,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.")):(this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0))},a.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.boundingBox,r=this.attributes.position.array,a=this.attributes.position.itemSize;return r&&a&&!(2>r.length)?void p.computeBox(r,t):void t.makeEmpty()}},{"./lib/utils":38,"./lib/vertices":39,inherits:19,"layout-bmfont-text":23,"object-assign":26,"quad-indices":35,"three-buffer-vertex-data":40}],38:[function(t,r){function a(t){var r=t.length/o;n.min[0]=t[0],n.min[1]=t[1],n.max[0]=t[0],n.max[1]=t[1];for(var a=0;a<r;a++){var i=t[a*o+0],s=t[a*o+1];n.min[0]=m(i,n.min[0]),n.min[1]=m(s,n.min[1]),n.max[0]=l(i,n.max[0]),n.max[1]=l(s,n.max[1])}}var o=2,n={min:[0,0],max:[0,0]};r.exports.computeBox=function(t,r){a(t),r.min.set(n.min[0],n.min[1],0),r.max.set(n.max[0],n.max[1],0)},r.exports.computeSphere=function(t,r){a(t);var i=n.min[0],o=n.min[1],s=n.max[0],l=n.max[1],d=s-i,p=l-o,c=M(d*d+p*p);r.center.set(i+d/2,o+p/2,0),r.radius=c/2}},{}],39:[function(t,r){r.exports.pages=function(t){var r=new Float32Array(1*(4*t.length)),a=0;return t.forEach(function(t){var i=t.data.page||0;r[a++]=i,r[a++]=i,r[a++]=i,r[a++]=i}),r},r.exports.uvs=function(t,r,a,o){var n=new Float32Array(2*(4*t.length)),s=0;return t.forEach(function(t){var i=t.data,l=i.x+i.width,d=i.y+i.height,p=i.x/r,c=i.y/a,u=l/r,m=d/a;o&&(c=(a-i.y)/a,m=(a-d)/a),n[s++]=p,n[s++]=c,n[s++]=p,n[s++]=m,n[s++]=u,n[s++]=m,n[s++]=u,n[s++]=c}),n},r.exports.positions=function(t){var r=new Float32Array(2*(4*t.length)),a=0;return t.forEach(function(t){var i=t.data,o=t.position[0]+i.xoffset,n=t.position[1]+i.yoffset,s=i.width,l=i.height;r[a++]=o,r[a++]=n,r[a++]=o,r[a++]=n+l,r[a++]=o+s,r[a++]=n+l,r[a++]=o+s,r[a++]=n}),r}},{}],40:[function(t,r){function a(t,r,a,s){if(r=r||[],!t||i(t,r,a)){r=o(r,s);var l=t&&"function"!==typeof t.setArray;return(!t||l)&&(l&&!n&&(n=!0,console.warn("A WebGL buffer is being updated with a new size or itemSize, however this version of ThreeJS only supports fixed-size buffers.\nThe old buffer may still be kept in memory.\nTo avoid memory leaks, it is recommended that you dispose your geometries and create new ones, or update to ThreeJS r82 or newer.\nSee here for discussion:\nhttps://github.com/mrdoob/three.js/pull/9631")),t=new THREE.BufferAttribute(r,a)),t.itemSize=a,t.needsUpdate=!0,"function"===typeof t.setArray&&t.setArray(r),t}return o(r,t.array),t.needsUpdate=!0,null}function i(t,r,a){if(t.itemSize!==a)return!0;if(!t.array)return!0;var i=t.array.length;return Array.isArray(r)&&Array.isArray(r[0])?i!==r.length*a:i!==r.length}var o=t("flatten-vertex-data"),n=!1;r.exports.attr=function(t,r,i,o,n){if("number"!==typeof o&&(o=3),"string"!==typeof n&&(n="float32"),Array.isArray(i)&&Array.isArray(i[0])&&i[0].length!==o)throw new Error("Nested vertex array has unexpected size; expected "+o+" but found "+i[0].length);var s=t.getAttribute(r),l=a(s,i,o,n);l&&t.addAttribute(r,l)},r.exports.index=function(t,r,i,o){"number"!==typeof i&&(i=1),"string"!==typeof o&&(o="uint16");var n=!t.index&&"function"!==typeof t.setIndex,s=n?t.getAttribute("index"):t.index,l=a(s,r,i,o);l&&(n?t.addAttribute("index",l):t.index=l)}},{"flatten-vertex-data":15}],41:[function(d,c,f){(function(t,r){"object"===("undefined"===typeof f?"undefined":babelHelpers.typeof(f))&&"undefined"!==typeof c?r(f):"function"===typeof i&&i.amd?i(["exports"],r):r(t.THREE=t.THREE||{})})(this,function(i){"use strict";function d(){}function f(t,r){this.x=t||0,this.y=r||0}function c(t,r,a,i,o,n,s,l,d,p){Object.defineProperty(this,"id",{value:xs++}),this.uuid=Ms.generateUUID(),this.name="",this.image=t===void 0?c.DEFAULT_IMAGE:t,this.mipmaps=[],this.mapping=r===void 0?c.DEFAULT_MAPPING:r,this.wrapS=a===void 0?hn:a,this.wrapT=i===void 0?hn:i,this.magFilter=o===void 0?En:o,this.minFilter=n===void 0?An:n,this.anisotropy=d===void 0?1:d,this.format=s===void 0?Un:s,this.type=l===void 0?Tn:l,this.offset=new f(0,0),this.repeat=new f(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=p===void 0?ds:p,this.version=0,this.onUpdate=null}function v(t,r,a,i){this.x=t||0,this.y=r||0,this.z=a||0,this.w=i===void 0?1:i}function x(t,r,a){this.uuid=Ms.generateUUID(),this.width=t,this.height=r,this.scissor=new v(0,0,t,r),this.scissorTest=!1,this.viewport=new v(0,0,t,r),a=a||{},a.minFilter===void 0&&(a.minFilter=En),this.texture=new c(void 0,void 0,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.depthBuffer=!(a.depthBuffer!==void 0)||a.depthBuffer,this.stencilBuffer=!(a.stencilBuffer!==void 0)||a.stencilBuffer,this.depthTexture=a.depthTexture===void 0?null:a.depthTexture}function T(t,r,a){x.call(this,t,r,a),this.activeCubeFace=0,this.activeMipMapLevel=0}function b(t,r,a,i){this._x=t||0,this._y=r||0,this._z=a||0,this._w=i===void 0?1:i}function D(t,r,a){this.x=t||0,this.y=r||0,this.z=a||0}function N(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function w(t,r,a,i,o,n,s,l,d,p,u,m){c.call(this,null,n,s,l,d,p,i,o,u,m),this.image={data:t,width:r,height:a},this.magFilter=d===void 0?fn:d,this.minFilter=p===void 0?fn:p,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function C(t,r,a,i,o,n,s,l,d,p){t=t===void 0?[]:t,r=r===void 0?sn:r,c.call(this,t,r,a,i,o,n,s,l,d,p),this.flipY=!1}function S(){this.seq=[],this.map={}}function I(t,a,o){var s=t[0];if(0>=s||0<s)return t;var l=a*o,n=As[l];if(void 0===n&&(n=new Float32Array(l),As[l]=n),0!==a){s.toArray(n,0);for(var r=1,i=0;r!==a;++r)i+=o,t[r].toArray(n,i)}return n}function _(t,a){var o=Ts[a];o===void 0&&(o=new Int32Array(a),Ts[a]=o);for(var r=0;r!==a;++r)o[r]=t.allocTextureUnit();return o}function j(t,r){t.uniform1f(this.addr,r)}function O(t,r){t.uniform1i(this.addr,r)}function z(t,r){r.x===void 0?t.uniform2fv(this.addr,r):t.uniform2f(this.addr,r.x,r.y)}function R(t,r){r.x===void 0?r.r===void 0?t.uniform3fv(this.addr,r):t.uniform3f(this.addr,r.r,r.g,r.b):t.uniform3f(this.addr,r.x,r.y,r.z)}function U(t,r){r.x===void 0?t.uniform4fv(this.addr,r):t.uniform4f(this.addr,r.x,r.y,r.z,r.w)}function P(t,r){t.uniformMatrix2fv(this.addr,!1,r.elements||r)}function B(t,r){r.elements===void 0?t.uniformMatrix3fv(this.addr,!1,r):(Ls.set(r.elements),t.uniformMatrix3fv(this.addr,!1,Ls))}function k(t,r){r.elements===void 0?t.uniformMatrix4fv(this.addr,!1,r):(bs.set(r.elements),t.uniformMatrix4fv(this.addr,!1,bs))}function F(t,r,a){var i=a.allocTextureUnit();t.uniform1i(this.addr,i),a.setTexture2D(r||Es,i)}function G(t,r,a){var i=a.allocTextureUnit();t.uniform1i(this.addr,i),a.setTextureCube(r||vs,i)}function V(t,r){t.uniform2iv(this.addr,r)}function H(t,r){t.uniform3iv(this.addr,r)}function Q(t,r){t.uniform4iv(this.addr,r)}function Y(t){return 5126===t?j:35664===t?z:35665===t?R:35666===t?U:35674===t?P:35675===t?B:35676===t?k:35678===t||36198===t?F:35680===t?G:5124===t||35670===t?O:35667===t||35671===t?V:35668===t||35672===t?H:35669===t||35673===t?Q:void 0}function W(t,r){t.uniform1fv(this.addr,r)}function X(t,r){t.uniform1iv(this.addr,r)}function q(t,r){t.uniform2fv(this.addr,I(r,this.size,2))}function Z(t,r){t.uniform3fv(this.addr,I(r,this.size,3))}function K(t,r){t.uniform4fv(this.addr,I(r,this.size,4))}function J(t,r){t.uniformMatrix2fv(this.addr,!1,I(r,this.size,4))}function $(t,r){t.uniformMatrix3fv(this.addr,!1,I(r,this.size,9))}function ee(t,r){t.uniformMatrix4fv(this.addr,!1,I(r,this.size,16))}function te(t,r,a){var o=r.length,n=_(a,o);t.uniform1iv(this.addr,n);for(var s=0;s!==o;++s)a.setTexture2D(r[s]||Es,n[s])}function re(t,r,a){var o=r.length,n=_(a,o);t.uniform1iv(this.addr,n);for(var s=0;s!==o;++s)a.setTextureCube(r[s]||vs,n[s])}function ae(t){return 5126===t?W:35664===t?q:35665===t?Z:35666===t?K:35674===t?J:35675===t?$:35676===t?ee:35678===t?te:35680===t?re:5124===t||35670===t?X:35667===t||35671===t?V:35668===t||35672===t?H:35669===t||35673===t?Q:void 0}function ie(t,r,a){this.id=t,this.addr=a,this.setValue=Y(r.type)}function oe(t,r,a){this.id=t,this.addr=a,this.size=r.size,this.setValue=ae(r.type)}function ne(t){this.id=t,S.call(this)}function se(t,r){t.seq.push(r),t.map[r.id]=r}function le(t,r,a){var i=t.name,o=i.length;for(Ns.lastIndex=0;;){var n=Ns.exec(i),s=Ns.lastIndex,l=n[1],d="]"===n[2],p=n[3];if(d&&(l|=0),void 0===p||"["===p&&s+2===o){se(a,void 0===p?new ie(l,t,r):new oe(l,t,r));break}else{var c=a.map,u=c[l];void 0===u&&(u=new ne(l),se(a,u)),a=u}}}function de(t,r,a){S.call(this),this.renderer=a;for(var o=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<o;++n){var i=t.getActiveUniform(r,n),s=i.name,l=t.getUniformLocation(r,s);le(i,l,this)}}function pe(t,r,a){return void 0===r&&void 0===a?this.set(t):this.setRGB(t,r,a)}function ce(t,r){this.min=t===void 0?new f(+Infinity,+Infinity):t,this.max=r===void 0?new f(-Infinity,-Infinity):r}function ue(t,r,a,i,o){function n(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),i=new Uint16Array([0,1,2,0,2,3]);d=r.createBuffer(),p=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,d),r.bufferData(r.ARRAY_BUFFER,t,r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,p),r.bufferData(r.ELEMENT_ARRAY_BUFFER,i,r.STATIC_DRAW),g=r.createTexture(),h=r.createTexture(),a.bindTexture(r.TEXTURE_2D,g),r.texImage2D(r.TEXTURE_2D,0,r.RGB,16,16,0,r.RGB,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),a.bindTexture(r.TEXTURE_2D,h),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,16,16,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),l={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},c=s(l),u={vertex:r.getAttribLocation(c,"position"),uv:r.getAttribLocation(c,"uv")},m={renderType:r.getUniformLocation(c,"renderType"),map:r.getUniformLocation(c,"map"),occlusionMap:r.getUniformLocation(c,"occlusionMap"),opacity:r.getUniformLocation(c,"opacity"),color:r.getUniformLocation(c,"color"),scale:r.getUniformLocation(c,"scale"),rotation:r.getUniformLocation(c,"rotation"),screenPosition:r.getUniformLocation(c,"screenPosition")}}function s(t){var a=r.createProgram(),i=r.createShader(r.FRAGMENT_SHADER),n=r.createShader(r.VERTEX_SHADER),s="precision "+o.precision+" float;\n";return r.shaderSource(i,s+t.fragmentShader),r.shaderSource(n,s+t.vertexShader),r.compileShader(i),r.compileShader(n),r.attachShader(a,i),r.attachShader(a,n),r.linkProgram(a),a}var d,p,l,c,u,m,g,h;this.render=function(t,o,s,y){if(0!==t.length){var M=new D,x=y.w/y.z,E=0.5*y.z,v=0.5*y.w,A=16/y.w,T=new f(A*x,A),b=new D(1,1,0),L=new f(1,1),N=new ce;N.min.set(y.x,y.y),N.max.set(y.x+(y.z-16),y.y+(y.w-16)),void 0===c&&n(),a.useProgram(c),a.initAttributes(),a.enableAttribute(u.vertex),a.enableAttribute(u.uv),a.disableUnusedAttributes(),r.uniform1i(m.occlusionMap,0),r.uniform1i(m.map,1),r.bindBuffer(r.ARRAY_BUFFER,d),r.vertexAttribPointer(u.vertex,2,r.FLOAT,!1,16,0),r.vertexAttribPointer(u.uv,2,r.FLOAT,!1,16,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,p),a.disable(r.CULL_FACE),a.buffers.depth.setMask(!1);for(var w=0,C=t.length;w<C;w++){A=16/y.w,T.set(A*x,A);var l=t[w];if(M.set(l.matrixWorld.elements[12],l.matrixWorld.elements[13],l.matrixWorld.elements[14]),M.applyMatrix4(s.matrixWorldInverse),M.applyMatrix4(s.projectionMatrix),b.copy(M),L.x=y.x+b.x*E+E-8,L.y=y.y+b.y*v+v-8,!0===N.containsPoint(L)){a.activeTexture(r.TEXTURE0),a.bindTexture(r.TEXTURE_2D,null),a.activeTexture(r.TEXTURE1),a.bindTexture(r.TEXTURE_2D,g),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGB,L.x,L.y,16,16,0),r.uniform1i(m.renderType,0),r.uniform2f(m.scale,T.x,T.y),r.uniform3f(m.screenPosition,b.x,b.y,b.z),a.disable(r.BLEND),a.enable(r.DEPTH_TEST),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),a.activeTexture(r.TEXTURE0),a.bindTexture(r.TEXTURE_2D,h),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,L.x,L.y,16,16,0),r.uniform1i(m.renderType,1),a.disable(r.DEPTH_TEST),a.activeTexture(r.TEXTURE1),a.bindTexture(r.TEXTURE_2D,g),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),l.positionScreen.copy(b),l.customUpdateCallback?l.customUpdateCallback(l):l.updateLensFlares(),r.uniform1i(m.renderType,2),a.enable(r.BLEND);for(var S=0,I=l.lensFlares.length,_;S<I;S++)_=l.lensFlares[S],1e-3<_.opacity&&1e-3<_.scale&&(b.x=_.x,b.y=_.y,b.z=_.z,A=_.size*_.scale/y.w,T.x=A*x,T.y=A,r.uniform3f(m.screenPosition,b.x,b.y,b.z),r.uniform2f(m.scale,T.x,T.y),r.uniform1f(m.rotation,_.rotation),r.uniform1f(m.opacity,_.opacity),r.uniform3f(m.color,_.color.r,_.color.g,_.color.b),a.setBlending(_.blending,_.blendEquation,_.blendSrc,_.blendDst),i.setTexture2D(_.texture,1),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0))}}a.enable(r.CULL_FACE),a.enable(r.DEPTH_TEST),a.buffers.depth.setMask(!0),a.reset()}}}function me(t,r,a,i,o,n,s,l,d){c.call(this,t,r,a,i,o,n,s,l,d),this.needsUpdate=!0}function ge(t,r,a,i,o){function n(){var t=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]),a=new Uint16Array([0,1,2,0,2,3]);u=r.createBuffer(),m=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,t,r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,m),r.bufferData(r.ELEMENT_ARRAY_BUFFER,a,r.STATIC_DRAW),g=s(),h={position:r.getAttribLocation(g,"position"),uv:r.getAttribLocation(g,"uv")},y={uvOffset:r.getUniformLocation(g,"uvOffset"),uvScale:r.getUniformLocation(g,"uvScale"),rotation:r.getUniformLocation(g,"rotation"),scale:r.getUniformLocation(g,"scale"),color:r.getUniformLocation(g,"color"),map:r.getUniformLocation(g,"map"),opacity:r.getUniformLocation(g,"opacity"),modelViewMatrix:r.getUniformLocation(g,"modelViewMatrix"),projectionMatrix:r.getUniformLocation(g,"projectionMatrix"),fogType:r.getUniformLocation(g,"fogType"),fogDensity:r.getUniformLocation(g,"fogDensity"),fogNear:r.getUniformLocation(g,"fogNear"),fogFar:r.getUniformLocation(g,"fogFar"),fogColor:r.getUniformLocation(g,"fogColor"),alphaTest:r.getUniformLocation(g,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var o=i.getContext("2d");o.fillStyle="white",o.fillRect(0,0,8,8),f=new me(i)}function s(){var t=r.createProgram(),a=r.createShader(r.VERTEX_SHADER),i=r.createShader(r.FRAGMENT_SHADER);return r.shaderSource(a,["precision "+o.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),r.shaderSource(i,["precision "+o.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),r.compileShader(a),r.compileShader(i),r.attachShader(t,a),r.attachShader(t,i),r.linkProgram(t),t}function d(t,r){return t.renderOrder===r.renderOrder?t.z===r.z?r.id-t.id:r.z-t.z:t.renderOrder-r.renderOrder}var l=new D,p=new b,c=new D,u,m,g,h,y,f;this.render=function(o,s,M){if(0!==o.length){void 0===g&&n(),a.useProgram(g),a.initAttributes(),a.enableAttribute(h.position),a.enableAttribute(h.uv),a.disableUnusedAttributes(),a.disable(r.CULL_FACE),a.enable(r.BLEND),r.bindBuffer(r.ARRAY_BUFFER,u),r.vertexAttribPointer(h.position,2,r.FLOAT,!1,16,0),r.vertexAttribPointer(h.uv,2,r.FLOAT,!1,16,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,m),r.uniformMatrix4fv(y.projectionMatrix,!1,M.projectionMatrix.elements),a.activeTexture(r.TEXTURE0),r.uniform1i(y.map,0);var x=0,E=0,v=s.fog;v?(r.uniform3f(y.fogColor,v.color.r,v.color.g,v.color.b),v.isFog?(r.uniform1f(y.fogNear,v.near),r.uniform1f(y.fogFar,v.far),r.uniform1i(y.fogType,1),x=1,E=1):v.isFogExp2&&(r.uniform1f(y.fogDensity,v.density),r.uniform1i(y.fogType,2),x=2,E=2)):(r.uniform1i(y.fogType,0),x=0,E=0);for(var A=0,T=o.length,b;A<T;A++)b=o[A],b.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,b.matrixWorld),b.z=-b.modelViewMatrix.elements[14];o.sort(d);for(var L=[],A=0,T=o.length;A<T;A++){var b=o[A],N=b.material;if(!1!==N.visible){b.onBeforeRender(t,s,M,void 0,N,void 0),r.uniform1f(y.alphaTest,N.alphaTest),r.uniformMatrix4fv(y.modelViewMatrix,!1,b.modelViewMatrix.elements),b.matrixWorld.decompose(l,p,c),L[0]=c.x,L[1]=c.y;var D=0;s.fog&&N.fog&&(D=E),x!==D&&(r.uniform1i(y.fogType,D),x=D),null===N.map?(r.uniform2f(y.uvOffset,0,0),r.uniform2f(y.uvScale,1,1)):(r.uniform2f(y.uvOffset,N.map.offset.x,N.map.offset.y),r.uniform2f(y.uvScale,N.map.repeat.x,N.map.repeat.y)),r.uniform1f(y.opacity,N.opacity),r.uniform3f(y.color,N.color.r,N.color.g,N.color.b),r.uniform1f(y.rotation,N.rotation),r.uniform2fv(y.scale,L),a.setBlending(N.blending,N.blendEquation,N.blendSrc,N.blendDst,N.blendEquationAlpha,N.blendSrcAlpha,N.blendDstAlpha,N.premultipliedAlpha),a.buffers.depth.setTest(N.depthTest),a.buffers.depth.setMask(N.depthWrite),i.setTexture2D(N.map||f,0),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),b.onAfterRender(t,s,M,void 0,N,void 0)}}a.enable(r.CULL_FACE),a.reset()}}}function he(){Object.defineProperty(this,"id",{value:_s++}),this.uuid=Ms.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Ao,this.side=go,this.flatShading=!1,this.vertexColors=Mo,this.opacity=1,this.transparent=!1,this.blendSrc=Ro,this.blendDst=Uo,this.blendEquation=Do,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Yo,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function ye(t){he.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function fe(t){he.call(this),this.type="MeshDepthMaterial",this.depthPacking=ys,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Me(t){he.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new D,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function xe(t,r){this.min=t===void 0?new D(+Infinity,+Infinity,+Infinity):t,this.max=r===void 0?new D(-Infinity,-Infinity,-Infinity):r}function Ee(t,r){this.center=t===void 0?new D:t,this.radius=r===void 0?0:r}function ve(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function Ae(t,r){this.normal=t===void 0?new D(1,0,0):t,this.constant=r===void 0?0:r}function Te(t,r,a,i,o,n){this.planes=[t===void 0?new Ae:t,r===void 0?new Ae:r,a===void 0?new Ae:a,i===void 0?new Ae:i,o===void 0?new Ae:o,n===void 0?new Ae:n]}function be(t,r,a){function o(r,a,i,o,n,s){var l=r.geometry,d=null,p=h,c=r.customDepthMaterial;if(i&&(p=y,c=r.customDistanceMaterial),!c){var u=!1;a.morphTargets&&(l&&l.isBufferGeometry?u=l.morphAttributes&&l.morphAttributes.position&&0<l.morphAttributes.position.length:l&&l.isGeometry&&(u=l.morphTargets&&0<l.morphTargets.length)),r.isSkinnedMesh&&!1===a.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",r);var f=r.isSkinnedMesh&&a.skinning,x=0;u&&(x|=m),f&&(x|=g),d=p[x]}else d=c;if(t.localClippingEnabled&&!0===a.clipShadows&&0!==a.clippingPlanes.length){var E=d.uuid,v=a.uuid,A=M[E];void 0===A&&(A={},M[E]=A);var T=A[v];void 0===T&&(T=d.clone(),A[v]=T),d=T}d.visible=a.visible,d.wireframe=a.wireframe;var b=a.side;return S.renderSingleSided&&b==yo&&(b=go),S.renderReverseSided&&(b===go?b=ho:b===ho&&(b=go)),d.side=b,d.clipShadows=a.clipShadows,d.clippingPlanes=a.clippingPlanes,d.clipIntersection=a.clipIntersection,d.wireframeLinewidth=a.wireframeLinewidth,d.linewidth=a.linewidth,i&&d.isMeshDistanceMaterial&&(d.referencePosition.copy(o),d.nearDistance=n,d.farDistance=s),d}function n(a,d,p,c){if(!1!==a.visible){var m=a.layers.test(d.layers);if(m&&(a.isMesh||a.isLine||a.isPoints)&&a.castShadow&&(!a.frustumCulled||s.intersectsObject(a))){a.modelViewMatrix.multiplyMatrices(p.matrixWorldInverse,a.matrixWorld);var g=r.update(a),h=a.material;if(Array.isArray(h))for(var y=g.groups,f=0,M=y.length;f<M;f++){var x=y[f],E=h[x.materialIndex];if(E&&E.visible){var v=o(a,E,c,u,p.near,p.far);t.renderBufferDirect(p,null,g,v,a,x)}}else if(h.visible){var v=o(a,h,c,u,p.near,p.far);t.renderBufferDirect(p,null,g,v,a,null)}}for(var A=a.children,T=0,i=A.length;T<i;T++)n(A[T],d,p,c)}}for(var s=new Te,l=new N,d=new f,p=new f(a,a),c=new D,u=new D,m=1,g=2,h=[,,,,],y=[,,,,],M={},E=[new D(1,0,0),new D(-1,0,0),new D(0,0,1),new D(0,0,-1),new D(0,1,0),new D(0,-1,0)],A=[new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,0,1),new D(0,0,-1)],T=[new v,new v,new v,new v,new v,new v],b=0;b!==(m|g)+1;++b){var i=0!==(b&m),L=0!==(b&g),w=new fe({depthPacking:fs,morphTargets:i,skinning:L});h[b]=w;var C=new Me({morphTargets:i,skinning:L});y[b]=C}var S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=uo,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(r,a,o){if(!1!==S.enabled&&(!1!==S.autoUpdate||!1!==S.needsUpdate)&&0!==r.length){var m=t.context,g=t.state;g.disable(m.BLEND),g.buffers.color.setClear(1,1,1,1),g.buffers.depth.setTest(!0),g.setScissorTest(!1);for(var h=0,i=r.length,y;h<i;h++){var f=r[h],M=f.shadow,v=f&&f.isPointLight;if(void 0===M){console.warn("THREE.WebGLShadowMap:",f,"has no shadow.");continue}var b=M.camera;if(d.copy(M.mapSize),d.min(p),v){var L=d.x,N=d.y;T[0].set(2*L,N,L,N),T[1].set(0,N,L,N),T[2].set(3*L,N,L,N),T[3].set(L,N,L,N),T[4].set(3*L,0,L,N),T[5].set(L,0,L,N),d.x*=4,d.y*=2}if(null===M.map){M.map=new x(d.x,d.y,{minFilter:fn,magFilter:fn,format:Un}),M.map.texture.name=f.name+".shadowMap",b.updateProjectionMatrix()}M.isSpotLightShadow&&M.update(f);var D=M.map,w=M.matrix;u.setFromMatrixPosition(f.matrixWorld),b.position.copy(u),v?(y=6,w.makeTranslation(-u.x,-u.y,-u.z)):(y=1,c.setFromMatrixPosition(f.target.matrixWorld),b.lookAt(c),b.updateMatrixWorld(),w.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),w.multiply(b.projectionMatrix),w.multiply(b.matrixWorldInverse)),t.setRenderTarget(D),t.clear();for(var C=0;C<y;C++){if(v){c.copy(b.position),c.add(E[C]),b.up.copy(A[C]),b.lookAt(c),b.updateMatrixWorld();var I=T[C];g.viewport(I)}l.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),s.setFromMatrix(l),n(a,o,b,v)}}S.needsUpdate=!1}}}function Le(t){function r(r,a){var i=r.array,o=r.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,n=t.createBuffer();t.bindBuffer(a,n),t.bufferData(a,i,o),r.onUploadCallback();var s=t.FLOAT;return i instanceof Float32Array?s=t.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?s=t.UNSIGNED_SHORT:i instanceof Int16Array?s=t.SHORT:i instanceof Uint32Array?s=t.UNSIGNED_INT:i instanceof Int32Array?s=t.INT:i instanceof Int8Array?s=t.BYTE:i instanceof Uint8Array&&(s=t.UNSIGNED_BYTE),{buffer:n,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:r.version}}function a(r,a,i){var o=a.array,n=a.updateRange;t.bindBuffer(i,r),!1===a.dynamic?t.bufferData(i,o,t.STATIC_DRAW):-1===n.count?t.bufferSubData(i,0,o):0===n.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,n.offset*o.BYTES_PER_ELEMENT,o.subarray(n.offset,n.offset+n.count)),n.count=-1)}var i={};return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i[t.uuid]},remove:function(r){r.isInterleavedBufferAttribute&&(r=r.data);var a=i[r.uuid];a&&(t.deleteBuffer(a.buffer),delete i[r.uuid])},update:function(t,o){t.isInterleavedBufferAttribute&&(t=t.data);var n=i[t.uuid];n===void 0?i[t.uuid]=r(t,o):n.version<t.version&&(a(n.buffer,t,o),n.version=t.version)}}}function Ne(t,r,a,i){this._x=t||0,this._y=r||0,this._z=a||0,this._order=i||Ne.DefaultOrder}function De(){this.mask=1}function we(){Object.defineProperty(this,"id",{value:js++}),this.uuid=Ms.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=we.DefaultUp.clone();var t=new D,r=new Ne,a=new b,i=new D(1,1,1);r.onChange(function(){a.setFromEuler(r,!1)}),a.onChange(function(){r.setFromQuaternion(a,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:a},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new N},normalMatrix:{value:new ve}}),this.matrix=new N,this.matrixWorld=new N,this.matrixAutoUpdate=we.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new De,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!1,this.renderOrder=0,this.userData={}}function Ce(){we.call(this),this.type="Camera",this.matrixWorldInverse=new N,this.projectionMatrix=new N}function Se(t,r,a,i,o,n){Ce.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=r,this.top=a,this.bottom=i,this.near=o===void 0?0.1:o,this.far=n===void 0?2e3:n,this.updateProjectionMatrix()}function Ie(t,r,a,i){Ce.call(this),this.type="PerspectiveCamera",this.fov=t===void 0?50:t,this.zoom=1,this.near=a===void 0?0.1:a,this.far=i===void 0?2e3:i,this.focus=10,this.aspect=r===void 0?1:r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function _e(t,r,a,i,o,n){this.a=t,this.b=r,this.c=a,this.normal=i&&i.isVector3?i:new D,this.vertexNormals=Array.isArray(i)?i:[],this.color=o&&o.isColor?o:new pe,this.vertexColors=Array.isArray(o)?o:[],this.materialIndex=n===void 0?0:n}function je(){return Os++}function Oe(){Object.defineProperty(this,"id",{value:je()}),this.uuid=Ms.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function ze(t,r,a){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Ms.generateUUID(),this.name="",this.array=t,this.itemSize=r,this.count=t===void 0?0:t.length/r,this.normalized=!0===a,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Re(t,r){ze.call(this,new Int8Array(t),r)}function Ue(t,r){ze.call(this,new Uint8Array(t),r)}function Pe(t,r){ze.call(this,new Uint8ClampedArray(t),r)}function Be(t,r){ze.call(this,new Int16Array(t),r)}function ke(t,r){ze.call(this,new Uint16Array(t),r)}function Fe(t,r){ze.call(this,new Int32Array(t),r)}function Ge(t,r){ze.call(this,new Uint32Array(t),r)}function Ve(t,r){ze.call(this,new Float32Array(t),r)}function He(t,r){ze.call(this,new Float64Array(t),r)}function Qe(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ye(t){if(0===t.length)return-Infinity;for(var r=t[0],a=1,i=t.length;a<i;++a)t[a]>r&&(r=t[a]);return r}function We(){Object.defineProperty(this,"id",{value:je()}),this.uuid=Ms.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:Infinity}}function Xe(t,r,a,i,o,n){Oe.call(this),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:a,widthSegments:i,heightSegments:o,depthSegments:n},this.fromBufferGeometry(new qe(t,r,a,i,o,n)),this.mergeVertices()}function qe(t,r,a,i,o,n){function s(t,r,i,o,n,s,u,h,M,E,v){var A=M+1,T=0,L=0,N=new D,w,C;for(C=0;C<E+1;C++){var S=C*(u/E)-u/2;for(w=0;w<A;w++){var y=w*(s/M)-s/2;N[t]=y*o,N[r]=S*n,N[i]=h/2,d.push(N.x,N.y,N.z),N[t]=0,N[r]=0,N[i]=0<h?1:-1,c.push(N.x,N.y,N.z),m.push(w/M),m.push(1-C/E),T+=1}}for(C=0;C<E;C++)for(w=0;w<M;w++){var x=g+w+A*C,a=g+w+A*(C+1),b=g+(w+1)+A*(C+1),I=g+(w+1)+A*C;p.push(x,a,I),p.push(a,b,I),L+=6}l.addGroup(f,L,v),f+=L,g+=T}We.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:r,depth:a,widthSegments:i,heightSegments:o,depthSegments:n};var l=this;i=h(i)||1,o=h(o)||1,n=h(n)||1;var p=[],d=[],c=[],m=[],g=0,f=0;s("z","y","x",-1,-1,a,r,t,n,o,0),s("z","y","x",1,-1,a,r,-t,n,o,1),s("x","z","y",1,1,t,a,r,i,n,2),s("x","z","y",1,-1,t,a,-r,i,n,3),s("x","y","z",1,-1,t,r,a,i,o,4),s("x","y","z",-1,-1,t,r,-a,i,o,5),this.setIndex(p),this.addAttribute("position",new Ve(d,3)),this.addAttribute("normal",new Ve(c,3)),this.addAttribute("uv",new Ve(m,2))}function Ze(t,r,a,i){Oe.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:a,heightSegments:i},this.fromBufferGeometry(new Ke(t,r,a,i)),this.mergeVertices()}function Ke(t,r,i,o){We.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:r,widthSegments:i,heightSegments:o};var n=h(i)||1,s=h(o)||1,l=n+1,p=[],u=[],m=[],g=[],f,M;for(M=0;M<s+1;M++){var E=M*(r/s)-r/2;for(f=0;f<l;f++){var v=f*(t/n)-t/2;u.push(v,-E,0),m.push(0,0,1),g.push(f/n),g.push(1-M/s)}}for(M=0;M<s;M++)for(f=0;f<n;f++){var x=f+l*M,a=f+l*(M+1),A=f+1+l*(M+1),c=f+1+l*M;p.push(x,a,c),p.push(a,A,c)}this.setIndex(p),this.addAttribute("position",new Ve(u,3)),this.addAttribute("normal",new Ve(m,3)),this.addAttribute("uv",new Ve(g,2))}function Je(t){he.call(this),this.type="MeshBasicMaterial",this.color=new pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ko,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function $e(t,r){this.origin=t===void 0?new D:t,this.direction=r===void 0?new D:r}function et(t,r){this.start=t===void 0?new D:t,this.end=r===void 0?new D:r}function tt(t,r,a){this.a=t===void 0?new D:t,this.b=r===void 0?new D:r,this.c=a===void 0?new D:a}function rt(t,r){we.call(this),this.type="Mesh",this.geometry=t===void 0?new We:t,this.material=r===void 0?new Je({color:16777215*Math.random()}):r,this.drawMode=ns,this.updateMorphTargets()}function at(t,r,a,i){function o(t,a){r.buffers.color.setClear(t.r,t.g,t.b,a,i)}var n=new pe(0),s=0,l,d,p;return{getClearColor:function(){return n},setClearColor:function(t,r){n.set(t),s=r===void 0?1:r,o(n,s)},getClearAlpha:function(){return s},setClearAlpha:function(t){s=t,o(n,s)},render:function(r,i,c,u){var m=i.background;null===m?o(n,s):m&&m.isColor&&(o(m,1),u=!0),(t.autoClear||u)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&m.isCubeTexture?(p===void 0&&(p=new rt(new qe(1,1,1),new ye({uniforms:Is.cube.uniforms,vertexShader:Is.cube.vertexShader,fragmentShader:Is.cube.fragmentShader,side:ho,depthTest:!0,depthWrite:!1,polygonOffset:!0,fog:!1})),p.geometry.removeAttribute("normal"),p.geometry.removeAttribute("uv"),p.onBeforeRender=function(t,r,a){var i=a.far;this.matrixWorld.makeScale(i,i,i),this.matrixWorld.copyPosition(a.matrixWorld),this.material.polygonOffsetUnits=10*i},a.update(p.geometry)),p.material.uniforms.tCube.value=m,r.push(p,p.geometry,p.material,0,null)):m&&m.isTexture&&(l===void 0&&(l=new Se(-1,1,1,-1,0,1),d=new rt(new Ke(2,2),new Je({depthTest:!1,depthWrite:!1,fog:!1})),a.update(d.geometry)),d.material.map=m,t.renderBufferDirect(l,null,d.geometry,d.material,d,null))}}}function it(t,r){return t.renderOrder===r.renderOrder?t.program&&r.program&&t.program!==r.program?t.program.id-r.program.id:t.material.id===r.material.id?t.z===r.z?t.id-r.id:t.z-r.z:t.material.id-r.material.id:t.renderOrder-r.renderOrder}function ot(t,r){return t.renderOrder===r.renderOrder?t.z===r.z?t.id-r.id:r.z-t.z:t.renderOrder-r.renderOrder}function nt(){var t=[],r=0,a=[],i=[];return{opaque:a,transparent:i,init:function(){r=0,a.length=0,i.length=0},push:function(o,n,s,l,d){var p=t[r];p===void 0?(p={id:o.id,object:o,geometry:n,material:s,program:s.program,renderOrder:o.renderOrder,z:l,group:d},t[r]=p):(p.id=o.id,p.object=o,p.geometry=n,p.material=s,p.program=s.program,p.renderOrder=o.renderOrder,p.z=l,p.group=d),(!0===s.transparent?i:a).push(p),r++},sort:function(){1<a.length&&a.sort(it),1<i.length&&i.sort(ot)}}}function st(){var t={};return{get:function(r,a){var i=r.id+","+a.id,o=t[i];return void 0===o&&(o=new nt,t[i]=o),o},dispose:function(){t={}}}}function lt(t,r){return g(r[1])-g(t[1])}function dt(t){var r={},a=new Float32Array(8);return{update:function(o,n,s,l){var d=o.morphTargetInfluences,p=d.length,c=r[n.id];if(c===void 0){c=[];for(var u=0;u<p;u++)c[u]=[u,0];r[n.id]=c}for(var i=s.morphTargets&&n.morphAttributes.position,m=s.morphNormals&&n.morphAttributes.normal,u=0,g;u<p;u++)g=c[u],0!==g[1]&&(i&&n.removeAttribute("morphTarget"+u),m&&n.removeAttribute("morphNormal"+u));for(var u=0,g;u<p;u++)g=c[u],g[0]=u,g[1]=d[u];c.sort(lt);for(var u=0,g;8>u;u++){if(g=c[u],g){var h=g[0],y=g[1];if(y){i&&n.addAttribute("morphTarget"+u,i[h]),m&&n.addAttribute("morphNormal"+u,m[h]),a[u]=y;continue}}a[u]=0}l.getUniforms().setValue(t,"morphTargetInfluences",a)}}}function pt(t,r,a){var i,o,n;this.setMode=function(t){i=t},this.setIndex=function(t){o=t.type,n=t.bytesPerElement},this.render=function(r,s){t.drawElements(i,s,o,r*n),a.calls++,a.vertices+=s,i===t.TRIANGLES?a.faces+=s/3:i===t.POINTS&&(a.points+=s)},this.renderInstances=function(s,l,d){var p=r.get("ANGLE_instanced_arrays");return null===p?void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):void(p.drawElementsInstancedANGLE(i,d,o,l*n,s.maxInstancedCount),a.calls++,a.vertices+=d*s.maxInstancedCount,i===t.TRIANGLES?a.faces+=s.maxInstancedCount*d/3:i===t.POINTS&&(a.points+=s.maxInstancedCount*d))}}function ct(t,r,a){var i;this.setMode=function(t){i=t},this.render=function(r,o){t.drawArrays(i,r,o),a.calls++,a.vertices+=o,i===t.TRIANGLES?a.faces+=o/3:i===t.POINTS&&(a.points+=o)},this.renderInstances=function(o,n,s){var l=r.get("ANGLE_instanced_arrays");if(null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var d=o.attributes.position;d.isInterleavedBufferAttribute?(s=d.data.count,l.drawArraysInstancedANGLE(i,0,s,o.maxInstancedCount)):l.drawArraysInstancedANGLE(i,n,s,o.maxInstancedCount),a.calls++,a.vertices+=s*o.maxInstancedCount,i===t.TRIANGLES?a.faces+=o.maxInstancedCount*s/3:i===t.POINTS&&(a.points+=o.maxInstancedCount*s)}}function ut(t,r,a){function i(t){var s=t.target,l=o[s.id];for(var d in null!==l.index&&r.remove(l.index),l.attributes)r.remove(l.attributes[d]);s.removeEventListener("dispose",i),delete o[s.id];var p=n[s.id];p&&(r.remove(p),delete n[s.id]),p=n[l.id],p&&(r.remove(p),delete n[l.id]),a.geometries--}var o={},n={};return{get:function(t,r){var n=o[r.id];return n?n:(r.addEventListener("dispose",i),r.isBufferGeometry?n=r:r.isGeometry&&(void 0===r._bufferGeometry&&(r._bufferGeometry=new We().setFromObject(t)),n=r._bufferGeometry),o[r.id]=n,a.geometries++,n)},update:function(a){var o=a.index,n=a.attributes;for(var s in null!==o&&r.update(o,t.ELEMENT_ARRAY_BUFFER),n)r.update(n[s],t.ARRAY_BUFFER);var d=a.morphAttributes;for(var s in d)for(var p=d[s],c=0,i=p.length;c<i;c++)r.update(p[c],t.ARRAY_BUFFER)},getWireframeAttribute:function(o){var s=n[o.id];if(s)return s;var d=[],p=o.index,u=o.attributes;if(null!==p)for(var m=p.array,g=0,i=m.length;g<i;g+=3){var l=m[g+0],a=m[g+1],h=m[g+2];d.push(l,a,a,h,h,l)}else for(var m=u.position.array,g=0,i=m.length/3-1;g<i;g+=3){var l=g+0,a=g+1,h=g+2;d.push(l,a,a,h,h,l)}return s=new(65535<Ye(d)?Ge:ke)(d,1),r.update(s,t.ELEMENT_ARRAY_BUFFER),n[o.id]=s,s}}}function mt(){var t={};return{get:function(r){if(void 0!==t[r.id])return t[r.id];var a;switch(r.type){case"DirectionalLight":a={direction:new D,color:new pe,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new f};break;case"SpotLight":a={position:new D,direction:new D,color:new pe,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new f};break;case"PointLight":a={position:new D,color:new pe,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new f,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":a={direction:new D,skyColor:new pe,groundColor:new pe};break;case"RectAreaLight":a={color:new pe,position:new D,halfWidth:new D,halfHeight:new D};}return t[r.id]=a,a}}}function gt(){var t=new mt,a={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=new D,i=new N,o=new N;return{setup:function(n,s,d){for(var p=0,c=0,u=0,m=0,g=0,h=0,y=0,f=0,M=d.matrixWorldInverse,x=0,E=n.length;x<E;x++){var l=n[x],v=l.color,T=l.intensity,b=l.distance,L=l.shadow&&l.shadow.map?l.shadow.map.texture:null;if(l.isAmbientLight)p+=v.r*T,c+=v.g*T,u+=v.b*T;else if(l.isDirectionalLight){var N=t.get(l);if(N.color.copy(l.color).multiplyScalar(l.intensity),N.direction.setFromMatrixPosition(l.matrixWorld),r.setFromMatrixPosition(l.target.matrixWorld),N.direction.sub(r),N.direction.transformDirection(M),N.shadow=l.castShadow,l.castShadow){var D=l.shadow;N.shadowBias=D.bias,N.shadowRadius=D.radius,N.shadowMapSize=D.mapSize}a.directionalShadowMap[m]=L,a.directionalShadowMatrix[m]=l.shadow.matrix,a.directional[m]=N,m++}else if(l.isSpotLight){var N=t.get(l);if(N.position.setFromMatrixPosition(l.matrixWorld),N.position.applyMatrix4(M),N.color.copy(v).multiplyScalar(T),N.distance=b,N.direction.setFromMatrixPosition(l.matrixWorld),r.setFromMatrixPosition(l.target.matrixWorld),N.direction.sub(r),N.direction.transformDirection(M),N.coneCos=A(l.angle),N.penumbraCos=A(l.angle*(1-l.penumbra)),N.decay=0===l.distance?0:l.decay,N.shadow=l.castShadow,l.castShadow){var D=l.shadow;N.shadowBias=D.bias,N.shadowRadius=D.radius,N.shadowMapSize=D.mapSize}a.spotShadowMap[h]=L,a.spotShadowMatrix[h]=l.shadow.matrix,a.spot[h]=N,h++}else if(l.isRectAreaLight){var N=t.get(l);N.color.copy(v).multiplyScalar(T/(l.width*l.height)),N.position.setFromMatrixPosition(l.matrixWorld),N.position.applyMatrix4(M),o.identity(),i.copy(l.matrixWorld),i.premultiply(M),o.extractRotation(i),N.halfWidth.set(0.5*l.width,0,0),N.halfHeight.set(0,0.5*l.height,0),N.halfWidth.applyMatrix4(o),N.halfHeight.applyMatrix4(o),a.rectArea[y]=N,y++}else if(l.isPointLight){var N=t.get(l);if(N.position.setFromMatrixPosition(l.matrixWorld),N.position.applyMatrix4(M),N.color.copy(l.color).multiplyScalar(l.intensity),N.distance=l.distance,N.decay=0===l.distance?0:l.decay,N.shadow=l.castShadow,l.castShadow){var D=l.shadow;N.shadowBias=D.bias,N.shadowRadius=D.radius,N.shadowMapSize=D.mapSize,N.shadowCameraNear=D.camera.near,N.shadowCameraFar=D.camera.far}a.pointShadowMap[g]=L,a.pointShadowMatrix[g]=l.shadow.matrix,a.point[g]=N,g++}else if(l.isHemisphereLight){var N=t.get(l);N.direction.setFromMatrixPosition(l.matrixWorld),N.direction.transformDirection(M),N.direction.normalize(),N.skyColor.copy(l.color).multiplyScalar(T),N.groundColor.copy(l.groundColor).multiplyScalar(T),a.hemi[f]=N,f++}}a.ambient[0]=p,a.ambient[1]=c,a.ambient[2]=u,a.directional.length=m,a.spot.length=h,a.rectArea.length=y,a.point.length=g,a.hemi.length=f,a.hash=m+","+g+","+h+","+y+","+f+","+s.length},state:a}}function ht(t,r){var a={};return{update:function(i){var o=r.frame,n=i.geometry,s=t.get(i,n);return a[s.id]!==o&&(n.isGeometry&&s.updateFromObject(i),t.update(s),a[s.id]=o),s},clear:function(){a={}}}}function yt(t){for(var r=t.split("\n"),a=0;a<r.length;a++)r[a]=a+1+": "+r[a];return r.join("\n")}function ft(t,r,a){var i=t.createShader(r);return t.shaderSource(i,a),t.compileShader(i),!1===t.getShaderParameter(i,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",r===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i),yt(a)),i}function Mt(t){switch(t){case ds:return["Linear","( value )"];case ps:return["sRGB","( value )"];case us:return["RGBE","( value )"];case ms:return["RGBM","( value, 7.0 )"];case gs:return["RGBM","( value, 16.0 )"];case hs:return["RGBD","( value, 256.0 )"];case cs:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t);}}function xt(t,r){var a=Mt(r);return"vec4 "+t+"( vec4 value ) { return "+a[0]+"ToLinear"+a[1]+"; }"}function Et(t,r){var a=Mt(r);return"vec4 "+t+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function vt(t,r){var a;switch(r){case tn:a="Linear";break;case rn:a="Reinhard";break;case an:a="Uncharted2";break;case on:a="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+r);}return"vec3 "+t+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function At(t,r,a){t=t||{};var i=[t.derivatives||r.envMapCubeUV||r.bumpMap||r.normalMap||r.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||r.logarithmicDepthBuffer)&&a.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&a.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||r.envMap)&&a.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return i.filter(Lt).join("\n")}function Tt(t){var r=[];for(var a in t){var i=t[a];!1===i||r.push("#define "+a+" "+i)}return r.join("\n")}function bt(t,r){for(var a={},o=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<o;n++){var i=t.getActiveAttrib(r,n),s=i.name;a[s]=t.getAttribLocation(r,s)}return a}function Lt(t){return""!==t}function Nt(t,r){return t.replace(/NUM_DIR_LIGHTS/g,r.numDirLights).replace(/NUM_SPOT_LIGHTS/g,r.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,r.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,r.numPointLights).replace(/NUM_HEMI_LIGHTS/g,r.numHemiLights)}function Dt(t){function r(t,r){var a=Ss[r];if(a===void 0)throw new Error("Can not resolve #include <"+r+">");return Dt(a)}var a=/^[ \t]*#include +<([\w\d.]+)>/gm;return t.replace(a,r)}function wt(t){var r=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(r,function(t,r,a,o){for(var n="",s=parseInt(r);s<parseInt(a);s++)n+=o.replace(/\[ i \]/g,"[ "+s+" ]");return n})}function Ct(t,r,a,i,o,n){var s=t.context,l=i.defines,d=o.vertexShader,p=o.fragmentShader,c="SHADOWMAP_TYPE_BASIC";n.shadowMapType===uo?c="SHADOWMAP_TYPE_PCF":n.shadowMapType===mo&&(c="SHADOWMAP_TYPE_PCF_SOFT");var u="ENVMAP_TYPE_CUBE",m="ENVMAP_MODE_REFLECTION",g="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(i.envMap.mapping){case sn:case ln:u="ENVMAP_TYPE_CUBE";break;case un:case mn:u="ENVMAP_TYPE_CUBE_UV";break;case dn:case pn:u="ENVMAP_TYPE_EQUIREC";break;case cn:u="ENVMAP_TYPE_SPHERE";}switch(i.envMap.mapping){case ln:case pn:m="ENVMAP_MODE_REFRACTION";}switch(i.combine){case Ko:g="ENVMAP_BLENDING_MULTIPLY";break;case Jo:g="ENVMAP_BLENDING_MIX";break;case $o:g="ENVMAP_BLENDING_ADD";}}var h=0<t.gammaFactor?t.gammaFactor:1,y=At(i.extensions,n,r),f=Tt(l),M=s.createProgram(),x,E;i.isRawShaderMaterial?(x=[f,"\n"].filter(Lt).join("\n"),E=[y,f,"\n"].filter(Lt).join("\n")):(x=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+o.name,f,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&r.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Lt).join("\n"),E=[y,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+o.name,f,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"","#define GAMMA_FACTOR "+h,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+m:"",n.envMap?"#define "+g:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(n.numClippingPlanes-n.numClipIntersection),n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&r.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.envMap&&r.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",n.toneMapping===en?"":"#define TONE_MAPPING",n.toneMapping===en?"":Ss.tonemapping_pars_fragment,n.toneMapping===en?"":vt("toneMapping",n.toneMapping),n.dithering?"#define DITHERING":"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.emissiveMapEncoding?Ss.encodings_pars_fragment:"",n.mapEncoding?xt("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?xt("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?xt("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.outputEncoding?Et("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Lt).join("\n")),d=Dt(d),d=Nt(d,n),p=Dt(p),p=Nt(p,n),i.isShaderMaterial||(d=wt(d),p=wt(p));var v=x+d,A=E+p,T=ft(s,s.VERTEX_SHADER,v),b=ft(s,s.FRAGMENT_SHADER,A);s.attachShader(M,T),s.attachShader(M,b),void 0===i.index0AttributeName?!0===n.morphTargets&&s.bindAttribLocation(M,0,"position"):s.bindAttribLocation(M,0,i.index0AttributeName),s.linkProgram(M);var L=s.getProgramInfoLog(M),N=s.getShaderInfoLog(T),D=s.getShaderInfoLog(b),w=!0,C=!0;!1===s.getProgramParameter(M,s.LINK_STATUS)?(w=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(M,s.VALIDATE_STATUS),"gl.getProgramInfoLog",L,N,D)):""===L?(""===N||""===D)&&(C=!1):console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",L),C&&(this.diagnostics={runnable:w,material:i,programLog:L,vertexShader:{log:N,prefix:x},fragmentShader:{log:D,prefix:E}}),s.deleteShader(T),s.deleteShader(b);var S;this.getUniforms=function(){return void 0===S&&(S=new de(s,M,t)),S};var I;return this.getAttributes=function(){return void 0===I&&(I=bt(s,M)),I},this.destroy=function(){s.deleteProgram(M),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=zs++,this.code=a,this.usedTimes=1,this.program=M,this.vertexShader=T,this.fragmentShader=b,this}function St(t,r,a){function i(t){var r=t.skeleton,i=r.bones;if(a.floatVertexTextures)return 1024;var o=a.maxVertexUniforms,n=h((o-20)/4),s=m(n,i.length);return s<i.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+i.length+" bones. This GPU supports "+s+"."),0):s}function o(t,r){var a;return t?t.isTexture?a=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),a=t.texture.encoding):a=ds,a===ds&&r&&(a=cs),a}var n=[],s={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},l=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(r,n,l,d,p,c,u){var m=s[r.type],g=u.isSkinnedMesh?i(u):0,h=a.precision;null!==r.precision&&(h=a.getMaxPrecision(r.precision),h!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",h,"instead."));var y=t.getRenderTarget(),f={shaderID:m,precision:h,supportsVertexTextures:a.vertexTextures,outputEncoding:o(y?y.texture:null,t.gammaOutput),map:!!r.map,mapEncoding:o(r.map,t.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:o(r.envMap,t.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===un||r.envMap.mapping===mn),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:o(r.emissiveMap,t.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,combine:r.combine,vertexColors:r.vertexColors,fog:!!d,useFog:r.fog,fogExp:d&&d.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:a.logarithmicDepthBuffer,skinning:r.skinning&&0<g,maxBones:g,useVertexTexture:a.floatVertexTextures,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:p,numClipIntersection:c,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.receiveShadow&&0<l.length,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===yo,flipSided:r.side===ho,depthPacking:r.depthPacking!==void 0&&r.depthPacking};return f},this.getProgramCode=function(r,a){var o=[];if(a.shaderID?o.push(a.shaderID):(o.push(r.fragmentShader),o.push(r.vertexShader)),void 0!==r.defines)for(var n in r.defines)o.push(n),o.push(r.defines[n]);for(var s=0;s<l.length;s++)o.push(a[l[s]]);return o.push(r.onBeforeCompile.toString()),o.push(t.gammaOutput),o.join()},this.acquireProgram=function(a,i,o,s){for(var l=0,d=n.length,p,c;l<d;l++)if(c=n[l],c.code===s){p=c,++p.usedTimes;break}return void 0===p&&(p=new Ct(t,r,s,a,i,o),n.push(p)),p},this.releaseProgram=function(t){if(0===--t.usedTimes){var r=n.indexOf(t);n[r]=n[n.length-1],n.pop(),t.destroy()}},this.programs=n}function It(t,r,a,o,n,s,d){function p(t,r){if(t.width>r||t.height>r){var a=r/l(t.width,t.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=h(t.width*a),i.height=h(t.height*a);var o=i.getContext("2d");return o.drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+i.width+"x"+i.height,t),i}return t}function c(t){return Ms.isPowerOfTwo(t.width)&&Ms.isPowerOfTwo(t.height)}function u(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Ms.nearestPowerOfTwo(t.width),r.height=Ms.nearestPowerOfTwo(t.height);var a=r.getContext("2d");return a.drawImage(t,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+r.width+"x"+r.height,t),r}return t}function g(t){return t.wrapS!==hn||t.wrapT!==hn||t.minFilter!==fn&&t.minFilter!==En}function y(t,r){return t.generateMipmaps&&r&&t.minFilter!==fn&&t.minFilter!==En}function i(r){return r===fn||r===Mn||r===xn?t.NEAREST:t.LINEAR}function f(t){var r=t.target;r.removeEventListener("dispose",f),x(r),d.textures--}function M(t){var r=t.target;r.removeEventListener("dispose",M),E(r),d.textures--}function x(r){var a=o.get(r);if(r.image&&a.__image__webglTextureCube)t.deleteTexture(a.__image__webglTextureCube);else{if(a.__webglInit===void 0)return;t.deleteTexture(a.__webglTexture)}o.remove(r)}function E(r){var a=o.get(r),n=o.get(r.texture);if(r){if(void 0!==n.__webglTexture&&t.deleteTexture(n.__webglTexture),r.depthTexture&&r.depthTexture.dispose(),r.isWebGLRenderTargetCube)for(var s=0;6>s;s++)t.deleteFramebuffer(a.__webglFramebuffer[s]),a.__webglDepthbuffer&&t.deleteRenderbuffer(a.__webglDepthbuffer[s]);else t.deleteFramebuffer(a.__webglFramebuffer),a.__webglDepthbuffer&&t.deleteRenderbuffer(a.__webglDepthbuffer);o.remove(r.texture),o.remove(r)}}function v(r,i){var n=o.get(r);if(0<r.version&&n.__version!==r.version){var s=r.image;if(s===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",r);else if(!1===s.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",r);else return void T(n,r,i)}a.activeTexture(t.TEXTURE0+i),a.bindTexture(t.TEXTURE_2D,n.__webglTexture)}function A(a,l,d){var p;if(d?(t.texParameteri(a,t.TEXTURE_WRAP_S,s.convert(l.wrapS)),t.texParameteri(a,t.TEXTURE_WRAP_T,s.convert(l.wrapT)),t.texParameteri(a,t.TEXTURE_MAG_FILTER,s.convert(l.magFilter)),t.texParameteri(a,t.TEXTURE_MIN_FILTER,s.convert(l.minFilter))):(t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(l.wrapS!==hn||l.wrapT!==hn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",l),t.texParameteri(a,t.TEXTURE_MAG_FILTER,i(l.magFilter)),t.texParameteri(a,t.TEXTURE_MIN_FILTER,i(l.minFilter)),l.minFilter!==fn&&l.minFilter!==En&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",l)),p=r.get("EXT_texture_filter_anisotropic"),p){if(l.type===Cn&&null===r.get("OES_texture_float_linear"))return;if(l.type===Sn&&null===r.get("OES_texture_half_float_linear"))return;(1<l.anisotropy||o.get(l).__currentAnisotropy)&&(t.texParameterf(a,p.TEXTURE_MAX_ANISOTROPY_EXT,m(l.anisotropy,n.getMaxAnisotropy())),o.get(l).__currentAnisotropy=l.anisotropy)}}function T(r,o,l){r.__webglInit===void 0&&(r.__webglInit=!0,o.addEventListener("dispose",f),r.__webglTexture=t.createTexture(),d.textures++),a.activeTexture(t.TEXTURE0+l),a.bindTexture(t.TEXTURE_2D,r.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,o.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,o.unpackAlignment);var m=p(o.image,n.maxTextureSize);g(o)&&!1===c(m)&&(m=u(m));var h=c(m),M=s.convert(o.format),x=s.convert(o.type);A(t.TEXTURE_2D,o,h);var E=o.mipmaps,v;if(o.isDepthTexture){var T=t.DEPTH_COMPONENT;if(o.type===Cn){if(!w)throw new Error("Float Depth Texture only supported in WebGL2.0");T=t.DEPTH_COMPONENT32F}else w&&(T=t.DEPTH_COMPONENT16);o.format===kn&&T===t.DEPTH_COMPONENT&&o.type!==Nn&&o.type!==wn&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),o.type=Nn,x=s.convert(o.type)),o.format===Fn&&(T=t.DEPTH_STENCIL,o.type!==On&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),o.type=On,x=s.convert(o.type))),a.texImage2D(t.TEXTURE_2D,0,T,m.width,m.height,0,M,x,null)}else if(o.isDataTexture){if(0<E.length&&h){for(var b=0,i=E.length;b<i;b++)v=E[b],a.texImage2D(t.TEXTURE_2D,b,M,v.width,v.height,0,M,x,v.data);o.generateMipmaps=!1}else a.texImage2D(t.TEXTURE_2D,0,M,m.width,m.height,0,M,x,m.data);}else if(o.isCompressedTexture)for(var b=0,i=E.length;b<i;b++)v=E[b],o.format!==Un&&o.format!==Rn?-1<a.getCompressedTextureFormats().indexOf(M)?a.compressedTexImage2D(t.TEXTURE_2D,b,M,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):a.texImage2D(t.TEXTURE_2D,b,M,v.width,v.height,0,M,x,v.data);else if(0<E.length&&h){for(var b=0,i=E.length;b<i;b++)v=E[b],a.texImage2D(t.TEXTURE_2D,b,M,M,x,v);o.generateMipmaps=!1}else a.texImage2D(t.TEXTURE_2D,0,M,M,x,m);y(o,h)&&t.generateMipmap(t.TEXTURE_2D),r.__version=o.version,o.onUpdate&&o.onUpdate(o)}function b(r,i,n,l){var d=s.convert(i.texture.format),p=s.convert(i.texture.type);a.texImage2D(l,0,d,i.width,i.height,0,d,p,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,n,l,o.get(i.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function L(r,a){t.bindRenderbuffer(t.RENDERBUFFER,r),a.depthBuffer&&!a.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,a.width,a.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,r)):a.depthBuffer&&a.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,a.width,a.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,r)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,a.width,a.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function N(r,a){var i=a&&a.isWebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,r),!(a.depthTexture&&a.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");o.get(a.depthTexture).__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),v(a.depthTexture,0);var n=o.get(a.depthTexture).__webglTexture;if(a.depthTexture.format===kn)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,n,0);else if(a.depthTexture.format===Fn)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,n,0);else throw new Error("Unknown depthTexture format")}function D(r){var a=o.get(r),n=!0===r.isWebGLRenderTargetCube;if(r.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");N(a.__webglFramebuffer,r)}else if(n){a.__webglDepthbuffer=[];for(var s=0;6>s;s++)t.bindFramebuffer(t.FRAMEBUFFER,a.__webglFramebuffer[s]),a.__webglDepthbuffer[s]=t.createRenderbuffer(),L(a.__webglDepthbuffer[s],r)}else t.bindFramebuffer(t.FRAMEBUFFER,a.__webglFramebuffer),a.__webglDepthbuffer=t.createRenderbuffer(),L(a.__webglDepthbuffer,r);t.bindFramebuffer(t.FRAMEBUFFER,null)}var w="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=v,this.setTextureCube=function(r,l){var u=o.get(r);if(6===r.image.length)if(0<r.version&&u.__version!==r.version){u.__image__webglTextureCube||(r.addEventListener("dispose",f),u.__image__webglTextureCube=t.createTexture(),d.textures++),a.activeTexture(t.TEXTURE0+l),a.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY);for(var m=r&&r.isCompressedTexture,g=r.image[0]&&r.image[0].isDataTexture,h=[],M=0;6>M;M++)h[M]=m||g?g?r.image[M].image:r.image[M]:p(r.image[M],n.maxCubemapSize);var i=h[0],x=c(i),E=s.convert(r.format),v=s.convert(r.type);A(t.TEXTURE_CUBE_MAP,r,x);for(var M=0;6>M;M++)if(!m)g?a.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+M,0,E,h[M].width,h[M].height,0,E,v,h[M].data):a.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+M,0,E,E,v,h[M]);else for(var T=h[M].mipmaps,b=0,L=T.length,N;b<L;b++)N=T[b],r.format!==Un&&r.format!==Rn?-1<a.getCompressedTextureFormats().indexOf(E)?a.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+M,b,E,N.width,N.height,0,N.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):a.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+M,b,E,N.width,N.height,0,E,v,N.data);y(r,x)&&t.generateMipmap(t.TEXTURE_CUBE_MAP),u.__version=r.version,r.onUpdate&&r.onUpdate(r)}else a.activeTexture(t.TEXTURE0+l),a.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(r,i){a.activeTexture(t.TEXTURE0+i),a.bindTexture(t.TEXTURE_CUBE_MAP,o.get(r).__webglTexture)},this.setupRenderTarget=function(r){var n=o.get(r),s=o.get(r.texture);r.addEventListener("dispose",M),s.__webglTexture=t.createTexture(),d.textures++;var l=!0===r.isWebGLRenderTargetCube,p=c(r);if(l){n.__webglFramebuffer=[];for(var u=0;6>u;u++)n.__webglFramebuffer[u]=t.createFramebuffer()}else n.__webglFramebuffer=t.createFramebuffer();if(l){a.bindTexture(t.TEXTURE_CUBE_MAP,s.__webglTexture),A(t.TEXTURE_CUBE_MAP,r.texture,p);for(var u=0;6>u;u++)b(n.__webglFramebuffer[u],r,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+u);y(r.texture,p)&&t.generateMipmap(t.TEXTURE_CUBE_MAP),a.bindTexture(t.TEXTURE_CUBE_MAP,null)}else a.bindTexture(t.TEXTURE_2D,s.__webglTexture),A(t.TEXTURE_2D,r.texture,p),b(n.__webglFramebuffer,r,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),y(r.texture,p)&&t.generateMipmap(t.TEXTURE_2D),a.bindTexture(t.TEXTURE_2D,null);r.depthBuffer&&D(r)},this.updateRenderTargetMipmap=function(r){var i=r.texture,n=c(r);if(y(i,n)){var s=r.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,l=o.get(i).__webglTexture;a.bindTexture(s,l),t.generateMipmap(s),a.bindTexture(s,null)}}}function _t(){var t={};return{get:function(r){var a=r.uuid,i=t[a];return void 0===i&&(i={},t[a]=i),i},remove:function(r){delete t[r.uuid]},clear:function(){t={}}}}function jt(t,r,a){function i(r,a,o){var n=new Uint8Array(4),s=t.createTexture();t.bindTexture(r,s),t.texParameteri(r,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(r,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var l=0;l<o;l++)t.texImage2D(a+l,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,n);return s}function o(r){!0!==A[r]&&(t.enable(r),A[r]=!0)}function n(r){!1!==A[r]&&(t.disable(r),A[r]=!1)}function s(r,i,s,l,d,p,c,u){r===vo?n(t.BLEND):o(t.BLEND),r===No?(d=d||i,p=p||s,c=c||l,(i!==N||d!==C)&&(t.blendEquationSeparate(a.convert(i),a.convert(d)),N=i,C=d),(s!==D||l!==w||p!==S||c!==I)&&(t.blendFuncSeparate(a.convert(s),a.convert(l),a.convert(p),a.convert(c)),D=s,w=l,S=p,I=c)):((r!==L||u!==_)&&(r===To?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):r===bo?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):r===Lo?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA))),N=null,D=null,w=null,C=null,S=null,I=null),L=r,_=u}function l(r){j!==r&&(r?t.frontFace(t.CW):t.frontFace(t.CCW),j=r)}function d(r){r===so?n(t.CULL_FACE):(o(t.CULL_FACE),r!==O&&(r===lo?t.cullFace(t.BACK):r===po?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))),O=r}function p(r,a,i){r?(o(t.POLYGON_OFFSET_FILL),(R!==a||U!==i)&&(t.polygonOffset(a,i),R=a,U=i)):n(t.POLYGON_OFFSET_FILL)}function c(r){void 0===r&&(r=t.TEXTURE0+P-1),F!==r&&(t.activeTexture(r),F=r)}function u(r){!1===V.equals(r)&&(t.scissor(r.x,r.y,r.z,r.w),V.copy(r))}function m(r){!1===H.equals(r)&&(t.viewport(r.x,r.y,r.z,r.w),H.copy(r))}var g=new function(){var r=!1,i=new v,a=null,o=new v(0,0,0,0);return{setMask:function(i){a===i||r||(t.colorMask(i,i,i,i),a=i)},setLocked:function(t){r=t},setClear:function(n,r,s,l,a){!0===a&&(n*=l,r*=l,s*=l),i.set(n,r,s,l),!1===o.equals(i)&&(t.clearColor(n,r,s,l),o.copy(i))},reset:function(){r=!1,a=null,o.set(-1,0,0,0)}}},h=new function(){var r=!1,a=null,i=null,s=null;return{setTest:function(r){r?o(t.DEPTH_TEST):n(t.DEPTH_TEST)},setMask:function(i){a===i||r||(t.depthMask(i),a=i)},setFunc:function(r){i!==r&&(r?r===Vo?t.depthFunc(t.NEVER):r===Ho?t.depthFunc(t.ALWAYS):r===Qo?t.depthFunc(t.LESS):r===Yo?t.depthFunc(t.LEQUAL):r===Wo?t.depthFunc(t.EQUAL):r===Xo?t.depthFunc(t.GEQUAL):r===qo?t.depthFunc(t.GREATER):r===Zo?t.depthFunc(t.NOTEQUAL):t.depthFunc(t.LEQUAL):t.depthFunc(t.LEQUAL),i=r)},setLocked:function(t){r=t},setClear:function(r){s!==r&&(t.clearDepth(r),s=r)},reset:function(){r=!1,a=null,i=null,s=null}}},y=new function(){var r=!1,a=null,i=null,s=null,l=null,d=null,p=null,c=null,u=null;return{setTest:function(r){r?o(t.STENCIL_TEST):n(t.STENCIL_TEST)},setMask:function(i){a===i||r||(t.stencilMask(i),a=i)},setFunc:function(r,a,o){(i!==r||s!==a||l!==o)&&(t.stencilFunc(r,a,o),i=r,s=a,l=o)},setOp:function(r,a,i){(d!==r||p!==a||c!==i)&&(t.stencilOp(r,a,i),d=r,p=a,c=i)},setLocked:function(t){r=t},setClear:function(r){u!==r&&(t.clearStencil(r),u=r)},reset:function(){r=!1,a=null,i=null,s=null,l=null,d=null,p=null,c=null,u=null}}},f=t.getParameter(t.MAX_VERTEX_ATTRIBS),M=new Uint8Array(f),x=new Uint8Array(f),E=new Uint8Array(f),A={},T=null,b=null,L=null,N=null,D=null,w=null,C=null,S=null,I=null,_=!1,j=null,O=null,z=null,R=null,U=null,P=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),B=parseFloat(/^WebGL\ ([0-9])/.exec(t.getParameter(t.VERSION))[1]),k=1<=parseFloat(B),F=null,G={},V=new v,H=new v,Q={};return Q[t.TEXTURE_2D]=i(t.TEXTURE_2D,t.TEXTURE_2D,1),Q[t.TEXTURE_CUBE_MAP]=i(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),g.setClear(0,0,0,1),h.setClear(1),y.setClear(0),o(t.DEPTH_TEST),h.setFunc(Yo),l(!1),d(lo),o(t.CULL_FACE),o(t.BLEND),s(Ao),{buffers:{color:g,depth:h,stencil:y},initAttributes:function(){for(var t=0,r=M.length;t<r;t++)M[t]=0},enableAttribute:function(a){if(M[a]=1,0===x[a]&&(t.enableVertexAttribArray(a),x[a]=1),0!==E[a]){var i=r.get("ANGLE_instanced_arrays");i.vertexAttribDivisorANGLE(a,0),E[a]=0}},enableAttributeAndDivisor:function(a,i){if(M[a]=1,0===x[a]&&(t.enableVertexAttribArray(a),x[a]=1),E[a]!==i){var o=r.get("ANGLE_instanced_arrays");o.vertexAttribDivisorANGLE(a,i),E[a]=i}},disableUnusedAttributes:function(){for(var r=0,a=x.length;r!==a;++r)x[r]!==M[r]&&(t.disableVertexAttribArray(r),x[r]=0)},enable:o,disable:n,getCompressedTextureFormats:function(){if(null===T&&(T=[],r.get("WEBGL_compressed_texture_pvrtc")||r.get("WEBGL_compressed_texture_s3tc")||r.get("WEBGL_compressed_texture_etc1")))for(var a=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),o=0;o<a.length;o++)T.push(a[o]);return T},useProgram:function(r){return b!==r&&(t.useProgram(r),b=r,!0)},setBlending:s,setMaterial:function(r){r.side===yo?n(t.CULL_FACE):o(t.CULL_FACE),l(r.side===ho),!0===r.transparent?s(r.blending,r.blendEquation,r.blendSrc,r.blendDst,r.blendEquationAlpha,r.blendSrcAlpha,r.blendDstAlpha,r.premultipliedAlpha):s(vo),h.setFunc(r.depthFunc),h.setTest(r.depthTest),h.setMask(r.depthWrite),g.setMask(r.colorWrite),p(r.polygonOffset,r.polygonOffsetFactor,r.polygonOffsetUnits)},setFlipSided:l,setCullFace:d,setLineWidth:function(r){r!==z&&(k&&t.lineWidth(r),z=r)},setPolygonOffset:p,setScissorTest:function(r){r?o(t.SCISSOR_TEST):n(t.SCISSOR_TEST)},activeTexture:c,bindTexture:function(r,a){null===F&&c();var i=G[F];void 0===i&&(i={type:void 0,texture:void 0},G[F]=i),(i.type!==r||i.texture!==a)&&(t.bindTexture(r,a||Q[r]),i.type=r,i.texture=a)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:u,viewport:m,reset:function(){for(var r=0;r<x.length;r++)1===x[r]&&(t.disableVertexAttribArray(r),x[r]=0);A={},T=null,F=null,G={},b=null,L=null,j=null,O=null,g.reset(),h.reset(),y.reset()}}}function Ot(t,r,a){function i(r){if("highp"===r){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return"highp";r="mediump"}return"mediump"===r&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?"mediump":"lowp"}var o=a.precision===void 0?"highp":a.precision,n=i(o),s;n!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",n,"instead."),o=n);var l=!0===a.logarithmicDepthBuffer&&!!r.get("EXT_frag_depth"),d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_TEXTURE_SIZE),u=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),h=t.getParameter(t.MAX_VARYING_VECTORS),y=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),f=0<p,M=!!r.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==s)return s;var a=r.get("EXT_texture_filter_anisotropic");return s=null===a?0:t.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT),s},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:d,maxVertexTextures:p,maxTextureSize:c,maxCubemapSize:u,maxAttributes:m,maxVertexUniforms:g,maxVaryings:h,maxFragmentUniforms:y,vertexTextures:f,floatFragmentTextures:M,floatVertexTextures:f&&M}}function zt(t){Ie.call(this),this.cameras=t||[]}function Rt(t){function r(){if(null!==i&&i.isPresenting){var r=i.getEyeParameters("left"),o=r.renderWidth,n=r.renderHeight;m=t.getPixelRatio(),u=t.getSize(),t.setDrawingBufferSize(2*o,n,1)}else a.enabled&&t.setDrawingBufferSize(u.width,u.height,m)}var a=this,i=null,o=null;"VRFrameData"in window&&(o=new window.VRFrameData);var n=new N,s=new N,l=new N,d=new Ie;d.bounds=new v(0,0,0.5,1),d.layers.enable(1);var p=new Ie;p.bounds=new v(0.5,0,0.5,1),p.layers.enable(2);var c=new zt([d,p]);c.layers.enable(1),c.layers.enable(2);var u,m;window.addEventListener("vrdisplaypresentchange",r,!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return i},this.setDevice=function(t){t!==void 0&&(i=t)},this.getCamera=function(t){if(null===i)return t;i.depthNear=t.near,i.depthFar=t.far,i.getFrameData(o);var r=o.pose;null===r.position?t.position.set(0,0,0):t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.updateMatrixWorld();var a=i.stageParameters;if(this.standing&&a&&(s.fromArray(a.sittingToStandingTransform),l.getInverse(s),t.matrixWorld.multiply(s),t.matrixWorldInverse.multiply(l)),!1===i.isPresenting)return t;d.near=t.near,p.near=t.near,d.far=t.far,p.far=t.far,c.matrixWorld.copy(t.matrixWorld),c.matrixWorldInverse.copy(t.matrixWorldInverse),d.matrixWorldInverse.fromArray(o.leftViewMatrix),p.matrixWorldInverse.fromArray(o.rightViewMatrix),this.standing&&a&&(d.matrixWorldInverse.multiply(l),p.matrixWorldInverse.multiply(l));var u=t.parent;null!==u&&(n.getInverse(u.matrixWorld),d.matrixWorldInverse.multiply(n),p.matrixWorldInverse.multiply(n)),d.matrixWorld.getInverse(d.matrixWorldInverse),p.matrixWorld.getInverse(p.matrixWorldInverse),d.projectionMatrix.fromArray(o.leftProjectionMatrix),p.projectionMatrix.fromArray(o.rightProjectionMatrix),c.projectionMatrix.copy(d.projectionMatrix);var m=i.getLayers();if(m.length){var g=m[0];null!==g.leftBounds&&4===g.leftBounds.length&&d.bounds.fromArray(g.leftBounds),null!==g.rightBounds&&4===g.rightBounds.length&&p.bounds.fromArray(g.rightBounds)}return c},this.getStandingMatrix=function(){return s},this.submitFrame=function(){i&&i.isPresenting&&i.submitFrame()},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",r)}}function Ut(t){var r={};return{get:function(a){if(void 0!==r[a])return r[a];var i;return i="WEBGL_depth_texture"===a?t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture"):"EXT_texture_filter_anisotropic"===a?t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"):"WEBGL_compressed_texture_s3tc"===a?t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"):"WEBGL_compressed_texture_pvrtc"===a?t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"):"WEBGL_compressed_texture_etc1"===a?t.getExtension("WEBGL_compressed_texture_etc1"):t.getExtension(a),null===i&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported."),r[a]=i,i}}}function Pt(){function t(){c.value!==o&&(c.value=o,c.needsUpdate=0<n),a.numPlanes=n,a.numIntersection=0}function r(t,r,o,n){var s=null===t?0:t.length,l=null;if(0!==s){if(l=c.value,!0!==n||null===l){var u=o+4*s,m=r.matrixWorldInverse;p.getNormalMatrix(m),(null===l||l.length<u)&&(l=new Float32Array(u));for(var g=0,i=o;g!==s;++g,i+=4)d.copy(t[g]).applyMatrix4(m,p),d.normal.toArray(l,i),l[i+3]=d.constant}c.value=l,c.needsUpdate=!0}return a.numPlanes=s,l}var a=this,o=null,n=0,s=!1,l=!1,d=new Ae,p=new ve,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(t,a,i){var l=0!==t.length||a||0!==n||s;return s=a,o=r(t,i,0),n=t.length,l},this.beginShadows=function(){l=!0,r(null)},this.endShadows=function(){l=!1,t()},this.setState=function(a,d,p,u,m,g){if(!s||null===a||0===a.length||l&&!p)l?r(null):t();else{var h=l?0:n,y=4*h,f=m.clippingState||null;c.value=f,f=r(a,u,y,g);for(var M=0;M!==y;++M)f[M]=o[M];m.clippingState=f,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=h}}}function Bt(t,r){return{convert:function(a){var i;if(a===gn)return t.REPEAT;if(a===hn)return t.CLAMP_TO_EDGE;if(a===yn)return t.MIRRORED_REPEAT;if(a===fn)return t.NEAREST;if(a===Mn)return t.NEAREST_MIPMAP_NEAREST;if(a===xn)return t.NEAREST_MIPMAP_LINEAR;if(a===En)return t.LINEAR;if(a===vn)return t.LINEAR_MIPMAP_NEAREST;if(a===An)return t.LINEAR_MIPMAP_LINEAR;if(a===Tn)return t.UNSIGNED_BYTE;if(a===In)return t.UNSIGNED_SHORT_4_4_4_4;if(a===_n)return t.UNSIGNED_SHORT_5_5_5_1;if(a===jn)return t.UNSIGNED_SHORT_5_6_5;if(a===bn)return t.BYTE;if(a===Ln)return t.SHORT;if(a===Nn)return t.UNSIGNED_SHORT;if(a===Dn)return t.INT;if(a===wn)return t.UNSIGNED_INT;if(a===Cn)return t.FLOAT;if(a===Sn&&(i=r.get("OES_texture_half_float"),null!==i))return i.HALF_FLOAT_OES;if(a===zn)return t.ALPHA;if(a===Rn)return t.RGB;if(a===Un)return t.RGBA;if(a===Pn)return t.LUMINANCE;if(a===Bn)return t.LUMINANCE_ALPHA;if(a===kn)return t.DEPTH_COMPONENT;if(a===Fn)return t.DEPTH_STENCIL;if(a===Do)return t.FUNC_ADD;if(a===wo)return t.FUNC_SUBTRACT;if(a===Co)return t.FUNC_REVERSE_SUBTRACT;if(a===_o)return t.ZERO;if(a===jo)return t.ONE;if(a===Oo)return t.SRC_COLOR;if(a===zo)return t.ONE_MINUS_SRC_COLOR;if(a===Ro)return t.SRC_ALPHA;if(a===Uo)return t.ONE_MINUS_SRC_ALPHA;if(a===Po)return t.DST_ALPHA;if(a===Bo)return t.ONE_MINUS_DST_ALPHA;if(a===ko)return t.DST_COLOR;if(a===Fo)return t.ONE_MINUS_DST_COLOR;if(a===Go)return t.SRC_ALPHA_SATURATE;if((a===Gn||a===Vn||a===Hn||a===Qn)&&(i=r.get("WEBGL_compressed_texture_s3tc"),null!==i)){if(a===Gn)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===Vn)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===Hn)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===Qn)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((a===Yn||a===Wn||a===Xn||a===qn)&&(i=r.get("WEBGL_compressed_texture_pvrtc"),null!==i)){if(a===Yn)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===Wn)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===Xn)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===qn)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(a===Zn&&(i=r.get("WEBGL_compressed_texture_etc1"),null!==i))return i.COMPRESSED_RGB_ETC1_WEBGL;if((a===So||a===Io)&&(i=r.get("EXT_blend_minmax"),null!==i)){if(a===So)return i.MIN_EXT;if(a===Io)return i.MAX_EXT}return a===On&&(i=r.get("WEBGL_depth_texture"),null!==i)?i.UNSIGNED_INT_24_8_WEBGL:0}}}function kt(t){function r(){return null===re?fe:1}function a(){Oe=new Ut(_e),Oe.get("WEBGL_depth_texture"),Oe.get("OES_texture_float"),Oe.get("OES_texture_float_linear"),Oe.get("OES_texture_half_float"),Oe.get("OES_texture_half_float_linear"),Oe.get("OES_standard_derivatives"),Oe.get("ANGLE_instanced_arrays"),Oe.get("OES_element_index_uint")&&(We.MaxIndex=4294967296),Je=new Bt(_e,Oe),ze=new Ot(_e,Oe,t),Re=new jt(_e,Oe,Je),Re.scissor(pe.copy(xe).multiplyScalar(fe)),Re.viewport(le.copy(Me).multiplyScalar(fe)),Ue=new _t,Pe=new It(_e,Oe,Re,Ue,ze,Je,Se),Be=new Le(_e),ke=new ut(_e,Be,Se),Fe=new ht(ke,Ie),Ye=new dt(_e),Ve=new St(ee,Oe,ze),Ge=new gt,He=new st,Qe=new at(ee,Re,ke,W),Xe=new ct(_e,Oe,Ie),qe=new pt(_e,Oe,Ie),Ze=new ue(ee,_e,Re,Pe,ze),Ke=new ge(ee,_e,Re,Pe,ze),ee.info.programs=Ve.programs,ee.context=_e,ee.capabilities=ze,ee.extensions=Oe,ee.properties=Ue,ee.renderLists=He,ee.state=Re}function i(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),te=!0}function o(){console.log("THREE.WebGLRenderer: Context Restored."),te=!1,a()}function n(t){var r=t.target;r.removeEventListener("dispose",n),s(r)}function s(t){d(t),Ue.remove(t)}function d(t){var r=Ue.get(t).program;t.program=void 0,r!==void 0&&Ve.releaseProgram(r)}function c(t,r,a){t.render(function(t){ee.renderBufferImmediate(t,r,a)})}function g(t,r,a,i){if(a&&a.isInstancedBufferGeometry&&null===Oe.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");i===void 0&&(i=0),Re.initAttributes();var o=a.attributes,n=r.getAttributes(),s=t.defaultAttributeValues;for(var l in n){var d=n[l];if(0<=d){var p=o[l];if(p!==void 0){var c=p.normalized,u=p.itemSize,m=Be.get(p);if(m===void 0)continue;var g=m.buffer,h=m.type,y=m.bytesPerElement;if(p.isInterleavedBufferAttribute){var f=p.data,M=f.stride,x=p.offset;f&&f.isInstancedInterleavedBuffer?(Re.enableAttributeAndDivisor(d,f.meshPerAttribute),a.maxInstancedCount===void 0&&(a.maxInstancedCount=f.meshPerAttribute*f.count)):Re.enableAttribute(d),_e.bindBuffer(_e.ARRAY_BUFFER,g),_e.vertexAttribPointer(d,u,h,c,M*y,(i*M+x)*y)}else p.isInstancedBufferAttribute?(Re.enableAttributeAndDivisor(d,p.meshPerAttribute),void 0===a.maxInstancedCount&&(a.maxInstancedCount=p.meshPerAttribute*p.count)):Re.enableAttribute(d),_e.bindBuffer(_e.ARRAY_BUFFER,g),_e.vertexAttribPointer(d,u,h,c,0,i*u*y)}else if(s!==void 0){var E=s[l];if(E!==void 0)switch(E.length){case 2:_e.vertexAttrib2fv(d,E);break;case 3:_e.vertexAttrib3fv(d,E);break;case 4:_e.vertexAttrib4fv(d,E);break;default:_e.vertexAttrib1fv(d,E);}}}}Re.disableUnusedAttributes()}function h(){tt||(($e.getDevice()||window).requestAnimationFrame(y),tt=!0)}function y(t){null!==rt&&rt(t),($e.getDevice()||window).requestAnimationFrame(y)}function f(t,r,a){if(t.visible){var o=t.layers.test(r.layers);if(o)if(t.isLight)q.push(t),t.castShadow&&Z.push(t);else if(t.isSprite)(!t.frustumCulled||ve.intersectsSprite(t))&&J.push(t);else if(t.isLensFlare)$.push(t);else if(t.isImmediateRenderObject)a&&Ce.setFromMatrixPosition(t.matrixWorld).applyMatrix4(we),K.push(t,null,t.material,Ce.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||ve.intersectsObject(t))){a&&Ce.setFromMatrixPosition(t.matrixWorld).applyMatrix4(we);var n=Fe.update(t),s=t.material;if(Array.isArray(s))for(var d=n.groups,p=0,i=d.length;p<i;p++){var l=d[p],c=s[l.materialIndex];c&&c.visible&&K.push(t,n,c,Ce.z,l)}else s.visible&&K.push(t,n,s,Ce.z,null)}for(var u=t.children,p=0,i=u.length;p<i;p++)f(u[p],r,a)}}function x(t,r,a,o){for(var n=0,i=t.length;n<i;n++){var s=t[n],l=s.object,d=s.geometry,p=o===void 0?s.material:o,c=s.group;if(a.isArrayCamera){se=a;for(var u=a.cameras,m=0,g=u.length,h;m<g;m++)if(h=u[m],l.layers.test(h.layers)){var f=h.bounds,M=f.x*he,x=f.y*ye,y=f.z*he,v=f.w*ye;Re.viewport(le.set(M,x,y,v).multiplyScalar(fe)),E(l,r,h,d,p,c)}}else se=null,E(l,r,a,d,p,c)}}function E(t,r,a,i,o,n){if(t.onBeforeRender(ee,r,a,i,o,n),t.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){Re.setMaterial(o);var s=T(a,r.fog,o,t);oe="",c(t,s,o)}else ee.renderBufferDirect(a,r.fog,i,o,t,n);t.onAfterRender(ee,r,a,i,o,n)}function A(t,r,a){var o=Ue.get(t),s=Ve.getParameters(t,Ge.state,Z,r,Ae.numPlanes,Ae.numIntersection,a),l=Ve.getProgramCode(t,s),p=o.program,c=!0;if(p===void 0)t.addEventListener("dispose",n);else if(p.code!==l)d(t);else{if(s.shaderID!==void 0)return;c=!1}if(c){if(s.shaderID){var u=Is[s.shaderID];o.shader={name:t.type,uniforms:Cs.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else o.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(o.shader),p=Ve.acquireProgram(t,o.shader,s,l),o.program=p,t.program=p}var m=p.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var g=0;g<ee.maxMorphTargets;g++)0<=m["morphTarget"+g]&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var g=0;g<ee.maxMorphNormals;g++)0<=m["morphNormal"+g]&&t.numSupportedMorphNormals++}var i=o.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(o.numClippingPlanes=Ae.numPlanes,o.numIntersection=Ae.numIntersection,i.clippingPlanes=Ae.uniform),o.fog=r,o.lightsHash=Ge.state.hash,t.lights&&(i.ambientLightColor.value=Ge.state.ambient,i.directionalLights.value=Ge.state.directional,i.spotLights.value=Ge.state.spot,i.rectAreaLights.value=Ge.state.rectArea,i.pointLights.value=Ge.state.point,i.hemisphereLights.value=Ge.state.hemi,i.directionalShadowMap.value=Ge.state.directionalShadowMap,i.directionalShadowMatrix.value=Ge.state.directionalShadowMatrix,i.spotShadowMap.value=Ge.state.spotShadowMap,i.spotShadowMatrix.value=Ge.state.spotShadowMatrix,i.pointShadowMap.value=Ge.state.pointShadowMap,i.pointShadowMatrix.value=Ge.state.pointShadowMatrix);var h=o.program.getUniforms(),y=de.seqWithValue(h.seq,i);o.uniformsList=y}function T(t,r,a,i){me=0;var o=Ue.get(a);if(Ne&&(De||t!==ne)){var n=t===ne&&a.id===ie;Ae.setState(a.clippingPlanes,a.clipIntersection,a.clipShadows,t,o,n)}!1===a.needsUpdate&&(void 0===o.program?a.needsUpdate=!0:a.fog&&o.fog!==r?a.needsUpdate=!0:a.lights&&o.lightsHash!==Ge.state.hash?a.needsUpdate=!0:void 0!==o.numClippingPlanes&&(o.numClippingPlanes!==Ae.numPlanes||o.numIntersection!==Ae.numIntersection)&&(a.needsUpdate=!0)),a.needsUpdate&&(A(a,r,i),a.needsUpdate=!1);var s=!1,d=!1,c=!1,m=o.program,g=m.getUniforms(),h=o.shader.uniforms;if(Re.useProgram(m.program)&&(s=!0,d=!0,c=!0),a.id!==ie&&(ie=a.id,d=!0),s||t!==ne){if(g.setValue(_e,"projectionMatrix",t.projectionMatrix),ze.logarithmicDepthBuffer&&g.setValue(_e,"logDepthBufFC",2/(u(t.far+1)/p)),ne!==(se||t)&&(ne=se||t,d=!0,c=!0),a.isShaderMaterial||a.isMeshPhongMaterial||a.isMeshStandardMaterial||a.envMap){var y=g.map.cameraPosition;void 0!==y&&y.setValue(_e,Ce.setFromMatrixPosition(t.matrixWorld))}(a.isMeshPhongMaterial||a.isMeshLambertMaterial||a.isMeshBasicMaterial||a.isMeshStandardMaterial||a.isShaderMaterial||a.skinning)&&g.setValue(_e,"viewMatrix",t.matrixWorldInverse)}if(a.skinning){g.setOptional(_e,i,"bindMatrix"),g.setOptional(_e,i,"bindMatrixInverse");var f=i.skeleton;if(f){var x=f.bones;if(ze.floatVertexTextures){if(void 0===f.boneTexture){var E=M(4*x.length);E=Ms.nextPowerOfTwo(ao(E)),E=l(E,4);var v=new Float32Array(4*(E*E));v.set(f.boneMatrices);var T=new w(v,E,E,Un,Cn);f.boneMatrices=v,f.boneTexture=T,f.boneTextureSize=E}g.setValue(_e,"boneTexture",f.boneTexture),g.setValue(_e,"boneTextureSize",f.boneTextureSize)}else g.setOptional(_e,f,"boneMatrices")}}return d&&(g.setValue(_e,"toneMappingExposure",ee.toneMappingExposure),g.setValue(_e,"toneMappingWhitePoint",ee.toneMappingWhitePoint),a.lights&&k(h,c),r&&a.fog&&I(h,r),a.isMeshBasicMaterial?b(h,a):a.isMeshLambertMaterial?(b(h,a),_(h,a)):a.isMeshPhongMaterial?(b(h,a),a.isMeshToonMaterial?O(h,a):j(h,a)):a.isMeshStandardMaterial?(b(h,a),a.isMeshPhysicalMaterial?R(h,a):z(h,a)):a.isMeshDepthMaterial?(b(h,a),U(h,a)):a.isMeshDistanceMaterial?(b(h,a),P(h,a)):a.isMeshNormalMaterial?(b(h,a),B(h,a)):a.isLineBasicMaterial?(L(h,a),a.isLineDashedMaterial&&C(h,a)):a.isPointsMaterial?S(h,a):a.isShadowMaterial&&(h.color.value=a.color,h.opacity.value=a.opacity),void 0!==h.ltcMat&&(h.ltcMat.value=ws.LTC_MAT_TEXTURE),void 0!==h.ltcMag&&(h.ltcMag.value=ws.LTC_MAG_TEXTURE),de.upload(_e,o.uniformsList,h,ee)),g.setValue(_e,"modelViewMatrix",i.modelViewMatrix),g.setValue(_e,"normalMatrix",i.normalMatrix),g.setValue(_e,"modelMatrix",i.matrixWorld),m}function b(t,r){t.opacity.value=r.opacity,r.color&&(t.diffuse.value=r.color),r.emissive&&t.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(t.map.value=r.map),r.alphaMap&&(t.alphaMap.value=r.alphaMap),r.specularMap&&(t.specularMap.value=r.specularMap),r.envMap&&(t.envMap.value=r.envMap,t.flipEnvMap.value=r.envMap&&r.envMap.isCubeTexture?-1:1,t.reflectivity.value=r.reflectivity,t.refractionRatio.value=r.refractionRatio),r.lightMap&&(t.lightMap.value=r.lightMap,t.lightMapIntensity.value=r.lightMapIntensity),r.aoMap&&(t.aoMap.value=r.aoMap,t.aoMapIntensity.value=r.aoMapIntensity);var a;if(r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap&&(a=r.emissiveMap),void 0!==a){a.isWebGLRenderTarget&&(a=a.texture);var i=a.offset,o=a.repeat;t.offsetRepeat.value.set(i.x,i.y,o.x,o.y)}}function L(t,r){t.diffuse.value=r.color,t.opacity.value=r.opacity}function C(t,r){t.dashSize.value=r.dashSize,t.totalSize.value=r.dashSize+r.gapSize,t.scale.value=r.scale}function S(t,r){if(t.diffuse.value=r.color,t.opacity.value=r.opacity,t.size.value=r.size*fe,t.scale.value=0.5*ye,t.map.value=r.map,null!==r.map){var a=r.map.offset,i=r.map.repeat;t.offsetRepeat.value.set(a.x,a.y,i.x,i.y)}}function I(t,r){t.fogColor.value=r.color,r.isFog?(t.fogNear.value=r.near,t.fogFar.value=r.far):r.isFogExp2&&(t.fogDensity.value=r.density)}function _(t,r){r.emissiveMap&&(t.emissiveMap.value=r.emissiveMap)}function j(t,r){t.specular.value=r.specular,t.shininess.value=l(r.shininess,1e-4),r.emissiveMap&&(t.emissiveMap.value=r.emissiveMap),r.bumpMap&&(t.bumpMap.value=r.bumpMap,t.bumpScale.value=r.bumpScale),r.normalMap&&(t.normalMap.value=r.normalMap,t.normalScale.value.copy(r.normalScale)),r.displacementMap&&(t.displacementMap.value=r.displacementMap,t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias)}function O(t,r){j(t,r),r.gradientMap&&(t.gradientMap.value=r.gradientMap)}function z(t,r){t.roughness.value=r.roughness,t.metalness.value=r.metalness,r.roughnessMap&&(t.roughnessMap.value=r.roughnessMap),r.metalnessMap&&(t.metalnessMap.value=r.metalnessMap),r.emissiveMap&&(t.emissiveMap.value=r.emissiveMap),r.bumpMap&&(t.bumpMap.value=r.bumpMap,t.bumpScale.value=r.bumpScale),r.normalMap&&(t.normalMap.value=r.normalMap,t.normalScale.value.copy(r.normalScale)),r.displacementMap&&(t.displacementMap.value=r.displacementMap,t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias),r.envMap&&(t.envMapIntensity.value=r.envMapIntensity)}function R(t,r){t.clearCoat.value=r.clearCoat,t.clearCoatRoughness.value=r.clearCoatRoughness,z(t,r)}function U(t,r){r.displacementMap&&(t.displacementMap.value=r.displacementMap,t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias)}function P(t,r){r.displacementMap&&(t.displacementMap.value=r.displacementMap,t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias),t.referencePosition.value.copy(r.referencePosition),t.nearDistance.value=r.nearDistance,t.farDistance.value=r.farDistance}function B(t,r){r.bumpMap&&(t.bumpMap.value=r.bumpMap,t.bumpScale.value=r.bumpScale),r.normalMap&&(t.normalMap.value=r.normalMap,t.normalScale.value.copy(r.normalScale)),r.displacementMap&&(t.displacementMap.value=r.displacementMap,t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias)}function k(t,r){t.ambientLightColor.needsUpdate=r,t.directionalLights.needsUpdate=r,t.pointLights.needsUpdate=r,t.spotLights.needsUpdate=r,t.rectAreaLights.needsUpdate=r,t.hemisphereLights.needsUpdate=r}console.log("THREE.WebGLRenderer",no),t=t||{};var F=t.canvas===void 0?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):t.canvas,G=t.context===void 0?null:t.context,V=t.alpha!==void 0&&t.alpha,H=!(t.depth!==void 0)||t.depth,Q=!(t.stencil!==void 0)||t.stencil,Y=t.antialias!==void 0&&t.antialias,W=!(t.premultipliedAlpha!==void 0)||t.premultipliedAlpha,X=t.preserveDrawingBuffer!==void 0&&t.preserveDrawingBuffer,q=[],Z=[],K=null,J=[],$=[];this.domElement=F,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=tn,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ee=this,te=!1,re=null,ae=null,ie=-1,oe="",ne=null,se=null,le=new v,pe=new v,ce=null,me=0,he=F.width,ye=F.height,fe=1,Me=new v(0,0,he,ye),xe=new v(0,0,he,ye),Ee=!1,ve=new Te,Ae=new Pt,Ne=!1,De=!1,we=new N,Ce=new D,Se={geometries:0,textures:0},Ie={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Ie,memory:Se,programs:null};var _e;try{var je={alpha:V,depth:H,stencil:Q,antialias:Y,premultipliedAlpha:W,preserveDrawingBuffer:X};if(_e=G||F.getContext("webgl",je)||F.getContext("experimental-webgl",je),null===_e)if(null!==F.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";else throw"Error creating WebGL context.";void 0===_e.getShaderPrecisionFormat&&(_e.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),F.addEventListener("webglcontextlost",i,!1),F.addEventListener("webglcontextrestored",o,!1)}catch(t){console.error("THREE.WebGLRenderer: "+t)}var Oe,ze,Re,Ue,Pe,Be,ke,Fe,Ge,Ve,He,Qe,Ye,Xe,qe,Ze,Ke,Je;a();var $e=new Rt(ee);this.vr=$e;var et=new be(ee,Fe,ze.maxTextureSize);this.shadowMap=et,this.getContext=function(){return _e},this.getContextAttributes=function(){return _e.getContextAttributes()},this.forceContextLoss=function(){var t=Oe.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=Oe.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return fe},this.setPixelRatio=function(t){void 0===t||(fe=t,this.setSize(he,ye,!1))},this.getSize=function(){return{width:he,height:ye}},this.setSize=function(t,r,a){var i=$e.getDevice();return i&&i.isPresenting?void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):void(he=t,ye=r,F.width=t*fe,F.height=r*fe,!1!==a&&(F.style.width=t+"px",F.style.height=r+"px"),this.setViewport(0,0,t,r))},this.getDrawingBufferSize=function(){return{width:he*fe,height:ye*fe}},this.setDrawingBufferSize=function(t,r,a){he=t,ye=r,fe=a,F.width=t*a,F.height=r*a,this.setViewport(0,0,t,r)},this.setViewport=function(t,r,a,i){Me.set(t,ye-r-i,a,i),Re.viewport(le.copy(Me).multiplyScalar(fe))},this.setScissor=function(t,r,a,i){xe.set(t,ye-r-i,a,i),Re.scissor(pe.copy(xe).multiplyScalar(fe))},this.setScissorTest=function(t){Re.setScissorTest(Ee=t)},this.getClearColor=Qe.getClearColor,this.setClearColor=Qe.setClearColor,this.getClearAlpha=Qe.getClearAlpha,this.setClearAlpha=Qe.setClearAlpha,this.clear=function(t,r,a){var i=0;(t===void 0||t)&&(i|=_e.COLOR_BUFFER_BIT),(r===void 0||r)&&(i|=_e.DEPTH_BUFFER_BIT),(a===void 0||a)&&(i|=_e.STENCIL_BUFFER_BIT),_e.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,r,a,i){this.setRenderTarget(t),this.clear(r,a,i)},this.dispose=function(){F.removeEventListener("webglcontextlost",i,!1),F.removeEventListener("webglcontextrestored",o,!1),He.dispose(),$e.dispose()},this.renderBufferImmediate=function(t,r,a){Re.initAttributes();var o=Ue.get(t);t.hasPositions&&!o.position&&(o.position=_e.createBuffer()),t.hasNormals&&!o.normal&&(o.normal=_e.createBuffer()),t.hasUvs&&!o.uv&&(o.uv=_e.createBuffer()),t.hasColors&&!o.color&&(o.color=_e.createBuffer());var n=r.getAttributes();if(t.hasPositions&&(_e.bindBuffer(_e.ARRAY_BUFFER,o.position),_e.bufferData(_e.ARRAY_BUFFER,t.positionArray,_e.DYNAMIC_DRAW),Re.enableAttribute(n.position),_e.vertexAttribPointer(n.position,3,_e.FLOAT,!1,0,0)),t.hasNormals){if(_e.bindBuffer(_e.ARRAY_BUFFER,o.normal),!a.isMeshPhongMaterial&&!a.isMeshStandardMaterial&&!a.isMeshNormalMaterial&&!0===a.flatShading)for(var s=0,i=3*t.count;s<i;s+=9){var l=t.normalArray,d=(l[s+0]+l[s+3]+l[s+6])/3,p=(l[s+1]+l[s+4]+l[s+7])/3,c=(l[s+2]+l[s+5]+l[s+8])/3;l[s+0]=d,l[s+1]=p,l[s+2]=c,l[s+3]=d,l[s+4]=p,l[s+5]=c,l[s+6]=d,l[s+7]=p,l[s+8]=c}_e.bufferData(_e.ARRAY_BUFFER,t.normalArray,_e.DYNAMIC_DRAW),Re.enableAttribute(n.normal),_e.vertexAttribPointer(n.normal,3,_e.FLOAT,!1,0,0)}t.hasUvs&&a.map&&(_e.bindBuffer(_e.ARRAY_BUFFER,o.uv),_e.bufferData(_e.ARRAY_BUFFER,t.uvArray,_e.DYNAMIC_DRAW),Re.enableAttribute(n.uv),_e.vertexAttribPointer(n.uv,2,_e.FLOAT,!1,0,0)),t.hasColors&&a.vertexColors!==Mo&&(_e.bindBuffer(_e.ARRAY_BUFFER,o.color),_e.bufferData(_e.ARRAY_BUFFER,t.colorArray,_e.DYNAMIC_DRAW),Re.enableAttribute(n.color),_e.vertexAttribPointer(n.color,3,_e.FLOAT,!1,0,0)),Re.disableUnusedAttributes(),_e.drawArrays(_e.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,a,i,o,n,s){Re.setMaterial(o);var d=T(t,a,o,n),p=i.id+"_"+d.id+"_"+(!0===o.wireframe),c=!1;p!==oe&&(oe=p,c=!0),n.morphTargetInfluences&&(Ye.update(n,i,o,d),c=!0);var u=i.index,h=i.attributes.position,y=1;!0===o.wireframe&&(u=ke.getWireframeAttribute(i),y=2);var f=Xe,M;null!==u&&(M=Be.get(u),f=qe,f.setIndex(M)),c&&(g(o,d,i),null!==u&&_e.bindBuffer(_e.ELEMENT_ARRAY_BUFFER,M.buffer));var x=0;null===u?h!==void 0&&(x=h.count):x=u.count;var E=i.drawRange.start*y,v=i.drawRange.count*y,A=null===s?0:s.start*y,b=null===s?Infinity:s.count*y,L=l(E,A),N=m(x,E+v,A+b)-1,D=l(0,N-L+1);if(0!==D){if(n.isMesh){if(!0===o.wireframe)Re.setLineWidth(o.wireframeLinewidth*r()),f.setMode(_e.LINES);else switch(n.drawMode){case ns:f.setMode(_e.TRIANGLES);break;case ss:f.setMode(_e.TRIANGLE_STRIP);break;case ls:f.setMode(_e.TRIANGLE_FAN);}}else if(n.isLine){var w=o.linewidth;void 0===w&&(w=1),Re.setLineWidth(w*r()),n.isLineSegments?f.setMode(_e.LINES):n.isLineLoop?f.setMode(_e.LINE_LOOP):f.setMode(_e.LINE_STRIP)}else n.isPoints&&f.setMode(_e.POINTS);i&&i.isInstancedBufferGeometry?0<i.maxInstancedCount&&f.renderInstances(i,L,D):f.render(L,D)}},this.compile=function(t,r){q.length=0,Z.length=0,t.traverse(function(t){t.isLight&&(q.push(t),t.castShadow&&Z.push(t))}),Ge.setup(q,Z,r),t.traverse(function(a){if(a.material)if(Array.isArray(a.material))for(var o=0;o<a.material.length;o++)A(a.material[o],t.fog,a);else A(a.material,t.fog,a),T(r,t.fog,a.material,a)})};var tt=!1,rt=null;this.animate=function(t){rt=t,h()},this.render=function(t,r,a,i){if(!(r&&r.isCamera))return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!te){oe="",ie=-1,ne=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===r.parent&&r.updateMatrixWorld(),$e.enabled&&(r=$e.getCamera(r)),we.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ve.setFromMatrix(we),q.length=0,Z.length=0,J.length=0,$.length=0,De=this.localClippingEnabled,Ne=Ae.init(this.clippingPlanes,De,r),K=He.get(t,r),K.init(),f(t,r,ee.sortObjects),!0===ee.sortObjects&&K.sort(),Ne&&Ae.beginShadows(),et.render(Z,t,r),Ge.setup(q,Z,r),Ne&&Ae.endShadows(),Ie.frame++,Ie.calls=0,Ie.vertices=0,Ie.faces=0,Ie.points=0,void 0===a&&(a=null),this.setRenderTarget(a),Qe.render(K,t,r,i);var o=K.opaque,n=K.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&x(o,t,r,s),n.length&&x(n,t,r,s)}else o.length&&x(o,t,r),n.length&&x(n,t,r);Ke.render(J,t,r),Ze.render($,t,r,le),a&&Pe.updateRenderTargetMipmap(a),Re.buffers.depth.setTest(!0),Re.buffers.depth.setMask(!0),Re.buffers.color.setMask(!0),Re.setPolygonOffset(!1),$e.enabled&&$e.submitFrame()}},this.setFaceCulling=function(t,r){Re.setCullFace(t),Re.setFlipSided(r===co)},this.allocTextureUnit=function(){var t=me;return t>=ze.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+ze.maxTextures),me+=1,t},this.setTexture2D=function(){var t=!1;return function(r,a){r&&r.isWebGLRenderTarget&&(!t&&(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),r=r.texture),Pe.setTexture2D(r,a)}}(),this.setTexture=function(){var t=!1;return function(r,a){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),Pe.setTexture2D(r,a)}}(),this.setTextureCube=function(){var t=!1;return function(r,a){r&&r.isWebGLRenderTargetCube&&(!t&&(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),r=r.texture),r&&r.isCubeTexture||Array.isArray(r.image)&&6===r.image.length?Pe.setTextureCube(r,a):Pe.setTextureCubeDynamic(r,a)}}(),this.getRenderTarget=function(){return re},this.setRenderTarget=function(t){re=t,t&&void 0===Ue.get(t).__webglFramebuffer&&Pe.setupRenderTarget(t);var r=null,a=!1;if(t){var i=Ue.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(r=i[t.activeCubeFace],a=!0):r=i,le.copy(t.viewport),pe.copy(t.scissor),ce=t.scissorTest}else le.copy(Me).multiplyScalar(fe),pe.copy(xe).multiplyScalar(fe),ce=Ee;if(ae!==r&&(_e.bindFramebuffer(_e.FRAMEBUFFER,r),ae=r),Re.viewport(le),Re.scissor(pe),Re.setScissorTest(ce),a){var o=Ue.get(t.texture);_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,o.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,r,a,i,o,n){if(!(t&&t.isWebGLRenderTarget))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=Ue.get(t).__webglFramebuffer;if(s){var l=!1;s!==ae&&(_e.bindFramebuffer(_e.FRAMEBUFFER,s),l=!0);try{var d=t.texture,p=d.format,c=d.type;if(p!==Un&&Je.convert(p)!==_e.getParameter(_e.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(c!==Tn&&Je.convert(c)!==_e.getParameter(_e.IMPLEMENTATION_COLOR_READ_TYPE)&&!(c===Cn&&(Oe.get("OES_texture_float")||Oe.get("WEBGL_color_buffer_float")))&&!(c===Sn&&Oe.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");_e.checkFramebufferStatus(_e.FRAMEBUFFER)===_e.FRAMEBUFFER_COMPLETE?0<=r&&r<=t.width-i&&0<=a&&a<=t.height-o&&_e.readPixels(r,a,i,o,Je.convert(p),Je.convert(c),n):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&_e.bindFramebuffer(_e.FRAMEBUFFER,ae)}}}}function Ft(t,r){this.name="",this.color=new pe(t),this.density=r===void 0?2.5e-4:r}function Gt(t,r,a){this.name="",this.color=new pe(t),this.near=r===void 0?1:r,this.far=a===void 0?1e3:a}function Vt(){we.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Ht(t,r,a,i,o){we.call(this),this.lensFlares=[],this.positionScreen=new D,this.customUpdateCallback=void 0,t!==void 0&&this.add(t,r,a,i,o)}function Qt(t){he.call(this),this.type="SpriteMaterial",this.color=new pe(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Yt(t){we.call(this),this.type="Sprite",this.material=t===void 0?new Qt:t}function Wt(){we.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Xt(t,r){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===r)this.calculateInverses();else if(this.bones.length===r.length)this.boneInverses=r.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var a=0,i=this.bones.length;a<i;a++)this.boneInverses.push(new N)}}function qt(){we.call(this),this.type="Bone"}function Zt(t,r){rt.call(this,t,r),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new N,this.bindMatrixInverse=new N;var a=this.initBones(),i=new Xt(a);this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function Kt(t){he.call(this),this.type="LineBasicMaterial",this.color=new pe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function Jt(t,r,a){return 1===a?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new $t(t,r)):void(we.call(this),this.type="Line",this.geometry=t===void 0?new We:t,this.material=r===void 0?new Kt({color:16777215*Math.random()}):r)}function $t(t,r){Jt.call(this,t,r),this.type="LineSegments"}function er(t,r){Jt.call(this,t,r),this.type="LineLoop"}function tr(t){he.call(this),this.type="PointsMaterial",this.color=new pe(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function rr(t,r){we.call(this),this.type="Points",this.geometry=t===void 0?new We:t,this.material=r===void 0?new tr({color:16777215*Math.random()}):r}function ar(){we.call(this),this.type="Group"}function ir(t,r,a,i,o,n,s,l,d){function p(){requestAnimationFrame(p),t.readyState>=t.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}c.call(this,t,r,a,i,o,n,s,l,d),this.generateMipmaps=!1;var u=this;p()}function or(t,r,a,i,o,n,s,l,d,p,u,m){c.call(this,null,n,s,l,d,p,i,o,u,m),this.image={width:r,height:a},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function nr(t,r,a,i,o,n,s,l,d,p){if(p=void 0===p?kn:p,p!==kn&&p!==Fn)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===a&&p===kn&&(a=Nn),void 0===a&&p===Fn&&(a=On),c.call(this,null,i,o,n,s,l,p,a,d),this.image={width:t,height:r},this.magFilter=void 0===s?fn:s,this.minFilter=void 0===l?fn:l,this.flipY=!1,this.generateMipmaps=!1}function sr(t){We.call(this),this.type="WireframeGeometry";var r=[],a=[0,0],n={},s=["a","b","c"],d,i,p,c,o,u,g,h,y,f;if(t&&t.isGeometry){var M=t.faces;for(d=0,p=M.length;d<p;d++){var x=M[d];for(i=0;3>i;i++)g=x[s[i]],h=x[s[(i+1)%3]],a[0]=m(g,h),a[1]=l(g,h),y=a[0]+","+a[1],void 0===n[y]&&(n[y]={index1:a[0],index2:a[1]})}for(y in n)u=n[y],f=t.vertices[u.index1],r.push(f.x,f.y,f.z),f=t.vertices[u.index2],r.push(f.x,f.y,f.z)}else if(t&&t.isBufferGeometry){var E,v,A,T,b,L,N,w;if(f=new D,null!==t.index){for(E=t.attributes.position,v=t.index,A=t.groups,0===A.length&&(A=[{start:0,count:v.count,materialIndex:0}]),(c=0,o=A.length);c<o;++c)for(T=A[c],b=T.start,L=T.count,(d=b,p=b+L);d<p;d+=3)for(i=0;3>i;i++)g=v.getX(d+i),h=v.getX(d+(i+1)%3),a[0]=m(g,h),a[1]=l(g,h),y=a[0]+","+a[1],void 0===n[y]&&(n[y]={index1:a[0],index2:a[1]});for(y in n)u=n[y],f.fromBufferAttribute(E,u.index1),r.push(f.x,f.y,f.z),f.fromBufferAttribute(E,u.index2),r.push(f.x,f.y,f.z)}else for(E=t.attributes.position,d=0,p=E.count/3;d<p;d++)for(i=0;3>i;i++)N=3*d+i,f.fromBufferAttribute(E,N),r.push(f.x,f.y,f.z),w=3*d+(i+1)%3,f.fromBufferAttribute(E,w),r.push(f.x,f.y,f.z)}this.addAttribute("position",new Ve(r,3))}function lr(t,r,a){Oe.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:r,stacks:a},this.fromBufferGeometry(new dr(t,r,a)),this.mergeVertices()}function dr(t,r,o){We.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:r,stacks:o};var n=[],s=[],l=[],p=[],m=1e-5,g=new D,h=new D,y=new D,f=new D,M=new D,x=r+1,E,i;for(E=0;E<=o;E++){var A=E/o;for(i=0;i<=r;i++){var v=i/r;h=t(v,A,h),s.push(h.x,h.y,h.z),0<=v-m?(y=t(v-m,A,y),f.subVectors(h,y)):(y=t(v+m,A,y),f.subVectors(y,h)),0<=A-m?(y=t(v,A-m,y),M.subVectors(h,y)):(y=t(v,A+m,y),M.subVectors(y,h)),g.crossVectors(f,M).normalize(),l.push(g.x,g.y,g.z),p.push(v,A)}}for(E=0;E<o;E++)for(i=0;i<r;i++){var u=E*x+i,a=E*x+i+1,T=(E+1)*x+i+1,c=(E+1)*x+i;n.push(u,a,c),n.push(a,T,c)}this.setIndex(n),this.addAttribute("position",new Ve(s,3)),this.addAttribute("normal",new Ve(l,3)),this.addAttribute("uv",new Ve(p,2))}function pr(t,r,a,i){Oe.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:r,radius:a,detail:i},this.fromBufferGeometry(new cr(t,r,a,i)),this.mergeVertices()}function cr(t,r,a,i){function o(t,r,a,o){var n=y(2,o),l=[],d,i;for(d=0;d<=n;d++){l[d]=[];var p=t.clone().lerp(a,d/n),c=r.clone().lerp(a,d/n),u=n-d;for(i=0;i<=u;i++)l[d][i]=0===i&&d===n?p:p.clone().lerp(c,i/u)}for(d=0;d<n;d++)for(i=0;i<2*(n-d)-1;i++){var m=h(i/2);0===i%2?(s(l[d][m+1]),s(l[d+1][m]),s(l[d][m])):(s(l[d][m+1]),s(l[d+1][m+1]),s(l[d+1][m]))}}function n(){for(var t=0;t<E.length;t+=6){var r=E[t+0],a=E[t+2],i=E[t+4],o=l(r,a,i),n=m(r,a,i);0.9<o&&0.1>n&&(0.2>r&&(E[t+0]+=1),0.2>a&&(E[t+2]+=1),0.2>i&&(E[t+4]+=1))}}function s(t){x.push(t.x,t.y,t.z)}function d(r,a){var i=3*r;a.x=t[i+0],a.y=t[i+1],a.z=t[i+2]}function p(){for(var t=new D,r=new D,a=new D,o=new D,n=new f,s=new f,l=new f,d=0,i=0;d<x.length;d+=9,i+=6){t.set(x[d+0],x[d+1],x[d+2]),r.set(x[d+3],x[d+4],x[d+5]),a.set(x[d+6],x[d+7],x[d+8]),n.set(E[i+0],E[i+1]),s.set(E[i+2],E[i+3]),l.set(E[i+4],E[i+5]),o.copy(t).add(r).add(a).divideScalar(3);var p=g(o);u(n,i+0,t,p),u(s,i+2,r,p),u(l,i+4,a,p)}}function u(t,r,a,i){0>i&&1===t.x&&(E[r]=t.x-1),0===a.x&&0===a.z&&(E[r]=i/2/L+0.5)}function g(t){return ro(t.z,-t.x)}function c(t){return ro(-t.y,M(t.x*t.x+t.z*t.z))}We.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:r,radius:a,detail:i},a=a||1,i=i||0;var x=[],E=[];(function(t){for(var n=new D,a=new D,s=new D,l=0;l<r.length;l+=3)d(r[l+0],n),d(r[l+1],a),d(r[l+2],s),o(n,a,s,t)})(i),function(t){for(var r=new D,a=0;a<x.length;a+=3)r.x=x[a+0],r.y=x[a+1],r.z=x[a+2],r.normalize().multiplyScalar(t),x[a+0]=r.x,x[a+1]=r.y,x[a+2]=r.z}(a),function(){for(var t=new D,r=0;r<x.length;r+=3){t.x=x[r+0],t.y=x[r+1],t.z=x[r+2];var a=g(t)/2/L+0.5,i=c(t)/L+0.5;E.push(a,1-i)}p(),n()}(),this.addAttribute("position",new Ve(x,3)),this.addAttribute("normal",new Ve(x.slice(),3)),this.addAttribute("uv",new Ve(E,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function ur(t,r){Oe.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:r},this.fromBufferGeometry(new mr(t,r)),this.mergeVertices()}function mr(t,r){cr.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,r),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:r}}function gr(t,r){Oe.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:r},this.fromBufferGeometry(new hr(t,r)),this.mergeVertices()}function hr(t,r){cr.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,r),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:r}}function yr(t,r){Oe.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:r},this.fromBufferGeometry(new fr(t,r)),this.mergeVertices()}function fr(r,a){var i=(1+2.23606797749979)/2;cr.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],r,a),this.type="IcosahedronBufferGeometry",this.parameters={radius:r,detail:a}}function Mr(t,r){Oe.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:r},this.fromBufferGeometry(new xr(t,r)),this.mergeVertices()}function xr(a,i){var o=(1+2.23606797749979)/2,n=1/o;cr.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-o,0,-n,o,0,n,-o,0,n,o,-n,-o,0,-n,o,0,n,-o,0,n,o,0,-o,0,-n,o,0,-n,-o,0,n,o,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,i),this.type="DodecahedronBufferGeometry",this.parameters={radius:a,detail:i}}function Er(t,r,a,i,o,n){Oe.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:r,radius:a,radialSegments:i,closed:o},n!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new vr(t,r,a,i,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function vr(t,r,a,o,n){function s(n){var s=t.getPointAt(n/r),l=p.normals[n],d=p.binormals[n];for(i=0;i<=o;i++){var m=2*(i/o*L),y=E(m),f=-A(m);u.x=f*l.x+y*d.x,u.y=f*l.y+y*d.y,u.z=f*l.z+y*d.z,u.normalize(),h.push(u.x,u.y,u.z),c.x=s.x+a*u.x,c.y=s.y+a*u.y,c.z=s.z+a*u.z,g.push(c.x,c.y,c.z)}}function l(){for(i=1;i<=r;i++)for(x=1;x<=o;x++){var t=(o+1)*(i-1)+(x-1),a=(o+1)*i+(x-1),n=(o+1)*i+x,s=(o+1)*(i-1)+x;M.push(t,a,s),M.push(a,n,s)}}function d(){for(x=0;x<=r;x++)for(i=0;i<=o;i++)m.x=x/r,m.y=i/o,y.push(m.x,m.y)}We.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:r,radius:a,radialSegments:o,closed:n},r=r||64,a=a||1,o=o||8,n=n||!1;var p=t.computeFrenetFrames(r,n);this.tangents=p.tangents,this.normals=p.normals,this.binormals=p.binormals;var c=new D,u=new D,m=new f,g=[],h=[],y=[],M=[],x,i;(function(){for(x=0;x<r;x++)s(x);s(!1===n?r:0),d(),l()})(),this.setIndex(M),this.addAttribute("position",new Ve(g,3)),this.addAttribute("normal",new Ve(h,3)),this.addAttribute("uv",new Ve(y,2))}function Ar(t,r,a,i,o,n,s){Oe.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:r,tubularSegments:a,radialSegments:i,p:o,q:n},s!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Tr(t,r,a,i,o,n)),this.mergeVertices()}function Tr(t,r,o,n,s,l){function m(t,r,a,i,o){var n=A(t),s=E(t),l=a/r*t,d=A(l);o.x=0.5*(i*(2+d))*n,o.y=0.5*(i*(2+d)*s),o.z=0.5*(i*E(l))}We.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:r,tubularSegments:o,radialSegments:n,p:s,q:l},t=t||100,r=r||40,o=h(o)||64,n=h(n)||8,s=s||2,l=l||3;var g=[],y=[],f=[],M=[],x=new D,w=new D,C=new D,S=new D,I=new D,_=new D,T=new D,N,i;for(N=0;N<=o;++N){var j=2*(N/o*s*L);for(m(j,s,l,t,C),m(j+0.01,s,l,t,S),_.subVectors(S,C),T.addVectors(S,C),I.crossVectors(_,T),T.crossVectors(I,_),I.normalize(),T.normalize(),i=0;i<=n;++i){var u=2*(i/n*L),v=-r*A(u),O=r*E(u);x.x=C.x+(v*T.x+O*I.x),x.y=C.y+(v*T.y+O*I.y),x.z=C.z+(v*T.z+O*I.z),y.push(x.x,x.y,x.z),w.subVectors(x,C).normalize(),f.push(w.x,w.y,w.z),M.push(N/o),M.push(i/n)}}for(i=1;i<=o;i++)for(N=1;N<=n;N++){var z=(n+1)*(i-1)+(N-1),a=(n+1)*i+(N-1),b=(n+1)*i+N,c=(n+1)*(i-1)+N;g.push(z,a,c),g.push(a,b,c)}this.setIndex(g),this.addAttribute("position",new Ve(y,3)),this.addAttribute("normal",new Ve(f,3)),this.addAttribute("uv",new Ve(M,2))}function br(t,r,a,i,o){Oe.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:r,radialSegments:a,tubularSegments:i,arc:o},this.fromBufferGeometry(new Lr(t,r,a,i,o)),this.mergeVertices()}function Lr(t,r,o,n,s){We.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:r,radialSegments:o,tubularSegments:n,arc:s},t=t||100,r=r||40,o=h(o)||8,n=h(n)||6,s=s||2*L;var l=[],p=[],m=[],g=[],y=new D,f=new D,M=new D,x,T;for(x=0;x<=o;x++)for(T=0;T<=n;T++){var i=T/n*s,u=2*(x/o*L);f.x=(t+r*A(u))*A(i),f.y=(t+r*A(u))*E(i),f.z=r*E(u),p.push(f.x,f.y,f.z),y.x=t*A(i),y.y=t*E(i),M.subVectors(f,y).normalize(),m.push(M.x,M.y,M.z),g.push(T/n),g.push(x/o)}for(x=1;x<=o;x++)for(T=1;T<=n;T++){var v=(n+1)*x+T-1,a=(n+1)*(x-1)+T-1,b=(n+1)*(x-1)+T,c=(n+1)*x+T;l.push(v,a,c),l.push(a,b,c)}this.setIndex(l),this.addAttribute("position",new Ve(p,3)),this.addAttribute("normal",new Ve(m,3)),this.addAttribute("uv",new Ve(g,2))}function Nr(t,r){Oe.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:r},this.fromBufferGeometry(new Dr(t,r)),this.mergeVertices()}function Dr(t,r){"undefined"===typeof t||(We.call(this),this.type="ExtrudeBufferGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,r),this.computeVertexNormals())}function wr(t,r){Oe.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:r},this.fromBufferGeometry(new Cr(t,r)),this.mergeVertices()}function Cr(t,r){r=r||{};var a=r.font;if(!(a&&a.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Oe;var i=a.generateShapes(t,r.size,r.curveSegments);r.amount=r.height===void 0?50:r.height,r.bevelThickness===void 0&&(r.bevelThickness=10),r.bevelSize===void 0&&(r.bevelSize=8),r.bevelEnabled===void 0&&(r.bevelEnabled=!1),Dr.call(this,i,r),this.type="TextBufferGeometry"}function Sr(t,r,a,i,o,n,s){Oe.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:r,heightSegments:a,phiStart:i,phiLength:o,thetaStart:n,thetaLength:s},this.fromBufferGeometry(new Ir(t,r,a,i,o,n,s)),this.mergeVertices()}function Ir(t,r,i,o,n,s,p){We.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:r,heightSegments:i,phiStart:o,phiLength:n,thetaStart:s,thetaLength:p},t=t||50,r=l(3,h(r)||8),i=l(2,h(i)||6),o=o===void 0?0:o,n=n===void 0?2*L:n,s=s===void 0?0:s,p=p===void 0?L:p;var m=s+p,g=0,y=[],f=new D,M=new D,x=[],T=[],N=[],w=[],C,S;for(S=0;S<=i;S++){var I=[],_=S/i;for(C=0;C<=r;C++){var v=C/r;f.x=-t*A(o+v*n)*E(s+_*p),f.y=t*A(s+_*p),f.z=t*E(o+v*n)*E(s+_*p),T.push(f.x,f.y,f.z),M.set(f.x,f.y,f.z).normalize(),N.push(M.x,M.y,M.z),w.push(v,1-_),I.push(g++)}y.push(I)}for(S=0;S<i;S++)for(C=0;C<r;C++){var u=y[S][C+1],a=y[S][C],b=y[S+1][C],c=y[S+1][C+1];(0!==S||0<s)&&x.push(u,a,c),(S!==i-1||m<L)&&x.push(a,b,c)}this.setIndex(x),this.addAttribute("position",new Ve(T,3)),this.addAttribute("normal",new Ve(N,3)),this.addAttribute("uv",new Ve(w,2))}function _r(t,r,a,i,o,n){Oe.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:r,thetaSegments:a,phiSegments:i,thetaStart:o,thetaLength:n},this.fromBufferGeometry(new jr(t,r,a,i,o,n)),this.mergeVertices()}function jr(t,r,o,n,s,p){We.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:r,thetaSegments:o,phiSegments:n,thetaStart:s,thetaLength:p},t=t||20,r=r||50,s=s===void 0?0:s,p=p===void 0?2*L:p,o=o===void 0?8:l(3,o),n=n===void 0?1:l(1,n);var u=[],m=[],g=[],h=[],y=t,M=(r-t)/n,x=new D,v=new f,T,N,w;for(N=0;N<=n;N++){for(w=0;w<=o;w++)T=s+w/o*p,x.x=y*A(T),x.y=y*E(T),m.push(x.x,x.y,x.z),g.push(0,0,1),v.x=(x.x/r+1)/2,v.y=(x.y/r+1)/2,h.push(v.x,v.y);y+=M}for(N=0;N<n;N++){var i=N*(o+1);for(w=0;w<o;w++){T=w+i;var C=T,a=T+o+1,b=T+o+2,c=T+1;u.push(C,a,c),u.push(a,b,c)}}this.setIndex(u),this.addAttribute("position",new Ve(m,3)),this.addAttribute("normal",new Ve(g,3)),this.addAttribute("uv",new Ve(h,2))}function Or(t,r,a,i){Oe.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:r,phiStart:a,phiLength:i},this.fromBufferGeometry(new zr(t,r,a,i)),this.mergeVertices()}function zr(t,r,o,s){We.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:r,phiStart:o,phiLength:s},r=h(r)||12,o=o||0,s=s||2*L,s=Ms.clamp(s,0,2*L);var l=[],p=[],u=[],m=1/r,g=new D,y=new f,M,x,i;for(x=0;x<=r;x++){var v=o+x*m*s,T=E(v),N=A(v);for(i=0;i<=t.length-1;i++)g.x=t[i].x*T,g.y=t[i].y,g.z=t[i].x*N,p.push(g.x,g.y,g.z),y.x=x/r,y.y=i/(t.length-1),u.push(y.x,y.y)}for(x=0;x<r;x++)for(i=0;i<t.length-1;i++){M=i+x*t.length;var w=M,a=M+t.length,b=M+t.length+1,c=M+1;l.push(w,a,c),l.push(a,b,c)}if(this.setIndex(l),this.addAttribute("position",new Ve(p,3)),this.addAttribute("uv",new Ve(u,2)),this.computeVertexNormals(),s===2*L){var d=this.attributes.normal.array,C=new D,S=new D,I=new D;for(M=3*(r*t.length),x=0,i=0;x<t.length;x++,i+=3)C.x=d[i+0],C.y=d[i+1],C.z=d[i+2],S.x=d[M+i+0],S.y=d[M+i+1],S.z=d[M+i+2],I.addVectors(C,S).normalize(),d[i+0]=d[M+i+0]=I.x,d[i+1]=d[M+i+1]=I.y,d[i+2]=d[M+i+2]=I.z}}function Rr(t,r){Oe.call(this),this.type="ShapeGeometry","object"===("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),r=r.curveSegments),this.parameters={shapes:t,curveSegments:r},this.fromBufferGeometry(new Ur(t,r)),this.mergeVertices()}function Ur(t,r){function a(t){var d=n.length/3,u=t.extractPoints(r),m=u.shape,g=u.holes,h,i,y;if(!1===Rs.isClockWise(m))for(m=m.reverse(),h=0,i=g.length;h<i;h++)y=g[h],!0===Rs.isClockWise(y)&&(g[h]=y.reverse());var f=Rs.triangulateShape(m,g);for(h=0,i=g.length;h<i;h++)y=g[h],m=m.concat(y);for(h=0,i=m.length;h<i;h++){var M=m[h];n.push(M.x,M.y,0),s.push(0,0,1),l.push(M.x,M.y)}for(h=0,i=f.length;h<i;h++){var x=f[h],E=x[0]+d,a=x[1]+d,v=x[2]+d;o.push(E,a,v),p+=3}}We.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:r},r=r||12;var o=[],n=[],s=[],l=[],d=0,p=0;if(!1===Array.isArray(t))a(t);else for(var c=0;c<t.length;c++)a(t[c]),this.addGroup(d,p,c),d+=p,p=0;this.setIndex(o),this.addAttribute("position",new Ve(n,3)),this.addAttribute("normal",new Ve(s,3)),this.addAttribute("uv",new Ve(l,2))}function Pr(t,r){We.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:r},r=r===void 0?1:r;var a=[],o=A(Ms.DEG2RAD*r),n=[0,0],s={},d=["a","b","c"],p,c,u,g;t.isBufferGeometry?(g=new Oe,g.fromBufferGeometry(t)):g=t.clone(),g.mergeVertices(),g.computeFaceNormals();for(var h=g.vertices,y=g.faces,f=0,M=y.length,x;f<M;f++){x=y[f];for(var E=0;3>E;E++)p=x[d[E]],c=x[d[(E+1)%3]],n[0]=m(p,c),n[1]=l(p,c),u=n[0]+","+n[1],void 0===s[u]?s[u]={index1:n[0],index2:n[1],face1:f,face2:void 0}:s[u].face2=f}for(u in s){var v=s[u];if(v.face2===void 0||y[v.face1].normal.dot(y[v.face2].normal)<=o){var T=h[v.index1];a.push(T.x,T.y,T.z),T=h[v.index2],a.push(T.x,T.y,T.z)}}this.addAttribute("position",new Ve(a,3))}function Br(t,r,a,i,o,n,s,l){Oe.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:r,height:a,radialSegments:i,heightSegments:o,openEnded:n,thetaStart:s,thetaLength:l},this.fromBufferGeometry(new kr(t,r,a,i,o,n,s,l)),this.mergeVertices()}function kr(t,r,i,o,n,a,s,l){function d(a){var n=new f,d=new D,h=0,M=!0===a?t:r,v=!0===a?1:-1,b,x,L;for(x=y,b=1;b<=o;b++)c.push(0,T*v,0),m.push(0,v,0),g.push(0.5,0.5),y++;for(L=y,b=0;b<=o;b++){var w=b/o,C=w*l+s,S=A(C),I=E(C);d.x=M*I,d.y=T*v,d.z=M*S,c.push(d.x,d.y,d.z),m.push(0,v,0),n.x=0.5*S+0.5,n.y=0.5*I*v+0.5,g.push(n.x,n.y),y++}for(b=0;b<o;b++){var _=x+b,j=L+b;!0===a?u.push(j,j+1,_):u.push(j+1,j,_),h+=3}p.addGroup(N,h,!0===a?1:2),N+=h}We.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:r,height:i,radialSegments:o,heightSegments:n,openEnded:a,thetaStart:s,thetaLength:l};var p=this;t=t===void 0?20:t,r=r===void 0?20:r,i=i===void 0?100:i,o=h(o)||8,n=h(n)||1,a=a!==void 0&&a,s=s===void 0?0:s,l=l===void 0?2*L:l;var u=[],c=[],m=[],g=[],y=0,M=[],T=i/2,N=0;(function(){var h=new D,f=new D,L=0,w=(r-t)/i,C,x;for(x=0;x<=n;x++){var S=[],I=x/n,_=I*(r-t)+t;for(C=0;C<=o;C++){var j=C/o,O=j*l+s,z=E(O),R=A(O);f.x=_*z,f.y=-I*i+T,f.z=_*R,c.push(f.x,f.y,f.z),h.set(z,w,R).normalize(),m.push(h.x,h.y,h.z),g.push(j,1-I),S.push(y++)}M.push(S)}for(C=0;C<o;C++)for(x=0;x<n;x++){var U=M[x][C],a=M[x+1][C],b=M[x+1][C+1],P=M[x][C+1];u.push(U,a,P),u.push(a,b,P),L+=6}p.addGroup(N,L,0),N+=L})(),!1===a&&(0<t&&d(!0),0<r&&d(!1)),this.setIndex(u),this.addAttribute("position",new Ve(c,3)),this.addAttribute("normal",new Ve(m,3)),this.addAttribute("uv",new Ve(g,2))}function Fr(t,r,a,i,o,n,s){Br.call(this,0,t,r,a,i,o,n,s),this.type="ConeGeometry",this.parameters={radius:t,height:r,radialSegments:a,heightSegments:i,openEnded:o,thetaStart:n,thetaLength:s}}function Gr(t,r,a,i,o,n,s){kr.call(this,0,t,r,a,i,o,n,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:r,radialSegments:a,heightSegments:i,openEnded:o,thetaStart:n,thetaLength:s}}function Vr(t,r,a,i){Oe.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:r,thetaStart:a,thetaLength:i},this.fromBufferGeometry(new Hr(t,r,a,i)),this.mergeVertices()}function Hr(t,r,a,o){We.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:r,thetaStart:a,thetaLength:o},t=t||50,r=r===void 0?8:l(3,r),a=a===void 0?0:a,o=o===void 0?2*L:o;var n=[],d=[],p=[],c=[],u=new D,m=new f,g,i;for(d.push(0,0,0),p.push(0,0,1),c.push(0.5,0.5),(i=0,g=3);i<=r;i++,g+=3){var s=a+i/r*o;u.x=t*A(s),u.y=t*E(s),d.push(u.x,u.y,u.z),p.push(0,0,1),m.x=(d[g]/t+1)/2,m.y=(d[g+1]/t+1)/2,c.push(m.x,m.y)}for(g=1;g<=r;g++)n.push(g,g+1,0);this.setIndex(n),this.addAttribute("position",new Ve(d,3)),this.addAttribute("normal",new Ve(p,3)),this.addAttribute("uv",new Ve(c,2))}function Qr(t){he.call(this),this.type="ShadowMaterial",this.color=new pe(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(t)}function Yr(t){ye.call(this,t),this.type="RawShaderMaterial"}function Wr(t){he.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new pe(16777215),this.roughness=0.5,this.metalness=0.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new f(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Xr(t){Wr.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=0.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function qr(t){he.call(this),this.type="MeshPhongMaterial",this.color=new pe(16777215),this.specular=new pe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new f(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ko,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Zr(t){qr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Kr(t){he.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new f(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Jr(t){he.call(this),this.type="MeshLambertMaterial",this.color=new pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ko,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function $r(t){Kt.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function ea(t,r,a){var i=this,o=!1,n=0,s=0;this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=a,this.itemStart=function(t){s++,!1===o&&i.onStart!==void 0&&i.onStart(t,n,s),o=!0},this.itemEnd=function(t){n++,i.onProgress!==void 0&&i.onProgress(t,n,s),n===s&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(t){i.onError!==void 0&&i.onError(t)}}function ta(t){this.manager=t===void 0?ks:t}function ra(t){this.manager=t===void 0?ks:t,this._parser=null}function aa(t){this.manager=t===void 0?ks:t,this._parser=null}function ia(t){this.manager=t===void 0?ks:t}function oa(t){this.manager=t===void 0?ks:t}function na(t){this.manager=t===void 0?ks:t}function sa(t,r){we.call(this),this.type="Light",this.color=new pe(t),this.intensity=r===void 0?1:r,this.receiveShadow=void 0}function la(t,r,a){sa.call(this,t,a),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(we.DefaultUp),this.updateMatrix(),this.groundColor=new pe(r)}function da(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new f(512,512),this.map=null,this.matrix=new N}function pa(){da.call(this,new Ie(50,1,0.5,500))}function ca(t,r,a,i,o,n){sa.call(this,t,r),this.type="SpotLight",this.position.copy(we.DefaultUp),this.updateMatrix(),this.target=new we,Object.defineProperty(this,"power",{get:function(){return this.intensity*L},set:function(t){this.intensity=t/L}}),this.distance=a===void 0?0:a,this.angle=i===void 0?L/3:i,this.penumbra=o===void 0?0:o,this.decay=n===void 0?1:n,this.shadow=new pa}function ua(t,r,a,i){sa.call(this,t,r),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*L},set:function(t){this.intensity=t/(4*L)}}),this.distance=a===void 0?0:a,this.decay=i===void 0?1:i,this.shadow=new da(new Ie(90,1,0.5,500))}function ma(){da.call(this,new Se(-5,5,5,-5,0.5,500))}function ga(t,r){sa.call(this,t,r),this.type="DirectionalLight",this.position.copy(we.DefaultUp),this.updateMatrix(),this.target=new we,this.shadow=new ma}function ha(t,r){sa.call(this,t,r),this.type="AmbientLight",this.castShadow=void 0}function ya(t,r,a,i){sa.call(this,t,r),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=a===void 0?10:a,this.height=i===void 0?10:i}function fa(t,r,a,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i===void 0?new r.constructor(a):i,this.sampleValues=r,this.valueSize=a}function Ma(t,r,a,i){fa.call(this,t,r,a,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function xa(t,r,a,i){fa.call(this,t,r,a,i)}function Ea(t,r,a,i){fa.call(this,t,r,a,i)}function va(t,r,a,i){if(t===void 0)throw new Error("track name is undefined");if(void 0===r||0===r.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=Fs.convertArray(r,this.TimeBufferType),this.values=Fs.convertArray(a,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function Aa(t,r,a,i){va.call(this,t,r,a,i)}function Ta(t,r,a,i){fa.call(this,t,r,a,i)}function ba(t,r,a,i){va.call(this,t,r,a,i)}function La(t,r,a,i){va.call(this,t,r,a,i)}function Na(t,r,a,i){va.call(this,t,r,a,i)}function Da(t,r,a){va.call(this,t,r,a)}function wa(t,r,a,i){va.call(this,t,r,a,i)}function Ca(){va.apply(this,arguments)}function Sa(t,r,a){this.name=t,this.tracks=a,this.duration=r===void 0?-1:r,this.uuid=Ms.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function Ia(t){this.manager=t===void 0?ks:t,this.textures={}}function _a(t){this.manager=t===void 0?ks:t}function ja(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Oa(t){"boolean"===typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=t===void 0?ks:t,this.withCredentials=!1}function za(t){this.manager=t===void 0?ks:t,this.texturePath=""}function Ra(r,t,a,i,o){var n=0.5*(i-t),s=0.5*(o-a),l=r*r;return(2*a-2*i+n+s)*(r*l)+(-3*a+3*i-2*n-s)*l+n*r+a}function Ua(r,t){var a=1-r;return a*a*t}function Pa(r,t){return 2*(1-r)*r*t}function Ba(r,t){return r*r*t}function ka(r,t,a,i){return Ua(r,t)+Pa(r,a)+Ba(r,i)}function Fa(r,t){var a=1-r;return a*a*a*t}function Ga(r,t){var a=1-r;return 3*a*a*r*t}function Va(r,t){return 3*(1-r)*r*r*t}function Ha(r,t){return r*r*r*t}function Qa(r,t,a,i,o){return Fa(r,t)+Ga(r,a)+Va(r,i)+Ha(r,o)}function Ya(){this.arcLengthDivisions=200}function Wa(t,r){Ya.call(this),this.v1=t,this.v2=r}function Xa(){Ya.call(this),this.curves=[],this.autoClose=!1}function qa(t,r,a,i,o,n,s,l){Ya.call(this),this.aX=t,this.aY=r,this.xRadius=a,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=n,this.aClockwise=s,this.aRotation=l||0}function Za(t){Ya.call(this),this.points=t===void 0?[]:t}function Ka(t,r,a,i){Ya.call(this),this.v0=t,this.v1=r,this.v2=a,this.v3=i}function Ja(t,r,a){Ya.call(this),this.v0=t,this.v1=r,this.v2=a}function $a(t){Xa.call(this),this.currentPoint=new f,t&&this.fromPoints(t)}function ei(){$a.apply(this,arguments),this.holes=[]}function ti(){this.subPaths=[],this.currentPath=null}function ri(t){this.data=t}function ai(t){this.manager=t===void 0?ks:t}function ii(t){this.manager=t===void 0?ks:t}function oi(){this.type="StereoCamera",this.aspect=1,this.eyeSep=0.064,this.cameraL=new Ie,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ie,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function ni(t,r,a){we.call(this),this.type="CubeCamera";var i=90,o=1,n=new Ie(i,o,t,r);n.up.set(0,-1,0),n.lookAt(new D(1,0,0)),this.add(n);var s=new Ie(i,o,t,r);s.up.set(0,-1,0),s.lookAt(new D(-1,0,0)),this.add(s);var l=new Ie(i,o,t,r);l.up.set(0,0,1),l.lookAt(new D(0,1,0)),this.add(l);var d=new Ie(i,o,t,r);d.up.set(0,0,-1),d.lookAt(new D(0,-1,0)),this.add(d);var p=new Ie(i,o,t,r);p.up.set(0,-1,0),p.lookAt(new D(0,0,1)),this.add(p);var c=new Ie(i,o,t,r);c.up.set(0,-1,0),c.lookAt(new D(0,0,-1)),this.add(c);this.renderTarget=new T(a,a,{format:Rn,magFilter:En,minFilter:En}),this.renderTarget.texture.name="CubeCamera",this.update=function(t,r){null===this.parent&&this.updateMatrixWorld();var a=this.renderTarget,i=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,a.activeCubeFace=0,t.render(r,n,a),a.activeCubeFace=1,t.render(r,s,a),a.activeCubeFace=2,t.render(r,l,a),a.activeCubeFace=3,t.render(r,d,a),a.activeCubeFace=4,t.render(r,p,a),a.texture.generateMipmaps=i,a.activeCubeFace=5,t.render(r,c,a),t.setRenderTarget(null)},this.clear=function(t,r,a,o){for(var n=this.renderTarget,s=0;6>s;s++)n.activeCubeFace=s,t.setRenderTarget(n),t.clear(r,a,o);t.setRenderTarget(null)}}function si(){we.call(this),this.type="AudioListener",this.context=Xs.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function li(t){we.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function di(t){li.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function pi(t,r){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=r===void 0?2048:r,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function ci(t,r,a){this.binding=t,this.valueSize=a;var i=Float64Array,o;"quaternion"===r?o=this._slerp:"string"===r||"bool"===r?(i=Array,o=this._select):o=this._lerp;this.buffer=new i(4*a),this._mixBufferRegion=o,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function ui(t,r,a){var i=a||mi.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,i)}function mi(t,r,a){this.path=r,this.parsedPath=a||mi.parseTrackName(r),this.node=mi.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function gi(){this.uuid=Ms.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var r=0,a=arguments.length;r!==a;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function hi(t,r,a){this._mixer=t,this._clip=r,this._localRoot=a||null;for(var o=r.tracks,n=o.length,s=Array(n),l={endingStart:as,endingEnd:as},d=0,i;d!==n;++d)i=o[d].createInterpolant(null),s[d]=i,i.settings=l;this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Jn,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function yi(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function fi(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Mi(){We.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function xi(t,r,a,i){this.uuid=Ms.generateUUID(),this.data=t,this.itemSize=r,this.offset=a,this.normalized=!0===i}function Ei(t,r){this.uuid=Ms.generateUUID(),this.array=t,this.stride=r,this.count=t===void 0?0:t.length/r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function vi(t,r,a){Ei.call(this,t,r),this.meshPerAttribute=a||1}function Ai(t,r,a){ze.call(this,t,r),this.meshPerAttribute=a||1}function Ti(t,r,a,i){this.ray=new $e(t,r),this.near=a||0,this.far=i||Infinity,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function bi(t,r){return t.distance-r.distance}function Li(t,r,a,o){if(!1!==t.visible&&(t.raycast(r,a),!0===o))for(var n=t.children,s=0,i=n.length;s<i;s++)Li(n[s],r,a,!0)}function Ni(t){this.autoStart=!(t!==void 0)||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Di(t,r,a){return this.radius=void 0===t?1:t,this.phi=void 0===r?0:r,this.theta=void 0===a?0:a,this}function wi(t,r,a){return this.radius=void 0===t?1:t,this.theta=void 0===r?0:r,this.y=void 0===a?0:a,this}function Ci(t){we.call(this),this.material=t,this.render=function(){}}function Si(t,r,a,i){this.object=t,this.size=r===void 0?1:r;var o=a===void 0?16711680:a,n=i===void 0?1:i,s=0,l=this.object.geometry;l&&l.isGeometry?s=3*l.faces.length:l&&l.isBufferGeometry&&(s=l.attributes.normal.count);var d=new We,p=new Ve(3*(2*s),3);d.addAttribute("position",p),$t.call(this,d,new Kt({color:o,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function Ii(t,r){we.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;for(var a=new We,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,i=1,s=32;n<s;n++,i++){var l=2*(n/s*L),d=2*(i/s*L);o.push(A(l),E(l),1,A(d),E(d),1)}a.addAttribute("position",new Ve(o,3));var p=new Kt({fog:!1});this.cone=new $t(a,p),this.add(this.cone),this.update()}function _i(t){var r=[];t&&t.isBone&&r.push(t);for(var a=0;a<t.children.length;a++)r.push.apply(r,_i(t.children[a]));return r}function ji(t){for(var r=_i(t),a=new We,o=[],n=[],s=new pe(0,0,1),l=new pe(0,1,0),d=0,i;d<r.length;d++)i=r[d],i.parent&&i.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),n.push(s.r,s.g,s.b),n.push(l.r,l.g,l.b));a.addAttribute("position",new Ve(o,3)),a.addAttribute("color",new Ve(n,3));var p=new Kt({vertexColors:Eo,depthTest:!1,depthWrite:!1,transparent:!0});$t.call(this,a,p),this.root=t,this.bones=r,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.onBeforeRender()}function Oi(t,r,a){this.light=t,this.light.updateMatrixWorld(),this.color=a;var i=new Ir(r,4,2),o=new Je({wireframe:!0,fog:!1});rt.call(this,i,o),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function zi(t,r){we.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var a=new Kt({fog:!1}),i=new We;i.addAttribute("position",new ze(new Float32Array(15),3)),this.line=new Jt(i,a),this.add(this.line),this.update()}function Ri(t,r,a){we.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=a;var i=new hr(r);i.rotateY(0.5*L),this.material=new Je({wireframe:!0,fog:!1}),this.color===void 0&&(this.material.vertexColors=Eo);var o=i.getAttribute("position"),n=new Float32Array(3*o.count);i.addAttribute("color",new ze(n,3)),this.add(new rt(i,this.material)),this.update()}function Ui(t,r,a,o){t=t||10,r=r||10,a=new pe(a===void 0?4473924:a),o=new pe(o===void 0?8947848:o);for(var n=r/2,s=t/r,l=t/2,d=[],p=[],c=0,i=0,u=-l;c<=r;c++,u+=s){d.push(-l,0,u,l,0,u),d.push(u,0,-l,u,0,l);var m=c===n?a:o;m.toArray(p,i),i+=3,m.toArray(p,i),i+=3,m.toArray(p,i),i+=3,m.toArray(p,i),i+=3}var g=new We;g.addAttribute("position",new Ve(d,3)),g.addAttribute("color",new Ve(p,3));var h=new Kt({vertexColors:Eo});$t.call(this,g,h)}function Pi(t,a,o,n,s,l){t=t||10,a=a||16,o=o||8,n=n||64,s=new pe(s===void 0?4473924:s),l=new pe(l===void 0?8947848:l);var d=[],p=[],c,u,m,g,i,h,r;for(g=0;g<=a;g++)m=g/a*(2*L),c=E(m)*t,u=A(m)*t,d.push(0,0,0),d.push(c,0,u),r=1&g?s:l,p.push(r.r,r.g,r.b),p.push(r.r,r.g,r.b);for(g=0;g<=o;g++)for(r=1&g?s:l,h=t-t/o*g,i=0;i<n;i++)m=i/n*(2*L),c=E(m)*h,u=A(m)*h,d.push(c,0,u),p.push(r.r,r.g,r.b),m=(i+1)/n*(2*L),c=E(m)*h,u=A(m)*h,d.push(c,0,u),p.push(r.r,r.g,r.b);var y=new We;y.addAttribute("position",new Ve(d,3)),y.addAttribute("color",new Ve(p,3));var f=new Kt({vertexColors:Eo});$t.call(this,y,f)}function Bi(t,r,a,i){this.object=t,this.size=r===void 0?1:r;var o=a===void 0?16776960:a,n=i===void 0?1:i,s=0,l=this.object.geometry;l&&l.isGeometry?s=l.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var d=new We,p=new Ve(3*(2*s),3);d.addAttribute("position",p),$t.call(this,d,new Kt({color:o,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function ki(t,r,a){we.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=a,r===void 0&&(r=1);var i=new We;i.addAttribute("position",new Ve([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));var o=new Kt({fog:!1});this.lightPlane=new Jt(i,o),this.add(this.lightPlane),i=new We,i.addAttribute("position",new Ve([0,0,0,0,0,1],3)),this.targetLine=new Jt(i,o),this.add(this.targetLine),this.update()}function Fi(t){function r(t,r,a){i(t,a),i(r,a)}function i(t,r){n.push(0,0,0),s.push(r.r,r.g,r.b),l[t]===void 0&&(l[t]=[]),l[t].push(n.length/3-1)}var a=new We,o=new Kt({color:16777215,vertexColors:xo}),n=[],s=[],l={},d=new pe(16755200),p=new pe(16711680),c=new pe(43775),u=new pe(16777215),m=new pe(3355443);r("n1","n2",d),r("n2","n4",d),r("n4","n3",d),r("n3","n1",d),r("f1","f2",d),r("f2","f4",d),r("f4","f3",d),r("f3","f1",d),r("n1","f1",d),r("n2","f2",d),r("n3","f3",d),r("n4","f4",d),r("p","n1",p),r("p","n2",p),r("p","n3",p),r("p","n4",p),r("u1","u2",c),r("u2","u3",c),r("u3","u1",c),r("c","t",u),r("p","c",m),r("cn1","cn2",m),r("cn3","cn4",m),r("cf1","cf2",m),r("cf3","cf4",m),a.addAttribute("position",new Ve(n,3)),a.addAttribute("color",new Ve(s,3)),$t.call(this,a,o),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update()}function Gi(t,r){this.object=t,r===void 0&&(r=16776960);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),o=new We;o.setIndex(new ze(a,1)),o.addAttribute("position",new ze(i,3)),$t.call(this,o,new Kt({color:r})),this.matrixAutoUpdate=!1,this.update()}function Vi(t,r){this.type="Box3Helper",this.box=t;var a=r===void 0?16776960:r,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new We;o.setIndex(new ze(i,1)),o.addAttribute("position",new Ve([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),$t.call(this,o,new Kt({color:a})),this.geometry.computeBoundingSphere(),this.onBeforeRender()}function Hi(t,r,a){this.type="PlaneHelper",this.plane=t,this.size=r===void 0?1:r;var i=a===void 0?16776960:a,o=new We;o.addAttribute("position",new Ve([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),o.computeBoundingSphere(),Jt.call(this,o,new Kt({color:i}));var n=new We;n.addAttribute("position",new Ve([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),n.computeBoundingSphere(),this.add(new rt(n,new Je({color:i,opacity:0.2,transparent:!0,depthWrite:!1}))),this.onBeforeRender()}function Qi(t,r,a,i,o,n){we.call(this),i===void 0&&(i=16776960),a===void 0&&(a=1),o===void 0&&(o=0.2*a),n===void 0&&(n=0.2*o),Zs===void 0&&(Zs=new We,Zs.addAttribute("position",new Ve([0,0,0,0,1,0],3)),Ks=new kr(0,0.5,1,5,1),Ks.translate(0,-0.5,0)),this.position.copy(r),this.line=new Jt(Zs,new Kt({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new rt(Ks,new Je({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(a,o,n)}function Yi(t){t=t||1;var r=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],a=new We;a.addAttribute("position",new Ve(r,3)),a.addAttribute("color",new Ve([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1],3));var i=new Kt({vertexColors:Eo});$t.call(this,a,i)}function Wi(){function t(t,n,s,l){r=t,a=s,i=-3*t+3*n-2*s-l,o=2*t-2*n+s+l}var r=0,a=0,i=0,o=0;return{initCatmullRom:function(r,a,i,o,n){t(a,i,n*(i-r),n*(o-a))},initNonuniformCatmullRom:function(r,a,i,o,n,s,l){var d=(a-r)/n-(i-r)/(n+s)+(i-a)/s,p=(i-a)/s-(o-a)/(s+l)+(o-i)/l;d*=s,p*=s,t(a,i,d,p)},calc:function(n){var t=n*n;return r+a*n+i*t+o*(t*n)}}}function Xi(t){Ya.call(this),2>t.length&&console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries."),this.points=t||[],this.closed=!1}function qi(t,r,a,i){Ya.call(this),this.v0=t,this.v1=r,this.v2=a,this.v3=i}function Zi(t,r,a){Ya.call(this),this.v0=t,this.v1=r,this.v2=a}function Ki(t,r){Ya.call(this),this.v1=t,this.v2=r}function Ji(t,r,a,i,o,n){qa.call(this,t,r,a,a,i,o,n)}function $i(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Xi.call(this,t),this.type="catmullrom",this.closed=!0}function eo(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Xi.call(this,t),this.type="catmullrom"}function to(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Xi.call(this,t),this.type="catmullrom"}var ro=Math.atan2,ao=Math.ceil,io=Number.isInteger,oo=Number.EPSILON;oo===void 0&&(oo=2.220446049250313e-16),io===void 0&&(io=function(t){return"number"===typeof t&&isFinite(t)&&h(t)===t}),s===void 0&&(s=function(t){return 0>t?-1:0<t?1:+t}),Function.prototype.name===void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Object.assign===void 0&&function(){Object.assign=function(t){if(t===void 0||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),a=1,i;a<arguments.length;a++)if(i=arguments[a],void 0!==i&&null!==i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o]);return r}}(),Object.assign(d.prototype,{addEventListener:function(t,r){this._listeners===void 0&&(this._listeners={});var a=this._listeners;a[t]===void 0&&(a[t]=[]),-1===a[t].indexOf(r)&&a[t].push(r)},hasEventListener:function(t,r){if(this._listeners===void 0)return!1;var a=this._listeners;return a[t]!==void 0&&-1!==a[t].indexOf(r)},removeEventListener:function(t,r){if(void 0!==this._listeners){var a=this._listeners,i=a[t];if(void 0!==i){var o=i.indexOf(r);-1!==o&&i.splice(o,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var r=this._listeners,a=r[t.type];if(void 0!==a){t.target=this;for(var o=a.slice(0),n=0,i=o.length;n<i;n++)o[n].call(this,t)}}}});var no="87",so=0,lo=1,po=2,co=0,uo=1,mo=2,go=0,ho=1,yo=2,fo=1,Mo=0,xo=1,Eo=2,vo=0,Ao=1,To=2,bo=3,Lo=4,No=5,Do=100,wo=101,Co=102,So=103,Io=104,_o=200,jo=201,Oo=202,zo=203,Ro=204,Uo=205,Po=206,Bo=207,ko=208,Fo=209,Go=210,Vo=0,Ho=1,Qo=2,Yo=3,Wo=4,Xo=5,qo=6,Zo=7,Ko=0,Jo=1,$o=2,en=0,tn=1,rn=2,an=3,on=4,nn=300,sn=301,ln=302,dn=303,pn=304,cn=305,un=306,mn=307,gn=1e3,hn=1001,yn=1002,fn=1003,Mn=1004,xn=1005,En=1006,vn=1007,An=1008,Tn=1009,bn=1010,Ln=1011,Nn=1012,Dn=1013,wn=1014,Cn=1015,Sn=1016,In=1017,_n=1018,jn=1019,On=1020,zn=1021,Rn=1022,Un=1023,Pn=1024,Bn=1025,kn=1026,Fn=1027,Gn=2001,Vn=2002,Hn=2003,Qn=2004,Yn=2100,Wn=2101,Xn=2102,qn=2103,Zn=2151,Kn=2200,Jn=2201,$n=2202,es=2300,ts=2301,rs=2302,as=2400,is=2401,os=2402,ns=0,ss=1,ls=2,ds=3e3,ps=3001,cs=3007,us=3002,ms=3004,gs=3005,hs=3006,ys=3200,fs=3201,Ms={DEG2RAD:L/180,RAD2DEG:180/L,generateUUID:function(){var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],a=Array(36),o=0,n;return function(){for(var r=0;36>r;r++)8===r||13===r||18===r||23===r?a[r]="-":14===r?a[r]="4":(2>=o&&(o=0|33554432+16777216*Math.random()),n=15&o,o>>=4,a[r]=t[19===r?8|3&n:n]);return a.join("")}}(),clamp:function(t,r,a){return l(r,m(a,t))},euclideanModulo:function(t,r){return(t%r+r)%r},mapLinear:function(t,r,a,i,o){return i+(t-r)*(o-i)/(a-r)},lerp:function(r,a,i){return(1-i)*r+i*a},smoothstep:function(t,r,a){return t<=r?0:t>=a?1:(t=(t-r)/(a-r),t*t*(3-2*t))},smootherstep:function(t,r,a){return t<=r?0:t>=a?1:(t=(t-r)/(a-r),t*t*t*(t*(6*t-15)+10))},randInt:function(t,r){return t+h(Math.random()*(r-t+1))},randFloat:function(t,r){return t+Math.random()*(r-t)},randFloatSpread:function(t){return t*(0.5-Math.random())},degToRad:function(t){return t*Ms.DEG2RAD},radToDeg:function(t){return t*Ms.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return y(2,n(u(t)/p))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}};Object.defineProperties(f.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(f.prototype,{isVector2:!0,set:function(t,r){return this.x=t,this.y=r,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t);}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,r){return void 0===r?(this.x+=t.x,this.y+=t.y,this):(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,r))},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this},addScaledVector:function(t,r){return this.x+=t.x*r,this.y+=t.y*r,this},sub:function(t,r){return void 0===r?(this.x-=t.x,this.y-=t.y,this):(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,r))},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=m(this.x,t.x),this.y=m(this.y,t.y),this},max:function(t){return this.x=l(this.x,t.x),this.y=l(this.y,t.y),this},clamp:function(t,r){return this.x=l(t.x,m(r.x,this.x)),this.y=l(t.y,m(r.y,this.y)),this},clampScalar:function(){var t=new f,r=new f;return function(a,i){return t.set(a,a),r.set(i,i),this.clamp(t,r)}}(),clampLength:function(t,r){var a=this.length();return this.divideScalar(a||1).multiplyScalar(l(t,m(r,a)))},floor:function(){return this.x=h(this.x),this.y=h(this.y),this},ceil:function(){return this.x=ao(this.x),this.y=ao(this.y),this},round:function(){return this.x=n(this.x),this.y=n(this.y),this},roundToZero:function(){return this.x=0>this.x?ao(this.x):h(this.x),this.y=0>this.y?ao(this.y):h(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return M(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return g(this.x)+g(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=ro(this.y,this.x);return 0>t&&(t+=2*L),t},distanceTo:function(t){return M(this.distanceToSquared(t))},distanceToSquared:function(t){var r=this.x-t.x,a=this.y-t.y;return r*r+a*a},distanceToManhattan:function(t){return g(this.x-t.x)+g(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this},lerpVectors:function(t,r,a){return this.subVectors(r,t).multiplyScalar(a).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,r){return void 0===r&&(r=0),this.x=t[r],this.y=t[r+1],this},toArray:function(t,r){return void 0===t&&(t=[]),void 0===r&&(r=0),t[r]=this.x,t[r+1]=this.y,t},fromBufferAttribute:function(t,r,a){return void 0!==a&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(r),this.y=t.getY(r),this},rotateAround:function(t,r){var a=A(r),i=E(r),o=this.x-t.x,n=this.y-t.y;return this.x=o*a-n*i+t.x,this.y=o*i+n*a+t.y,this}});var xs=0;c.DEFAULT_IMAGE=void 0,c.DEFAULT_MAPPING=nn,Object.defineProperty(c.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(c.prototype,d.prototype,{constructor:c,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){function r(t){var r;if(t instanceof HTMLCanvasElement)r=t;else{r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r.width=t.width,r.height=t.height;var a=r.getContext("2d");t instanceof ImageData?a.putImageData(t,0,0):a.drawImage(t,0,0,t.width,t.height)}return 2048<r.width||2048<r.height?r.toDataURL("image/jpeg",0.6):r.toDataURL("image/png")}if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var a={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=Ms.generateUUID()),void 0===t.images[i.uuid]&&(t.images[i.uuid]={uuid:i.uuid,url:r(i)}),a.image=i.uuid}return t.textures[this.uuid]=a,a},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===nn){if(t.multiply(this.repeat),t.add(this.offset),0>t.x||1<t.x)switch(this.wrapS){case gn:t.x-=h(t.x);break;case hn:t.x=0>t.x?0:1;break;case yn:1===g(h(t.x)%2)?t.x=ao(t.x)-t.x:t.x-=h(t.x);}if(0>t.y||1<t.y)switch(this.wrapT){case gn:t.y-=h(t.y);break;case hn:t.y=0>t.y?0:1;break;case yn:1===g(h(t.y)%2)?t.y=ao(t.y)-t.y:t.y-=h(t.y);}this.flipY&&(t.y=1-t.y)}}}),Object.assign(v.prototype,{isVector4:!0,set:function(t,r,a,i){return this.x=t,this.y=r,this.z=a,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+t);}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0===t.w?1:t.w,this},add:function(t,r){return void 0===r?(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this):(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,r))},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this},addScaledVector:function(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this},sub:function(t,r){return void 0===r?(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this):(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,r))},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var r=this.x,a=this.y,i=this.z,o=this.w,n=t.elements;return this.x=n[0]*r+n[4]*a+n[8]*i+n[12]*o,this.y=n[1]*r+n[5]*a+n[9]*i+n[13]*o,this.z=n[2]*r+n[6]*a+n[10]*i+n[14]*o,this.w=n[3]*r+n[7]*a+n[11]*i+n[15]*o,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*o(t.w);var r=M(1-t.w*t.w);return 1e-4>r?(this.x=1,this.y=0,this.z=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this},setAxisAngleFromRotationMatrix:function(t){var r=0.01,a=0.1,i=t.elements,n=i[0],l=i[4],d=i[8],p=i[1],c=i[5],u=i[9],m=i[2],h=i[6],f=i[10],E,v,x,y;if(g(l-p)<r&&g(d-m)<r&&g(u-h)<r){if(g(l+p)<a&&g(d+m)<a&&g(u+h)<a&&g(n+c+f-3)<a)return this.set(1,0,0,0),this;E=L;var A=(n+1)/2,T=(c+1)/2,b=(f+1)/2,N=(l+p)/4,D=(d+m)/4,w=(u+h)/4;return A>T&&A>b?A<r?(v=0,x=0.707106781,y=0.707106781):(v=M(A),x=N/v,y=D/v):T>b?T<r?(v=0.707106781,x=0,y=0.707106781):(x=M(T),v=N/x,y=w/x):b<r?(v=0.707106781,x=0.707106781,y=0):(y=M(b),v=D/y,x=w/y),this.set(v,x,y,E),this}var C=M((h-u)*(h-u)+(d-m)*(d-m)+(p-l)*(p-l));return 1e-3>g(C)&&(C=1),this.x=(h-u)/C,this.y=(d-m)/C,this.z=(p-l)/C,this.w=o((n+c+f-1)/2),this},min:function(t){return this.x=m(this.x,t.x),this.y=m(this.y,t.y),this.z=m(this.z,t.z),this.w=m(this.w,t.w),this},max:function(t){return this.x=l(this.x,t.x),this.y=l(this.y,t.y),this.z=l(this.z,t.z),this.w=l(this.w,t.w),this},clamp:function(t,r){return this.x=l(t.x,m(r.x,this.x)),this.y=l(t.y,m(r.y,this.y)),this.z=l(t.z,m(r.z,this.z)),this.w=l(t.w,m(r.w,this.w)),this},clampScalar:function(){var t,r;return function(a,i){return void 0===t&&(t=new v,r=new v),t.set(a,a,a,a),r.set(i,i,i,i),this.clamp(t,r)}}(),clampLength:function(t,r){var a=this.length();return this.divideScalar(a||1).multiplyScalar(l(t,m(r,a)))},floor:function(){return this.x=h(this.x),this.y=h(this.y),this.z=h(this.z),this.w=h(this.w),this},ceil:function(){return this.x=ao(this.x),this.y=ao(this.y),this.z=ao(this.z),this.w=ao(this.w),this},round:function(){return this.x=n(this.x),this.y=n(this.y),this.z=n(this.z),this.w=n(this.w),this},roundToZero:function(){return this.x=0>this.x?ao(this.x):h(this.x),this.y=0>this.y?ao(this.y):h(this.y),this.z=0>this.z?ao(this.z):h(this.z),this.w=0>this.w?ao(this.w):h(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return M(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return g(this.x)+g(this.y)+g(this.z)+g(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this},lerpVectors:function(t,r,a){return this.subVectors(r,t).multiplyScalar(a).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,r){return void 0===r&&(r=0),this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this},toArray:function(t,r){return void 0===t&&(t=[]),void 0===r&&(r=0),t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t},fromBufferAttribute:function(t,r,a){return void 0!==a&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this}}),Object.assign(x.prototype,d.prototype,{isWebGLRenderTarget:!0,setSize:function(t,r){(this.width!==t||this.height!==r)&&(this.width=t,this.height=r,this.dispose()),this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),T.prototype=Object.create(x.prototype),T.prototype.constructor=T,T.prototype.isWebGLRenderTargetCube=!0,Object.assign(b,{slerp:function(r,a,i,o){return i.copy(r).slerp(a,o)},slerpFlat:function(r,a,i,o,n,l,d){var t=i[o+0],p=i[o+1],c=i[o+2],u=i[o+3],m=n[l+0],g=n[l+1],h=n[l+2],y=n[l+3];if(u!==y||t!==m||p!==g||c!==h){var x=1-d,s=t*m+p*g+c*h+u*y,v=0<=s?1:-1,A=1-s*s;if(A>oo){var T=M(A),b=ro(T,s*v);x=E(x*b)/T,d=E(d*b)/T}var L=d*v;if(t=t*x+m*L,p=p*x+g*L,c=c*x+h*L,u=u*x+y*L,x===1-d){var N=1/M(t*t+p*p+c*c+u*u);t*=N,p*=N,c*=N,u*=N}}r[a]=t,r[a+1]=p,r[a+2]=c,r[a+3]=u}}),Object.defineProperties(b.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(b.prototype,{set:function(t,r,a,i){return this._x=t,this._y=r,this._z=a,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,r){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var a=t._x,i=t._y,o=t._z,n=t.order,s=A,l=E,d=s(a/2),p=s(i/2),c=s(o/2),u=l(a/2),m=l(i/2),g=l(o/2);return"XYZ"===n?(this._x=u*p*c+d*m*g,this._y=d*m*c-u*p*g,this._z=d*p*g+u*m*c,this._w=d*p*c-u*m*g):"YXZ"===n?(this._x=u*p*c+d*m*g,this._y=d*m*c-u*p*g,this._z=d*p*g-u*m*c,this._w=d*p*c+u*m*g):"ZXY"===n?(this._x=u*p*c-d*m*g,this._y=d*m*c+u*p*g,this._z=d*p*g+u*m*c,this._w=d*p*c-u*m*g):"ZYX"===n?(this._x=u*p*c-d*m*g,this._y=d*m*c+u*p*g,this._z=d*p*g-u*m*c,this._w=d*p*c+u*m*g):"YZX"===n?(this._x=u*p*c+d*m*g,this._y=d*m*c+u*p*g,this._z=d*p*g-u*m*c,this._w=d*p*c-u*m*g):"XZY"===n&&(this._x=u*p*c-d*m*g,this._y=d*m*c-u*p*g,this._z=d*p*g+u*m*c,this._w=d*p*c+u*m*g),!1!==r&&this.onChangeCallback(),this},setFromAxisAngle:function(t,r){var a=r/2,i=E(a);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=A(a),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var r=t.elements,a=r[0],i=r[4],o=r[8],n=r[1],l=r[5],d=r[9],p=r[2],c=r[6],u=r[10],m=a+l+u,g;return 0<m?(g=0.5/M(m+1),this._w=0.25/g,this._x=(c-d)*g,this._y=(o-p)*g,this._z=(n-i)*g):a>l&&a>u?(g=2*M(1+a-l-u),this._w=(c-d)/g,this._x=0.25*g,this._y=(i+n)/g,this._z=(o+p)/g):l>u?(g=2*M(1+l-a-u),this._w=(o-p)/g,this._x=(i+n)/g,this._y=0.25*g,this._z=(d+c)/g):(g=2*M(1+u-a-l),this._w=(n-i)/g,this._x=(o+p)/g,this._y=(d+c)/g,this._z=0.25*g),this.onChangeCallback(),this},setFromUnitVectors:function(){var t=new D,a;return function(r,i){return void 0===t&&(t=new D),a=r.dot(i)+1,a<1e-6?(a=0,g(r.x)>g(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=a,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return M(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,r){return void 0===r?this.multiplyQuaternions(this,t):(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,r))},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,r){var a=t._x,i=t._y,o=t._z,n=t._w,s=r._x,l=r._y,d=r._z,p=r._w;return this._x=a*p+n*s+i*d-o*l,this._y=i*p+n*l+o*s-a*d,this._z=o*p+n*d+a*l-i*s,this._w=n*p-a*s-i*l-o*d,this.onChangeCallback(),this},slerp:function(r,a){if(0===a)return this;if(1===a)return this.copy(r);var t=this._x,i=this._y,o=this._z,n=this._w,s=n*r._w+t*r._x+i*r._y+o*r._z;if(0>s?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,s=-s):this.copy(r),1<=s)return this._w=n,this._x=t,this._y=i,this._z=o,this;var l=M(1-s*s);if(1e-3>g(l))return this._w=0.5*(n+this._w),this._x=0.5*(t+this._x),this._y=0.5*(i+this._y),this._z=0.5*(o+this._z),this;var d=ro(l,s),p=E((1-a)*d)/l,c=E(a*d)/l;return this._w=n*p+this._w*c,this._x=t*p+this._x*c,this._y=i*p+this._y*c,this._z=o*p+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,r){return void 0===r&&(r=0),this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this.onChangeCallback(),this},toArray:function(t,r){return void 0===t&&(t=[]),void 0===r&&(r=0),t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(D.prototype,{isVector3:!0,set:function(t,r,a){return this.x=t,this.y=r,this.z=a,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t);}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,r){return void 0===r?(this.x+=t.x,this.y+=t.y,this.z+=t.z,this):(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,r))},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this},addScaledVector:function(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this},sub:function(t,r){return void 0===r?(this.x-=t.x,this.y-=t.y,this.z-=t.z,this):(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,r))},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this},multiply:function(t,r){return void 0===r?(this.x*=t.x,this.y*=t.y,this.z*=t.z,this):(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,r))},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this},applyEuler:function(){var t=new b;return function(r){return r&&r.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(r))}}(),applyAxisAngle:function(){var t=new b;return function(r,a){return this.applyQuaternion(t.setFromAxisAngle(r,a))}}(),applyMatrix3:function(t){var r=this.x,a=this.y,i=this.z,o=t.elements;return this.x=o[0]*r+o[3]*a+o[6]*i,this.y=o[1]*r+o[4]*a+o[7]*i,this.z=o[2]*r+o[5]*a+o[8]*i,this},applyMatrix4:function(t){var r=this.x,a=this.y,i=this.z,o=t.elements,n=1/(o[3]*r+o[7]*a+o[11]*i+o[15]);return this.x=(o[0]*r+o[4]*a+o[8]*i+o[12])*n,this.y=(o[1]*r+o[5]*a+o[9]*i+o[13])*n,this.z=(o[2]*r+o[6]*a+o[10]*i+o[14])*n,this},applyQuaternion:function(t){var r=this.x,a=this.y,i=this.z,o=t.x,n=t.y,s=t.z,l=t.w,d=l*r+n*i-s*a,p=l*a+s*r-o*i,c=l*i+o*a-n*r,u=-o*r-n*a-s*i;return this.x=d*l+u*-o+p*-s-c*-n,this.y=p*l+u*-n+c*-o-d*-s,this.z=c*l+u*-s+d*-n-p*-o,this},project:function(){var t=new N;return function(r){return t.multiplyMatrices(r.projectionMatrix,t.getInverse(r.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new N;return function(r){return t.multiplyMatrices(r.matrixWorld,t.getInverse(r.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var r=this.x,a=this.y,i=this.z,o=t.elements;return this.x=o[0]*r+o[4]*a+o[8]*i,this.y=o[1]*r+o[5]*a+o[9]*i,this.z=o[2]*r+o[6]*a+o[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=m(this.x,t.x),this.y=m(this.y,t.y),this.z=m(this.z,t.z),this},max:function(t){return this.x=l(this.x,t.x),this.y=l(this.y,t.y),this.z=l(this.z,t.z),this},clamp:function(t,r){return this.x=l(t.x,m(r.x,this.x)),this.y=l(t.y,m(r.y,this.y)),this.z=l(t.z,m(r.z,this.z)),this},clampScalar:function(){var t=new D,r=new D;return function(a,i){return t.set(a,a,a),r.set(i,i,i),this.clamp(t,r)}}(),clampLength:function(t,r){var a=this.length();return this.divideScalar(a||1).multiplyScalar(l(t,m(r,a)))},floor:function(){return this.x=h(this.x),this.y=h(this.y),this.z=h(this.z),this},ceil:function(){return this.x=ao(this.x),this.y=ao(this.y),this.z=ao(this.z),this},round:function(){return this.x=n(this.x),this.y=n(this.y),this.z=n(this.z),this},roundToZero:function(){return this.x=0>this.x?ao(this.x):h(this.x),this.y=0>this.y?ao(this.y):h(this.y),this.z=0>this.z?ao(this.z):h(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return M(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return g(this.x)+g(this.y)+g(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this},lerpVectors:function(t,r,a){return this.subVectors(r,t).multiplyScalar(a).add(t)},cross:function(t,r){if(void 0!==r)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,r);var a=this.x,i=this.y,o=this.z;return this.x=i*t.z-o*t.y,this.y=o*t.x-a*t.z,this.z=a*t.y-i*t.x,this},crossVectors:function(t,r){var a=t.x,i=t.y,o=t.z,n=r.x,s=r.y,l=r.z;return this.x=i*l-o*s,this.y=o*n-a*l,this.z=a*s-i*n,this},projectOnVector:function(t){var r=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(r)},projectOnPlane:function(){var t=new D;return function(r){return t.copy(this).projectOnVector(r),this.sub(t)}}(),reflect:function(){var t=new D;return function(r){return this.sub(t.copy(r).multiplyScalar(2*this.dot(r)))}}(),angleTo:function(t){var r=this.dot(t)/M(this.lengthSq()*t.lengthSq());return o(Ms.clamp(r,-1,1))},distanceTo:function(t){return M(this.distanceToSquared(t))},distanceToSquared:function(t){var r=this.x-t.x,a=this.y-t.y,i=this.z-t.z;return r*r+a*a+i*i},distanceToManhattan:function(t){return g(this.x-t.x)+g(this.y-t.y)+g(this.z-t.z)},setFromSpherical:function(t){var r=E(t.phi)*t.radius;return this.x=r*E(t.theta),this.y=A(t.phi)*t.radius,this.z=r*A(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*E(t.theta),this.y=t.y,this.z=t.radius*A(t.theta),this},setFromMatrixPosition:function(t){var r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this},setFromMatrixScale:function(t){var r=this.setFromMatrixColumn(t,0).length(),a=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=a,this.z=i,this},setFromMatrixColumn:function(t,r){return this.fromArray(t.elements,4*r)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,r){return void 0===r&&(r=0),this.x=t[r],this.y=t[r+1],this.z=t[r+2],this},toArray:function(t,r){return void 0===t&&(t=[]),void 0===r&&(r=0),t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t},fromBufferAttribute:function(t,r,a){return void 0!==a&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}}),Object.assign(N.prototype,{isMatrix4:!0,set:function(t,r,a,i,o,n,s,l,d,p,c,u,m,g,h,y){var f=this.elements;return f[0]=t,f[4]=r,f[8]=a,f[12]=i,f[1]=o,f[5]=n,f[9]=s,f[13]=l,f[2]=d,f[6]=p,f[10]=c,f[14]=u,f[3]=m,f[7]=g,f[11]=h,f[15]=y,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new N().fromArray(this.elements)},copy:function(t){var r=this.elements,a=t.elements;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],this},copyPosition:function(t){var r=this.elements,a=t.elements;return r[12]=a[12],r[13]=a[13],r[14]=a[14],this},extractBasis:function(t,r,a){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this},makeBasis:function(t,r,a){return this.set(t.x,r.x,a.x,0,t.y,r.y,a.y,0,t.z,r.z,a.z,0,0,0,0,1),this},extractRotation:function(){var t=new D;return function(r){var a=this.elements,i=r.elements,o=1/t.setFromMatrixColumn(r,0).length(),n=1/t.setFromMatrixColumn(r,1).length(),s=1/t.setFromMatrixColumn(r,2).length();return a[0]=i[0]*o,a[1]=i[1]*o,a[2]=i[2]*o,a[4]=i[4]*n,a[5]=i[5]*n,a[6]=i[6]*n,a[8]=i[8]*s,a[9]=i[9]*s,a[10]=i[10]*s,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var r=this.elements,i=t.x,o=t.y,n=t.z,s=A(i),l=E(i),p=A(o),u=E(o),m=A(n),g=E(n);if("XYZ"===t.order){var h=s*m,y=s*g,M=l*m,x=l*g;r[0]=p*m,r[4]=-p*g,r[8]=u,r[1]=y+M*u,r[5]=h-x*u,r[9]=-l*p,r[2]=x-h*u,r[6]=M+y*u,r[10]=s*p}else if("YXZ"===t.order){var v=p*m,T=p*g,L=u*m,N=u*g;r[0]=v+N*l,r[4]=L*l-T,r[8]=s*u,r[1]=s*g,r[5]=s*m,r[9]=-l,r[2]=T*l-L,r[6]=N+v*l,r[10]=s*p}else if("ZXY"===t.order){var v=p*m,T=p*g,L=u*m,N=u*g;r[0]=v-N*l,r[4]=-s*g,r[8]=L+T*l,r[1]=T+L*l,r[5]=s*m,r[9]=N-v*l,r[2]=-s*u,r[6]=l,r[10]=s*p}else if("ZYX"===t.order){var h=s*m,y=s*g,M=l*m,x=l*g;r[0]=p*m,r[4]=M*u-y,r[8]=h*u+x,r[1]=p*g,r[5]=x*u+h,r[9]=y*u-M,r[2]=-u,r[6]=l*p,r[10]=s*p}else if("YZX"===t.order){var D=s*p,w=s*u,C=l*p,S=l*u;r[0]=p*m,r[4]=S-D*g,r[8]=C*g+w,r[1]=g,r[5]=s*m,r[9]=-l*m,r[2]=-u*m,r[6]=w*g+C,r[10]=D-S*g}else if("XZY"===t.order){var D=s*p,w=s*u,C=l*p,S=l*u;r[0]=p*m,r[4]=-g,r[8]=u*m,r[1]=D*g+S,r[5]=s*m,r[9]=w*g-C,r[2]=C*g-w,r[6]=l*m,r[10]=S*g+D}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},makeRotationFromQuaternion:function(t){var r=this.elements,a=t._x,i=t._y,o=t._z,n=t._w,s=a+a,l=i+i,d=o+o,p=a*s,c=a*l,u=a*d,m=i*l,g=i*d,h=o*d,y=n*s,f=n*l,M=n*d;return r[0]=1-(m+h),r[4]=c-M,r[8]=u+f,r[1]=c+M,r[5]=1-(p+h),r[9]=g-y,r[2]=u-f,r[6]=g+y,r[10]=1-(p+m),r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this},lookAt:function(){var t=new D,r=new D,a=new D;return function(i,o,n){var s=this.elements;return a.subVectors(i,o),0===a.lengthSq()&&(a.z=1),a.normalize(),t.crossVectors(n,a),0===t.lengthSq()&&(1===g(n.z)?a.x+=1e-4:a.z+=1e-4,a.normalize(),t.crossVectors(n,a)),t.normalize(),r.crossVectors(a,t),s[0]=t.x,s[4]=r.x,s[8]=a.x,s[1]=t.y,s[5]=r.y,s[9]=a.y,s[2]=t.z,s[6]=r.z,s[10]=a.z,this}}(),multiply:function(t,r){return void 0===r?this.multiplyMatrices(this,t):(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,r))},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,r){var a=t.elements,i=r.elements,o=this.elements,n=a[0],s=a[4],l=a[8],d=a[12],p=a[1],c=a[5],u=a[9],m=a[13],g=a[2],h=a[6],y=a[10],f=a[14],M=a[3],x=a[7],E=a[11],v=a[15],A=i[0],T=i[4],b=i[8],L=i[12],N=i[1],D=i[5],w=i[9],C=i[13],S=i[2],I=i[6],_=i[10],j=i[14],O=i[3],z=i[7],R=i[11],U=i[15];return o[0]=n*A+s*N+l*S+d*O,o[4]=n*T+s*D+l*I+d*z,o[8]=n*b+s*w+l*_+d*R,o[12]=n*L+s*C+l*j+d*U,o[1]=p*A+c*N+u*S+m*O,o[5]=p*T+c*D+u*I+m*z,o[9]=p*b+c*w+u*_+m*R,o[13]=p*L+c*C+u*j+m*U,o[2]=g*A+h*N+y*S+f*O,o[6]=g*T+h*D+y*I+f*z,o[10]=g*b+h*w+y*_+f*R,o[14]=g*L+h*C+y*j+f*U,o[3]=M*A+x*N+E*S+v*O,o[7]=M*T+x*D+E*I+v*z,o[11]=M*b+x*w+E*_+v*R,o[15]=M*L+x*C+E*j+v*U,this},multiplyScalar:function(t){var r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this},applyToBufferAttribute:function(){var t=new D;return function(r){for(var a=0,i=r.count;a<i;a++)t.x=r.getX(a),t.y=r.getY(a),t.z=r.getZ(a),t.applyMatrix4(this),r.setXYZ(a,t.x,t.y,t.z);return r}}(),determinant:function(){var t=this.elements,r=t[0],a=t[4],i=t[8],o=t[12],n=t[1],s=t[5],l=t[9],d=t[13],p=t[2],c=t[6],u=t[10],m=t[14],g=t[3],h=t[7],y=t[11],f=t[15];return g*(+o*l*c-i*d*c-o*s*u+a*d*u+i*s*m-a*l*m)+h*(+r*l*m-r*d*u+o*n*u-i*n*m+i*d*p-o*l*p)+y*(+r*d*c-r*s*m-o*n*c+a*n*m+o*s*p-a*d*p)+f*(-i*s*p-r*l*c+r*s*u+i*n*c-a*n*u+a*l*p)},transpose:function(){var t=this.elements,r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this},setPosition:function(t){var r=this.elements;return r[12]=t.x,r[13]=t.y,r[14]=t.z,this},getInverse:function(t,r){var a=this.elements,i=t.elements,o=i[0],n=i[1],s=i[2],l=i[3],d=i[4],p=i[5],c=i[6],u=i[7],m=i[8],g=i[9],h=i[10],y=i[11],f=i[12],M=i[13],x=i[14],E=i[15],v=g*x*u-M*h*u+M*c*y-p*x*y-g*c*E+p*h*E,A=f*h*u-m*x*u-f*c*y+d*x*y+m*c*E-d*h*E,T=m*M*u-f*g*u+f*p*y-d*M*y-m*p*E+d*g*E,b=f*g*c-m*M*c-f*p*h+d*M*h+m*p*x-d*g*x,L=o*v+n*A+s*T+l*b;if(0===L){var N="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===r)throw new Error(N);else console.warn(N);return this.identity()}var D=1/L;return a[0]=v*D,a[1]=(M*h*l-g*x*l-M*s*y+n*x*y+g*s*E-n*h*E)*D,a[2]=(p*x*l-M*c*l+M*s*u-n*x*u-p*s*E+n*c*E)*D,a[3]=(g*c*l-p*h*l-g*s*u+n*h*u+p*s*y-n*c*y)*D,a[4]=A*D,a[5]=(m*x*l-f*h*l+f*s*y-o*x*y-m*s*E+o*h*E)*D,a[6]=(f*c*l-d*x*l-f*s*u+o*x*u+d*s*E-o*c*E)*D,a[7]=(d*h*l-m*c*l+m*s*u-o*h*u-d*s*y+o*c*y)*D,a[8]=T*D,a[9]=(f*g*l-m*M*l-f*n*y+o*M*y+m*n*E-o*g*E)*D,a[10]=(d*M*l-f*p*l+f*n*u-o*M*u-d*n*E+o*p*E)*D,a[11]=(m*p*l-d*g*l-m*n*u+o*g*u+d*n*y-o*p*y)*D,a[12]=b*D,a[13]=(m*M*s-f*g*s+f*n*h-o*M*h-m*n*x+o*g*x)*D,a[14]=(f*p*s-d*M*s-f*n*c+o*M*c+d*n*x-o*p*x)*D,a[15]=(d*g*s-m*p*s+m*n*c-o*g*c-d*n*h+o*p*h)*D,this},scale:function(t){var r=this.elements,a=t.x,i=t.y,o=t.z;return r[0]*=a,r[4]*=i,r[8]*=o,r[1]*=a,r[5]*=i,r[9]*=o,r[2]*=a,r[6]*=i,r[10]*=o,r[3]*=a,r[7]*=i,r[11]*=o,this},getMaxScaleOnAxis:function(){var t=this.elements,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],a=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return M(l(r,a,i))},makeTranslation:function(t,r,a){return this.set(1,0,0,t,0,1,0,r,0,0,1,a,0,0,0,1),this},makeRotationX:function(t){var r=A(t),a=E(t);return this.set(1,0,0,0,0,r,-a,0,0,a,r,0,0,0,0,1),this},makeRotationY:function(t){var r=A(t),a=E(t);return this.set(r,0,a,0,0,1,0,0,-a,0,r,0,0,0,0,1),this},makeRotationZ:function(t){var r=A(t),a=E(t);return this.set(r,-a,0,0,a,r,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(r,a){var i=A(a),o=E(a),n=1-i,t=r.x,s=r.y,l=r.z,d=n*t,p=n*s;return this.set(d*t+i,d*s-o*l,d*l+o*s,0,d*s+o*l,p*s+i,p*l-o*t,0,d*l-o*s,p*l+o*t,n*l*l+i,0,0,0,0,1),this},makeScale:function(t,r,a){return this.set(t,0,0,0,0,r,0,0,0,0,a,0,0,0,0,1),this},makeShear:function(t,r,a){return this.set(1,r,a,0,t,1,a,0,t,r,1,0,0,0,0,1),this},compose:function(t,r,a){return this.makeRotationFromQuaternion(r),this.scale(a),this.setPosition(t),this},decompose:function(){var t=new D,r=new N;return function(a,i,o){var n=this.elements,s=t.set(n[0],n[1],n[2]).length(),l=t.set(n[4],n[5],n[6]).length(),d=t.set(n[8],n[9],n[10]).length(),p=this.determinant();0>p&&(s=-s),a.x=n[12],a.y=n[13],a.z=n[14],r.copy(this);var c=1/s,u=1/l,m=1/d;return r.elements[0]*=c,r.elements[1]*=c,r.elements[2]*=c,r.elements[4]*=u,r.elements[5]*=u,r.elements[6]*=u,r.elements[8]*=m,r.elements[9]*=m,r.elements[10]*=m,i.setFromRotationMatrix(r),o.x=s,o.y=l,o.z=d,this}}(),makePerspective:function(t,r,a,i,o,n){void 0===n&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements;return s[0]=2*o/(r-t),s[4]=0,s[8]=(r+t)/(r-t),s[12]=0,s[1]=0,s[5]=2*o/(a-i),s[9]=(a+i)/(a-i),s[13]=0,s[2]=0,s[6]=0,s[10]=-(n+o)/(n-o),s[14]=-2*n*o/(n-o),s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,r,a,i,o,n){var s=this.elements,l=1/(r-t),d=1/(a-i),c=1/(n-o);return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-((r+t)*l),s[1]=0,s[5]=2*d,s[9]=0,s[13]=-((a+i)*d),s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-((n+o)*c),s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var r=this.elements,a=t.elements,o=0;16>o;o++)if(r[o]!==a[o])return!1;return!0},fromArray:function(t,r){r===void 0&&(r=0);for(var a=0;16>a;a++)this.elements[a]=t[a+r];return this},toArray:function(t,r){void 0===t&&(t=[]),void 0===r&&(r=0);var a=this.elements;return t[r]=a[0],t[r+1]=a[1],t[r+2]=a[2],t[r+3]=a[3],t[r+4]=a[4],t[r+5]=a[5],t[r+6]=a[6],t[r+7]=a[7],t[r+8]=a[8],t[r+9]=a[9],t[r+10]=a[10],t[r+11]=a[11],t[r+12]=a[12],t[r+13]=a[13],t[r+14]=a[14],t[r+15]=a[15],t}}),w.prototype=Object.create(c.prototype),w.prototype.constructor=w,w.prototype.isDataTexture=!0,C.prototype=Object.create(c.prototype),C.prototype.constructor=C,C.prototype.isCubeTexture=!0,Object.defineProperty(C.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Es=new c,vs=new C,As=[],Ts=[],bs=new Float32Array(16),Ls=new Float32Array(9);ne.prototype.setValue=function(t,r){for(var a=this.seq,o=0,i=a.length,n;o!==i;++o)n=a[o],n.setValue(t,r[n.id])};var Ns=/([\w\d_]+)(\])?(\[|\.)?/g;de.prototype.setValue=function(t,r,a){var i=this.map[r];i!==void 0&&i.setValue(t,a,this.renderer)},de.prototype.setOptional=function(t,r,a){var i=r[a];i!==void 0&&this.setValue(t,a,i)},de.upload=function(t,r,a,o){for(var s=0,i=r.length;s!==i;++s){var n=r[s],l=a[n.id];!1!==l.needsUpdate&&n.setValue(t,l.value,o)}},de.seqWithValue=function(t,a){for(var o=[],r=0,i=t.length,n;r!==i;++r)n=t[r],n.id in a&&o.push(n);return o};var Ds={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(pe.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=h(t),this.r=(255&t>>16)/255,this.g=(255&t>>8)/255,this.b=(255&t)/255,this},setRGB:function(t,r,a){return this.r=t,this.g=r,this.b=a,this},setHSL:function(){function t(r,a,i){return 0>i&&(i+=1),1<i&&(i-=1),i<1/6?r+6*(a-r)*i:i<1/2?a:i<2/3?r+6*(a-r)*(2/3-i):r}return function(r,a,i){if(r=Ms.euclideanModulo(r,1),a=Ms.clamp(a,0,1),i=Ms.clamp(i,0,1),0===a)this.r=this.g=this.b=i;else{var o=0.5>=i?i*(1+a):i+a-i*a,n=2*i-o;this.r=t(n,o,r+1/3),this.g=t(n,o,r),this.b=t(n,o,r-1/3)}return this}}(),setStyle:function(t){function r(r){void 0===r||1>parseFloat(r)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var a;if(a=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i=a[1],o=a[2],n;switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=m(255,parseInt(n[1],10))/255,this.g=m(255,parseInt(n[2],10))/255,this.b=m(255,parseInt(n[3],10))/255,r(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=m(100,parseInt(n[1],10))/100,this.g=m(100,parseInt(n[2],10))/100,this.b=m(100,parseInt(n[3],10))/100,r(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var d=parseFloat(n[1])/360,p=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100;return r(n[5]),this.setHSL(d,p,s)}}}else if(a=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=a[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(t&&0<t.length){var l=Ds[t];void 0===l?console.warn("THREE.Color: Unknown color "+t):this.setHex(l)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,r){return void 0===r&&(r=2),this.r=y(t.r,r),this.g=y(t.g,r),this.b=y(t.b,r),this},copyLinearToGamma:function(t,r){void 0===r&&(r=2);var a=0<r?1/r:1;return this.r=y(t.r,a),this.g=y(t.g,a),this.b=y(t.b,a),this},convertGammaToLinear:function(){var t=this.r,r=this.g,a=this.b;return this.r=t*t,this.g=r*r,this.b=a*a,this},convertLinearToGamma:function(){return this.r=M(this.r),this.g=M(this.g),this.b=M(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var a=t||{h:0,s:0,l:0},i=this.r,r=this.g,o=this.b,n=l(i,r,o),s=m(i,r,o),d=(s+n)/2,p,c;if(s===n)p=0,c=0;else{var u=n-s;c=0.5>=d?u/(n+s):u/(2-n-s),n===i?p=(r-o)/u+(r<o?6:0):n===r?p=(o-i)/u+2:n===o?p=(i-r)/u+4:void 0,p/=6}return a.h=p,a.s=c,a.l=d,a},getStyle:function(){return"rgb("+(0|255*this.r)+","+(0|255*this.g)+","+(0|255*this.b)+")"},offsetHSL:function(t,r,a){var i=this.getHSL();return i.h+=t,i.s+=r,i.l+=a,this.setHSL(i.h,i.s,i.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=l(0,this.r-t.r),this.g=l(0,this.g-t.g),this.b=l(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,r){return void 0===r&&(r=0),this.r=t[r],this.g=t[r+1],this.b=t[r+2],this},toArray:function(t,r){return void 0===t&&(t=[]),void 0===r&&(r=0),t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t},toJSON:function(){return this.getHex()}});var ws={common:{diffuse:{value:new pe(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new v(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:0.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new f(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5e-4},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pe(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new pe(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new v(0,0,1,1)}}},Cs={merge:function(t){for(var r={},a=0,i;a<t.length;a++)for(var o in i=this.clone(t[a]),i)r[o]=i[o];return r},clone:function(t){var r={};for(var a in t)for(var i in r[a]={},t[a]){var o=t[a][i];r[a][i]=o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture)?o.clone():Array.isArray(o)?o.slice():o}return r}},Ss={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"},Is={basic:{uniforms:Cs.merge([ws.common,ws.specularmap,ws.envmap,ws.aomap,ws.lightmap,ws.fog]),vertexShader:Ss.meshbasic_vert,fragmentShader:Ss.meshbasic_frag},lambert:{uniforms:Cs.merge([ws.common,ws.specularmap,ws.envmap,ws.aomap,ws.lightmap,ws.emissivemap,ws.fog,ws.lights,{emissive:{value:new pe(0)}}]),vertexShader:Ss.meshlambert_vert,fragmentShader:Ss.meshlambert_frag},phong:{uniforms:Cs.merge([ws.common,ws.specularmap,ws.envmap,ws.aomap,ws.lightmap,ws.emissivemap,ws.bumpmap,ws.normalmap,ws.displacementmap,ws.gradientmap,ws.fog,ws.lights,{emissive:{value:new pe(0)},specular:{value:new pe(1118481)},shininess:{value:30}}]),vertexShader:Ss.meshphong_vert,fragmentShader:Ss.meshphong_frag},standard:{uniforms:Cs.merge([ws.common,ws.envmap,ws.aomap,ws.lightmap,ws.emissivemap,ws.bumpmap,ws.normalmap,ws.displacementmap,ws.roughnessmap,ws.metalnessmap,ws.fog,ws.lights,{emissive:{value:new pe(0)},roughness:{value:0.5},metalness:{value:0.5},envMapIntensity:{value:1}}]),vertexShader:Ss.meshphysical_vert,fragmentShader:Ss.meshphysical_frag},points:{uniforms:Cs.merge([ws.points,ws.fog]),vertexShader:Ss.points_vert,fragmentShader:Ss.points_frag},dashed:{uniforms:Cs.merge([ws.common,ws.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ss.linedashed_vert,fragmentShader:Ss.linedashed_frag},depth:{uniforms:Cs.merge([ws.common,ws.displacementmap]),vertexShader:Ss.depth_vert,fragmentShader:Ss.depth_frag},normal:{uniforms:Cs.merge([ws.common,ws.bumpmap,ws.normalmap,ws.displacementmap,{opacity:{value:1}}]),vertexShader:Ss.normal_vert,fragmentShader:Ss.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ss.cube_vert,fragmentShader:Ss.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ss.equirect_vert,fragmentShader:Ss.equirect_frag},distanceRGBA:{uniforms:Cs.merge([ws.common,ws.displacementmap,{referencePosition:{value:new D},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ss.distanceRGBA_vert,fragmentShader:Ss.distanceRGBA_frag},shadow:{uniforms:Cs.merge([ws.lights,{color:{value:new pe(0)},opacity:{value:1}}]),vertexShader:Ss.shadow_vert,fragmentShader:Ss.shadow_frag}};Is.physical={uniforms:Cs.merge([Is.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ss.meshphysical_vert,fragmentShader:Ss.meshphysical_frag},Object.assign(ce.prototype,{set:function(t,r){return this.min.copy(t),this.max.copy(r),this},setFromPoints:function(t){this.makeEmpty();for(var r=0,a=t.length;r<a;r++)this.expandByPoint(t[r]);return this},setFromCenterAndSize:function(){var t=new f;return function(r,a){var i=t.copy(a).multiplyScalar(0.5);return this.min.copy(r).sub(i),this.max.copy(r).add(i),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=+Infinity,this.max.x=this.max.y=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var r=t||new f;return this.isEmpty()?r.set(0,0):r.addVectors(this.min,this.max).multiplyScalar(0.5)},getSize:function(t){var r=t||new f;return this.isEmpty()?r.set(0,0):r.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,r){var a=r||new f;return a.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y?!1:!0},clampPoint:function(t,r){var a=r||new f;return a.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new f;return function(r){var a=t.copy(r).clamp(this.min,this.max);return a.sub(r).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),me.prototype=Object.create(c.prototype),me.prototype.constructor=me;var _s=0;Object.assign(he.prototype,d.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var r in t){var a=t[r];if(void 0===a){console.warn("THREE.Material: '"+r+"' parameter is undefined.");continue}if("shading"===r){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=a===fo;continue}var i=this[r];if(void 0===i){console.warn("THREE."+this.type+": '"+r+"' is not a property of this material.");continue}i&&i.isColor?i.set(a):i&&i.isVector3&&a&&a.isVector3?i.copy(a):"overdraw"===r?this[r]=+a:this[r]=a}},toJSON:function(t){function r(t){var r=[];for(var a in t){var i=t[a];delete i.metadata,r.push(i)}return r}var a=void 0===t;a&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ao&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==go&&(i.side=this.side),this.vertexColors!==Mo&&(i.vertexColors=this.vertexColors),1>this.opacity&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,!0===this.dithering&&(i.dithering=!0),0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),a){var o=r(t.textures),n=r(t.images);0<o.length&&(i.textures=o),0<n.length&&(i.images=n)}return i},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var r=t.clippingPlanes,a=null;if(null!==r){var o=r.length;a=Array(o);for(var n=0;n!==o;++n)a[n]=r[n].clone()}return this.clippingPlanes=a,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ye.prototype=Object.create(he.prototype),ye.prototype.constructor=ye,ye.prototype.isShaderMaterial=!0,ye.prototype.copy=function(t){return he.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Cs.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},ye.prototype.toJSON=function(t){var r=he.prototype.toJSON.call(this,t);return r.uniforms=this.uniforms,r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r},fe.prototype=Object.create(he.prototype),fe.prototype.constructor=fe,fe.prototype.isMeshDepthMaterial=!0,fe.prototype.copy=function(t){return he.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Me.prototype=Object.create(he.prototype),Me.prototype.constructor=Me,Me.prototype.isMeshDistanceMaterial=!0,Me.prototype.copy=function(t){return he.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Object.assign(xe.prototype,{isBox3:!0,set:function(t,r){return this.min.copy(t),this.max.copy(r),this},setFromArray:function(t){for(var r=+Infinity,a=+Infinity,o=+Infinity,n=-Infinity,s=-Infinity,d=-Infinity,p=0,i=t.length;p<i;p+=3){var l=t[p],c=t[p+1],u=t[p+2];l<r&&(r=l),c<a&&(a=c),u<o&&(o=u),l>n&&(n=l),c>s&&(s=c),u>d&&(d=u)}return this.min.set(r,a,o),this.max.set(n,s,d),this},setFromBufferAttribute:function(t){for(var r=+Infinity,a=+Infinity,o=+Infinity,n=-Infinity,s=-Infinity,d=-Infinity,p=0,i=t.count;p<i;p++){var l=t.getX(p),c=t.getY(p),u=t.getZ(p);l<r&&(r=l),c<a&&(a=c),u<o&&(o=u),l>n&&(n=l),c>s&&(s=c),u>d&&(d=u)}return this.min.set(r,a,o),this.max.set(n,s,d),this},setFromPoints:function(t){this.makeEmpty();for(var r=0,a=t.length;r<a;r++)this.expandByPoint(t[r]);return this},setFromCenterAndSize:function(){var t=new D;return function(r,a){var i=t.copy(a).multiplyScalar(0.5);return this.min.copy(r).sub(i),this.max.copy(r).add(i),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var r=t||new D;return this.isEmpty()?r.set(0,0,0):r.addVectors(this.min,this.max).multiplyScalar(0.5)},getSize:function(t){var r=t||new D;return this.isEmpty()?r.set(0,0,0):r.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t=new D;return function(r){var a=this;return r.updateMatrixWorld(!0),r.traverse(function(r){var o=r.geometry,n,i;if(void 0!==o)if(o.isGeometry){var s=o.vertices;for(n=0,i=s.length;n<i;n++)t.copy(s[n]),t.applyMatrix4(r.matrixWorld),a.expandByPoint(t)}else if(o.isBufferGeometry){var l=o.attributes.position;if(void 0!==l)for(n=0,i=l.count;n<i;n++)t.fromBufferAttribute(l,n).applyMatrix4(r.matrixWorld),a.expandByPoint(t)}}),this}}(),containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,r){var a=r||new D;return a.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z?!1:!0},intersectsSphere:function(){var t=new D;return function(r){return this.clampPoint(r.center,t),t.distanceToSquared(r.center)<=r.radius*r.radius}}(),intersectsPlane:function(t){var r,a;return 0<t.normal.x?(r=t.normal.x*this.min.x,a=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,a=t.normal.x*this.min.x),0<t.normal.y?(r+=t.normal.y*this.min.y,a+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,a+=t.normal.y*this.min.y),0<t.normal.z?(r+=t.normal.z*this.min.z,a+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,a+=t.normal.z*this.min.z),r<=t.constant&&a>=t.constant},clampPoint:function(t,r){var a=r||new D;return a.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new D;return function(r){var a=t.copy(r).clamp(this.min,this.max);return a.sub(r).length()}}(),getBoundingSphere:function(){var t=new D;return function(r){var a=r||new Ee;return this.getCenter(a.center),a.radius=0.5*this.getSize(t).length(),a}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new D,new D,new D,new D,new D,new D,new D,new D];return function(r){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(Ee.prototype,{set:function(t,r){return this.center.copy(t),this.radius=r,this},setFromPoints:function(){var t=new xe;return function(r,a){var o=this.center;void 0===a?t.setFromPoints(r).getCenter(o):o.copy(a);for(var n=0,s=0,i=r.length;s<i;s++)n=l(n,o.distanceToSquared(r[s]));return this.radius=M(n),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return g(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,r){var a=this.center.distanceToSquared(t),i=r||new D;return i.copy(t),a>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(t){var r=t||new xe;return r.set(this.center,this.center),r.expandByScalar(this.radius),r},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(ve.prototype,{isMatrix3:!0,set:function(t,r,a,i,o,n,s,l,d){var p=this.elements;return p[0]=t,p[1]=i,p[2]=s,p[3]=r,p[4]=o,p[5]=l,p[6]=a,p[7]=n,p[8]=d,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(t){var r=this.elements,a=t.elements;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],this},setFromMatrix4:function(t){var r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this},applyToBufferAttribute:function(){var t=new D;return function(r){for(var a=0,i=r.count;a<i;a++)t.x=r.getX(a),t.y=r.getY(a),t.z=r.getZ(a),t.applyMatrix3(this),r.setXYZ(a,t.x,t.y,t.z);return r}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,r){var a=t.elements,i=r.elements,o=this.elements,n=a[0],s=a[3],l=a[6],d=a[1],p=a[4],c=a[7],u=a[2],m=a[5],g=a[8],h=i[0],y=i[3],f=i[6],M=i[1],x=i[4],E=i[7],v=i[2],A=i[5],T=i[8];return o[0]=n*h+s*M+l*v,o[3]=n*y+s*x+l*A,o[6]=n*f+s*E+l*T,o[1]=d*h+p*M+c*v,o[4]=d*y+p*x+c*A,o[7]=d*f+p*E+c*T,o[2]=u*h+m*M+g*v,o[5]=u*y+m*x+g*A,o[8]=u*f+m*E+g*T,this},multiplyScalar:function(t){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this},determinant:function(){var t=this.elements,r=t[0],a=t[1],o=t[2],n=t[3],s=t[4],l=t[5],d=t[6],p=t[7],c=t[8];return r*s*c-r*l*p-a*n*c+a*l*d+o*n*p-o*s*d},getInverse:function(t,r){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var a=t.elements,i=this.elements,o=a[0],n=a[1],s=a[2],l=a[3],d=a[4],p=a[5],c=a[6],u=a[7],m=a[8],g=m*d-p*u,h=p*c-m*l,y=u*l-d*c,f=o*g+n*h+s*y;if(0===f){var M="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===r)throw new Error(M);else console.warn(M);return this.identity()}var x=1/f;return i[0]=g*x,i[1]=(s*u-m*n)*x,i[2]=(p*n-s*d)*x,i[3]=h*x,i[4]=(m*o-s*c)*x,i[5]=(s*l-p*o)*x,i[6]=y*x,i[7]=(n*c-u*o)*x,i[8]=(d*o-n*l)*x,this},transpose:function(){var t=this.elements,r;return r=t[1],t[1]=t[3],t[3]=r,r=t[2],t[2]=t[6],t[6]=r,r=t[5],t[5]=t[7],t[7]=r,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this},equals:function(t){for(var r=this.elements,a=t.elements,o=0;9>o;o++)if(r[o]!==a[o])return!1;return!0},fromArray:function(t,r){r===void 0&&(r=0);for(var a=0;9>a;a++)this.elements[a]=t[a+r];return this},toArray:function(t,r){void 0===t&&(t=[]),void 0===r&&(r=0);var a=this.elements;return t[r]=a[0],t[r+1]=a[1],t[r+2]=a[2],t[r+3]=a[3],t[r+4]=a[4],t[r+5]=a[5],t[r+6]=a[6],t[r+7]=a[7],t[r+8]=a[8],t}}),Object.assign(Ae.prototype,{set:function(t,r){return this.normal.copy(t),this.constant=r,this},setComponents:function(t,r,a,i){return this.normal.set(t,r,a),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new D,r=new D;return function(i,a,o){var n=t.subVectors(o,a).cross(r.subVectors(i,a)).normalize();return this.setFromNormalAndCoplanarPoint(n,i),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,r){var a=r||new D;return a.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var r=new D;return function(a,i){var o=i||new D,n=a.delta(r),s=this.normal.dot(n);if(0===s)return 0===this.distanceToPoint(a.start)?o.copy(a.start):void 0;var l=-(a.start.dot(this.normal)+this.constant)/s;return 0>l||1<l?void 0:o.copy(n).multiplyScalar(l).add(a.start)}}(),intersectsLine:function(t){var r=this.distanceToPoint(t.start),a=this.distanceToPoint(t.end);return 0>r&&0<a||0>a&&0<r},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){var r=t||new D;return r.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new D,r=new ve;return function(a,i){var o=i||r.getNormalMatrix(a),n=this.coplanarPoint(t).applyMatrix4(a),s=this.normal.applyMatrix3(o).normalize();return this.constant=-n.dot(s),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(Te.prototype,{set:function(t,r,a,i,o,n){var s=this.planes;return s[0].copy(t),s[1].copy(r),s[2].copy(a),s[3].copy(i),s[4].copy(o),s[5].copy(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){for(var r=this.planes,a=0;6>a;a++)r[a].copy(t.planes[a]);return this},setFromMatrix:function(t){var r=this.planes,a=t.elements,i=a[0],o=a[1],n=a[2],s=a[3],l=a[4],d=a[5],p=a[6],c=a[7],u=a[8],m=a[9],g=a[10],h=a[11],y=a[12],f=a[13],M=a[14],x=a[15];return r[0].setComponents(s-i,c-l,h-u,x-y).normalize(),r[1].setComponents(s+i,c+l,h+u,x+y).normalize(),r[2].setComponents(s+o,c+d,h+m,x+f).normalize(),r[3].setComponents(s-o,c-d,h-m,x-f).normalize(),r[4].setComponents(s-n,c-p,h-g,x-M).normalize(),r[5].setComponents(s+n,c+p,h+g,x+M).normalize(),this},intersectsObject:function(){var t=new Ee;return function(r){var a=r.geometry;return null===a.boundingSphere&&a.computeBoundingSphere(),t.copy(a.boundingSphere).applyMatrix4(r.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new Ee;return function(r){return t.center.set(0,0,0),t.radius=0.7071067811865476,t.applyMatrix4(r.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var r=this.planes,a=t.center,o=-t.radius,n=0,i;6>n;n++)if(i=r[n].distanceToPoint(a),i<o)return!1;return!0},intersectsBox:function(){var t=new D,r=new D;return function(a){for(var o=this.planes,n=0,i;6>n;n++){i=o[n],t.x=0<i.normal.x?a.min.x:a.max.x,r.x=0<i.normal.x?a.max.x:a.min.x,t.y=0<i.normal.y?a.min.y:a.max.y,r.y=0<i.normal.y?a.max.y:a.min.y,t.z=0<i.normal.z?a.min.z:a.max.z,r.z=0<i.normal.z?a.max.z:a.min.z;var s=i.distanceToPoint(t),l=i.distanceToPoint(r);if(0>s&&0>l)return!1}return!0}}(),containsPoint:function(t){for(var r=this.planes,a=0;6>a;a++)if(0>r[a].distanceToPoint(t))return!1;return!0}}),Ne.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Ne.DefaultOrder="XYZ",Object.defineProperties(Ne.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(Ne.prototype,{isEuler:!0,set:function(t,r,a,i){return this._x=t,this._y=r,this._z=a,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,r,a){var i=Math.asin,o=Ms.clamp,n=t.elements,s=n[0],l=n[4],d=n[8],p=n[1],c=n[5],u=n[9],m=n[2],h=n[6],y=n[10];return r=r||this._order,"XYZ"===r?(this._y=i(o(d,-1,1)),0.99999>g(d)?(this._x=ro(-u,y),this._z=ro(-l,s)):(this._x=ro(h,c),this._z=0)):"YXZ"===r?(this._x=i(-o(u,-1,1)),0.99999>g(u)?(this._y=ro(d,y),this._z=ro(p,c)):(this._y=ro(-m,s),this._z=0)):"ZXY"===r?(this._x=i(o(h,-1,1)),0.99999>g(h)?(this._y=ro(-m,y),this._z=ro(-l,c)):(this._y=0,this._z=ro(p,s))):"ZYX"===r?(this._y=i(-o(m,-1,1)),0.99999>g(m)?(this._x=ro(h,y),this._z=ro(p,s)):(this._x=0,this._z=ro(-l,c))):"YZX"===r?(this._z=i(o(p,-1,1)),0.99999>g(p)?(this._x=ro(-u,c),this._y=ro(-m,s)):(this._x=0,this._y=ro(d,y))):"XZY"===r?(this._z=i(-o(l,-1,1)),0.99999>g(l)?(this._x=ro(h,c),this._y=ro(d,s)):(this._x=ro(-u,y),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+r),this._order=r,!1!==a&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new N;return function(r,a,i){return t.makeRotationFromQuaternion(r),this.setFromRotationMatrix(t,a,i)}}(),setFromVector3:function(t,r){return this.set(t.x,t.y,t.z,r||this._order)},reorder:function(){var t=new b;return function(r){return t.setFromEuler(this),this.setFromQuaternion(t,r)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,r){return void 0===t&&(t=[]),void 0===r&&(r=0),t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new D(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(De.prototype,{set:function(t){this.mask=0|1<<t},enable:function(t){this.mask|=0|1<<t},toggle:function(t){this.mask^=0|1<<t},disable:function(t){this.mask&=~(0|1<<t)},test:function(t){return 0!==(this.mask&t.mask)}});var js=0;we.DefaultUp=new D(0,1,0),we.DefaultMatrixAutoUpdate=!0,Object.assign(we.prototype,d.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,r){this.quaternion.setFromAxisAngle(t,r)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new b;return function(r,a){return t.setFromAxisAngle(r,a),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new D(1,0,0);return function(r){return this.rotateOnAxis(t,r)}}(),rotateY:function(){var t=new D(0,1,0);return function(r){return this.rotateOnAxis(t,r)}}(),rotateZ:function(){var t=new D(0,0,1);return function(r){return this.rotateOnAxis(t,r)}}(),translateOnAxis:function(){var t=new D;return function(r,a){return t.copy(r).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(a)),this}}(),translateX:function(){var t=new D(1,0,0);return function(r){return this.translateOnAxis(t,r)}}(),translateY:function(){var t=new D(0,1,0);return function(r){return this.translateOnAxis(t,r)}}(),translateZ:function(){var t=new D(0,0,1);return function(r){return this.translateOnAxis(t,r)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new N;return function(r){return r.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new N;return function(r){this.isCamera?t.lookAt(this.position,r,this.up):t.lookAt(r,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(1<arguments.length){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length){for(var r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}var a=this.children.indexOf(t);return-1!==a&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(a,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,r){if(this[t]===r)return this;for(var a=0,i=this.children.length;a<i;a++){var o=this.children[a],n=o.getObjectByProperty(t,r);if(n!==void 0)return n}},getWorldPosition:function(t){var r=t||new D;return this.updateMatrixWorld(!0),r.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new D,r=new D;return function(a){var i=a||new b;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,i,r),i}}(),getWorldRotation:function(){var t=new b;return function(r){var a=r||new Ne;return this.getWorldQuaternion(t),a.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new D,r=new b;return function(a){var i=a||new D;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,r,i),i}}(),getWorldDirection:function(){var t=new b;return function(r){var a=r||new D;return this.getWorldQuaternion(t),a.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var r=this.children,a=0,i=r.length;a<i;a++)r[a].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var r=this.children,a=0,i=r.length;a<i;a++)r[a].traverseVisible(t)}},traverseAncestors:function(t){var r=this.parent;null!==r&&(t(r),r.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var r=this.children,a=0,i=r.length;a<i;a++)r[a].updateMatrixWorld(t)},toJSON:function(t){function r(r,a){return void 0===r[a.uuid]&&(r[a.uuid]=a.toJSON(t)),a.uuid}function a(t){var r=[];for(var a in t){var i=t[a];delete i.metadata,r.push(i)}return r}var o=void 0===t||""===t,n={};o&&(t={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var s={};if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.matrix=this.matrix.toArray(),void 0!==this.geometry&&(s.geometry=r(t.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var d=[],p=0,i=this.material.length;p<i;p++)d.push(r(t.materials,this.material[p]));s.material=d}else s.material=r(t.materials,this.material);if(0<this.children.length){s.children=[];for(var p=0;p<this.children.length;p++)s.children.push(this.children[p].toJSON(t).object)}if(o){var l=a(t.geometries),c=a(t.materials),u=a(t.textures),m=a(t.images);0<l.length&&(n.geometries=l),0<c.length&&(n.materials=c),0<u.length&&(n.textures=u),0<m.length&&(n.images=m)}return n.object=s,n},clone:function(t){return new this.constructor().copy(this,t)},copy:function(t,r){if(void 0===r&&(r=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===r)for(var a=0,i;a<t.children.length;a++)i=t.children[a],this.add(i.clone());return this}}),Ce.prototype=Object.assign(Object.create(we.prototype),{constructor:Ce,isCamera:!0,copy:function(t,r){return we.prototype.copy.call(this,t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:function(){var t=new b;return function(r){var a=r||new D;return this.getWorldQuaternion(t),a.set(0,0,-1).applyQuaternion(t)}}(),updateMatrixWorld:function(t){we.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),Se.prototype=Object.assign(Object.create(Ce.prototype),{constructor:Se,isOrthographicCamera:!0,copy:function(t,r){return Ce.prototype.copy.call(this,t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,r,a,i,o,n){this.view={fullWidth:t,fullHeight:r,offsetX:a,offsetY:i,width:o,height:n},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,i=(this.top+this.bottom)/2,o=a-t,n=a+t,s=i+r,l=i-r;if(null!==this.view){var d=this.zoom/(this.view.width/this.view.fullWidth),p=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;o+=c*(this.view.offsetX/d),n=o+c*(this.view.width/d),s-=u*(this.view.offsetY/p),l=s-u*(this.view.height/p)}this.projectionMatrix.makeOrthographic(o,n,s,l,this.near,this.far)},toJSON:function(t){var r=we.prototype.toJSON.call(this,t);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,null!==this.view&&(r.object.view=Object.assign({},this.view)),r}}),Ie.prototype=Object.assign(Object.create(Ce.prototype),{constructor:Ie,isPerspectiveCamera:!0,copy:function(t,r){return Ce.prototype.copy.call(this,t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var r=0.5*this.getFilmHeight()/t;this.fov=2*Ms.RAD2DEG*a(r),this.updateProjectionMatrix()},getFocalLength:function(){var t=r(0.5*Ms.DEG2RAD*this.fov);return 0.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Ms.RAD2DEG*a(r(0.5*Ms.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*m(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/l(this.aspect,1)},setViewOffset:function(t,r,a,i,o,n){this.aspect=t/r,this.view={fullWidth:t,fullHeight:r,offsetX:a,offsetY:i,width:o,height:n},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,a=t*r(0.5*Ms.DEG2RAD*this.fov)/this.zoom,i=2*a,o=this.aspect*i,n=-0.5*o,s=this.view;if(null!==s){var l=s.fullWidth,d=s.fullHeight;n+=s.offsetX*o/l,a-=s.offsetY*i/d,o*=s.width/l,i*=s.height/d}var p=this.filmOffset;0!==p&&(n+=t*p/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+o,a,a-i,t,this.far)},toJSON:function(t){var r=we.prototype.toJSON.call(this,t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,null!==this.view&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}),Object.assign(_e.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var r=0,a=t.vertexNormals.length;r<a;r++)this.vertexNormals[r]=t.vertexNormals[r].clone();for(var r=0,a=t.vertexColors.length;r<a;r++)this.vertexColors[r]=t.vertexColors[r].clone();return this}});var Os=0;Object.assign(Oe.prototype,d.prototype,{isGeometry:!0,applyMatrix:function(t){for(var r=new ve().getNormalMatrix(t),a=0,i=this.vertices.length,o;a<i;a++)o=this.vertices[a],o.applyMatrix4(t);for(var a=0,i=this.faces.length,n;a<i;a++){n=this.faces[a],n.normal.applyMatrix3(r).normalize();for(var s=0,l=n.vertexNormals.length;s<l;s++)n.vertexNormals[s].applyMatrix3(r).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new N;return function(r){return t.makeRotationX(r),this.applyMatrix(t),this}}(),rotateY:function(){var t=new N;return function(r){return t.makeRotationY(r),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new N;return function(r){return t.makeRotationZ(r),this.applyMatrix(t),this}}(),translate:function(){var t=new N;return function(r,a,i){return t.makeTranslation(r,a,i),this.applyMatrix(t),this}}(),scale:function(){var t=new N;return function(r,a,i){return t.makeScale(r,a,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new we;return function(r){t.lookAt(r),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function r(t,r,a,i){var n=void 0===l?[]:[m[t].clone(),m[r].clone(),m[a].clone()],s=void 0===d?[]:[o.colors[t].clone(),o.colors[r].clone(),o.colors[a].clone()],c=new _e(t,r,a,n,s,i);o.faces.push(c),void 0!==p&&o.faceVertexUvs[0].push([g[t].clone(),g[r].clone(),g[a].clone()]),void 0!==u&&o.faceVertexUvs[1].push([h[t].clone(),h[r].clone(),h[a].clone()])}var o=this,a=null===t.index?void 0:t.index.array,n=t.attributes,s=n.position.array,l=void 0===n.normal?void 0:n.normal.array,d=void 0===n.color?void 0:n.color.array,p=void 0===n.uv?void 0:n.uv.array,u=void 0===n.uv2?void 0:n.uv2.array;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var m=[],g=[],h=[],c=0,i=0;c<s.length;c+=3,i+=2)o.vertices.push(new D(s[c],s[c+1],s[c+2])),void 0!==l&&m.push(new D(l[c],l[c+1],l[c+2])),void 0!==d&&o.colors.push(new pe(d[c],d[c+1],d[c+2])),void 0!==p&&g.push(new f(p[i],p[i+1])),void 0!==u&&h.push(new f(u[i],u[i+1]));var y=t.groups;if(0<y.length)for(var c=0;c<y.length;c++)for(var M=y[c],x=M.start,E=M.count,i=x;i<x+E;i+=3)void 0===a?r(i,i+1,i+2,M.materialIndex):r(a[i],a[i+1],a[i+2],M.materialIndex);else if(void 0!==a)for(var c=0;c<a.length;c+=3)r(a[c],a[c+1],a[c+2]);else for(var c=0;c<s.length/3;c+=3)r(c,c+1,c+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,r=this.boundingSphere.radius,a=0===r?1:1/r,i=new N;return i.set(a,0,0,-a*t.x,0,a,0,-a*t.y,0,0,a,-a*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new D,r=new D,a=0,i=this.faces.length;a<i;a++){var o=this.faces[a],n=this.vertices[o.a],s=this.vertices[o.b],l=this.vertices[o.c];t.subVectors(l,s),r.subVectors(n,s),t.cross(r),t.normalize(),o.normal.copy(t)}},computeVertexNormals:function(t){t===void 0&&(t=!0);var r,a,i,o,n,s;for(s=Array(this.vertices.length),r=0,a=this.vertices.length;r<a;r++)s[r]=new D;if(t){var l=new D,d=new D,p,c,u;for(i=0,o=this.faces.length;i<o;i++)n=this.faces[i],p=this.vertices[n.a],c=this.vertices[n.b],u=this.vertices[n.c],l.subVectors(u,c),d.subVectors(p,c),l.cross(d),s[n.a].add(l),s[n.b].add(l),s[n.c].add(l)}else for(this.computeFaceNormals(),i=0,o=this.faces.length;i<o;i++)n=this.faces[i],s[n.a].add(n.normal),s[n.b].add(n.normal),s[n.c].add(n.normal);for(r=0,a=this.vertices.length;r<a;r++)s[r].normalize();for(i=0,o=this.faces.length;i<o;i++){n=this.faces[i];var m=n.vertexNormals;3===m.length?(m[0].copy(s[n.a]),m[1].copy(s[n.b]),m[2].copy(s[n.c])):(m[0]=s[n.a].clone(),m[1]=s[n.b].clone(),m[2]=s[n.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,r,a;for(this.computeFaceNormals(),t=0,r=this.faces.length;t<r;t++){a=this.faces[t];var i=a.vertexNormals;3===i.length?(i[0].copy(a.normal),i[1].copy(a.normal),i[2].copy(a.normal)):(i[0]=a.normal.clone(),i[1]=a.normal.clone(),i[2]=a.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,r,a,i,o;for(a=0,i=this.faces.length;a<i;a++)for(o=this.faces[a],o.__originalFaceNormal?o.__originalFaceNormal.copy(o.normal):o.__originalFaceNormal=o.normal.clone(),o.__originalVertexNormals||(o.__originalVertexNormals=[]),(t=0,r=o.vertexNormals.length);t<r;t++)o.__originalVertexNormals[t]?o.__originalVertexNormals[t].copy(o.vertexNormals[t]):o.__originalVertexNormals[t]=o.vertexNormals[t].clone();var n=new Oe;for(n.faces=this.faces,t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s=this.morphNormals[t].faceNormals,l=this.morphNormals[t].vertexNormals,d,p;for(a=0,i=this.faces.length;a<i;a++)d=new D,p={a:new D,b:new D,c:new D},s.push(d),l.push(p)}var c=this.morphNormals[t];n.vertices=this.morphTargets[t].vertices,n.computeFaceNormals(),n.computeVertexNormals();var d,p;for(a=0,i=this.faces.length;a<i;a++)o=this.faces[a],d=c.faceNormals[a],p=c.vertexNormals[a],d.copy(o.normal),p.a.copy(o.vertexNormals[0]),p.b.copy(o.vertexNormals[1]),p.c.copy(o.vertexNormals[2])}for(a=0,i=this.faces.length;a<i;a++)o=this.faces[a],o.normal=o.__originalFaceNormal,o.vertexNormals=o.__originalVertexNormals},computeLineDistances:function(){for(var t=0,r=this.vertices,a=0,i=r.length;a<i;a++)0<a&&(t+=r[a].distanceTo(r[a-1])),this.lineDistances[a]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new xe),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ee),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,r,a){if(!(t&&t.isGeometry))return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var o=this.vertices.length,n=this.vertices,s=t.vertices,l=this.faces,d=t.faces,p=this.faceVertexUvs[0],c=t.faceVertexUvs[0],u=this.colors,m=t.colors,g;a===void 0&&(a=0),r!==void 0&&(g=new ve().getNormalMatrix(r));for(var h=0,i=s.length;h<i;h++){var y=s[h],f=y.clone();r!==void 0&&f.applyMatrix4(r),n.push(f)}for(var h=0,i=m.length;h<i;h++)u.push(m[h].clone());for(h=0,i=d.length;h<i;h++){var M=d[h],x=M.vertexNormals,E=M.vertexColors,v,A,T;v=new _e(M.a+o,M.b+o,M.c+o),v.normal.copy(M.normal),g!==void 0&&v.normal.applyMatrix3(g).normalize();for(var b=0,L=x.length;b<L;b++)A=x[b].clone(),void 0!==g&&A.applyMatrix3(g).normalize(),v.vertexNormals.push(A);v.color.copy(M.color);for(var b=0,L=E.length;b<L;b++)T=E[b],v.vertexColors.push(T.clone());v.materialIndex=M.materialIndex+a,l.push(v)}for(h=0,i=c.length;h<i;h++){var N=c[h],D=[];if(void 0!==N){for(var b=0,L=N.length;b<L;b++)D.push(N[b].clone());p.push(D)}}},mergeMesh:function(t){return t&&t.isMesh?void(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t={},r=[],a=[],o=10000,s,l,d,i,p,c,u,m;for(d=0,i=this.vertices.length;d<i;d++)s=this.vertices[d],l=n(s.x*o)+"_"+n(s.y*o)+"_"+n(s.z*o),void 0===t[l]?(t[l]=d,r.push(this.vertices[d]),a[d]=r.length-1):a[d]=a[t[l]];var g=[];for(d=0,i=this.faces.length;d<i;d++){p=this.faces[d],p.a=a[p.a],p.b=a[p.b],p.c=a[p.c],c=[p.a,p.b,p.c];for(var h=0;3>h;h++)if(c[h]===c[(h+1)%3]){g.push(d);break}}for(d=g.length-1;0<=d;d--){var y=g[d];for(this.faces.splice(y,1),u=0,m=this.faceVertexUvs.length;u<m;u++)this.faceVertexUvs[u].splice(y,1)}var f=this.vertices.length-r.length;return this.vertices=r,f},sortFacesByMaterialIndex:function(){for(var t=this.faces,r=t.length,a=0;a<r;a++)t[a]._id=a;t.sort(function(t,r){return t.materialIndex-r.materialIndex});var i=this.faceVertexUvs[0],o=this.faceVertexUvs[1],n,s;i&&i.length===r&&(n=[]),o&&o.length===r&&(s=[]);for(var a=0,l;a<r;a++)l=t[a]._id,n&&n.push(i[l]),s&&s.push(o[l]);n&&(this.faceVertexUvs[0]=n),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){function t(t,r,a){return a?t|1<<r:t&~(1<<r)}function r(t){var r=t.x.toString()+t.y.toString()+t.z.toString();return void 0===m[r]?(m[r]=u.length/3,u.push(t.x,t.y,t.z),m[r]):m[r]}function a(t){var r=t.r.toString()+t.g.toString()+t.b.toString();return void 0===h[r]?(h[r]=g.length,g.push(t.getHex()),h[r]):h[r]}function o(t){var r=t.x.toString()+t.y.toString();return void 0===f[r]?(f[r]=y.length/2,y.push(t.x,t.y),f[r]):f[r]}var n={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),void 0!==this.parameters){var s=this.parameters;for(var l in s)void 0!==s[l]&&(n[l]=s[l]);return n}for(var d=[],p=0,i;p<this.vertices.length;p++)i=this.vertices[p],d.push(i.x,i.y,i.z);for(var c=[],u=[],m={},g=[],h={},y=[],f={},p=0;p<this.faces.length;p++){var M=this.faces[p],x=void 0!==this.faceVertexUvs[0][p],E=0<M.normal.length(),v=0<M.vertexNormals.length,A=1!==M.color.r||1!==M.color.g||1!==M.color.b,T=0<M.vertexColors.length,b=0;if(b=t(b,0,0),b=t(b,1,!0),b=t(b,2,!1),b=t(b,3,x),b=t(b,4,E),b=t(b,5,v),b=t(b,6,A),b=t(b,7,T),c.push(b),c.push(M.a,M.b,M.c),c.push(M.materialIndex),x){var L=this.faceVertexUvs[0][p];c.push(o(L[0]),o(L[1]),o(L[2]))}if(E&&c.push(r(M.normal)),v){var N=M.vertexNormals;c.push(r(N[0]),r(N[1]),r(N[2]))}if(A&&c.push(a(M.color)),T){var D=M.vertexColors;c.push(a(D[0]),a(D[1]),a(D[2]))}}return n.data={},n.data.vertices=d,n.data.normals=u,0<g.length&&(n.data.colors=g),0<y.length&&(n.data.uvs=[y]),n.data.faces=c,n},clone:function(){return new Oe().copy(this)},copy:function(t){var r,a,i,o,n,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var l=t.vertices;for(r=0,a=l.length;r<a;r++)this.vertices.push(l[r].clone());var d=t.colors;for(r=0,a=d.length;r<a;r++)this.colors.push(d[r].clone());var p=t.faces;for(r=0,a=p.length;r<a;r++)this.faces.push(p[r].clone());for(r=0,a=t.faceVertexUvs.length;r<a;r++){var c=t.faceVertexUvs[r];for(void 0===this.faceVertexUvs[r]&&(this.faceVertexUvs[r]=[]),i=0,o=c.length;i<o;i++){var u=c[i],m=[];for(n=0,s=u.length;n<s;n++){var g=u[n];m.push(g.clone())}this.faceVertexUvs[r].push(m)}}var h=t.morphTargets;for(r=0,a=h.length;r<a;r++){var y={name:h[r].name};if(void 0!==h[r].vertices)for(y.vertices=[],i=0,o=h[r].vertices.length;i<o;i++)y.vertices.push(h[r].vertices[i].clone());if(void 0!==h[r].normals)for(y.normals=[],i=0,o=h[r].normals.length;i<o;i++)y.normals.push(h[r].normals[i].clone());this.morphTargets.push(y)}var f=t.morphNormals;for(r=0,a=f.length;r<a;r++){var M={};if(void 0!==f[r].vertexNormals)for(M.vertexNormals=[],i=0,o=f[r].vertexNormals.length;i<o;i++){var x=f[r].vertexNormals[i],E={};E.a=x.a.clone(),E.b=x.b.clone(),E.c=x.c.clone(),M.vertexNormals.push(E)}if(void 0!==f[r].faceNormals)for(M.faceNormals=[],i=0,o=f[r].faceNormals.length;i<o;i++)M.faceNormals.push(f[r].faceNormals[i].clone());this.morphNormals.push(M)}var v=t.skinWeights;for(r=0,a=v.length;r<a;r++)this.skinWeights.push(v[r].clone());var A=t.skinIndices;for(r=0,a=A.length;r<a;r++)this.skinIndices.push(A[r].clone());var T=t.lineDistances;for(r=0,a=T.length;r<a;r++)this.lineDistances.push(T[r]);var b=t.boundingBox;null!==b&&(this.boundingBox=b.clone());var L=t.boundingSphere;return null!==L&&(this.boundingSphere=L.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ze.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(ze.prototype,{isBufferAttribute:!0,setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=t===void 0?0:t.length/this.itemSize,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,r,a){t*=this.itemSize,a*=r.itemSize;for(var o=0,i=this.itemSize;o<i;o++)this.array[t+o]=r.array[a+o];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var r=this.array,a=0,o=0,i=t.length,n;o<i;o++)n=t[o],void 0===n&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),n=new pe),r[a++]=n.r,r[a++]=n.g,r[a++]=n.b;return this},copyIndicesArray:function(t){for(var r=this.array,a=0,o=0,i=t.length,n;o<i;o++)n=t[o],r[a++]=n.a,r[a++]=n.b,r[a++]=n.c;return this},copyVector2sArray:function(t){for(var r=this.array,a=0,o=0,i=t.length,n;o<i;o++)n=t[o],void 0===n&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),n=new f),r[a++]=n.x,r[a++]=n.y;return this},copyVector3sArray:function(t){for(var r=this.array,a=0,o=0,i=t.length,n;o<i;o++)n=t[o],void 0===n&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),n=new D),r[a++]=n.x,r[a++]=n.y,r[a++]=n.z;return this},copyVector4sArray:function(t){for(var r=this.array,a=0,o=0,i=t.length,n;o<i;o++)n=t[o],void 0===n&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),n=new v),r[a++]=n.x,r[a++]=n.y,r[a++]=n.z,r[a++]=n.w;return this},set:function(t,r){return void 0===r&&(r=0),this.array.set(t,r),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,r){return this.array[t*this.itemSize]=r,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,r){return this.array[t*this.itemSize+1]=r,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,r){return this.array[t*this.itemSize+2]=r,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,r){return this.array[t*this.itemSize+3]=r,this},setXY:function(t,r,a){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=a,this},setXYZ:function(t,r,a,i){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=a,this.array[t+2]=i,this},setXYZW:function(t,r,a,i,o){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=a,this.array[t+2]=i,this.array[t+3]=o,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Re.prototype=Object.create(ze.prototype),Re.prototype.constructor=Re,Ue.prototype=Object.create(ze.prototype),Ue.prototype.constructor=Ue,Pe.prototype=Object.create(ze.prototype),Pe.prototype.constructor=Pe,Be.prototype=Object.create(ze.prototype),Be.prototype.constructor=Be,ke.prototype=Object.create(ze.prototype),ke.prototype.constructor=ke,Fe.prototype=Object.create(ze.prototype),Fe.prototype.constructor=Fe,Ge.prototype=Object.create(ze.prototype),Ge.prototype.constructor=Ge,Ve.prototype=Object.create(ze.prototype),Ve.prototype.constructor=Ve,He.prototype=Object.create(ze.prototype),He.prototype.constructor=He,Object.assign(Qe.prototype,{computeGroups:function(t){for(var r=[],a=void 0,o=t.faces,n=0,i,s;n<o.length;n++)s=o[n],s.materialIndex!==a&&(a=s.materialIndex,void 0!==i&&(i.count=3*n-i.start,r.push(i)),i={start:3*n,materialIndex:a});i!==void 0&&(i.count=3*n-i.start,r.push(i)),this.groups=r},fromGeometry:function(t){var r=t.faces,a=t.vertices,o=t.faceVertexUvs,n=o[0]&&0<o[0].length,s=o[1]&&0<o[1].length,l=t.morphTargets,d=l.length,p;if(0<d){p=[];for(var c=0;c<d;c++)p[c]=[];this.morphTargets.position=p}var i=t.morphNormals,u=i.length,m;if(0<u){m=[];for(var c=0;c<u;c++)m[c]=[];this.morphTargets.normal=m}for(var g=t.skinIndices,h=t.skinWeights,y=g.length===a.length,M=h.length===a.length,c=0,x;c<r.length;c++){x=r[c],this.vertices.push(a[x.a],a[x.b],a[x.c]);var E=x.vertexNormals;if(3===E.length)this.normals.push(E[0],E[1],E[2]);else{var v=x.normal;this.normals.push(v,v,v)}var A=x.vertexColors;if(3===A.length)this.colors.push(A[0],A[1],A[2]);else{var T=x.color;this.colors.push(T,T,T)}if(!0===n){var b=o[0][c];void 0===b?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new f,new f,new f)):this.uvs.push(b[0],b[1],b[2])}if(!0===s){var b=o[1][c];void 0===b?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new f,new f,new f)):this.uvs2.push(b[0],b[1],b[2])}for(var L=0,N;L<d;L++)N=l[L].vertices,p[L].push(N[x.a],N[x.b],N[x.c]);for(var L=0,D;L<u;L++)D=i[L].vertexNormals[c],m[L].push(D.a,D.b,D.c);y&&this.skinIndices.push(g[x.a],g[x.b],g[x.c]),M&&this.skinWeights.push(h[x.a],h[x.b],h[x.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}}),We.MaxIndex=65535,Object.assign(We.prototype,d.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=Array.isArray(t)?new(65535<Ye(t)?Ge:ke)(t,1):t},addAttribute:function(t,r){return r&&r.isBufferAttribute||r&&r.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(r)):(this.attributes[t]=r,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new ze(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,r,a){this.groups.push({start:t,count:r,materialIndex:a===void 0?0:a})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,r){this.drawRange.start=t,this.drawRange.count=r},applyMatrix:function(t){var r=this.attributes.position;void 0!==r&&(t.applyToBufferAttribute(r),r.needsUpdate=!0);var a=this.attributes.normal;if(void 0!==a){var i=new ve().getNormalMatrix(t);i.applyToBufferAttribute(a),a.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new N;return function(r){return t.makeRotationX(r),this.applyMatrix(t),this}}(),rotateY:function(){var t=new N;return function(r){return t.makeRotationY(r),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new N;return function(r){return t.makeRotationZ(r),this.applyMatrix(t),this}}(),translate:function(){var t=new N;return function(r,a,i){return t.makeTranslation(r,a,i),this.applyMatrix(t),this}}(),scale:function(){var t=new N;return function(r,a,i){return t.makeScale(r,a,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new we;return function(r){t.lookAt(r),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var r=t.geometry;if(t.isPoints||t.isLine){var a=new Ve(3*r.vertices.length,3),i=new Ve(3*r.colors.length,3);if(this.addAttribute("position",a.copyVector3sArray(r.vertices)),this.addAttribute("color",i.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){var o=new Ve(r.lineDistances.length,1);this.addAttribute("lineDistance",o.copyArray(r.lineDistances))}null!==r.boundingSphere&&(this.boundingSphere=r.boundingSphere.clone()),null!==r.boundingBox&&(this.boundingBox=r.boundingBox.clone())}else t.isMesh&&r&&r.isGeometry&&this.fromGeometry(r);return this},updateFromObject:function(t){var r=t.geometry;if(t.isMesh){var a=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(a=void 0,r.elementsNeedUpdate=!1),void 0===a)return this.fromGeometry(r);a.verticesNeedUpdate=r.verticesNeedUpdate,a.normalsNeedUpdate=r.normalsNeedUpdate,a.colorsNeedUpdate=r.colorsNeedUpdate,a.uvsNeedUpdate=r.uvsNeedUpdate,a.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=a}var i;return!0===r.verticesNeedUpdate&&(i=this.attributes.position,void 0!==i&&(i.copyVector3sArray(r.vertices),i.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(i=this.attributes.normal,void 0!==i&&(i.copyVector3sArray(r.normals),i.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(i=this.attributes.color,void 0!==i&&(i.copyColorsArray(r.colors),i.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(i=this.attributes.uv,void 0!==i&&(i.copyVector2sArray(r.uvs),i.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(i=this.attributes.lineDistance,void 0!==i&&(i.copyArray(r.lineDistances),i.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(t.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=new Qe().fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var r=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new ze(r,3).copyVector3sArray(t.vertices)),0<t.normals.length){var a=new Float32Array(3*t.normals.length);this.addAttribute("normal",new ze(a,3).copyVector3sArray(t.normals))}if(0<t.colors.length){var o=new Float32Array(3*t.colors.length);this.addAttribute("color",new ze(o,3).copyColorsArray(t.colors))}if(0<t.uvs.length){var n=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new ze(n,2).copyVector2sArray(t.uvs))}if(0<t.uvs2.length){var s=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new ze(s,2).copyVector2sArray(t.uvs2))}if(0<t.indices.length){var d=65535<Ye(t.indices)?Uint32Array:Uint16Array,p=new d(3*t.indices.length);this.setIndex(new ze(p,1).copyIndicesArray(t.indices))}for(var c in this.groups=t.groups,t.morphTargets){for(var u=[],m=t.morphTargets[c],g=0,i=m.length;g<i;g++){var l=m[g],h=new Ve(3*l.length,3);u.push(h.copyVector3sArray(l))}this.morphAttributes[c]=u}if(0<t.skinIndices.length){var y=new Ve(4*t.skinIndices.length,4);this.addAttribute("skinIndex",y.copyVector4sArray(t.skinIndices))}if(0<t.skinWeights.length){var f=new Ve(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new xe);var t=this.attributes.position;t===void 0?this.boundingBox.makeEmpty():this.boundingBox.setFromBufferAttribute(t),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){var t=new xe,r=new D;return function(){null===this.boundingSphere&&(this.boundingSphere=new Ee);var a=this.attributes.position;if(a){var o=this.boundingSphere.center;t.setFromBufferAttribute(a),t.getCenter(o);for(var n=0,s=0,i=a.count;s<i;s++)r.x=a.getX(s),r.y=a.getY(s),r.z=a.getZ(s),n=l(n,o.distanceToSquared(r));this.boundingSphere.radius=M(n),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,r=this.attributes,a=this.groups;if(r.position){var o=r.position.array;if(r.normal===void 0)this.addAttribute("normal",new ze(new Float32Array(o.length),3));else for(var n=r.normal.array,s=0,i=n.length;s<i;s++)n[s]=0;var l=r.normal.array,d=new D,p=new D,c=new D,u=new D,m=new D,g,h,y;if(t){var f=t.array;0===a.length&&this.addGroup(0,f.length);for(var M=0,x=a.length;M<x;++M)for(var E=a[M],v=E.start,A=E.count,s=v,i=v+A;s<i;s+=3)g=3*f[s+0],h=3*f[s+1],y=3*f[s+2],d.fromArray(o,g),p.fromArray(o,h),c.fromArray(o,y),u.subVectors(c,p),m.subVectors(d,p),u.cross(m),l[g]+=u.x,l[g+1]+=u.y,l[g+2]+=u.z,l[h]+=u.x,l[h+1]+=u.y,l[h+2]+=u.z,l[y]+=u.x,l[y+1]+=u.y,l[y+2]+=u.z}else for(var s=0,i=o.length;s<i;s+=9)d.fromArray(o,s),p.fromArray(o,s+3),c.fromArray(o,s+6),u.subVectors(c,p),m.subVectors(d,p),u.cross(m),l[s]=u.x,l[s+1]=u.y,l[s+2]=u.z,l[s+3]=u.x,l[s+4]=u.y,l[s+5]=u.z,l[s+6]=u.x,l[s+7]=u.y,l[s+8]=u.z;this.normalizeNormals(),r.normal.needsUpdate=!0}},merge:function(t,r){if(!(t&&t.isBufferGeometry))return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);r===void 0&&(r=0);var a=this.attributes;for(var o in a)if(t.attributes[o]!==void 0)for(var n=a[o],s=n.array,l=t.attributes[o],d=l.array,p=l.itemSize,c=0,i=p*r;c<d.length;c++,i++)s[i]=d[c];return this},normalizeNormals:function(){var t=new D;return function(){for(var r=this.attributes.normal,a=0,i=r.count;a<i;a++)t.x=r.getX(a),t.y=r.getY(a),t.z=r.getZ(a),t.normalize(),r.setXYZ(a,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new We,r=this.index.array,a=this.attributes;for(var o in a){for(var n=a[o],s=n.array,d=n.itemSize,p=new s.constructor(r.length*d),c=0,u=0,m=0,i=r.length;m<i;m++){c=r[m]*d;for(var l=0;l<d;l++)p[u++]=s[c++]}t.addAttribute(o,new ze(p,d))}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var r=this.parameters;for(var a in r)void 0!==r[a]&&(t[a]=r[a]);return t}t.data={attributes:{}};var i=this.index;if(null!==i){var o=Array.prototype.slice.call(i.array);t.data.index={type:i.array.constructor.name,array:o}}var n=this.attributes;for(var a in n){var s=n[a],o=Array.prototype.slice.call(s.array);t.data.attributes[a]={itemSize:s.itemSize,type:s.array.constructor.name,array:o,normalized:s.normalized}}var l=this.groups;0<l.length&&(t.data.groups=JSON.parse(JSON.stringify(l)));var d=this.boundingSphere;return null!==d&&(t.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),t},clone:function(){return new We().copy(this)},copy:function(t){var r,a,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var o=t.index;null!==o&&this.setIndex(o.clone());var n=t.attributes;for(r in n){var s=n[r];this.addAttribute(r,s.clone())}var l=t.morphAttributes;for(r in l){var d=[],p=l[r];for(a=0,i=p.length;a<i;a++)d.push(p[a].clone());this.morphAttributes[r]=d}var c=t.groups;for(a=0,i=c.length;a<i;a++){var u=c[a];this.addGroup(u.start,u.count,u.materialIndex)}var m=t.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=t.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Xe.prototype=Object.create(Oe.prototype),Xe.prototype.constructor=Xe,qe.prototype=Object.create(We.prototype),qe.prototype.constructor=qe,Ze.prototype=Object.create(Oe.prototype),Ze.prototype.constructor=Ze,Ke.prototype=Object.create(We.prototype),Ke.prototype.constructor=Ke,Je.prototype=Object.create(he.prototype),Je.prototype.constructor=Je,Je.prototype.isMeshBasicMaterial=!0,Je.prototype.copy=function(t){return he.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.assign($e.prototype,{set:function(t,r){return this.origin.copy(t),this.direction.copy(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(r,t){var a=t||new D;return a.copy(this.direction).multiplyScalar(r).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var r=new D;return function(a){return this.origin.copy(this.at(a,r)),this}}(),closestPointToPoint:function(t,r){var a=r||new D;a.subVectors(t,this.origin);var i=a.dot(this.direction);return 0>i?a.copy(this.origin):a.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(t){return M(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new D;return function(r){var a=t.subVectors(r,this.origin).dot(this.direction);return 0>a?this.origin.distanceToSquared(r):(t.copy(this.direction).multiplyScalar(a).add(this.origin),t.distanceToSquared(r))}}(),distanceSqToSegment:function(){var t=new D,r=new D,a=new D;return function(i,o,n,s){t.copy(i).add(o).multiplyScalar(0.5),r.copy(o).sub(i).normalize(),a.copy(this.origin).sub(t);var d=0.5*i.distanceTo(o),p=-this.direction.dot(r),u=a.dot(this.direction),h=-a.dot(r),y=a.lengthSq(),c=g(1-p*p),f,M,x,E;if(!(0<c))M=0<p?-d:d,f=l(0,-(p*M+u)),x=-f*f+M*(M+2*h)+y;else if(f=p*h-u,M=p*u-h,E=d*c,!(0<=f))M<=-E?(f=l(0,-(-p*d+u)),M=0<f?-d:m(l(-d,-h),d),x=-f*f+M*(M+2*h)+y):M<=E?(f=0,M=m(l(-d,-h),d),x=M*(M+2*h)+y):(f=l(0,-(p*d+u)),M=0<f?d:m(l(-d,-h),d),x=-f*f+M*(M+2*h)+y);else if(!(M>=-E))M=-d,f=l(0,-(p*M+u)),x=-f*f+M*(M+2*h)+y;else if(M<=E){var v=1/c;f*=v,M*=v,x=f*(f+p*M+2*u)+M*(p*f+M+2*h)+y}else M=d,f=l(0,-(p*M+u)),x=-f*f+M*(M+2*h)+y;return n&&n.copy(this.direction).multiplyScalar(f).add(this.origin),s&&s.copy(r).multiplyScalar(M).add(t),x}}(),intersectSphere:function(){var t=new D;return function(r,a){t.subVectors(r.center,this.origin);var i=t.dot(this.direction),o=t.dot(t)-i*i,n=r.radius*r.radius;if(o>n)return null;var s=M(n-o),l=i-s,d=i+s;return 0>l&&0>d?null:0>l?this.at(d,a):this.at(l,a)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(r){var a=r.normal.dot(this.direction);if(0===a)return 0===r.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(r.normal)+r.constant)/a;return 0<=i?i:null},intersectPlane:function(r,a){var i=this.distanceToPlane(r);return null===i?null:this.at(i,a)},intersectsPlane:function(t){var r=t.distanceToPoint(this.origin);if(0===r)return!0;var a=t.normal.dot(this.direction);return!!(0>a*r)},intersectBox:function(t,r){var a=1/this.direction.x,i=1/this.direction.y,o=1/this.direction.z,n=this.origin,s,l,d,p,c,u;return(0<=a?(s=(t.min.x-n.x)*a,l=(t.max.x-n.x)*a):(s=(t.max.x-n.x)*a,l=(t.min.x-n.x)*a),0<=i?(d=(t.min.y-n.y)*i,p=(t.max.y-n.y)*i):(d=(t.max.y-n.y)*i,p=(t.min.y-n.y)*i),s>p||d>l)?null:((d>s||s!==s)&&(s=d),(p<l||l!==l)&&(l=p),0<=o?(c=(t.min.z-n.z)*o,u=(t.max.z-n.z)*o):(c=(t.max.z-n.z)*o,u=(t.min.z-n.z)*o),s>u||c>l)?null:((c>s||s!==s)&&(s=c),(u<l||l!==l)&&(l=u),0>l?null:this.at(0<=s?s:l,r))},intersectsBox:function(){var t=new D;return function(r){return null!==this.intersectBox(r,t)}}(),intersectTriangle:function(){var t=new D,r=new D,i=new D,o=new D;return function(n,a,s,l,d){r.subVectors(a,n),i.subVectors(s,n),o.crossVectors(r,i);var p=this.direction.dot(o),c;if(0<p){if(l)return null;c=1}else if(0>p)c=-1,p=-p;else return null;t.subVectors(this.origin,n);var u=c*this.direction.dot(i.crossVectors(t,i));if(0>u)return null;var m=c*this.direction.dot(r.cross(t));if(0>m)return null;if(u+m>p)return null;var g=-c*t.dot(o);return 0>g?null:this.at(g/p,d)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(et.prototype,{set:function(t,r){return this.start.copy(t),this.end.copy(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){var r=t||new D;return r.addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(t){var r=t||new D;return r.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(r,t){var a=t||new D;return this.delta(a).multiplyScalar(r).add(this.start)},closestPointToPointParameter:function(){var r=new D,a=new D;return function(i,o){r.subVectors(i,this.start),a.subVectors(this.end,this.start);var n=a.dot(a),s=a.dot(r),l=s/n;return o&&(l=Ms.clamp(l,0,1)),l}}(),closestPointToPoint:function(r,a,i){var o=this.closestPointToPointParameter(r,a),t=i||new D;return this.delta(t).multiplyScalar(o).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(tt,{normal:function(){var t=new D;return function(r,a,i,o){var n=o||new D;n.subVectors(i,a),t.subVectors(r,a),n.cross(t);var s=n.lengthSq();return 0<s?n.multiplyScalar(1/M(s)):n.set(0,0,0)}}(),barycoordFromPoint:function(){var t=new D,r=new D,i=new D;return function(o,n,a,s,l){t.subVectors(s,n),r.subVectors(a,n),i.subVectors(o,n);var d=t.dot(t),p=t.dot(r),c=t.dot(i),m=r.dot(r),g=r.dot(i),h=d*m-p*p,y=l||new D;if(0===h)return y.set(-2,-1,-1);var f=1/h,M=(m*c-p*g)*f,u=(d*g-p*c)*f;return y.set(1-M-u,u,M)}}(),containsPoint:function(){var t=new D;return function(r,i,a,o){var n=tt.barycoordFromPoint(r,i,a,o,t);return 0<=n.x&&0<=n.y&&1>=n.x+n.y}}()}),Object.assign(tt.prototype,{set:function(t,r,a){return this.a.copy(t),this.b.copy(r),this.c.copy(a),this},setFromPointsAndIndices:function(t,r,a,i){return this.a.copy(t[r]),this.b.copy(t[a]),this.c.copy(t[i]),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new D,r=new D;return function(){return t.subVectors(this.c,this.b),r.subVectors(this.a,this.b),0.5*t.cross(r).length()}}(),midpoint:function(t){var r=t||new D;return r.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return tt.normal(this.a,this.b,this.c,t)},plane:function(t){var r=t||new Ae;return r.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,r){return tt.barycoordFromPoint(t,this.a,this.b,this.c,r)},containsPoint:function(t){return tt.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t=new Ae,r=[new et,new et,new et],a=new D,o=new D;return function(n,s){var l=s||new D,d=Infinity;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(n,a),!0===this.containsPoint(a))l.copy(a);else{r[0].set(this.a,this.b),r[1].set(this.b,this.c),r[2].set(this.c,this.a);for(var p=0;p<r.length;p++){r[p].closestPointToPoint(a,!0,o);var i=a.distanceToSquared(o);i<d&&(d=i,l.copy(o))}}return l}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),rt.prototype=Object.assign(Object.create(we.prototype),{constructor:rt,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return we.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t=this.geometry,r,a,i;if(t.isBufferGeometry){var o=t.morphAttributes,n=Object.keys(o);if(0<n.length){var s=o[n[0]];if(s!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},(r=0,a=s.length);r<a;r++)i=s[r].name||r+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=r}}else{var l=t.morphTargets;if(l!==void 0&&0<l.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},(r=0,a=l.length);r<a;r++)i=l[r].name||r+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=r}},raycast:function(){function t(t,r,a,i,o,n,s){return tt.barycoordFromPoint(t,r,a,i,M),o.multiplyScalar(M.x),n.multiplyScalar(M.y),s.multiplyScalar(M.z),o.add(n).add(s),o.clone()}function r(t,r,a,i,o,n,s,l){var d;if(d=r.side===ho?i.intersectTriangle(s,n,o,!0,l):i.intersectTriangle(o,n,s,r.side!==yo,l),null===d)return null;E.copy(l),E.applyMatrix4(t.matrixWorld);var p=a.ray.origin.distanceTo(E);return p<a.near||p>a.far?null:{distance:p,point:E.clone(),object:t}}function o(o,n,s,d,u,h,a,f){i.fromBufferAttribute(d,h),l.fromBufferAttribute(d,a),p.fromBufferAttribute(d,f);var c=r(o,o.material,n,s,i,l,p,x);return c&&(u&&(m.fromBufferAttribute(u,h),g.fromBufferAttribute(u,a),y.fromBufferAttribute(u,f),c.uv=t(x,i,l,p,m,g,y)),c.face=new _e(h,a,f,tt.normal(i,l,p)),c.faceIndex=h),c}var n=new N,s=new $e,d=new Ee,i=new D,l=new D,p=new D,a=new D,c=new D,u=new D,m=new f,g=new f,y=new f,M=new D,x=new D,E=new D;return function(M,E){var v=this.geometry,A=this.material,T=this.matrixWorld;if(void 0!==A&&(null===v.boundingSphere&&v.computeBoundingSphere(),d.copy(v.boundingSphere),d.applyMatrix4(T),!1!==M.ray.intersectsSphere(d))&&(n.getInverse(T),s.copy(M.ray).applyMatrix4(n),null===v.boundingBox||!1!==s.intersectsBox(v.boundingBox))){var L;if(v.isBufferGeometry){var N=v.index,D=v.attributes.position,w=v.attributes.uv,C,S,b,I,_;if(null!==N)for(I=0,_=N.count;I<_;I+=3)C=N.getX(I),S=N.getX(I+1),b=N.getX(I+2),L=o(this,M,s,D,w,C,S,b),L&&(L.faceIndex=h(I/3),E.push(L));else for(I=0,_=D.count;I<_;I+=3)C=I,S=I+1,b=I+2,L=o(this,M,s,D,w,C,S,b),L&&(L.index=C,E.push(L))}else if(v.isGeometry){var j=Array.isArray(A),O=v.vertices,z=v.faces,R=v.faceVertexUvs[0],U,P,B,k;0<R.length&&(k=R);for(var F=0,f=z.length;F<f;F++){var G=z[F],V=j?A[G.materialIndex]:A;if(void 0!==V){if(U=O[G.a],P=O[G.b],B=O[G.c],!0===V.morphTargets){var H=v.morphTargets,Q=this.morphTargetInfluences;i.set(0,0,0),l.set(0,0,0),p.set(0,0,0);for(var Y=0,W=H.length,X;Y<W;Y++)if(X=Q[Y],0!==X){var q=H[Y].vertices;i.addScaledVector(a.subVectors(q[G.a],U),X),l.addScaledVector(c.subVectors(q[G.b],P),X),p.addScaledVector(u.subVectors(q[G.c],B),X)}i.add(U),l.add(P),p.add(B),U=i,P=l,B=p}if(L=r(this,V,M,s,U,P,B,x),L){if(k&&k[F]){var Z=k[F];m.copy(Z[0]),g.copy(Z[1]),y.copy(Z[2]),L.uv=t(x,U,P,B,m,g,y)}L.face=G,L.faceIndex=F,E.push(L)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var zs=0;zt.prototype=Object.assign(Object.create(Ie.prototype),{constructor:zt,isArrayCamera:!0}),Ft.prototype.isFogExp2=!0,Ft.prototype.clone=function(){return new Ft(this.color.getHex(),this.density)},Ft.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Gt.prototype.isFog=!0,Gt.prototype.clone=function(){return new Gt(this.color.getHex(),this.near,this.far)},Gt.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Vt.prototype=Object.assign(Object.create(we.prototype),{constructor:Vt,copy:function(t,r){return we.prototype.copy.call(this,t,r),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var r=we.prototype.toJSON.call(this,t);return null!==this.background&&(r.object.background=this.background.toJSON(t)),null!==this.fog&&(r.object.fog=this.fog.toJSON()),r}}),Ht.prototype=Object.assign(Object.create(we.prototype),{constructor:Ht,isLensFlare:!0,copy:function(t){we.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var r=0,a=t.lensFlares.length;r<a;r++)this.lensFlares.push(t.lensFlares[r]);return this},add:function(t,r,a,i,o,n){r===void 0&&(r=-1),a===void 0&&(a=0),n===void 0&&(n=1),o===void 0&&(o=new pe(16777215)),i===void 0&&(i=Ao),a=m(a,l(0,a)),this.lensFlares.push({texture:t,size:r,distance:a,x:0,y:0,z:0,scale:1,rotation:0,opacity:n,color:o,blending:i})},updateLensFlares:function(){var t=this.lensFlares.length,r=2*-this.positionScreen.x,a=2*-this.positionScreen.y,i,o;for(i=0;i<t;i++)o=this.lensFlares[i],o.x=this.positionScreen.x+r*o.distance,o.y=this.positionScreen.y+a*o.distance,o.wantedRotation=0.25*(o.x*L),o.rotation+=0.25*(o.wantedRotation-o.rotation)}}),Qt.prototype=Object.create(he.prototype),Qt.prototype.constructor=Qt,Qt.prototype.isSpriteMaterial=!0,Qt.prototype.copy=function(t){return he.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},Yt.prototype=Object.assign(Object.create(we.prototype),{constructor:Yt,isSprite:!0,raycast:function(){var t=new D,r=new D,a=new D;return function(i,o){r.setFromMatrixPosition(this.matrixWorld),i.ray.closestPointToPoint(r,t),a.setFromMatrixScale(this.matrixWorld);var n=a.x*a.y/4;if(!(r.distanceToSquared(t)>n)){var s=i.ray.origin.distanceTo(t);s<i.near||s>i.far||o.push({distance:s,point:t.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),Wt.prototype=Object.assign(Object.create(we.prototype),{constructor:Wt,copy:function(t){we.prototype.copy.call(this,t,!1);for(var r=t.levels,a=0,i=r.length,o;a<i;a++)o=r[a],this.addLevel(o.object.clone(),o.distance);return this},addLevel:function(t,r){r===void 0&&(r=0),r=g(r);for(var a=this.levels,i=0;i<a.length&&!(r<a[i].distance);i++);a.splice(i,0,{distance:r,object:t}),this.add(t)},getObjectForDistance:function(t){for(var r=this.levels,a=1,i=r.length;a<i&&!(t<r[a].distance);a++);return r[a-1].object},raycast:function(){var t=new D;return function(r,a){t.setFromMatrixPosition(this.matrixWorld);var i=r.ray.origin.distanceTo(t);this.getObjectForDistance(i).raycast(r,a)}}(),update:function(){var t=new D,r=new D;return function(a){var o=this.levels;if(1<o.length){t.setFromMatrixPosition(a.matrixWorld),r.setFromMatrixPosition(this.matrixWorld);var n=t.distanceTo(r);o[0].object.visible=!0;for(var s=1,i=o.length;s<i&&n>=o[s].distance;s++)o[s-1].object.visible=!1,o[s].object.visible=!0;for(;s<i;s++)o[s].object.visible=!1}}}(),toJSON:function(t){var r=we.prototype.toJSON.call(this,t);r.object.levels=[];for(var a=this.levels,o=0,i=a.length,n;o<i;o++)n=a[o],r.object.levels.push({object:n.object.uuid,distance:n.distance});return r}}),Object.assign(Xt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,r=this.bones.length,a;t<r;t++)a=new N,this.bones[t]&&a.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(a)},pose:function(){var t,r,a;for(r=0,a=this.bones.length;r<a;r++)t=this.bones[r],t&&t.matrixWorld.getInverse(this.boneInverses[r]);for(r=0,a=this.bones.length;r<a;r++)t=this.bones[r],t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new N,r=new N;return function(){for(var a=this.bones,o=this.boneInverses,n=this.boneMatrices,s=this.boneTexture,l=0,i=a.length,d;l<i;l++)d=a[l]?a[l].matrixWorld:r,t.multiplyMatrices(d,o[l]),t.toArray(n,16*l);s!==void 0&&(s.needsUpdate=!0)}}(),clone:function(){return new Xt(this.bones,this.boneInverses)}}),qt.prototype=Object.assign(Object.create(we.prototype),{constructor:qt,isBone:!0}),Zt.prototype=Object.assign(Object.create(rt.prototype),{constructor:Zt,isSkinnedMesh:!0,initBones:function(){var t=[],r,a,o,i;if(this.geometry&&void 0!==this.geometry.bones){for(o=0,i=this.geometry.bones.length;o<i;o++)a=this.geometry.bones[o],r=new qt,t.push(r),r.name=a.name,r.position.fromArray(a.pos),r.quaternion.fromArray(a.rotq),void 0!==a.scl&&r.scale.fromArray(a.scl);for(o=0,i=this.geometry.bones.length;o<i;o++)a=this.geometry.bones[o],-1!==a.parent&&null!==a.parent&&void 0!==t[a.parent]?t[a.parent].add(t[o]):this.add(t[o])}return this.updateMatrixWorld(!0),t},bind:function(t,r){this.skeleton=t,r===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.getInverse(r)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,r;if(this.geometry&&this.geometry.isGeometry)for(r=0;r<this.geometry.skinWeights.length;r++){var a=this.geometry.skinWeights[r];t=1/a.lengthManhattan(),t===Infinity?a.set(1,0,0,0):a.multiplyScalar(t)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new v,o=this.geometry.attributes.skinWeight;for(r=0;r<o.count;r++)i.x=o.getX(r),i.y=o.getY(r),i.z=o.getZ(r),i.w=o.getW(r),t=1/i.lengthManhattan(),t===Infinity?i.set(1,0,0,0):i.multiplyScalar(t),o.setXYZW(r,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(t){rt.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Kt.prototype=Object.create(he.prototype),Kt.prototype.constructor=Kt,Kt.prototype.isLineBasicMaterial=!0,Kt.prototype.copy=function(t){return he.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},Jt.prototype=Object.assign(Object.create(we.prototype),{constructor:Jt,isLine:!0,raycast:function(){var t=new N,r=new $e,o=new Ee;return function(n,s){var d=n.linePrecision,p=d*d,c=this.geometry,u=this.matrixWorld;if(null===c.boundingSphere&&c.computeBoundingSphere(),o.copy(c.boundingSphere),o.applyMatrix4(u),!1!==n.ray.intersectsSphere(o)){t.getInverse(u),r.copy(n.ray).applyMatrix4(t);var m=new D,g=new D,h=new D,y=new D,f=this&&this.isLineSegments?2:1;if(c.isBufferGeometry){var M=c.index,x=c.attributes,E=x.position.array;if(null!==M)for(var v=M.array,A=0,T=v.length-1;A<T;A+=f){var l=v[A],a=v[A+1];m.fromArray(E,3*l),g.fromArray(E,3*a);var b=r.distanceSqToSegment(m,g,y,h);if(!(b>p)){y.applyMatrix4(this.matrixWorld);var L=n.ray.origin.distanceTo(y);L<n.near||L>n.far||s.push({distance:L,point:h.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else for(var A=0,T=E.length/3-1;A<T;A+=f){m.fromArray(E,3*A),g.fromArray(E,3*A+3);var b=r.distanceSqToSegment(m,g,y,h);if(!(b>p)){y.applyMatrix4(this.matrixWorld);var L=n.ray.origin.distanceTo(y);L<n.near||L>n.far||s.push({distance:L,point:h.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}else if(c.isGeometry)for(var N=c.vertices,w=N.length,A=0,b;A<w-1;A+=f)if(b=r.distanceSqToSegment(N[A],N[A+1],y,h),!(b>p)){y.applyMatrix4(this.matrixWorld);var L=n.ray.origin.distanceTo(y);L<n.near||L>n.far||s.push({distance:L,point:h.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),$t.prototype=Object.assign(Object.create(Jt.prototype),{constructor:$t,isLineSegments:!0}),er.prototype=Object.assign(Object.create(Jt.prototype),{constructor:er,isLineLoop:!0}),tr.prototype=Object.create(he.prototype),tr.prototype.constructor=tr,tr.prototype.isPointsMaterial=!0,tr.prototype.copy=function(t){return he.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},rr.prototype=Object.assign(Object.create(we.prototype),{constructor:rr,isPoints:!0,raycast:function(){var t=new N,r=new $e,o=new Ee;return function(n,s){function d(t,a){var i=r.distanceSqToPoint(t);if(i<h){var o=r.closestPointToPoint(t);o.applyMatrix4(u);var l=n.ray.origin.distanceTo(o);if(l<n.near||l>n.far)return;s.push({distance:l,distanceToRay:M(i),point:o.clone(),index:a,face:null,object:p})}}var p=this,c=this.geometry,u=this.matrixWorld,m=n.params.Points.threshold;if(null===c.boundingSphere&&c.computeBoundingSphere(),o.copy(c.boundingSphere),o.applyMatrix4(u),o.radius+=m,!1!==n.ray.intersectsSphere(o)){t.getInverse(u),r.copy(n.ray).applyMatrix4(t);var g=m/((this.scale.x+this.scale.y+this.scale.z)/3),h=g*g,y=new D;if(c.isBufferGeometry){var f=c.index,x=c.attributes,E=x.position.array;if(null!==f)for(var v=f.array,A=0,i=v.length,T;A<i;A++)T=v[A],y.fromArray(E,3*T),d(y,T);else for(var A=0,a=E.length/3;A<a;A++)y.fromArray(E,3*A),d(y,A)}else for(var l=c.vertices,A=0,a=l.length;A<a;A++)d(l[A],A)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ar.prototype=Object.assign(Object.create(we.prototype),{constructor:ar}),ir.prototype=Object.create(c.prototype),ir.prototype.constructor=ir,or.prototype=Object.create(c.prototype),or.prototype.constructor=or,or.prototype.isCompressedTexture=!0,nr.prototype=Object.create(c.prototype),nr.prototype.constructor=nr,nr.prototype.isDepthTexture=!0,sr.prototype=Object.create(We.prototype),sr.prototype.constructor=sr,lr.prototype=Object.create(Oe.prototype),lr.prototype.constructor=lr,dr.prototype=Object.create(We.prototype),dr.prototype.constructor=dr,pr.prototype=Object.create(Oe.prototype),pr.prototype.constructor=pr,cr.prototype=Object.create(We.prototype),cr.prototype.constructor=cr,ur.prototype=Object.create(Oe.prototype),ur.prototype.constructor=ur,mr.prototype=Object.create(cr.prototype),mr.prototype.constructor=mr,gr.prototype=Object.create(Oe.prototype),gr.prototype.constructor=gr,hr.prototype=Object.create(cr.prototype),hr.prototype.constructor=hr,yr.prototype=Object.create(Oe.prototype),yr.prototype.constructor=yr,fr.prototype=Object.create(cr.prototype),fr.prototype.constructor=fr,Mr.prototype=Object.create(Oe.prototype),Mr.prototype.constructor=Mr,xr.prototype=Object.create(cr.prototype),xr.prototype.constructor=xr,Er.prototype=Object.create(Oe.prototype),Er.prototype.constructor=Er,vr.prototype=Object.create(We.prototype),vr.prototype.constructor=vr,Ar.prototype=Object.create(Oe.prototype),Ar.prototype.constructor=Ar,Tr.prototype=Object.create(We.prototype),Tr.prototype.constructor=Tr,br.prototype=Object.create(Oe.prototype),br.prototype.constructor=br,Lr.prototype=Object.create(We.prototype),Lr.prototype.constructor=Lr;var Rs={area:function(t){for(var r=t.length,i=0,a=r-1,o=0;o<r;a=o++)i+=t[a].x*t[o].y-t[o].x*t[a].y;return 0.5*i},triangulate:function(){function r(t,r,a,i,o,n){var s,l,d,p,c,u,m,g,h;if(l=t[n[r]].x,d=t[n[r]].y,p=t[n[a]].x,c=t[n[a]].y,u=t[n[i]].x,m=t[n[i]].y,0>=(p-l)*(m-d)-(c-d)*(u-l))return!1;var y,f,M,x,E,v,A,T,b,L,N,D,w,C,S;for(y=u-p,f=m-c,M=l-u,x=d-m,E=p-l,v=c-d,s=0;s<o;s++)if(g=t[n[s]].x,h=t[n[s]].y,(g!==l||h!==d)&&(g!==p||h!==c)&&(g!==u||h!==m)&&(A=g-l,T=h-d,b=g-p,L=h-c,N=g-u,D=h-m,S=y*L-f*b,w=E*T-v*A,C=M*D-x*N,S>=-oo&&C>=-oo&&w>=-oo))return!1;return!0}return function(i,o){var l=i.length;if(3>l)return null;var n=[],d=[],p=[],m,u,g;if(0<Rs.area(i))for(u=0;u<l;u++)d[u]=u;else for(u=0;u<l;u++)d[u]=l-1-u;var h=l,y=2*h;for(u=h-1;2<h;){if(0>=y--)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),o?p:n;if(m=u,h<=m&&(m=0),u=m+1,h<=u&&(u=0),g=u+1,h<=g&&(g=0),r(i,m,u,g,h,d)){var f,a,M,c,s;for(f=d[m],a=d[u],M=d[g],n.push([i[f],i[a],i[M]]),p.push([d[m],d[u],d[g]]),(c=u,s=u+1);s<h;c++,s++)d[c]=d[s];h--,y=2*h}}return o?p:n}}(),triangulateShape:function(t,r){function a(t){var r=t.length;2<r&&t[r-1].equals(t[0])&&t.pop()}function o(t,r,a){return t.x===r.x?t.y<r.y?t.y<=a.y&&a.y<=r.y:r.y<=a.y&&a.y<=t.y:t.x<r.x?t.x<=a.x&&a.x<=r.x:r.x<=a.x&&a.x<=t.x}function n(t,r,a,i,n){var s=r.x-t.x,l=r.y-t.y,d=i.x-a.x,p=i.y-a.y,c=t.x-a.x,u=t.y-a.y,m=l*d-s*p,h=l*c-s*u;if(g(m)>oo){var y;if(0<m){if(0>h||h>m)return[];if(y=p*c-d*u,0>y||y>m)return[]}else{if(0<h||h<m)return[];if(y=p*c-d*u,0<y||y<m)return[]}if(0===y)return n&&(0===h||h===m)?[]:[t];if(y===m)return n&&(0===h||h===m)?[]:[r];if(0===h)return[a];if(h===m)return[i];var f=y/m;return[{x:t.x+f*s,y:t.y+f*l}]}if(0!==h||p*c!==d*u)return[];var M=0===s&&0===l,x=0===d&&0===p;if(M&&x)return t.x!==a.x||t.y!==a.y?[]:[t];if(M)return o(a,i,t)?[t]:[];if(x)return o(t,r,a)?[a]:[];var E,v,A,T,b,L,N,D;return 0===s?(t.y<r.y?(E=t,A=t.y,v=r,T=r.y):(E=r,A=r.y,v=t,T=t.y),a.y<i.y?(b=a,N=a.y,L=i,D=i.y):(b=i,N=i.y,L=a,D=a.y)):(t.x<r.x?(E=t,A=t.x,v=r,T=r.x):(E=r,A=r.x,v=t,T=t.x),a.x<i.x?(b=a,N=a.x,L=i,D=i.x):(b=i,N=i.x,L=a,D=a.x)),A<=N?T<N?[]:T===N?n?[]:[b]:T<=D?[b,v]:[b,L]:A>D?[]:A===D?n?[]:[E]:T<=D?[E,v]:[E,L]}function s(t,r,a,i){var o=r.x-t.x,n=r.y-t.y,s=a.x-t.x,l=a.y-t.y,d=i.x-t.x,p=i.y-t.y,c=o*l-n*s,u=o*p-n*d;if(g(c)>oo){var m=d*l-p*s;return 0<c?0<=u&&0<=m:0<=u||0<=m}return 0<u}a(t),r.forEach(a);for(var l={},d=t.concat(),p=0,c=r.length,u,i,m,h,y,f;p<c;p++)Array.prototype.push.apply(d,r[p]);for(u=0,i=d.length;u<i;u++)y=d[u].x+":"+d[u].y,void 0!==l[y]&&console.warn("THREE.ShapeUtils: Duplicate point",y,u),l[y]=u;var M=function(t,r){function a(t,r){var a=l.length-1,i=t-1;0>i&&(i=a);var o=t+1;o>a&&(o=0);var n=s(l[t],l[i],l[o],m[r]);if(!n)return!1;var d=m.length-1,p=r-1;0>p&&(p=d);var c=r+1;return c>d&&(c=0),n=s(m[r],m[p],m[c],l[t]),!!n}function i(t,r){var a,i,o;for(a=0;a<l.length;a++)if(i=a+1,i%=l.length,o=n(t,r,l[a],l[i],!0),0<o.length)return!0;return!1}function o(t,a){var i,o,s,l,p;for(i=0;i<d.length;i++)for(o=r[d[i]],s=0;s<o.length;s++)if(l=s+1,l%=o.length,p=n(t,a,o[s],o[l],!0),0<p.length)return!0;return!1}for(var l=t.concat(),d=[],p=[],c=0,u=r.length,m,g,h,y,f,M,x,E,v,A,T;c<u;c++)d.push(c);for(var b=0,L=2*d.length;0<d.length;){if(L--,0>L){console.log("THREE.ShapeUtils: Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!");break}for(h=b;h<l.length;h++){y=l[h],g=-1;for(var c=0;c<d.length;c++)if(M=d[c],x=y.x+":"+y.y+":"+M,void 0===p[x]){m=r[M];for(var N=0;N<m.length;N++)if(f=m[N],a(h,N)&&!i(y,f)&&!o(y,f)){g=N,d.splice(c,1),E=l.slice(0,h+1),v=l.slice(h),A=m.slice(g),T=m.slice(0,g+1),l=E.concat(A).concat(T).concat(v),b=h;break}if(0<=g)break;p[x]=!0}if(0<=g)break}}return l}(t,r),x=Rs.triangulate(M,!1);for(u=0,i=x.length;u<i;u++)for(h=x[u],m=0;3>m;m++)y=h[m].x+":"+h[m].y,f=l[y],void 0!==f&&(h[m]=f);return x.concat()},isClockWise:function(t){return 0>Rs.area(t)}};Nr.prototype=Object.create(Oe.prototype),Nr.prototype.constructor=Nr,Dr.prototype=Object.create(We.prototype),Dr.prototype.constructor=Dr,Dr.prototype.getArrays=function(){var t=this.getAttribute("position"),r=t?Array.prototype.slice.call(t.array):[],a=this.getAttribute("uv"),i=a?Array.prototype.slice.call(a.array):[],o=this.index,n=o?Array.prototype.slice.call(o.array):[];return{position:r,uv:i,index:n}},Dr.prototype.addShapeList=function(t,r){var a=t.length;r.arrays=this.getArrays();for(var i=0,o;i<a;i++)o=t[i],this.addShape(o,r);this.setIndex(r.arrays.index),this.addAttribute("position",new Ve(r.arrays.position,3)),this.addAttribute("uv",new Ve(r.arrays.uv,2))},Dr.prototype.addShape=function(r,a){function o(t,r,a){return r||console.error("THREE.ExtrudeGeometry: vec does not exist"),r.clone().multiplyScalar(a).add(t)}function n(t,r,a){var i=t.x-r.x,o=t.y-r.y,n=a.x-t.x,l=a.y-t.y,d=i*i+o*o,p,c,u;if(g(i*l-o*n)>oo){var m=M(d),h=M(n*n+l*l),y=r.x-o/m,x=r.y+i/m,E=a.x-l/h,v=a.y+n/h,A=((E-y)*l-(v-x)*n)/(i*l-o*n);p=y+i*A-t.x,c=x+o*A-t.y;var T=p*p+c*c;if(2>=T)return new f(p,c);u=M(T/2)}else{var b=!1;i>oo?n>oo&&(b=!0):i<-oo?n<-oo&&(b=!0):s(o)===s(l)&&(b=!0),b?(p=-o,c=i,u=M(d)):(p=i,c=o,u=M(d/2))}return new f(p/u,c/u)}function l(t,r){var i,o;for(ie=t.length;0<=--ie;){i=ie,o=ie-1,0>o&&(o=t.length-1);var n=0,s=R+2*I;for(n=0;n<s;n++){var l=te*n,p=te*(n+1),m=r+i+l,a=r+o+l,g=r+o+p,c=r+i+p;u(m,a,g,c,t,n,s,i,o)}}}function d(t,r,a){N.push(t),N.push(r),N.push(a)}function p(t,r,a){m(t),m(r),m(a);var i=x.length/3,o=B.generateTopUV(Y,x,i-3,i-2,i-1);y(o[0]),y(o[1]),y(o[2])}function u(t,r,a,i){m(t),m(r),m(i),m(r),m(a),m(i);var o=x.length/3,n=B.generateSideWallUV(Y,x,o-6,o-3,o-2,o-1);y(n[0]),y(n[1]),y(n[3]),y(n[1]),y(n[2]),y(n[3])}function m(t){v.push(x.length/3),x.push(N[3*t+0]),x.push(N[3*t+1]),x.push(N[3*t+2])}function y(t){T.push(t.x),T.push(t.y)}var c=a.arrays?a.arrays:this.getArrays(),x=c.position,v=c.index,T=c.uv,N=[],w=a.amount===void 0?100:a.amount,C=a.bevelThickness===void 0?6:a.bevelThickness,S=a.bevelSize===void 0?C-2:a.bevelSize,I=a.bevelSegments===void 0?3:a.bevelSegments,_=!(a.bevelEnabled!==void 0)||a.bevelEnabled,O=a.curveSegments===void 0?12:a.curveSegments,R=a.steps===void 0?1:a.steps,U=a.extrudePath,P=!1,B=a.UVGenerator===void 0?Nr.WorldUVGenerator:a.UVGenerator,F,G,V,H,Q;U&&(F=U.getSpacedPoints(R),P=!0,_=!1,G=a.frames===void 0?U.computeFrenetFrames(R,!1):a.frames,V=new D,H=new D,Q=new D),_||(I=0,C=0,S=0);var Y=this,W=r.extractPoints(O),X=W.shape,q=W.holes,Z=!Rs.isClockWise(X),K,J,h;if(Z)for(X=X.reverse(),J=0,h=q.length;J<h;J++)K=q[J],Rs.isClockWise(K)&&(q[J]=K.reverse());var $=Rs.triangulateShape(X,q),ee=X;for(J=0,h=q.length;J<h;J++)K=q[J],X=X.concat(K);for(var te=X.length,re=$.length,ae=[],ie=0,i=ee.length,oe=i-1,j=ie+1,k,b,ne,t,se,le;ie<i;ie++,oe++,j++)oe===i&&(oe=0),j===i&&(j=0),ae[ie]=n(ee[ie],ee[oe],ee[j]);var de=[],pe=ae.concat(),ce;for(J=0,h=q.length;J<h;J++){for(K=q[J],ce=[],(ie=0,i=K.length,oe=i-1,j=ie+1);ie<i;ie++,oe++,j++)oe===i&&(oe=0),j===i&&(j=0),ce[ie]=n(K[ie],K[oe],K[j]);de.push(ce),pe=pe.concat(ce)}for(k=0;k<I;k++){for(ne=k/I,t=C*A(ne*L/2),b=S*E(ne*L/2),(ie=0,i=ee.length);ie<i;ie++)se=o(ee[ie],ae[ie],b),d(se.x,se.y,-t);for(J=0,h=q.length;J<h;J++)for(K=q[J],ce=de[J],(ie=0,i=K.length);ie<i;ie++)se=o(K[ie],ce[ie],b),d(se.x,se.y,-t)}for(b=S,ie=0;ie<te;ie++)se=_?o(X[ie],pe[ie],b):X[ie],P?(H.copy(G.normals[0]).multiplyScalar(se.x),V.copy(G.binormals[0]).multiplyScalar(se.y),Q.copy(F[0]).add(H).add(V),d(Q.x,Q.y,Q.z)):d(se.x,se.y,0);var ue;for(ue=1;ue<=R;ue++)for(ie=0;ie<te;ie++)se=_?o(X[ie],pe[ie],b):X[ie],P?(H.copy(G.normals[ue]).multiplyScalar(se.x),V.copy(G.binormals[ue]).multiplyScalar(se.y),Q.copy(F[ue]).add(H).add(V),d(Q.x,Q.y,Q.z)):d(se.x,se.y,w/R*ue);for(k=I-1;0<=k;k--){for(ne=k/I,t=C*A(ne*L/2),b=S*E(ne*L/2),(ie=0,i=ee.length);ie<i;ie++)se=o(ee[ie],ae[ie],b),d(se.x,se.y,w+t);for(J=0,h=q.length;J<h;J++)for(K=q[J],ce=de[J],(ie=0,i=K.length);ie<i;ie++)se=o(K[ie],ce[ie],b),P?d(se.x,se.y+F[R-1].y,F[R-1].x+t):d(se.x,se.y,w+t)}(function(){var t=x.length/3;if(_){var r=0,i=te*r;for(ie=0;ie<re;ie++)le=$[ie],p(le[2]+i,le[1]+i,le[0]+i);for(r=R+2*I,i=te*r,ie=0;ie<re;ie++)le=$[ie],p(le[0]+i,le[1]+i,le[2]+i)}else{for(ie=0;ie<re;ie++)le=$[ie],p(le[2],le[1],le[0]);for(ie=0;ie<re;ie++)le=$[ie],p(le[0]+te*R,le[1]+te*R,le[2]+te*R)}Y.addGroup(t,x.length/3-t,a.material===void 0?0:a.material)})(),function(){var t=x.length/3,r=0;for(l(ee,r),r+=ee.length,(J=0,h=q.length);J<h;J++)K=q[J],l(K,r),r+=K.length;Y.addGroup(t,x.length/3-t,a.extrudeMaterial===void 0?1:a.extrudeMaterial)}(),a.arrays||(this.setIndex(v),this.addAttribute("position",new Ve(x,3)),this.addAttribute("uv",new Ve(a.arrays.uv,2)))},Nr.WorldUVGenerator={generateTopUV:function(t,r,a,i,o){var n=r[3*a],s=r[3*a+1],l=r[3*i],d=r[3*i+1],p=r[3*o],c=r[3*o+1];return[new f(n,s),new f(l,d),new f(p,c)]},generateSideWallUV:function(t,r,a,i,o,n){var s=r[3*a],l=r[3*a+1],d=r[3*a+2],p=r[3*i],c=r[3*i+1],u=r[3*i+2],m=r[3*o],h=r[3*o+1],y=r[3*o+2],M=r[3*n],x=r[3*n+1],E=r[3*n+2];return 0.01>g(l-c)?[new f(s,1-d),new f(p,1-u),new f(m,1-y),new f(M,1-E)]:[new f(l,1-d),new f(c,1-u),new f(h,1-y),new f(x,1-E)]}},wr.prototype=Object.create(Oe.prototype),wr.prototype.constructor=wr,Cr.prototype=Object.create(Dr.prototype),Cr.prototype.constructor=Cr,Sr.prototype=Object.create(Oe.prototype),Sr.prototype.constructor=Sr,Ir.prototype=Object.create(We.prototype),Ir.prototype.constructor=Ir,_r.prototype=Object.create(Oe.prototype),_r.prototype.constructor=_r,jr.prototype=Object.create(We.prototype),jr.prototype.constructor=jr,Or.prototype=Object.create(Oe.prototype),Or.prototype.constructor=Or,zr.prototype=Object.create(We.prototype),zr.prototype.constructor=zr,Rr.prototype=Object.create(Oe.prototype),Rr.prototype.constructor=Rr,Ur.prototype=Object.create(We.prototype),Ur.prototype.constructor=Ur,Pr.prototype=Object.create(We.prototype),Pr.prototype.constructor=Pr,Br.prototype=Object.create(Oe.prototype),Br.prototype.constructor=Br,kr.prototype=Object.create(We.prototype),kr.prototype.constructor=kr,Fr.prototype=Object.create(Br.prototype),Fr.prototype.constructor=Fr,Gr.prototype=Object.create(kr.prototype),Gr.prototype.constructor=Gr,Vr.prototype=Object.create(Oe.prototype),Vr.prototype.constructor=Vr,Hr.prototype=Object.create(We.prototype),Hr.prototype.constructor=Hr;var Us=Object.freeze({WireframeGeometry:sr,ParametricGeometry:lr,ParametricBufferGeometry:dr,TetrahedronGeometry:ur,TetrahedronBufferGeometry:mr,OctahedronGeometry:gr,OctahedronBufferGeometry:hr,IcosahedronGeometry:yr,IcosahedronBufferGeometry:fr,DodecahedronGeometry:Mr,DodecahedronBufferGeometry:xr,PolyhedronGeometry:pr,PolyhedronBufferGeometry:cr,TubeGeometry:Er,TubeBufferGeometry:vr,TorusKnotGeometry:Ar,TorusKnotBufferGeometry:Tr,TorusGeometry:br,TorusBufferGeometry:Lr,TextGeometry:wr,TextBufferGeometry:Cr,SphereGeometry:Sr,SphereBufferGeometry:Ir,RingGeometry:_r,RingBufferGeometry:jr,PlaneGeometry:Ze,PlaneBufferGeometry:Ke,LatheGeometry:Or,LatheBufferGeometry:zr,ShapeGeometry:Rr,ShapeBufferGeometry:Ur,ExtrudeGeometry:Nr,ExtrudeBufferGeometry:Dr,EdgesGeometry:Pr,ConeGeometry:Fr,ConeBufferGeometry:Gr,CylinderGeometry:Br,CylinderBufferGeometry:kr,CircleGeometry:Vr,CircleBufferGeometry:Hr,BoxGeometry:Xe,BoxBufferGeometry:qe});Qr.prototype=Object.create(he.prototype),Qr.prototype.constructor=Qr,Qr.prototype.isShadowMaterial=!0,Yr.prototype=Object.create(ye.prototype),Yr.prototype.constructor=Yr,Yr.prototype.isRawShaderMaterial=!0,Wr.prototype=Object.create(he.prototype),Wr.prototype.constructor=Wr,Wr.prototype.isMeshStandardMaterial=!0,Wr.prototype.copy=function(t){return he.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Xr.prototype=Object.create(Wr.prototype),Xr.prototype.constructor=Xr,Xr.prototype.isMeshPhysicalMaterial=!0,Xr.prototype.copy=function(t){return Wr.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},qr.prototype=Object.create(he.prototype),qr.prototype.constructor=qr,qr.prototype.isMeshPhongMaterial=!0,qr.prototype.copy=function(t){return he.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Zr.prototype=Object.create(qr.prototype),Zr.prototype.constructor=Zr,Zr.prototype.isMeshToonMaterial=!0,Zr.prototype.copy=function(t){return qr.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},Kr.prototype=Object.create(he.prototype),Kr.prototype.constructor=Kr,Kr.prototype.isMeshNormalMaterial=!0,Kr.prototype.copy=function(t){return he.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Jr.prototype=Object.create(he.prototype),Jr.prototype.constructor=Jr,Jr.prototype.isMeshLambertMaterial=!0,Jr.prototype.copy=function(t){return he.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},$r.prototype=Object.create(Kt.prototype),$r.prototype.constructor=$r,$r.prototype.isLineDashedMaterial=!0,$r.prototype.copy=function(t){return Kt.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Ps=Object.freeze({ShadowMaterial:Qr,SpriteMaterial:Qt,RawShaderMaterial:Yr,ShaderMaterial:ye,PointsMaterial:tr,MeshPhysicalMaterial:Xr,MeshStandardMaterial:Wr,MeshPhongMaterial:qr,MeshToonMaterial:Zr,MeshNormalMaterial:Kr,MeshLambertMaterial:Jr,MeshDepthMaterial:fe,MeshDistanceMaterial:Me,MeshBasicMaterial:Je,LineDashedMaterial:$r,LineBasicMaterial:Kt,Material:he}),Bs={enabled:!1,files:{},add:function(t,r){!1===this.enabled||(this.files[t]=r)},get:function(t){return!1===this.enabled?void 0:this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},ks=new ea;Object.assign(ta.prototype,{load:function(t,r,a,o){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var n=this,s=Bs.get(t);if(void 0!==s)return n.manager.itemStart(t),setTimeout(function(){r&&r(s),n.manager.itemEnd(t)},0),s;var l=/^data:(.*?)(;base64)?,(.*)$/,d=t.match(l);if(d){var p=d[1],c=!!d[2],u=d[3];u=window.decodeURIComponent(u),c&&(u=window.atob(u));try{var m=(this.responseType||"").toLowerCase(),g;switch(m){case"arraybuffer":case"blob":g=new ArrayBuffer(u.length);for(var h=new Uint8Array(g),y=0;y<u.length;y++)h[y]=u.charCodeAt(y);"blob"===m&&(g=new Blob([g],{type:p}));break;case"document":var i=new DOMParser;g=i.parseFromString(u,p);break;case"json":g=JSON.parse(u);break;default:g=u;}window.setTimeout(function(){r&&r(g),n.manager.itemEnd(t)},0)}catch(r){window.setTimeout(function(){o&&o(r),n.manager.itemEnd(t),n.manager.itemError(t)},0)}}else{var f=new XMLHttpRequest;for(var M in f.open("GET",t,!0),f.addEventListener("load",function(a){var i=a.target.response;Bs.add(t,i),200===this.status?(r&&r(i),n.manager.itemEnd(t)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),r&&r(i),n.manager.itemEnd(t)):(o&&o(a),n.manager.itemEnd(t),n.manager.itemError(t))},!1),void 0!==a&&f.addEventListener("progress",function(t){a(t)},!1),f.addEventListener("error",function(r){o&&o(r),n.manager.itemEnd(t),n.manager.itemError(t)},!1),void 0!==this.responseType&&(f.responseType=this.responseType),void 0!==this.withCredentials&&(f.withCredentials=this.withCredentials),f.overrideMimeType&&f.overrideMimeType(void 0===this.mimeType?"text/plain":this.mimeType),this.requestHeader)f.setRequestHeader(M,this.requestHeader[M]);f.send(null)}return n.manager.itemStart(t),f},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(ra.prototype,{load:function(t,r,a,o){function n(n){p.load(t[n],function(t){var a=s._parser(t,!0);l[n]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps},c+=1,6===c&&(1===a.mipmapCount&&(d.minFilter=En),d.format=a.format,d.needsUpdate=!0,r&&r(d))},a,o)}var s=this,l=[],d=new or;d.image=l;var p=new ta(this.manager);if(p.setPath(this.path),p.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,u=0,i=t.length;u<i;++u)n(u);else p.load(t,function(t){var a=s._parser(t,!0);if(a.isCubemap)for(var o=a.mipmaps.length/a.mipmapCount,n=0;n<o;n++){l[n]={mipmaps:[]};for(var p=0;p<a.mipmapCount;p++)l[n].mipmaps.push(a.mipmaps[n*a.mipmapCount+p]),l[n].format=a.format,l[n].width=a.width,l[n].height=a.height}else d.image.width=a.width,d.image.height=a.height,d.mipmaps=a.mipmaps;1===a.mipmapCount&&(d.minFilter=En),d.format=a.format,d.needsUpdate=!0,r&&r(d)},a,o);return d},setPath:function(t){return this.path=t,this}}),Object.assign(aa.prototype,{load:function(t,r,a,i){var o=this,n=new w,s=new ta(this.manager);return s.setResponseType("arraybuffer"),s.load(t,function(t){var a=o._parser(t);a&&(void 0===a.image?void 0!==a.data&&(n.image.width=a.width,n.image.height=a.height,n.image.data=a.data):n.image=a.image,n.wrapS=void 0===a.wrapS?hn:a.wrapS,n.wrapT=void 0===a.wrapT?hn:a.wrapT,n.magFilter=void 0===a.magFilter?En:a.magFilter,n.minFilter=void 0===a.minFilter?An:a.minFilter,n.anisotropy=void 0===a.anisotropy?1:a.anisotropy,void 0!==a.format&&(n.format=a.format),void 0!==a.type&&(n.type=a.type),void 0!==a.mipmaps&&(n.mipmaps=a.mipmaps),1===a.mipmapCount&&(n.minFilter=En),n.needsUpdate=!0,r&&r(n,a))},a,i),n}}),Object.assign(ia.prototype,{crossOrigin:"Anonymous",load:function(t,r,a,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var o=this,n=Bs.get(t);if(void 0!==n)return o.manager.itemStart(t),setTimeout(function(){r&&r(n),o.manager.itemEnd(t)},0),n;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");return s.addEventListener("load",function(){Bs.add(t,this),r&&r(this),o.manager.itemEnd(t)},!1),s.addEventListener("error",function(r){i&&i(r),o.manager.itemEnd(t),o.manager.itemError(t)},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(t),s.src=t,s},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(oa.prototype,{crossOrigin:"Anonymous",load:function(t,r,a,o){function n(a){l.load(t[a],function(t){s.images[a]=t,d++,6===d&&(s.needsUpdate=!0,r&&r(s))},void 0,o)}var s=new C,l=new ia(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);for(var d=0,p=0;p<t.length;++p)n(p);return s},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(na.prototype,{crossOrigin:"Anonymous",load:function(t,r,a,i){var o=new ia(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var n=new c;return n.image=o.load(t,function(){var a=0<t.search(/\.(jpg|jpeg)$/)||0===t.search(/^data\:image\/jpeg/);n.format=a?Rn:Un,n.needsUpdate=!0,void 0!==r&&r(n)},a,i),n},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),sa.prototype=Object.assign(Object.create(we.prototype),{constructor:sa,isLight:!0,copy:function(t){return we.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var r=we.prototype.toJSON.call(this,t);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,void 0!==this.groundColor&&(r.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(r.object.distance=this.distance),void 0!==this.angle&&(r.object.angle=this.angle),void 0!==this.decay&&(r.object.decay=this.decay),void 0!==this.penumbra&&(r.object.penumbra=this.penumbra),void 0!==this.shadow&&(r.object.shadow=this.shadow.toJSON()),r}}),la.prototype=Object.assign(Object.create(sa.prototype),{constructor:la,isHemisphereLight:!0,copy:function(t){return sa.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(da.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),pa.prototype=Object.assign(Object.create(da.prototype),{constructor:pa,isSpotLightShadow:!0,update:function(t){var r=this.camera,a=2*Ms.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,o=t.distance||r.far;(a!==r.fov||i!==r.aspect||o!==r.far)&&(r.fov=a,r.aspect=i,r.far=o,r.updateProjectionMatrix())}}),ca.prototype=Object.assign(Object.create(sa.prototype),{constructor:ca,isSpotLight:!0,copy:function(t){return sa.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ua.prototype=Object.assign(Object.create(sa.prototype),{constructor:ua,isPointLight:!0,copy:function(t){return sa.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),ma.prototype=Object.assign(Object.create(da.prototype),{constructor:ma}),ga.prototype=Object.assign(Object.create(sa.prototype),{constructor:ga,isDirectionalLight:!0,copy:function(t){return sa.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ha.prototype=Object.assign(Object.create(sa.prototype),{constructor:ha,isAmbientLight:!0}),ya.prototype=Object.assign(Object.create(sa.prototype),{constructor:ya,isRectAreaLight:!0,copy:function(t){return sa.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var r=sa.prototype.toJSON.call(this,t);return r.object.width=this.width,r.object.height=this.height,r}});var Fs={arraySlice:function(t,r,a){return Fs.isTypedArray(t)?new t.constructor(t.subarray(r,void 0===a?t.length:a)):t.slice(r,a)},convertArray:function(t,r,a){return t&&(a||t.constructor!==r)?"number"===typeof r.BYTES_PER_ELEMENT?new r(t):Array.prototype.slice.call(t):t},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var r=t.length,a=Array(r),o=0;o!==r;++o)a[o]=o;return a.sort(function(r,a){return t[r]-t[a]}),a},sortedArray:function(t,r,a){for(var o=t.length,n=new t.constructor(o),s=0,i=0,l;i!==o;++s){l=a[s]*r;for(var d=0;d!==r;++d)n[i++]=t[l+d]}return n},flattenJSON:function(t,r,a,o){for(var n=1,i=t[0];i!==void 0&&i[o]===void 0;)i=t[n++];if(void 0!==i){var s=i[o];if(void 0!==s)if(Array.isArray(s))do s=i[o],void 0!==s&&(r.push(i.time),a.push.apply(a,s)),i=t[n++];while(void 0!==i);else if(void 0!==s.toArray)do s=i[o],void 0!==s&&(r.push(i.time),s.toArray(a,a.length)),i=t[n++];while(void 0!==i);else do s=i[o],void 0!==s&&(r.push(i.time),a.push(s)),i=t[n++];while(void 0!==i)}}};Object.assign(fa.prototype,{evaluate:function(r){var t=this.parameterPositions,a=this._cachedIndex,i=t[a],o=t[a-1];validate_interval:{seek:{var n;linear_scan:{forward_scan:if(!(r<i)){for(var s=a+2;;){if(void 0===i){if(r<o)break forward_scan;return a=t.length,this._cachedIndex=a,this.afterEnd_(a-1,r,o)}if(a===s)break;if(o=i,i=t[++a],r<i)break seek}n=t.length;break linear_scan}if(!(r>=o)){var l=t[1];r<l&&(a=2,o=l);for(var s=a-2;;){if(void 0===o)return this._cachedIndex=0,this.beforeStart_(0,r,i);if(a===s)break;if(i=o,o=t[--a-1],r>=o)break seek}n=a,a=0;break linear_scan}break validate_interval}for(;a<n;){var d=a+n>>>1;r<t[d]?n=d:a=d+1}if(i=t[a],o=t[a-1],void 0===o)return this._cachedIndex=0,this.beforeStart_(0,r,i);if(void 0===i)return a=t.length,this._cachedIndex=a,this.afterEnd_(a-1,o,r)}this._cachedIndex=a,this.intervalChanged_(a,o,i)}return this.interpolate_(a,o,r,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,n=0;n!==o;++n)r[n]=a[t*o+n];return r},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(fa.prototype,{beforeStart_:fa.prototype.copySampleValue_,afterEnd_:fa.prototype.copySampleValue_}),Ma.prototype=Object.assign(Object.create(fa.prototype),{constructor:Ma,DefaultSettings_:{endingStart:as,endingEnd:as},intervalChanged_:function(t,r,a){var i=this.parameterPositions,o=t-2,n=t+1,s=i[o],l=i[n];if(s===void 0)switch(this.getSettings_().endingStart){case is:o=t,s=2*r-a;break;case os:o=i.length-2,s=r+i[o]-i[o+1];break;default:o=t,s=a;}if(void 0===l)switch(this.getSettings_().endingEnd){case is:n=t,l=2*a-r;break;case os:n=1,l=a+i[1]-i[0];break;default:n=t-1,l=r;}var d=0.5*(a-r),p=this.valueSize;this._weightPrev=d/(r-s),this._weightNext=d/(l-a),this._offsetPrev=o*p,this._offsetNext=n*p},interpolate_:function(r,a,o,t){for(var n=this.resultBuffer,s=this.sampleValues,l=this.valueSize,d=r*l,c=this._offsetPrev,u=this._offsetNext,m=this._weightPrev,g=this._weightNext,h=(o-a)/(t-a),p=h*h,y=p*h,f=0;f!==l;++f)n[f]=(-m*y+2*m*p-m*h)*s[c+f]+((1+m)*y+(-1.5-2*m)*p+(-0.5+m)*h+1)*s[d-l+f]+((-1-g)*y+(1.5+g)*p+0.5*h)*s[d+f]+(g*y-g*p)*s[u+f];return n}}),xa.prototype=Object.assign(Object.create(fa.prototype),{constructor:xa,interpolate_:function(r,a,o,t){for(var n=this.resultBuffer,s=this.sampleValues,l=this.valueSize,d=r*l,p=(o-a)/(t-a),c=0;c!==l;++c)n[c]=s[d-l+c]*(1-p)+s[d+c]*p;return n}}),Ea.prototype=Object.assign(Object.create(fa.prototype),{constructor:Ea,interpolate_:function(t){return this.copySampleValue_(t-1)}});var Gs;Gs={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:ts,InterpolantFactoryMethodDiscrete:function(t){return new Ea(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new xa(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Ma(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var r;if(t===es?r=this.InterpolantFactoryMethodDiscrete:t===ts?r=this.InterpolantFactoryMethodLinear:t===rs?r=this.InterpolantFactoryMethodSmooth:void 0,void 0===r){var a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(a);return void console.warn("THREE.KeyframeTrackPrototype:",a)}this.createInterpolant=r},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return es;case this.InterpolantFactoryMethodLinear:return ts;case this.InterpolantFactoryMethodSmooth:return rs;}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var r=this.times,a=0,i=r.length;a!==i;++a)r[a]+=t;return this},scale:function(t){if(1!==t)for(var r=this.times,a=0,i=r.length;a!==i;++a)r[a]*=t;return this},trim:function(t,r){for(var a=this.times,i=a.length,o=0,n=i-1;o!==i&&a[o]<t;)++o;for(;-1!==n&&a[n]>r;)--n;if(++n,0!==o||n!==i){o>=n&&(n=l(n,1),o=n-1);var s=this.getValueSize();this.times=Fs.arraySlice(a,o,n),this.values=Fs.arraySlice(this.values,o*s,n*s)}return this},validate:function(){var t=!0,r=this.getValueSize();0!==r-h(r)&&(console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this),t=!1);var a=this.times,o=this.values,s=a.length;0===s&&(console.error("THREE.KeyframeTrackPrototype: Track is empty.",this),t=!1);for(var l=null,d=0,i;d!==s;d++){if(i=a[d],"number"===typeof i&&isNaN(i)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,d,i),t=!1;break}if(null!==l&&l>i){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,d,i,l),t=!1;break}l=i}if(o!==void 0&&Fs.isTypedArray(o))for(var d=0,p=o.length,n;d!==p;++d)if(n=o[d],isNaN(n)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,d,n),t=!1;break}return t},optimize:function(){for(var t=this.times,r=this.values,a=this.getValueSize(),o=this.getInterpolation()===rs,n=1,s=t.length-1,l=1;l<s;++l){var i=!1,d=t[l],p=t[l+1];if(d!==p&&(1!==l||d!==d[0]))if(!o){for(var c=l*a,u=0,m;u!==a;++u)if(m=r[c+u],m!==r[c-a+u]||m!==r[c+a+u]){i=!0;break}}else i=!0;if(i){if(l!==n){t[n]=t[l];for(var g=l*a,h=n*a,u=0;u!==a;++u)r[h+u]=r[g+u]}++n}}if(0<s){t[n]=t[s];for(var g=s*a,h=n*a,u=0;u!==a;++u)r[h+u]=r[g+u];++n}return n!==t.length&&(this.times=Fs.arraySlice(t,0,n),this.values=Fs.arraySlice(r,0,n*a)),this}},Aa.prototype=Object.assign(Object.create(Gs),{constructor:Aa,ValueTypeName:"vector"}),Ta.prototype=Object.assign(Object.create(fa.prototype),{constructor:Ta,interpolate_:function(r,a,i,t){for(var o=this.resultBuffer,n=this.sampleValues,s=this.valueSize,l=r*s,d=l+s;l!==d;l+=4)b.slerpFlat(o,0,n,l-s,n,l,(i-a)/(t-a));return o}}),ba.prototype=Object.assign(Object.create(Gs),{constructor:ba,ValueTypeName:"quaternion",DefaultInterpolation:ts,InterpolantFactoryMethodLinear:function(t){return new Ta(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),La.prototype=Object.assign(Object.create(Gs),{constructor:La,ValueTypeName:"number"}),Na.prototype=Object.assign(Object.create(Gs),{constructor:Na,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:es,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Da.prototype=Object.assign(Object.create(Gs),{constructor:Da,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:es,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),wa.prototype=Object.assign(Object.create(Gs),{constructor:wa,ValueTypeName:"color"}),Ca.prototype=Gs,Gs.constructor=Ca,Object.assign(Ca,{parse:function(t){if(t.type===void 0)throw new Error("track type undefined, can not parse");var r=Ca._getTrackTypeForValueTypeName(t.type);if(t.times===void 0){var a=[],i=[];Fs.flattenJSON(t.keys,a,i,"value"),t.times=a,t.values=i}return void 0===r.parse?new r(t.name,t.times,t.values,t.interpolation):r.parse(t)},toJSON:function(t){var r=t.constructor,a;if(void 0!==r.toJSON)a=r.toJSON(t);else{a={name:t.name,times:Fs.convertArray(t.times,Array),values:Fs.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(a.interpolation=i)}return a.type=t.ValueTypeName,a},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return La;case"vector":case"vector2":case"vector3":case"vector4":return Aa;case"color":return wa;case"quaternion":return ba;case"bool":case"boolean":return Da;case"string":return Na;}throw new Error("Unsupported typeName: "+t)}}),Object.assign(Sa,{parse:function(t){for(var r=[],a=t.tracks,o=1/(t.fps||1),s=0,i=a.length;s!==i;++s)r.push(Ca.parse(a[s]).scale(o));return new Sa(t.name,t.duration,r)},toJSON:function(t){for(var r=[],a=t.tracks,o={name:t.name,duration:t.duration,tracks:r},s=0,i=a.length;s!==i;++s)r.push(Ca.toJSON(a[s]));return o},CreateFromMorphTargetSequence:function(t,r,a,o){for(var n=r.length,s=[],l=0;l<n;l++){var i=[],d=[];i.push((l+n-1)%n,l,(l+1)%n),d.push(0,1,0);var p=Fs.getKeyframeOrder(i);i=Fs.sortedArray(i,1,p),d=Fs.sortedArray(d,1,p),o||0!==i[0]||(i.push(n),d.push(d[0])),s.push(new La(".morphTargetInfluences["+r[l].name+"]",i,d).scale(1/a))}return new Sa(t,-1,s)},findByName:function(t,r){var a=t;if(!Array.isArray(t)){var n=t;a=n.geometry&&n.geometry.animations||n.animations}for(var o=0;o<a.length;o++)if(a[o].name===r)return a[o];return null},CreateClipsFromMorphTargetSequences:function(t,r,a){for(var o={},n=/^([\w-]*?)([\d]+)$/,s=0,i=t.length;s<i;s++){var l=t[s],d=l.name.match(n);if(d&&1<d.length){var p=d[1],c=o[p];c||(o[p]=c=[]),c.push(l)}}var u=[];for(var p in o)u.push(Sa.CreateFromMorphTargetSequence(p,o[p],r,a));return u},parseAnimation:function(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var a=function(t,r,a,i,o){if(0!==a.length){var n=[],s=[];Fs.flattenJSON(a,n,s,i),0!==n.length&&o.push(new t(r,n,s))}},i=[],o=t.name||"default",n=t.length||-1,s=t.fps||30,l=t.hierarchy||[],d=0,p;d<l.length;d++)if(p=l[d].keys,p&&0!==p.length)if(p[0].morphTargets){for(var c={},u=0;u<p.length;u++)if(p[u].morphTargets)for(var g=0;g<p[u].morphTargets.length;g++)c[p[u].morphTargets[g]]=-1;for(var m in c){for(var h=[],y=[],g=0,f;g!==p[u].morphTargets.length;++g)f=p[u],h.push(f.time),y.push(f.morphTarget===m?1:0);i.push(new La(".morphTargetInfluence["+m+"]",h,y))}n=c.length*(s||1)}else{var M=".bones["+r[d].name+"]";a(Aa,M+".position",p,"pos",i),a(ba,M+".quaternion",p,"rot",i),a(Aa,M+".scale",p,"scl",i)}if(0===i.length)return null;var x=new Sa(o,n,i);return x}}),Object.assign(Sa.prototype,{resetDuration:function(){for(var t=this.tracks,r=0,a=0,i=t.length,o;a!==i;++a)o=this.tracks[a],r=l(r,o.times[o.times.length-1]);this.duration=r},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(Ia.prototype,{load:function(t,r,a,i){var o=this,n=new ta(o.manager);n.load(t,function(t){r(o.parse(JSON.parse(t)))},a,i)},setTextures:function(t){this.textures=t},parse:function(t){function r(t){return void 0===a[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),a[t]}var a=this.textures,i=new Ps[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(i.uniforms=t.uniforms),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=r(t.map)),void 0!==t.alphaMap&&(i.alphaMap=r(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=r(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=r(t.normalMap)),void 0!==t.normalScale){var o=t.normalScale;!1===Array.isArray(o)&&(o=[o,o]),i.normalScale=new f().fromArray(o)}return void 0!==t.displacementMap&&(i.displacementMap=r(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=r(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=r(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=r(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=r(t.specularMap)),void 0!==t.envMap&&(i.envMap=r(t.envMap)),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=r(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=r(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=r(t.gradientMap)),i}}),Object.assign(_a.prototype,{load:function(t,r,a,i){var o=this,n=new ta(o.manager);n.load(t,function(t){r(o.parse(JSON.parse(t)))},a,i)},parse:function(t){var r=new We,a=t.data.index;if(a!==void 0){var o=new Vs[a.type](a.array);r.setIndex(new ze(o,1))}var s=t.data.attributes;for(var l in s){var d=s[l],o=new Vs[d.type](d.array);r.addAttribute(l,new ze(o,d.itemSize,d.normalized))}var p=t.data.groups||t.data.drawcalls||t.data.offsets;if(p!==void 0)for(var c=0,i=p.length,n;c!==i;++c)n=p[c],r.addGroup(n.start,n.count,n.materialIndex);var u=t.data.boundingSphere;if(u!==void 0){var m=new D;u.center!==void 0&&m.fromArray(u.center),r.boundingSphere=new Ee(m,u.radius)}return r}});var Vs={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"===typeof Uint8ClampedArray?Uint8Array:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};ja.Handlers={handlers:[],add:function(t,r){this.handlers.push(t,r)},get:function(t){for(var r=this.handlers,a=0,i=r.length;a<i;a+=2){var o=r[a],n=r[a+1];if(o.test(t))return n}return null}},Object.assign(ja.prototype,{crossOrigin:void 0,extractUrlBase:function(t){var r=t.split("/");return 1===r.length?"./":(r.pop(),r.join("/")+"/")},initMaterials:function(t,r,a){for(var o=[],n=0;n<t.length;++n)o[n]=this.createMaterial(t[n],r,a);return o},createMaterial:function(){var t={NoBlending:vo,NormalBlending:Ao,AdditiveBlending:To,SubtractiveBlending:bo,MultiplyBlending:Lo,CustomBlending:No},r=new pe,a=new na,i=new Ia;return function(o,n,s){function l(t,r,i,o,l){var p=n+t,c=ja.Handlers.get(p),u;null===c?(a.setCrossOrigin(s),u=a.load(p)):u=c.load(p),void 0!==r&&(u.repeat.fromArray(r),1!==r[0]&&(u.wrapS=gn),1!==r[1]&&(u.wrapT=gn)),void 0!==i&&u.offset.fromArray(i),void 0!==o&&("repeat"===o[0]&&(u.wrapS=gn),"mirror"===o[0]&&(u.wrapS=yn),"repeat"===o[1]&&(u.wrapT=gn),"mirror"===o[1]&&(u.wrapT=yn)),void 0!==l&&(u.anisotropy=l);var m=Ms.generateUUID();return d[m]=u,m}var d={},p={uuid:Ms.generateUUID(),type:"MeshLambertMaterial"};for(var c in o){var u=o[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":p.name=u;break;case"blending":p.blending=t[u];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":p.color=r.fromArray(u).getHex();break;case"colorSpecular":p.specular=r.fromArray(u).getHex();break;case"colorEmissive":p.emissive=r.fromArray(u).getHex();break;case"specularCoef":p.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(p.type="MeshBasicMaterial"),"phong"===u.toLowerCase()&&(p.type="MeshPhongMaterial"),"standard"===u.toLowerCase()&&(p.type="MeshStandardMaterial");break;case"mapDiffuse":p.map=l(u,o.mapDiffuseRepeat,o.mapDiffuseOffset,o.mapDiffuseWrap,o.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":p.emissiveMap=l(u,o.mapEmissiveRepeat,o.mapEmissiveOffset,o.mapEmissiveWrap,o.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":p.lightMap=l(u,o.mapLightRepeat,o.mapLightOffset,o.mapLightWrap,o.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":p.aoMap=l(u,o.mapAORepeat,o.mapAOOffset,o.mapAOWrap,o.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":p.bumpMap=l(u,o.mapBumpRepeat,o.mapBumpOffset,o.mapBumpWrap,o.mapBumpAnisotropy);break;case"mapBumpScale":p.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":p.normalMap=l(u,o.mapNormalRepeat,o.mapNormalOffset,o.mapNormalWrap,o.mapNormalAnisotropy);break;case"mapNormalFactor":p.normalScale=[u,u];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":p.specularMap=l(u,o.mapSpecularRepeat,o.mapSpecularOffset,o.mapSpecularWrap,o.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":p.metalnessMap=l(u,o.mapMetalnessRepeat,o.mapMetalnessOffset,o.mapMetalnessWrap,o.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":p.roughnessMap=l(u,o.mapRoughnessRepeat,o.mapRoughnessOffset,o.mapRoughnessWrap,o.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":p.alphaMap=l(u,o.mapAlphaRepeat,o.mapAlphaOffset,o.mapAlphaWrap,o.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":p.side=ho;break;case"doubleSided":p.side=yo;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),p.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":p[c]=u;break;case"vertexColors":!0===u&&(p.vertexColors=Eo),"face"===u&&(p.vertexColors=xo);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,u);}}return"MeshBasicMaterial"===p.type&&delete p.emissive,"MeshPhongMaterial"!==p.type&&delete p.specular,1>p.opacity&&(p.transparent=!0),i.setTextures(d),i.parse(p)}}()}),Object.assign(Oa.prototype,{load:function(t,r,a,i){var o=this,n=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:ja.prototype.extractUrlBase(t),s=new ta(this.manager);s.setWithCredentials(this.withCredentials),s.load(t,function(a){var i=JSON.parse(a),s=i.metadata;if(s!==void 0){var l=s.type;if(l!==void 0){if("object"===l.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===l.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var d=o.parse(i,n);r(d.geometry,d.materials)},a,i)},setTexturePath:function(t){this.texturePath=t},parse:function(){function t(t,r){function a(t,r){return t&1<<r}var o=t.faces,n=t.vertices,s=t.normals,l=t.colors,d=t.scale,p=0,c,i,m,g,h,y,M,x,E,A,T,b,L,N,w,C,S,I,_,j,O,z,R,U,P,B,u;if(t.uvs!==void 0){for(c=0;c<t.uvs.length;c++)t.uvs[c].length&&p++;for(c=0;c<p;c++)r.faceVertexUvs[c]=[]}for(g=0,h=n.length;g<h;)I=new D,I.x=n[g++]*d,I.y=n[g++]*d,I.z=n[g++]*d,r.vertices.push(I);for(g=0,h=o.length;g<h;)if(A=o[g++],T=a(A,0),b=a(A,1),L=a(A,3),N=a(A,4),w=a(A,5),C=a(A,6),S=a(A,7),T){if(j=new _e,j.a=o[g],j.b=o[g+1],j.c=o[g+3],O=new _e,O.a=o[g+1],O.b=o[g+2],O.c=o[g+3],g+=4,b&&(E=o[g++],j.materialIndex=E,O.materialIndex=E),m=r.faces.length,L)for(c=0;c<p;c++)for(U=t.uvs[c],r.faceVertexUvs[c][m]=[],r.faceVertexUvs[c][m+1]=[],i=0;4>i;i++)x=o[g++],B=U[2*x],u=U[2*x+1],P=new f(B,u),2!==i&&r.faceVertexUvs[c][m].push(P),0!==i&&r.faceVertexUvs[c][m+1].push(P);if(N&&(M=3*o[g++],j.normal.set(s[M++],s[M++],s[M]),O.normal.copy(j.normal)),w)for(c=0;4>c;c++)M=3*o[g++],R=new D(s[M++],s[M++],s[M]),2!==c&&j.vertexNormals.push(R),0!==c&&O.vertexNormals.push(R);if(C&&(y=o[g++],z=l[y],j.color.setHex(z),O.color.setHex(z)),S)for(c=0;4>c;c++)y=o[g++],z=l[y],2!==c&&j.vertexColors.push(new pe(z)),0!==c&&O.vertexColors.push(new pe(z));r.faces.push(j),r.faces.push(O)}else{if(_=new _e,_.a=o[g++],_.b=o[g++],_.c=o[g++],b&&(E=o[g++],_.materialIndex=E),m=r.faces.length,L)for(c=0;c<p;c++)for(U=t.uvs[c],r.faceVertexUvs[c][m]=[],i=0;3>i;i++)x=o[g++],B=U[2*x],u=U[2*x+1],P=new f(B,u),r.faceVertexUvs[c][m].push(P);if(N&&(M=3*o[g++],_.normal.set(s[M++],s[M++],s[M])),w)for(c=0;3>c;c++)M=3*o[g++],R=new D(s[M++],s[M++],s[M]),_.vertexNormals.push(R);if(C&&(y=o[g++],_.color.setHex(l[y])),S)for(c=0;3>c;c++)y=o[g++],_.vertexColors.push(new pe(l[y]));r.faces.push(_)}}function r(t,r){var o=t.influencesPerVertex===void 0?2:t.influencesPerVertex;if(t.skinWeights)for(var n=0,i=t.skinWeights.length;n<i;n+=o){var s=t.skinWeights[n],l=1<o?t.skinWeights[n+1]:0,p=2<o?t.skinWeights[n+2]:0,u=3<o?t.skinWeights[n+3]:0;r.skinWeights.push(new v(s,l,p,u))}if(t.skinIndices)for(var n=0,i=t.skinIndices.length;n<i;n+=o){var m=t.skinIndices[n],a=1<o?t.skinIndices[n+1]:0,g=2<o?t.skinIndices[n+2]:0,c=3<o?t.skinIndices[n+3]:0;r.skinIndices.push(new v(m,a,g,c))}r.bones=t.bones,r.bones&&0<r.bones.length&&(r.skinWeights.length!==r.skinIndices.length||r.skinIndices.length!==r.vertices.length)&&console.warn("When skinning, number of vertices ("+r.vertices.length+"), skinIndices ("+r.skinIndices.length+"), and skinWeights ("+r.skinWeights.length+") should match.")}function a(t,r){var a=t.scale;if(t.morphTargets!==void 0)for(var o=0,i=t.morphTargets.length;o<i;o++){r.morphTargets[o]={},r.morphTargets[o].name=t.morphTargets[o].name,r.morphTargets[o].vertices=[];for(var n=r.morphTargets[o].vertices,s=t.morphTargets[o].vertices,l=0,d=s.length,p;l<d;l+=3)p=new D,p.x=s[l]*a,p.y=s[l+1]*a,p.z=s[l+2]*a,n.push(p)}if(void 0!==t.morphColors&&0<t.morphColors.length){console.warn("THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.");for(var c=r.faces,u=t.morphColors[0].colors,o=0,i=c.length;o<i;o++)c[o].color.fromArray(u,3*o)}}function i(t,r){var a=[],o=[];t.animation!==void 0&&o.push(t.animation),t.animations!==void 0&&(t.animations.length?o=o.concat(t.animations):o.push(t.animations));for(var n=0,i;n<o.length;n++)i=Sa.parseAnimation(o[n],r.bones),i&&a.push(i);if(r.morphTargets){var s=Sa.CreateClipsFromMorphTargetSequences(r.morphTargets,10);a=a.concat(s)}0<a.length&&(r.animations=a)}return function(o,n){void 0!==o.data&&(o=o.data),o.scale=void 0===o.scale?1:1/o.scale;var s=new Oe;if(t(o,s),r(o,s),a(o,s),i(o,s),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===o.materials||0===o.materials.length)return{geometry:s};var l=ja.prototype.initMaterials(o.materials,n,this.crossOrigin);return{geometry:s,materials:l}}}()}),Object.assign(za.prototype,{load:function(t,r,a,i){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var o=this,n=new ta(o.manager);n.load(t,function(a){var n=null;try{n=JSON.parse(a)}catch(r){return void 0!==i&&i(r),void console.error("THREE:ObjectLoader: Can't parse "+t+".",r.message)}var s=n.metadata;return void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase()?void console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead."):void o.parse(n,r)},a,i)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,r){var a=this.parseGeometries(t.geometries),i=this.parseImages(t.images,function(){void 0!==r&&r(s)}),o=this.parseTextures(t.textures,i),n=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,a,n);return t.animations&&(s.animations=this.parseAnimations(t.animations)),(void 0===t.images||0===t.images.length)&&void 0!==r&&r(s),s},parseGeometries:function(t){var r={};if(t!==void 0)for(var a=new Oa,o=new _a,n=0,i=t.length;n<i;n++){var s=t[n],l;switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":l=new Us[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":l=new Us[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":l=new Us[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":l=new Us[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":l=new Us[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":l=new Us[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":l=new Us[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":l=new Us[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":l=new Us[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":l=new Us[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":l=new Us[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":l=o.parse(s);break;case"Geometry":l=a.parse(s,this.texturePath).geometry;break;default:console.warn("THREE.ObjectLoader: Unsupported geometry type \""+s.type+"\"");continue;}l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),r[s.uuid]=l}return r},parseMaterials:function(t,r){var a={};if(t!==void 0){var o=new Ia;o.setTextures(r);for(var n=0,i=t.length,s;n<i;n++)if(s=t[n],"MultiMaterial"===s.type){for(var l=[],d=0;d<s.materials.length;d++)l.push(o.parse(s.materials[d]));a[s.uuid]=l}else a[s.uuid]=o.parse(s)}return a},parseAnimations:function(t){for(var r=[],a=0,i;a<t.length;a++)i=Sa.parse(t[a]),r.push(i);return r},parseImages:function(t,r){function a(t){return o.manager.itemStart(t),d.load(t,function(){o.manager.itemEnd(t)},void 0,function(){o.manager.itemEnd(t),o.manager.itemError(t)})}var o=this,n={};if(t!==void 0&&0<t.length){var s=new ea(r),d=new ia(s);d.setCrossOrigin(this.crossOrigin);for(var p=0,i=t.length;p<i;p++){var l=t[p],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:o.texturePath+l.url;n[l.uuid]=a(c)}}return n},parseTextures:function(t,r){function a(t,r){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),r[t])}var o={};if(t!==void 0)for(var n=0,i=t.length,s;n<i;n++){s=t[n],void 0===s.image&&console.warn("THREE.ObjectLoader: No \"image\" specified for",s.uuid),void 0===r[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var l=new c(r[s.image]);l.needsUpdate=!0,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=a(s.mapping,Hs)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.wrap&&(l.wrapS=a(s.wrap[0],Qs),l.wrapT=a(s.wrap[1],Qs)),void 0!==s.minFilter&&(l.minFilter=a(s.minFilter,Ys)),void 0!==s.magFilter&&(l.magFilter=a(s.magFilter,Ys)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),o[s.uuid]=l}return o},parseObject:function(){var t=new N;return function(r,a,o){function n(t){return void 0===a[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),a[t]}function s(t){if(void 0!==t){if(Array.isArray(t)){for(var r=[],a=0,i=t.length,n;a<i;a++)n=t[a],void 0===o[n]&&console.warn("THREE.ObjectLoader: Undefined material",n),r.push(o[n]);return r}return void 0===o[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),o[t]}}var d;switch(r.type){case"Scene":d=new Vt,void 0!==r.background&&io(r.background)&&(d.background=new pe(r.background)),void 0!==r.fog&&("Fog"===r.fog.type?d.fog=new Gt(r.fog.color,r.fog.near,r.fog.far):"FogExp2"===r.fog.type&&(d.fog=new Ft(r.fog.color,r.fog.density)));break;case"PerspectiveCamera":d=new Ie(r.fov,r.aspect,r.near,r.far),void 0!==r.focus&&(d.focus=r.focus),void 0!==r.zoom&&(d.zoom=r.zoom),void 0!==r.filmGauge&&(d.filmGauge=r.filmGauge),void 0!==r.filmOffset&&(d.filmOffset=r.filmOffset),void 0!==r.view&&(d.view=Object.assign({},r.view));break;case"OrthographicCamera":d=new Se(r.left,r.right,r.top,r.bottom,r.near,r.far);break;case"AmbientLight":d=new ha(r.color,r.intensity);break;case"DirectionalLight":d=new ga(r.color,r.intensity);break;case"PointLight":d=new ua(r.color,r.intensity,r.distance,r.decay);break;case"RectAreaLight":d=new ya(r.color,r.intensity,r.width,r.height);break;case"SpotLight":d=new ca(r.color,r.intensity,r.distance,r.angle,r.penumbra,r.decay);break;case"HemisphereLight":d=new la(r.color,r.groundColor,r.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var p=n(r.geometry),c=s(r.material);d=p.bones&&0<p.bones.length?new Zt(p,c):new rt(p,c);break;case"LOD":d=new Wt;break;case"Line":d=new Jt(n(r.geometry),s(r.material),r.mode);break;case"LineLoop":d=new er(n(r.geometry),s(r.material));break;case"LineSegments":d=new $t(n(r.geometry),s(r.material));break;case"PointCloud":case"Points":d=new rr(n(r.geometry),s(r.material));break;case"Sprite":d=new Yt(s(r.material));break;case"Group":d=new ar;break;default:d=new we;}if(d.uuid=r.uuid,void 0!==r.name&&(d.name=r.name),void 0===r.matrix?(void 0!==r.position&&d.position.fromArray(r.position),void 0!==r.rotation&&d.rotation.fromArray(r.rotation),void 0!==r.quaternion&&d.quaternion.fromArray(r.quaternion),void 0!==r.scale&&d.scale.fromArray(r.scale)):(t.fromArray(r.matrix),t.decompose(d.position,d.quaternion,d.scale)),void 0!==r.castShadow&&(d.castShadow=r.castShadow),void 0!==r.receiveShadow&&(d.receiveShadow=r.receiveShadow),r.shadow&&(void 0!==r.shadow.bias&&(d.shadow.bias=r.shadow.bias),void 0!==r.shadow.radius&&(d.shadow.radius=r.shadow.radius),void 0!==r.shadow.mapSize&&d.shadow.mapSize.fromArray(r.shadow.mapSize),void 0!==r.shadow.camera&&(d.shadow.camera=this.parseObject(r.shadow.camera))),void 0!==r.visible&&(d.visible=r.visible),void 0!==r.userData&&(d.userData=r.userData),void 0!==r.children)for(var u=r.children,m=0;m<u.length;m++)d.add(this.parseObject(u[m],a,o));if("LOD"===r.type)for(var i=r.levels,g=0;g<i.length;g++){var l=i[g],h=d.getObjectByProperty("uuid",l.object);void 0!==h&&d.addLevel(h,l.distance)}return d}}()});var Hs={UVMapping:nn,CubeReflectionMapping:sn,CubeRefractionMapping:ln,EquirectangularReflectionMapping:dn,EquirectangularRefractionMapping:pn,SphericalReflectionMapping:cn,CubeUVReflectionMapping:un,CubeUVRefractionMapping:mn},Qs={RepeatWrapping:gn,ClampToEdgeWrapping:hn,MirroredRepeatWrapping:yn},Ys={NearestFilter:fn,NearestMipMapNearestFilter:Mn,NearestMipMapLinearFilter:xn,LinearFilter:En,LinearMipMapNearestFilter:vn,LinearMipMapLinearFilter:An};Object.assign(Ya.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(r){var a=this.getUtoTmapping(r);return this.getPoint(a)},getPoints:function(t){t===void 0&&(t=5);for(var r=[],a=0;a<=t;a++)r.push(this.getPoint(a/t));return r},getSpacedPoints:function(t){t===void 0&&(t=5);for(var r=[],a=0;a<=t;a++)r.push(this.getPointAt(a/t));return r},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var r=[],a=this.getPoint(0),i=0,o,n;for(r.push(0),n=1;n<=t;n++)o=this.getPoint(n/t),i+=o.distanceTo(a),r.push(i),a=o;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(r,a){var o=this.getLengths(),n=0,i=o.length,s;s=a?a:r*o[i-1];for(var l=0,d=i-1,p;l<=d;)if(n=h(l+(d-l)/2),p=o[n]-s,0>p)l=n+1;else if(0<p)d=n-1;else{d=n;break}if(n=d,o[n]===s)return n/(i-1);var c=o[n],u=o[n+1],m=(s-c)/(u-c),g=(n+m)/(i-1);return g},getTangent:function(r){var t=1e-4,a=r-t,i=r+t;0>a&&(a=0),1<i&&(i=1);var o=this.getPoint(a),n=this.getPoint(i),s=n.clone().sub(o);return s.normalize()},getTangentAt:function(r){var a=this.getUtoTmapping(r);return this.getTangent(a)},computeFrenetFrames:function(r,a){var n=new D,s=[],l=[],d=[],p=new D,c=new N,m,i,u;for(m=0;m<=r;m++)i=m/r,s[m]=this.getTangentAt(i),s[m].normalize();l[0]=new D,d[0]=new D;var h=t,y=g(s[0].x),f=g(s[0].y),M=g(s[0].z);for(y<=h&&(h=y,n.set(1,0,0)),f<=h&&(h=f,n.set(0,1,0)),M<=h&&n.set(0,0,1),p.crossVectors(s[0],n).normalize(),l[0].crossVectors(s[0],p),d[0].crossVectors(s[0],l[0]),m=1;m<=r;m++)l[m]=l[m-1].clone(),d[m]=d[m-1].clone(),p.crossVectors(s[m-1],s[m]),p.length()>oo&&(p.normalize(),u=o(Ms.clamp(s[m-1].dot(s[m]),-1,1)),l[m].applyMatrix4(c.makeRotationAxis(p,u))),d[m].crossVectors(s[m],l[m]);if(!0===a)for(u=o(Ms.clamp(l[0].dot(l[r]),-1,1)),u/=r,0<s[0].dot(p.crossVectors(l[0],l[r]))&&(u=-u),m=1;m<=r;m++)l[m].applyMatrix4(c.makeRotationAxis(s[m],u*m)),d[m].crossVectors(s[m],l[m]);return{tangents:s,normals:l,binormals:d}}}),Wa.prototype=Object.create(Ya.prototype),Wa.prototype.constructor=Wa,Wa.prototype.isLineCurve=!0,Wa.prototype.getPoint=function(r){if(1===r)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(r).add(this.v1),t},Wa.prototype.getPointAt=function(t){return this.getPoint(t)},Wa.prototype.getTangent=function(){var t=this.v2.clone().sub(this.v1);return t.normalize()},Xa.prototype=Object.assign(Object.create(Ya.prototype),{constructor:Xa,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);t.equals(r)||this.curves.push(new Wa(r,t))},getPoint:function(r){for(var t=r*this.getLength(),a=this.getCurveLengths(),o=0;o<a.length;){if(a[o]>=t){var i=a[o]-t,n=this.curves[o],s=n.getLength(),l=0===s?0:1-i/s;return n.getPointAt(l)}o++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],r=0,a=0,i=this.curves.length;a<i;a++)r+=this.curves[a].getLength(),t.push(r);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var r=[],a=0;a<=t;a++)r.push(this.getPoint(a/t));return this.autoClose&&r.push(r[0]),r},getPoints:function(t){t=t||12;for(var r=[],a=0,i=this.curves,o;a<i.length;a++)for(var n=i[a],s=n&&n.isEllipseCurve?2*t:n&&n.isLineCurve?1:n&&n.isSplineCurve?t*n.points.length:t,l=n.getPoints(s),d=0,p;d<l.length;d++)p=l[d],o&&o.equals(p)||(r.push(p),o=p);return this.autoClose&&1<r.length&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},createPointsGeometry:function(t){var r=this.getPoints(t);return this.createGeometry(r)},createSpacedPointsGeometry:function(t){var r=this.getSpacedPoints(t);return this.createGeometry(r)},createGeometry:function(t){for(var r=new Oe,a=0,i=t.length,o;a<i;a++)o=t[a],r.vertices.push(new D(o.x,o.y,o.z||0));return r}}),qa.prototype=Object.create(Ya.prototype),qa.prototype.constructor=qa,qa.prototype.isEllipseCurve=!0,qa.prototype.getPoint=function(r){for(var t=2*L,a=this.aEndAngle-this.aStartAngle,i=g(a)<oo;0>a;)a+=t;for(;a>t;)a-=t;a<oo&&(i?a=0:a=t),!0!==this.aClockwise||i||(a===t?a=-t:a-=t);var o=this.aStartAngle+r*a,n=this.aX+this.xRadius*A(o),s=this.aY+this.yRadius*E(o);if(0!==this.aRotation){var l=A(this.aRotation),d=E(this.aRotation),p=n-this.aX,c=s-this.aY;n=p*l-c*d+this.aX,s=p*d+c*l+this.aY}return new f(n,s)},Za.prototype=Object.create(Ya.prototype),Za.prototype.constructor=Za,Za.prototype.isSplineCurve=!0,Za.prototype.getPoint=function(r){var t=this.points,a=(t.length-1)*r,i=h(a),o=a-i,n=t[0===i?i:i-1],s=t[i],l=t[i>t.length-2?t.length-1:i+1],d=t[i>t.length-3?t.length-1:i+2];return new f(Ra(o,n.x,s.x,l.x,d.x),Ra(o,n.y,s.y,l.y,d.y))},Ka.prototype=Object.create(Ya.prototype),Ka.prototype.constructor=Ka,Ka.prototype.getPoint=function(r){var t=this.v0,a=this.v1,i=this.v2,o=this.v3;return new f(Qa(r,t.x,a.x,i.x,o.x),Qa(r,t.y,a.y,i.y,o.y))},Ja.prototype=Object.create(Ya.prototype),Ja.prototype.constructor=Ja,Ja.prototype.getPoint=function(r){var t=this.v0,a=this.v1,i=this.v2;return new f(ka(r,t.x,a.x,i.x),ka(r,t.y,a.y,i.y))};var Ws=Object.assign(Object.create(Xa.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var r=1,a=t.length;r<a;r++)this.lineTo(t[r].x,t[r].y)},moveTo:function(t,r){this.currentPoint.set(t,r)},lineTo:function(t,r){var a=new Wa(this.currentPoint.clone(),new f(t,r));this.curves.push(a),this.currentPoint.set(t,r)},quadraticCurveTo:function(t,r,a,i){var o=new Ja(this.currentPoint.clone(),new f(t,r),new f(a,i));this.curves.push(o),this.currentPoint.set(a,i)},bezierCurveTo:function(t,r,a,i,o,n){var s=new Ka(this.currentPoint.clone(),new f(t,r),new f(a,i),new f(o,n));this.curves.push(s),this.currentPoint.set(o,n)},splineThru:function(t){var r=[this.currentPoint.clone()].concat(t),a=new Za(r);this.curves.push(a),this.currentPoint.copy(t[t.length-1])},arc:function(t,r,a,i,o,n){var s=this.currentPoint.x,l=this.currentPoint.y;this.absarc(t+s,r+l,a,i,o,n)},absarc:function(t,r,a,i,o,n){this.absellipse(t,r,a,a,i,o,n)},ellipse:function(t,r,a,i,o,n,s,l){var d=this.currentPoint.x,p=this.currentPoint.y;this.absellipse(t+d,r+p,a,i,o,n,s,l)},absellipse:function(t,r,a,i,o,n,s,l){var d=new qa(t,r,a,i,o,n,s,l);if(0<this.curves.length){var p=d.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(d);var c=d.getPoint(1);this.currentPoint.copy(c)}});$a.prototype=Ws,Ws.constructor=$a,ei.prototype=Object.assign(Object.create(Ws),{constructor:ei,getPointsHoles:function(t){for(var r=[],a=0,i=this.holes.length;a<i;a++)r[a]=this.holes[a].getPoints(t);return r},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),Object.assign(ti.prototype,{moveTo:function(t,r){this.currentPath=new $a,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,r)},lineTo:function(t,r){this.currentPath.lineTo(t,r)},quadraticCurveTo:function(t,r,a,i){this.currentPath.quadraticCurveTo(t,r,a,i)},bezierCurveTo:function(t,r,a,i,o,n){this.currentPath.bezierCurveTo(t,r,a,i,o,n)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,r){function a(t){for(var r=[],a=0,i=t.length;a<i;a++){var o=t[a],n=new ei;n.curves=o.curves,r.push(n)}return r}function o(t,r){for(var a=r.length,i=!1,o=a-1,n=0;n<a;o=n++){var s=r[o],l=r[n],d=l.x-s.x,p=l.y-s.y;if(g(p)>oo){if(0>p&&(s=r[n],d=-d,l=r[o],p=-p),t.y<s.y||t.y>l.y)continue;if(t.y!==s.y){var c=p*(t.x-s.x)-d*(t.y-s.y);if(0===c)return!0;if(0>c)continue;i=!i}else if(t.x===s.x)return!0}else{if(t.y!==s.y)continue;if(l.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=l.x)return!0}}return i}var n=Rs.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===r)return a(s);var d=[],p,c,u;if(1===s.length)return c=s[0],u=new ei,u.curves=c.curves,d.push(u),d;var m=!n(s[0].getPoints());m=t?!m:m;var h=[],y=[],f=[],M=0,x;y[M]=void 0,f[M]=[];for(var E=0,i=s.length;E<i;E++)c=s[E],x=c.getPoints(),p=n(x),p=t?!p:p,p?(!m&&y[M]&&M++,y[M]={s:new ei,p:x},y[M].s.curves=c.curves,m&&M++,f[M]=[]):f[M].push({h:c,p:x[0]});if(!y[0])return a(s);if(1<y.length){for(var l=!1,v=[],A=0,T=y.length;A<T;A++)h[A]=[];for(var A=0,T=y.length,b;A<T;A++){b=f[A];for(var L=0;L<b.length;L++){for(var N=b[L],D=!0,w=0;w<y.length;w++)o(N.p,y[w].p)&&(A!==w&&v.push({froms:A,tos:w,hole:L}),D?(D=!1,h[w].push(N)):l=!0);D&&h[A].push(N)}}0<v.length&&!l&&(f=h)}for(var E=0,C=y.length,S;E<C;E++){u=y[E].s,d.push(u),S=f[E];for(var I=0,_=S.length;I<_;I++)u.holes.push(S[I].h)}return d}}),Object.assign(ri.prototype,{isFont:!0,generateShapes:function(t,r,a){function i(t){for(var a=(t+"").split(""),s=r/n.resolution,l=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,d=0,p=0,c=[],u=0,i;u<a.length;u++)if(i=a[u],"\n"===i)d=0,p-=l;else{var m=o(i,s,d,p);d+=m.offsetX,c.push(m.path)}return c}function o(r,o,s,d){var p=n.glyphs[r]||n.glyphs["?"];if(p){var c=new ti,u=[],m,g,h,y,f,M,x,E,v,A,T;if(p.o)for(var b=p._cachedOutline||(p._cachedOutline=p.o.split(" ")),L=0,i=b.length,l;L<i;)switch(l=b[L++],l){case"m":m=b[L++]*o+s,g=b[L++]*o+d,c.moveTo(m,g);break;case"l":m=b[L++]*o+s,g=b[L++]*o+d,c.lineTo(m,g);break;case"q":if(h=b[L++]*o+s,y=b[L++]*o+d,x=b[L++]*o+s,E=b[L++]*o+d,c.quadraticCurveTo(x,E,h,y),T=u[u.length-1],T){f=T.x,M=T.y;for(var N=1,D;N<=a;N++)D=N/a,ka(D,f,x,h),ka(D,M,E,y)}break;case"b":if(h=b[L++]*o+s,y=b[L++]*o+d,x=b[L++]*o+s,E=b[L++]*o+d,v=b[L++]*o+s,A=b[L++]*o+d,c.bezierCurveTo(x,E,v,A,h,y),T=u[u.length-1],T){f=T.x,M=T.y;for(var N=1,D;N<=a;N++)D=N/a,Qa(D,f,x,v,h),Qa(D,M,E,A,y)}}return{offsetX:p.ha*o,path:c}}}r===void 0&&(r=100),a===void 0&&(a=4);for(var n=this.data,s=i(t),l=[],d=0,p=s.length;d<p;d++)Array.prototype.push.apply(l,s[d].toShapes());return l}}),Object.assign(ai.prototype,{load:function(t,r,a,i){var o=this,n=new ta(this.manager);n.load(t,function(t){var a;try{a=JSON.parse(t)}catch(r){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),a=JSON.parse(t.substring(65,t.length-2))}var i=o.parse(a);r&&r(i)},a,i)},parse:function(t){return new ri(t)}});var Xs={getContext:function(){return void 0===qs&&(qs=new(window.AudioContext||window.webkitAudioContext)),qs},setContext:function(t){qs=t}},qs;Object.assign(ii.prototype,{load:function(t,r,a,i){var o=new ta(this.manager);o.setResponseType("arraybuffer"),o.load(t,function(t){var a=Xs.getContext();a.decodeAudioData(t,function(t){r(t)})},a,i)}}),Object.assign(oi.prototype,{update:function(){var t=new N,a=new N,i,o,n,s,l,d,p,c;return function(u){var m=i!==this||o!==u.focus||n!==u.fov||s!==u.aspect*this.aspect||l!==u.near||d!==u.far||p!==u.zoom||c!==this.eyeSep;if(m){i=this,o=u.focus,n=u.fov,s=u.aspect*this.aspect,l=u.near,d=u.far,p=u.zoom;var g=u.projectionMatrix.clone();c=this.eyeSep/2;var h=c*l/o,y=l*r(0.5*(Ms.DEG2RAD*n))/p,f,M;a.elements[12]=-c,t.elements[12]=c,f=-y*s+h,M=y*s+h,g.elements[0]=2*l/(M-f),g.elements[8]=(M+f)/(M-f),this.cameraL.projectionMatrix.copy(g),f=-y*s-h,M=y*s-h,g.elements[0]=2*l/(M-f),g.elements[8]=(M+f)/(M-f),this.cameraR.projectionMatrix.copy(g)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(a),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(t)}}()}),ni.prototype=Object.create(we.prototype),ni.prototype.constructor=ni,si.prototype=Object.assign(Object.create(we.prototype),{constructor:si,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null===this.filter?this.gain.disconnect(this.context.destination):(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new D,r=new b,a=new D,i=new D;return function(o){we.prototype.updateMatrixWorld.call(this,o);var n=this.context.listener,s=this.up;this.matrixWorld.decompose(t,r,a),i.set(0,0,-1).applyQuaternion(r),n.positionX?(n.positionX.setValueAtTime(t.x,this.context.currentTime),n.positionY.setValueAtTime(t.y,this.context.currentTime),n.positionZ.setValueAtTime(t.z,this.context.currentTime),n.forwardX.setValueAtTime(i.x,this.context.currentTime),n.forwardY.setValueAtTime(i.y,this.context.currentTime),n.forwardZ.setValueAtTime(i.z,this.context.currentTime),n.upX.setValueAtTime(s.x,this.context.currentTime),n.upY.setValueAtTime(s.y,this.context.currentTime),n.upZ.setValueAtTime(s.z,this.context.currentTime)):(n.setPosition(t.x,t.y,t.z),n.setOrientation(i.x,i.y,i.z,s.x,s.y,s.z))}}()}),li.prototype=Object.assign(Object.create(we.prototype),{constructor:li,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),t.start(0,this.startTime),this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,r=this.filters.length;t<r;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,r=this.filters.length;t<r;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),di.prototype=Object.assign(Object.create(li.prototype),{constructor:di,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new D;return function(r){we.prototype.updateMatrixWorld.call(this,r),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(pi.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,r=this.getFrequencyData(),a=0;a<r.length;a++)t+=r[a];return t/r.length}}),Object.assign(ci.prototype,{accumulate:function(t,r){var a=this.buffer,o=this.valueSize,n=t*o+o,s=this.cumulativeWeight;if(0===s){for(var l=0;l!==o;++l)a[n+l]=a[l];s=r}else{s+=r;var i=r/s;this._mixBufferRegion(a,n,0,i,o)}this.cumulativeWeight=s},apply:function(t){var r=this.valueSize,a=this.buffer,o=t*r+r,n=this.cumulativeWeight,s=this.binding;if(this.cumulativeWeight=0,1>n){this._mixBufferRegion(a,o,3*r,1-n,r)}for(var l=r;l!==r+r;++l)if(a[l]!==a[l+r]){s.setValue(a,o);break}},saveOriginalState:function(){var t=this.binding,r=this.buffer,a=this.valueSize,o=3*a;t.getValue(r,o);for(var n=a;n!==o;++n)r[n]=r[o+n%a];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(r,a,o,n,t){if(0.5<=n)for(var s=0;s!==t;++s)r[a+s]=r[o+s]},_slerp:function(r,a,i,o){b.slerpFlat(r,a,r,a,r,i,o)},_lerp:function(r,a,o,n,t){for(var s=0,i;s!==t;++s)i=a+s,r[i]=r[i]*(1-n)+r[o+s]*n}}),Object.assign(ui.prototype,{getValue:function(t,r){this.bind();var a=this._targetGroup.nCachedObjects_,i=this._bindings[a];i!==void 0&&i.getValue(t,r)},setValue:function(t,r){for(var a=this._bindings,o=this._targetGroup.nCachedObjects_,i=a.length;o!==i;++o)a[o].setValue(t,r)},bind:function(){for(var t=this._bindings,r=this._targetGroup.nCachedObjects_,a=t.length;r!==a;++r)t[r].bind()},unbind:function(){for(var t=this._bindings,r=this._targetGroup.nCachedObjects_,a=t.length;r!==a;++r)t[r].unbind()}}),Object.assign(mi,{Composite:ui,create:function(t,r,a){return t&&t.isAnimationObjectGroup?new mi.Composite(t,r,a):new mi(t,r,a)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var t=/((?:[\w-]+[\/:])*)/,r=/([\w-\.]+)?/,a=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,i=/\.([\w-]+)(?:\[(.+)\])?/,o=new RegExp("^"+t.source+r.source+a.source+i.source+"$"),n=["material","materials","bones"];return function(t){var r=o.exec(t);if(!r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var a={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},i=a.nodeName&&a.nodeName.lastIndexOf(".");if(i!==void 0&&-1!==i){var s=a.nodeName.substring(i+1);-1!==n.indexOf(s)&&(a.nodeName=a.nodeName.substring(0,i),a.objectName=s)}if(null===a.propertyName||0===a.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return a}}(),findNode:function(t,r){if(!r||""===r||"root"===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){var a=function(t){for(var a=0,i;a<t.bones.length;a++)if(i=t.bones[a],i.name===r)return i;return null},i=a(t.skeleton);if(i)return i}if(t.children){var o=function t(a){for(var o=0,i;o<a.length;o++){if(i=a[o],i.name===r||i.uuid===r)return i;var n=t(i.children);if(n)return n}return null},n=o(t.children);if(n)return n}return null}}),Object.assign(mi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,r){t[r]=this.node[this.propertyName]},function(t,r){for(var a=this.resolvedProperty,o=0,i=a.length;o!==i;++o)t[r++]=a[o]},function(t,r){t[r]=this.resolvedProperty[this.propertyIndex]},function(t,r){this.resolvedProperty.toArray(t,r)}],SetterByBindingTypeAndVersioning:[[function(t,r){this.node[this.propertyName]=t[r]},function(t,r){this.node[this.propertyName]=t[r],this.targetObject.needsUpdate=!0},function(t,r){this.node[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,r){for(var a=this.resolvedProperty,o=0,i=a.length;o!==i;++o)a[o]=t[r++]},function(t,r){for(var a=this.resolvedProperty,o=0,i=a.length;o!==i;++o)a[o]=t[r++];this.targetObject.needsUpdate=!0},function(t,r){for(var a=this.resolvedProperty,o=0,i=a.length;o!==i;++o)a[o]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,r){this.resolvedProperty[this.propertyIndex]=t[r]},function(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0},function(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,r){this.resolvedProperty.fromArray(t,r)},function(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0},function(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,r){this.bind(),this.getValue(t,r)},setValue:function(t,r){this.bind(),this.setValue(t,r)},bind:function(){var t=this.node,r=this.parsedPath,a=r.objectName,o=r.propertyName,n=r.propertyIndex;if(t||(t=mi.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(a){var s=r.objectIndex;switch(a){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var l=0;l<t.length;l++)if(t[l].name===s){s=l;break}break;default:if(void 0===t[a])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[a];}if(void 0!==s){if(void 0===t[s])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[s]}}var i=t[o];if(void 0===i){var d=r.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+o+" but it wasn't found.",t)}var p=this.Versioning.None;void 0===t.needsUpdate?void 0!==t.matrixWorldNeedsUpdate&&(p=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t):(p=this.Versioning.NeedsUpdate,this.targetObject=t);var c=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===o){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var l=0;l<this.node.geometry.morphAttributes.position.length;l++)if(t.geometry.morphAttributes.position[l].name===n){n=l;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var l=0;l<this.node.geometry.morphTargets.length;l++)if(t.geometry.morphTargets[l].name===n){n=l;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=i,this.propertyIndex=n}else void 0!==i.fromArray&&void 0!==i.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=i):Array.isArray(i)?(c=this.BindingType.EntireArray,this.resolvedProperty=i):this.propertyName=o;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][p]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(mi.prototype,{_getValue_unbound:mi.prototype.getValue,_setValue_unbound:mi.prototype.setValue}),Object.assign(gi.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,r=t.length,a=this.nCachedObjects_,o=this._indicesByUUID,s=this._paths,l=this._parsedPaths,d=this._bindings,p=d.length,c=0,i=arguments.length;c!==i;++c){var n=arguments[c],u=n.uuid,g=o[u],h=void 0;if(g===void 0){g=r++,o[u]=g,t.push(n);for(var y=0,f=p;y!==f;++y)d[y].push(new mi(n,s[y],l[y]))}else if(g<a){h=t[g];var m=--a,M=t[m];o[M.uuid]=g,t[g]=M,o[u]=m,t[m]=n;for(var y=0,f=p;y!==f;++y){var x=d[y],E=x[m],v=x[g];x[g]=E,v===void 0&&(v=new mi(n,s[y],l[y])),x[m]=v}}else t[g]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=a},remove:function(){for(var t=this._objects,r=this.nCachedObjects_,a=this._indicesByUUID,o=this._bindings,s=o.length,l=0,i=arguments.length;l!==i;++l){var n=arguments[l],d=n.uuid,p=a[d];if(p!==void 0&&p>=r){var c=r++,u=t[c];a[u.uuid]=p,t[p]=u,a[d]=c,t[c]=n;for(var m=0;m!==s;++m){var g=o[m],h=g[c],y=g[p];g[p]=h,g[c]=y}}}this.nCachedObjects_=r},uncache:function(){for(var t=this._objects,r=t.length,a=this.nCachedObjects_,o=this._indicesByUUID,s=this._bindings,l=s.length,d=0,i=arguments.length;d!==i;++d){var n=arguments[d],p=n.uuid,c=o[p];if(void 0!==c)if(delete o[p],c<a){var u=--a,g=t[u],h=--r,y=t[h];o[g.uuid]=c,t[c]=g,o[y.uuid]=u,t[u]=y,t.pop();for(var f=0,M=l;f!==M;++f){var m=s[f],x=m[u],E=m[h];m[c]=x,m[u]=E,m.pop()}}else{var h=--r,y=t[h];o[y.uuid]=c,t[c]=y,t.pop();for(var f=0,M=l,m;f!==M;++f)m=s[f],m[c]=m[h],m.pop()}}this.nCachedObjects_=a},subscribe_:function(t,r){var a=this._bindingsIndicesByPath,o=a[t],s=this._bindings;if(o!==void 0)return s[o];var l=this._paths,d=this._parsedPaths,p=this._objects,c=p.length,u=this.nCachedObjects_,m=Array(c);o=s.length,a[t]=o,l.push(t),d.push(r),s.push(m);for(var g=u,i=p.length,n;g!==i;++g)n=p[g],m[g]=new mi(n,t,r);return m},unsubscribe_:function(t){var r=this._bindingsIndicesByPath,a=r[t];if(a!==void 0){var i=this._paths,o=this._parsedPaths,n=this._bindings,s=n.length-1,l=n[s],d=t[s];r[d]=a,n[a]=l,n.pop(),o[a]=o[s],o.pop(),i[a]=i[s],i.pop()}}}),Object.assign(hi.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,r){return this.loop=t,this.repetitions=r,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,r,a){if(t.fadeOut(r),this.fadeIn(r),a){var i=this._clip.duration,o=t._clip.duration;t.warp(1,o/i,r),this.warp(i/o,1,r)}return this},crossFadeTo:function(t,r,a){return t.crossFadeFrom(this,r,a)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,r,a){var i=this._mixer,o=i.time,n=this._timeScaleInterpolant,s=this.timeScale;null===n&&(n=i._lendControlInterpolant(),this._timeScaleInterpolant=n);var l=n.parameterPositions,d=n.sampleValues;return l[0]=o,l[1]=o+a,d[0]=t/s,d[1]=r/s,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,r,a,i){if(!this.enabled)return void this._updateWeight(t);var o=this._startTime;if(null!==o){var n=(t-o)*a;if(0>n||0===a)return;this._startTime=null,r=a*n}r*=this._updateTimeScale(t);var s=this._updateTime(r),l=this._updateWeight(t);if(0<l)for(var d=this._interpolants,p=this._propertyBindings,c=0,u=d.length;c!==u;++c)d[c].evaluate(s),p[c].accumulate(i,l)},_updateWeight:function(t){var r=0;if(this.enabled){r=this.weight;var a=this._weightInterpolant;if(null!==a){var i=a.evaluate(t)[0];r*=i,t>a.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=r,r},_updateTimeScale:function(t){var r=0;if(!this.paused){r=this.timeScale;var a=this._timeScaleInterpolant;if(null!==a){var i=a.evaluate(t)[0];r*=i,t>a.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r)}}return this._effectiveTimeScale=r,r},_updateTime:function(t){var r=this.time+t;if(0===t)return r;var a=this._clip.duration,i=this.loop,o=this._loopCount;if(i===Kn){-1===o&&(this._loopCount=0,this._setEndings(!0,!0,!1));handle_stop:{if(r>=a)r=a;else if(0>r)r=0;else break handle_stop;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}}else{var n=i===$n;if(-1===o&&(0<=t?(o=0,this._setEndings(!0,0===this.repetitions,n)):this._setEndings(0===this.repetitions,!0,n)),r>=a||0>r){var s=h(r/a);r-=a*s,o+=g(s);var l=this.repetitions-o;if(0>l)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=0<t?a:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1});else{if(0===l){var d=0>t;this._setEndings(d,!d,n)}else this._setEndings(!1,!1,n);this._loopCount=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(n&&1===(1&o))return this.time=r,a-r}return this.time=r,r},_setEndings:function(t,r,a){var i=this._interpolantSettings;a?(i.endingStart=is,i.endingEnd=is):(i.endingStart=t?this.zeroSlopeAtStart?is:as:os,i.endingEnd=r?this.zeroSlopeAtEnd?is:as:os)},_scheduleFading:function(t,r,a){var i=this._mixer,o=i.time,n=this._weightInterpolant;null===n&&(n=i._lendControlInterpolant(),this._weightInterpolant=n);var s=n.parameterPositions,l=n.sampleValues;return s[0]=o,l[0]=r,s[1]=o+t,l[1]=a,this}}),Object.assign(yi.prototype,d.prototype,{_bindAction:function(t,r){var a=t._localRoot||this._root,o=t._clip.tracks,n=o.length,s=t._propertyBindings,l=t._interpolants,d=a.uuid,p=this._bindingsByRootAndName,c=p[d];c===void 0&&(c={},p[d]=c);for(var u=0;u!==n;++u){var i=o[u],m=i.name,g=c[m];if(void 0!==g)s[u]=g;else{if(g=s[u],void 0!==g){null===g._cacheIndex&&(++g.referenceCount,this._addInactiveBinding(g,d,m));continue}var h=r&&r._propertyBindings[u].binding.parsedPath;g=new ci(mi.create(a,m,h),i.ValueTypeName,i.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,d,m),s[u]=g}l[u].resultBuffer=g.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var r=(t._localRoot||this._root).uuid,a=t._clip.uuid,o=this._actionsByClip[a];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,a,r)}for(var s=t._propertyBindings,l=0,i=s.length,n;l!==i;++l)n=s[l],0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState());this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var r=t._propertyBindings,a=0,i=r.length,o;a!==i;++a)o=r[a],0===--o.useCount&&(o.restoreOriginalState(),this._takeBackBinding(o));this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var r=t._cacheIndex;return null!==r&&r<this._nActiveActions},_addInactiveAction:function(t,r,a){var i=this._actions,o=this._actionsByClip,n=o[r];if(n===void 0)n={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[r]=n;else{var s=n.knownActions;t._byClipCacheIndex=s.length,s.push(t)}t._cacheIndex=i.length,i.push(t),n.actionByRoot[a]=t},_removeInactiveAction:function(t){var r=this._actions,a=r[r.length-1],i=t._cacheIndex;a._cacheIndex=i,r[i]=a,r.pop(),t._cacheIndex=null;var o=t._clip.uuid,n=this._actionsByClip,s=n[o],l=s.knownActions,d=l[l.length-1],p=t._byClipCacheIndex;d._byClipCacheIndex=p,l[p]=d,l.pop(),t._byClipCacheIndex=null;var c=s.actionByRoot,u=(t._localRoot||this._root).uuid;delete c[u],0===l.length&&delete n[o],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var r=t._propertyBindings,a=0,i=r.length,o;a!==i;++a)o=r[a],0===--o.referenceCount&&this._removeInactiveBinding(o)},_lendAction:function(t){var r=this._actions,a=t._cacheIndex,i=this._nActiveActions++,o=r[i];t._cacheIndex=i,r[i]=t,o._cacheIndex=a,r[a]=o},_takeBackAction:function(t){var r=this._actions,a=t._cacheIndex,i=--this._nActiveActions,o=r[i];t._cacheIndex=i,r[i]=t,o._cacheIndex=a,r[a]=o},_addInactiveBinding:function(t,r,a){var i=this._bindingsByRootAndName,o=i[r],n=this._bindings;o===void 0&&(o={},i[r]=o),o[a]=t,t._cacheIndex=n.length,n.push(t)},_removeInactiveBinding:function(t){var r=this._bindings,a=t.binding,i=a.rootNode.uuid,o=a.path,n=this._bindingsByRootAndName,s=n[i],l=r[r.length-1],d=t._cacheIndex;l._cacheIndex=d,r[d]=l,r.pop(),delete s[o];remove_empty_map:{for(var p in s)break remove_empty_map;delete n[i]}},_lendBinding:function(t){var r=this._bindings,a=t._cacheIndex,i=this._nActiveBindings++,o=r[i];t._cacheIndex=i,r[i]=t,o._cacheIndex=a,r[a]=o},_takeBackBinding:function(t){var r=this._bindings,a=t._cacheIndex,i=--this._nActiveBindings,o=r[i];t._cacheIndex=i,r[i]=t,o._cacheIndex=a,r[a]=o},_lendControlInterpolant:function(){var t=this._controlInterpolants,r=this._nActiveControlInterpolants++,a=t[r];return void 0===a&&(a=new xa(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),a.__cacheIndex=r,t[r]=a),a},_takeBackControlInterpolant:function(t){var r=this._controlInterpolants,a=t.__cacheIndex,i=--this._nActiveControlInterpolants,o=r[i];t.__cacheIndex=i,r[i]=t,o.__cacheIndex=a,r[a]=o},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,r){var a=r||this._root,i=a.uuid,o="string"===typeof t?Sa.findByName(a,t):t,n=null===o?t:o.uuid,s=this._actionsByClip[n],l=null;if(void 0!==s){var d=s.actionByRoot[i];if(void 0!==d)return d;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;var p=new hi(this,o,r);return this._bindAction(p,l),this._addInactiveAction(p,n,i),p},existingAction:function(t,r){var a=r||this._root,i=a.uuid,o="string"===typeof t?Sa.findByName(a,t):t,n=o?o.uuid:t,s=this._actionsByClip[n];return void 0===s?null:s.actionByRoot[i]||null},stopAllAction:function(){var t=this._actions,r=this._nActiveActions,a=this._bindings,o=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var n=0;n!==r;++n)t[n].reset();for(var n=0;n!==o;++n)a[n].useCount=0;return this},update:function(t){t*=this.timeScale;for(var r=this._actions,a=this._nActiveActions,o=this.time+=t,n=s(t),l=this._accuIndex^=1,d=0,i;d!==a;++d)i=r[d],i._update(o,t,n,l);for(var p=this._bindings,c=this._nActiveBindings,d=0;d!==c;++d)p[d].apply(l);return this},getRoot:function(){return this._root},uncacheClip:function(t){var r=this._actions,a=t.uuid,o=this._actionsByClip,s=o[a];if(s!==void 0){for(var l=s.knownActions,d=0,i=l.length,n;d!==i;++d){n=l[d],this._deactivateAction(n);var p=n._cacheIndex,c=r[r.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,c._cacheIndex=p,r[p]=c,r.pop(),this._removeInactiveBindingsForAction(n)}delete o[a]}},uncacheRoot:function(t){var r=t.uuid,a=this._actionsByClip;for(var i in a){var o=a[i].actionByRoot,n=o[r];n!==void 0&&(this._deactivateAction(n),this._removeInactiveAction(n))}var s=this._bindingsByRootAndName,l=s[r];if(l!==void 0)for(var d in l){var p=l[d];p.restoreOriginalState(),this._removeInactiveBinding(p)}},uncacheAction:function(t,r){var a=this.existingAction(t,r);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}}),fi.prototype.clone=function(){return new fi(this.value.clone===void 0?this.value:this.value.clone())},Mi.prototype=Object.assign(Object.create(We.prototype),{constructor:Mi,isInstancedBufferGeometry:!0,addGroup:function(t,r,a){this.groups.push({start:t,count:r,materialIndex:a})},copy:function(t){var r=t.index;null!==r&&this.setIndex(r.clone());var a=t.attributes;for(var o in a){var n=a[o];this.addAttribute(o,n.clone())}for(var s=t.groups,d=0,i=s.length,l;d<i;d++)l=s[d],this.addGroup(l.start,l.count,l.materialIndex);return this}}),Object.defineProperties(xi.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(xi.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,r){return this.data.array[t*this.data.stride+this.offset]=r,this},setY:function(t,r){return this.data.array[t*this.data.stride+this.offset+1]=r,this},setZ:function(t,r){return this.data.array[t*this.data.stride+this.offset+2]=r,this},setW:function(t,r){return this.data.array[t*this.data.stride+this.offset+3]=r,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,r,a){return t=t*this.data.stride+this.offset,this.data.array[t+0]=r,this.data.array[t+1]=a,this},setXYZ:function(t,r,a,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=r,this.data.array[t+1]=a,this.data.array[t+2]=i,this},setXYZW:function(t,r,a,i,o){return t=t*this.data.stride+this.offset,this.data.array[t+0]=r,this.data.array[t+1]=a,this.data.array[t+2]=i,this.data.array[t+3]=o,this}}),Object.defineProperty(Ei.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ei.prototype,{isInterleavedBuffer:!0,setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=t===void 0?0:t.length/this.stride,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,r,a){t*=this.stride,a*=r.stride;for(var o=0,i=this.stride;o<i;o++)this.array[t+o]=r.array[a+o];return this},set:function(t,r){return void 0===r&&(r=0),this.array.set(t,r),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),vi.prototype=Object.assign(Object.create(Ei.prototype),{constructor:vi,isInstancedInterleavedBuffer:!0,copy:function(t){return Ei.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Ai.prototype=Object.assign(Object.create(ze.prototype),{constructor:Ai,isInstancedBufferAttribute:!0,copy:function(t){return ze.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Ti.prototype,{linePrecision:1,set:function(t,r){this.ray.set(t,r)},setFromCamera:function(t,r){r&&r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(t.x,t.y,0.5).unproject(r).sub(this.ray.origin).normalize()):r&&r.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,r){var a=[];return Li(t,this,a,r),a.sort(bi),a},intersectObjects:function(t,r){var a=[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),a;for(var o=0,i=t.length;o<i;o++)Li(t[o],this,a,r);return a.sort(bi),a}}),Object.assign(Ni.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var r=("undefined"===typeof performance?Date:performance).now();t=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=t}return t}}),Object.assign(Di.prototype,{set:function(t,r,a){return this.radius=t,this.phi=r,this.theta=a,this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=l(t,m(L-t,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=ro(t.x,t.z),this.phi=o(Ms.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(wi.prototype,{set:function(t,r,a){return this.radius=t,this.theta=r,this.y=a,this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=M(t.x*t.x+t.z*t.z),this.theta=ro(t.x,t.z),this.y=t.y,this}}),Ci.prototype=Object.create(we.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isImmediateRenderObject=!0,Si.prototype=Object.create($t.prototype),Si.prototype.constructor=Si,Si.prototype.update=function(){var t=new D,r=new D,a=new ve;return function(){var o=["a","b","c"];this.object.updateMatrixWorld(!0),a.getNormalMatrix(this.object.matrixWorld);var n=this.object.matrixWorld,s=this.geometry.attributes.position,d=this.object.geometry;if(d&&d.isGeometry)for(var p=d.vertices,c=d.faces,u=0,m=0,i=c.length,l;m<i;m++){l=c[m];for(var g=0,h=l.vertexNormals.length;g<h;g++){var y=p[l[o[g]]],f=l.vertexNormals[g];t.copy(y).applyMatrix4(n),r.copy(f).applyMatrix3(a).normalize().multiplyScalar(this.size).add(t),s.setXYZ(u,t.x,t.y,t.z),++u,s.setXYZ(u,r.x,r.y,r.z),++u}}else if(d&&d.isBufferGeometry)for(var M=d.attributes.position,x=d.attributes.normal,u=0,g=0,h=M.count;g<h;g++)t.set(M.getX(g),M.getY(g),M.getZ(g)).applyMatrix4(n),r.set(x.getX(g),x.getY(g),x.getZ(g)),r.applyMatrix3(a).normalize().multiplyScalar(this.size).add(t),s.setXYZ(u,t.x,t.y,t.z),++u,s.setXYZ(u,r.x,r.y,r.z),++u;s.needsUpdate=!0}}(),Ii.prototype=Object.create(we.prototype),Ii.prototype.constructor=Ii,Ii.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Ii.prototype.update=function(){var t=new D,a=new D;return function(){this.light.updateMatrixWorld();var i=this.light.distance?this.light.distance:1e3,o=i*r(this.light.angle);this.cone.scale.set(o,o,i),t.setFromMatrixPosition(this.light.matrixWorld),a.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(a.sub(t)),this.color===void 0?this.cone.material.color.copy(this.light.color):this.cone.material.color.set(this.color)}}(),ji.prototype=Object.create($t.prototype),ji.prototype.constructor=ji,ji.prototype.onBeforeRender=function(){var t=new D,r=new N,a=new N;return function(){var o=this.bones,n=this.geometry,s=n.getAttribute("position");a.getInverse(this.root.matrixWorld);for(var l=0,i=0,d;l<o.length;l++)d=o[l],d.parent&&d.parent.isBone&&(r.multiplyMatrices(a,d.matrixWorld),t.setFromMatrixPosition(r),s.setXYZ(i,t.x,t.y,t.z),r.multiplyMatrices(a,d.parent.matrixWorld),t.setFromMatrixPosition(r),s.setXYZ(i+1,t.x,t.y,t.z),i+=2);n.getAttribute("position").needsUpdate=!0}}(),Oi.prototype=Object.create(rt.prototype),Oi.prototype.constructor=Oi,Oi.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Oi.prototype.update=function(){this.color===void 0?this.material.color.copy(this.light.color):this.material.color.set(this.color)},zi.prototype=Object.create(we.prototype),zi.prototype.constructor=zi,zi.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},zi.prototype.update=function(){var t=0.5*this.light.width,r=0.5*this.light.height,a=this.line.geometry.attributes.position,i=a.array;i[0]=t,i[1]=-r,i[2]=0,i[3]=t,i[4]=r,i[5]=0,i[6]=-t,i[7]=r,i[8]=0,i[9]=-t,i[10]=-r,i[11]=0,i[12]=t,i[13]=-r,i[14]=0,a.needsUpdate=!0,this.color===void 0?this.line.material.color.copy(this.light.color):this.line.material.color.set(this.color)},Ri.prototype=Object.create(we.prototype),Ri.prototype.constructor=Ri,Ri.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ri.prototype.update=function(){var t=new D,r=new pe,a=new pe;return function(){var o=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var n=o.geometry.getAttribute("color");r.copy(this.light.color),a.copy(this.light.groundColor);for(var s=0,i=n.count,l;s<i;s++)l=s<i/2?r:a,n.setXYZ(s,l.r,l.g,l.b);n.needsUpdate=!0}o.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Ui.prototype=Object.create($t.prototype),Ui.prototype.constructor=Ui,Pi.prototype=Object.create($t.prototype),Pi.prototype.constructor=Pi,Bi.prototype=Object.create($t.prototype),Bi.prototype.constructor=Bi,Bi.prototype.update=function(){var t=new D,r=new D,a=new ve;return function(){this.object.updateMatrixWorld(!0),a.getNormalMatrix(this.object.matrixWorld);for(var o=this.object.matrixWorld,n=this.geometry.attributes.position,s=this.object.geometry,d=s.vertices,p=s.faces,c=0,u=0,i=p.length;u<i;u++){var l=p[u],m=l.normal;t.copy(d[l.a]).add(d[l.b]).add(d[l.c]).divideScalar(3).applyMatrix4(o),r.copy(m).applyMatrix3(a).normalize().multiplyScalar(this.size).add(t),n.setXYZ(c,t.x,t.y,t.z),++c,n.setXYZ(c,r.x,r.y,r.z),++c}n.needsUpdate=!0}}(),ki.prototype=Object.create(we.prototype),ki.prototype.constructor=ki,ki.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},ki.prototype.update=function(){var t=new D,r=new D,a=new D;return function(){t.setFromMatrixPosition(this.light.matrixWorld),r.setFromMatrixPosition(this.light.target.matrixWorld),a.subVectors(r,t),this.lightPlane.lookAt(a),this.color===void 0?(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)):(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)),this.targetLine.lookAt(a),this.targetLine.scale.z=a.length()}}(),Fi.prototype=Object.create($t.prototype),Fi.prototype.constructor=Fi,Fi.prototype.update=function(){function t(t,s,d,p){r.set(s,d,p).unproject(a);var c=n[t];if(c!==void 0)for(var u=o.getAttribute("position"),m=0,i=c.length;m<i;m++)u.setXYZ(c[m],r.x,r.y,r.z)}var r=new D,a=new Ce,o,n;return function(){o=this.geometry,n=this.pointMap;var r=1,i=1;a.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-r,-i,-1),t("n2",r,-i,-1),t("n3",-r,i,-1),t("n4",r,i,-1),t("f1",-r,-i,1),t("f2",r,-i,1),t("f3",-r,i,1),t("f4",r,i,1),t("u1",0.7*r,1.1*i,-1),t("u2",0.7*-r,1.1*i,-1),t("u3",0,2*i,-1),t("cf1",-r,0,1),t("cf2",r,0,1),t("cf3",0,-i,1),t("cf4",0,i,1),t("cn1",-r,0,-1),t("cn2",r,0,-1),t("cn3",0,-i,-1),t("cn4",0,i,-1),o.getAttribute("position").needsUpdate=!0}}(),Gi.prototype=Object.create($t.prototype),Gi.prototype.constructor=Gi,Gi.prototype.update=function(){var t=new xe;return function(r){if(void 0!==r&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var a=t.min,i=t.max,o=this.geometry.attributes.position,n=o.array;n[0]=i.x,n[1]=i.y,n[2]=i.z,n[3]=a.x,n[4]=i.y,n[5]=i.z,n[6]=a.x,n[7]=a.y,n[8]=i.z,n[9]=i.x,n[10]=a.y,n[11]=i.z,n[12]=i.x,n[13]=i.y,n[14]=a.z,n[15]=a.x,n[16]=i.y,n[17]=a.z,n[18]=a.x,n[19]=a.y,n[20]=a.z,n[21]=i.x,n[22]=a.y,n[23]=a.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Gi.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Vi.prototype=Object.create($t.prototype),Vi.prototype.constructor=Vi,Vi.prototype.onBeforeRender=function(){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(0.5))},Hi.prototype=Object.create(Jt.prototype),Hi.prototype.constructor=Hi,Hi.prototype.onBeforeRender=function(){var t=-this.plane.constant;1e-8>g(t)&&(t=1e-8),this.scale.set(0.5*this.size,0.5*this.size,t),this.lookAt(this.plane.normal),this.updateMatrixWorld()};var Zs,Ks;Qi.prototype=Object.create(we.prototype),Qi.prototype.constructor=Qi,Qi.prototype.setDirection=function(){var t=new D,r;return function(a){0.99999<a.y?this.quaternion.set(0,0,0,1):-0.99999>a.y?this.quaternion.set(1,0,0,0):(t.set(a.z,0,-a.x).normalize(),r=o(a.y),this.quaternion.setFromAxisAngle(t,r))}}(),Qi.prototype.setLength=function(t,r,a){r===void 0&&(r=0.2*t),a===void 0&&(a=0.2*r),this.line.scale.set(1,l(0,t-r),1),this.line.updateMatrix(),this.cone.scale.set(a,r,a),this.cone.position.y=t,this.cone.updateMatrix()},Qi.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},Yi.prototype=Object.create($t.prototype),Yi.prototype.constructor=Yi;var Js=new D,$s=new Wi,el=new Wi,tl=new Wi;Xi.prototype=Object.create(Ya.prototype),Xi.prototype.constructor=Xi,Xi.prototype.getPoint=function(r){var t=this.points,a=t.length,i=(a-(this.closed?0:1))*r,o=h(i),n=i-o;this.closed?o+=0<o?0:(h(g(o)/t.length)+1)*t.length:0===n&&o===a-1&&(o=a-2,n=1);var s,l,d,p;if(this.closed||0<o?s=t[(o-1)%a]:(Js.subVectors(t[0],t[1]).add(t[0]),s=Js),l=t[o%a],d=t[(o+1)%a],this.closed||o+2<a?p=t[(o+2)%a]:(Js.subVectors(t[a-1],t[a-2]).add(t[a-1]),p=Js),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var c="chordal"===this.type?0.5:0.25,u=y(s.distanceToSquared(l),c),m=y(l.distanceToSquared(d),c),f=y(d.distanceToSquared(p),c);1e-4>m&&(m=1),1e-4>u&&(u=m),1e-4>f&&(f=m),$s.initNonuniformCatmullRom(s.x,l.x,d.x,p.x,u,m,f),el.initNonuniformCatmullRom(s.y,l.y,d.y,p.y,u,m,f),tl.initNonuniformCatmullRom(s.z,l.z,d.z,p.z,u,m,f)}else if("catmullrom"===this.type){var M=void 0===this.tension?0.5:this.tension;$s.initCatmullRom(s.x,l.x,d.x,p.x,M),el.initCatmullRom(s.y,l.y,d.y,p.y,M),tl.initCatmullRom(s.z,l.z,d.z,p.z,M)}return new D($s.calc(n),el.calc(n),tl.calc(n))},qi.prototype=Object.create(Ya.prototype),qi.prototype.constructor=qi,qi.prototype.getPoint=function(r){var t=this.v0,a=this.v1,i=this.v2,o=this.v3;return new D(Qa(r,t.x,a.x,i.x,o.x),Qa(r,t.y,a.y,i.y,o.y),Qa(r,t.z,a.z,i.z,o.z))},Zi.prototype=Object.create(Ya.prototype),Zi.prototype.constructor=Zi,Zi.prototype.getPoint=function(r){var t=this.v0,a=this.v1,i=this.v2;return new D(ka(r,t.x,a.x,i.x),ka(r,t.y,a.y,i.y),ka(r,t.z,a.z,i.z))},Ki.prototype=Object.create(Ya.prototype),Ki.prototype.constructor=Ki,Ki.prototype.getPoint=function(r){if(1===r)return this.v2.clone();var t=new D;return t.subVectors(this.v2,this.v1),t.multiplyScalar(r),t.add(this.v1),t},Ji.prototype=Object.create(qa.prototype),Ji.prototype.constructor=Ji;Ya.create=function(t,r){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ya.prototype),t.prototype.constructor=t,t.prototype.getPoint=r,t},$i.prototype=Object.create(Xi.prototype),eo.prototype=Object.create(Xi.prototype),to.prototype=Object.create(Xi.prototype),Object.assign(to.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Ui.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ji.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(ce.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(xe.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),et.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Ms.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(ve.prototype,{flattenToArrayOffset:function(t,r){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,r)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(N.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,r){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,r)},getPosition:function(){var t;return function(){return void 0===t&&(t=new D),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,r,a,i,o,n){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,r,i,a,o,n)}}),Ae.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},b.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign($e.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(ei.prototype,{extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Nr(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Rr(this,t)}}),Object.assign(f.prototype,{fromAttribute:function(t,r,a){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,r,a)}}),Object.assign(D.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,r){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(r,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,r,a){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,r,a)}}),Object.assign(v.prototype,{fromAttribute:function(t,r,a){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,r,a)}}),Oe.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(we.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,r){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(r,t)}}),Object.defineProperties(we.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Wt.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Xt.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Ya.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Ie.prototype.setLens=function(t,r){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),r!==void 0&&(this.filmGauge=r),this.setFocalLength(t)},Object.defineProperties(sa.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(ze.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(We.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,r,a){a!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,r)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(We.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(fi.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(he.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new pe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===fo}}}),Object.defineProperties(qr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(ye.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(kt.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(kt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(be.prototype,{cullFace:{get:function(){return this.renderReverseSided?po:lo},set:function(t){var r=t!==lo;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+r+"."),this.renderReverseSided=r}}}),Object.defineProperties(x.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),li.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var r=this,a=new ii;return a.load(t,function(t){r.setBuffer(t)}),this},pi.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},ni.prototype.updateCubeMap=function(t,r){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,r)};i.WebGLRenderTargetCube=T,i.WebGLRenderTarget=x,i.WebGLRenderer=kt,i.ShaderLib=Is,i.UniformsLib=ws,i.UniformsUtils=Cs,i.ShaderChunk=Ss,i.FogExp2=Ft,i.Fog=Gt,i.Scene=Vt,i.LensFlare=Ht,i.Sprite=Yt,i.LOD=Wt,i.SkinnedMesh=Zt,i.Skeleton=Xt,i.Bone=qt,i.Mesh=rt,i.LineSegments=$t,i.LineLoop=er,i.Line=Jt,i.Points=rr,i.Group=ar,i.VideoTexture=ir,i.DataTexture=w,i.CompressedTexture=or,i.CubeTexture=C,i.CanvasTexture=me,i.DepthTexture=nr,i.Texture=c,i.CompressedTextureLoader=ra,i.DataTextureLoader=aa,i.CubeTextureLoader=oa,i.TextureLoader=na,i.ObjectLoader=za,i.MaterialLoader=Ia,i.BufferGeometryLoader=_a,i.DefaultLoadingManager=ks,i.LoadingManager=ea,i.JSONLoader=Oa,i.ImageLoader=ia,i.FontLoader=ai,i.FileLoader=ta,i.Loader=ja,i.Cache=Bs,i.AudioLoader=ii,i.SpotLightShadow=pa,i.SpotLight=ca,i.PointLight=ua,i.RectAreaLight=ya,i.HemisphereLight=la,i.DirectionalLightShadow=ma,i.DirectionalLight=ga,i.AmbientLight=ha,i.LightShadow=da,i.Light=sa,i.StereoCamera=oi,i.PerspectiveCamera=Ie,i.OrthographicCamera=Se,i.CubeCamera=ni,i.ArrayCamera=zt,i.Camera=Ce,i.AudioListener=si,i.PositionalAudio=di,i.AudioContext=Xs,i.AudioAnalyser=pi,i.Audio=li,i.VectorKeyframeTrack=Aa,i.StringKeyframeTrack=Na,i.QuaternionKeyframeTrack=ba,i.NumberKeyframeTrack=La,i.ColorKeyframeTrack=wa,i.BooleanKeyframeTrack=Da,i.PropertyMixer=ci,i.PropertyBinding=mi,i.KeyframeTrack=Ca,i.AnimationUtils=Fs,i.AnimationObjectGroup=gi,i.AnimationMixer=yi,i.AnimationClip=Sa,i.Uniform=fi,i.InstancedBufferGeometry=Mi,i.BufferGeometry=We,i.GeometryIdCount=je,i.Geometry=Oe,i.InterleavedBufferAttribute=xi,i.InstancedInterleavedBuffer=vi,i.InterleavedBuffer=Ei,i.InstancedBufferAttribute=Ai,i.Face3=_e,i.Object3D=we,i.Raycaster=Ti,i.Layers=De,i.EventDispatcher=d,i.Clock=Ni,i.QuaternionLinearInterpolant=Ta,i.LinearInterpolant=xa,i.DiscreteInterpolant=Ea,i.CubicInterpolant=Ma,i.Interpolant=fa,i.Triangle=tt,i.Math=Ms,i.Spherical=Di,i.Cylindrical=wi,i.Plane=Ae,i.Frustum=Te,i.Sphere=Ee,i.Ray=$e,i.Matrix4=N,i.Matrix3=ve,i.Box3=xe,i.Box2=ce,i.Line3=et,i.Euler=Ne,i.Vector4=v,i.Vector3=D,i.Vector2=f,i.Quaternion=b,i.Color=pe,i.ImmediateRenderObject=Ci,i.VertexNormalsHelper=Si,i.SpotLightHelper=Ii,i.SkeletonHelper=ji,i.PointLightHelper=Oi,i.RectAreaLightHelper=zi,i.HemisphereLightHelper=Ri,i.GridHelper=Ui,i.PolarGridHelper=Pi,i.FaceNormalsHelper=Bi,i.DirectionalLightHelper=ki,i.CameraHelper=Fi,i.BoxHelper=Gi,i.Box3Helper=Vi,i.PlaneHelper=Hi,i.ArrowHelper=Qi,i.AxisHelper=Yi,i.CatmullRomCurve3=Xi,i.CubicBezierCurve3=qi,i.QuadraticBezierCurve3=Zi,i.LineCurve3=Ki,i.ArcCurve=Ji,i.EllipseCurve=qa,i.SplineCurve=Za,i.CubicBezierCurve=Ka,i.QuadraticBezierCurve=Ja,i.LineCurve=Wa,i.Shape=ei,i.Path=$a,i.ShapePath=ti,i.Font=ri,i.CurvePath=Xa,i.Curve=Ya,i.ShapeUtils=Rs,i.SceneUtils={createMultiMaterialObject:function(t,r){for(var a=new ar,o=0,i=r.length;o<i;o++)a.add(new rt(t,r[o]));return a},detach:function(t,r,a){t.applyMatrix(r.matrixWorld),r.remove(t),a.add(t)},attach:function(t,r,a){t.applyMatrix(new N().getInverse(a.matrixWorld)),r.remove(t),a.add(t)}},i.WebGLUtils=Bt,i.WireframeGeometry=sr,i.ParametricGeometry=lr,i.ParametricBufferGeometry=dr,i.TetrahedronGeometry=ur,i.TetrahedronBufferGeometry=mr,i.OctahedronGeometry=gr,i.OctahedronBufferGeometry=hr,i.IcosahedronGeometry=yr,i.IcosahedronBufferGeometry=fr,i.DodecahedronGeometry=Mr,i.DodecahedronBufferGeometry=xr,i.PolyhedronGeometry=pr,i.PolyhedronBufferGeometry=cr,i.TubeGeometry=Er,i.TubeBufferGeometry=vr,i.TorusKnotGeometry=Ar,i.TorusKnotBufferGeometry=Tr,i.TorusGeometry=br,i.TorusBufferGeometry=Lr,i.TextGeometry=wr,i.TextBufferGeometry=Cr,i.SphereGeometry=Sr,i.SphereBufferGeometry=Ir,i.RingGeometry=_r,i.RingBufferGeometry=jr,i.PlaneGeometry=Ze,i.PlaneBufferGeometry=Ke,i.LatheGeometry=Or,i.LatheBufferGeometry=zr,i.ShapeGeometry=Rr,i.ShapeBufferGeometry=Ur,i.ExtrudeGeometry=Nr,i.ExtrudeBufferGeometry=Dr,i.EdgesGeometry=Pr,i.ConeGeometry=Fr,i.ConeBufferGeometry=Gr,i.CylinderGeometry=Br,i.CylinderBufferGeometry=kr,i.CircleGeometry=Vr,i.CircleBufferGeometry=Hr,i.BoxGeometry=Xe,i.BoxBufferGeometry=qe,i.ShadowMaterial=Qr,i.SpriteMaterial=Qt,i.RawShaderMaterial=Yr,i.ShaderMaterial=ye,i.PointsMaterial=tr,i.MeshPhysicalMaterial=Xr,i.MeshStandardMaterial=Wr,i.MeshPhongMaterial=qr,i.MeshToonMaterial=Zr,i.MeshNormalMaterial=Kr,i.MeshLambertMaterial=Jr,i.MeshDepthMaterial=fe,i.MeshDistanceMaterial=Me,i.MeshBasicMaterial=Je,i.LineDashedMaterial=$r,i.LineBasicMaterial=Kt,i.Material=he,i.Float64BufferAttribute=He,i.Float32BufferAttribute=Ve,i.Uint32BufferAttribute=Ge,i.Int32BufferAttribute=Fe,i.Uint16BufferAttribute=ke,i.Int16BufferAttribute=Be,i.Uint8ClampedBufferAttribute=Pe,i.Uint8BufferAttribute=Ue,i.Int8BufferAttribute=Re,i.BufferAttribute=ze,i.REVISION=no,i.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},i.CullFaceNone=so,i.CullFaceBack=lo,i.CullFaceFront=po,i.CullFaceFrontBack=3,i.FrontFaceDirectionCW=co,i.FrontFaceDirectionCCW=1,i.BasicShadowMap=0,i.PCFShadowMap=uo,i.PCFSoftShadowMap=mo,i.FrontSide=go,i.BackSide=ho,i.DoubleSide=yo,i.FlatShading=fo,i.SmoothShading=2,i.NoColors=Mo,i.FaceColors=xo,i.VertexColors=Eo,i.NoBlending=vo,i.NormalBlending=Ao,i.AdditiveBlending=To,i.SubtractiveBlending=bo,i.MultiplyBlending=Lo,i.CustomBlending=No,i.AddEquation=Do,i.SubtractEquation=wo,i.ReverseSubtractEquation=Co,i.MinEquation=So,i.MaxEquation=Io,i.ZeroFactor=_o,i.OneFactor=jo,i.SrcColorFactor=Oo,i.OneMinusSrcColorFactor=zo,i.SrcAlphaFactor=Ro,i.OneMinusSrcAlphaFactor=Uo,i.DstAlphaFactor=Po,i.OneMinusDstAlphaFactor=Bo,i.DstColorFactor=ko,i.OneMinusDstColorFactor=Fo,i.SrcAlphaSaturateFactor=Go,i.NeverDepth=Vo,i.AlwaysDepth=Ho,i.LessDepth=Qo,i.LessEqualDepth=Yo,i.EqualDepth=Wo,i.GreaterEqualDepth=Xo,i.GreaterDepth=qo,i.NotEqualDepth=Zo,i.MultiplyOperation=Ko,i.MixOperation=Jo,i.AddOperation=$o,i.NoToneMapping=en,i.LinearToneMapping=tn,i.ReinhardToneMapping=rn,i.Uncharted2ToneMapping=an,i.CineonToneMapping=on,i.UVMapping=nn,i.CubeReflectionMapping=sn,i.CubeRefractionMapping=ln,i.EquirectangularReflectionMapping=dn,i.EquirectangularRefractionMapping=pn,i.SphericalReflectionMapping=cn,i.CubeUVReflectionMapping=un,i.CubeUVRefractionMapping=mn,i.RepeatWrapping=gn,i.ClampToEdgeWrapping=hn,i.MirroredRepeatWrapping=yn,i.NearestFilter=fn,i.NearestMipMapNearestFilter=Mn,i.NearestMipMapLinearFilter=xn,i.LinearFilter=En,i.LinearMipMapNearestFilter=vn,i.LinearMipMapLinearFilter=An,i.UnsignedByteType=Tn,i.ByteType=bn,i.ShortType=Ln,i.UnsignedShortType=Nn,i.IntType=Dn,i.UnsignedIntType=wn,i.FloatType=Cn,i.HalfFloatType=Sn,i.UnsignedShort4444Type=In,i.UnsignedShort5551Type=_n,i.UnsignedShort565Type=jn,i.UnsignedInt248Type=On,i.AlphaFormat=zn,i.RGBFormat=Rn,i.RGBAFormat=Un,i.LuminanceFormat=Pn,i.LuminanceAlphaFormat=Bn,i.RGBEFormat=Un,i.DepthFormat=kn,i.DepthStencilFormat=Fn,i.RGB_S3TC_DXT1_Format=Gn,i.RGBA_S3TC_DXT1_Format=Vn,i.RGBA_S3TC_DXT3_Format=Hn,i.RGBA_S3TC_DXT5_Format=Qn,i.RGB_PVRTC_4BPPV1_Format=Yn,i.RGB_PVRTC_2BPPV1_Format=Wn,i.RGBA_PVRTC_4BPPV1_Format=Xn,i.RGBA_PVRTC_2BPPV1_Format=qn,i.RGB_ETC1_Format=Zn,i.LoopOnce=Kn,i.LoopRepeat=Jn,i.LoopPingPong=$n,i.InterpolateDiscrete=es,i.InterpolateLinear=ts,i.InterpolateSmooth=rs,i.ZeroCurvatureEnding=as,i.ZeroSlopeEnding=is,i.WrapAroundEnding=os,i.TrianglesDrawMode=ns,i.TriangleStripDrawMode=ss,i.TriangleFanDrawMode=ls,i.LinearEncoding=ds,i.sRGBEncoding=ps,i.GammaEncoding=cs,i.RGBEEncoding=us,i.LogLuvEncoding=3003,i.RGBM7Encoding=ms,i.RGBM16Encoding=gs,i.RGBDEncoding=hs,i.BasicDepthPacking=ys,i.RGBADepthPacking=fs,i.CubeGeometry=Xe,i.Face4=function(t,r,a,i,o,n,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new _e(t,r,a,o,n,s)},i.LineStrip=0,i.LinePieces=1,i.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},i.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},i.PointCloud=function(t,r){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new rr(t,r)},i.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Yt(t)},i.ParticleSystem=function(t,r){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new rr(t,r)},i.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new tr(t)},i.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new tr(t)},i.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new tr(t)},i.Vertex=function(t,r,a){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new D(t,r,a)},i.DynamicBufferAttribute=function(t,r){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new ze(t,r).setDynamic(!0)},i.Int8Attribute=function(t,r){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Re(t,r)},i.Uint8Attribute=function(t,r){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ue(t,r)},i.Uint8ClampedAttribute=function(t,r){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Pe(t,r)},i.Int16Attribute=function(t,r){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Be(t,r)},i.Uint16Attribute=function(t,r){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ke(t,r)},i.Int32Attribute=function(t,r){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Fe(t,r)},i.Uint32Attribute=function(t,r){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ge(t,r)},i.Float32Attribute=function(t,r){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ve(t,r)},i.Float64Attribute=function(t,r){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new He(t,r)},i.ClosedSplineCurve3=$i,i.SplineCurve3=eo,i.Spline=to,i.BoundingBoxHelper=function(t,r){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Gi(t,r)},i.EdgesHelper=function(t,r){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new $t(new Pr(t.geometry),new Kt({color:void 0===r?16777215:r}))},i.WireframeHelper=function(t,r){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new $t(new sr(t.geometry),new Kt({color:void 0===r?16777215:r}))},i.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new ta(t)},i.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new aa(t)},i.GeometryUtils={merge:function(t,r,a){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;r.isMesh&&(r.matrixAutoUpdate&&r.updateMatrix(),i=r.matrix,r=r.geometry),t.merge(r,i,a)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},i.ImageUtils={crossOrigin:void 0,loadTexture:function(t,r,a,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var o=new na;o.setCrossOrigin(this.crossOrigin);var n=o.load(t,a,void 0,i);return r&&(n.mapping=r),n},loadTextureCube:function(t,r,a,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var o=new oa;o.setCrossOrigin(this.crossOrigin);var n=o.load(t,a,void 0,i);return r&&(n.mapping=r),n},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},i.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,r){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(r)},this.unprojectVector=function(t,r){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(r)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},i.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},Object.defineProperty(i,"__esModule",{value:!0})})},{}],42:[function(){THREE.ColladaLoader=function(){function t(t,l,d){if(Ce=new DOMParser().parseFromString(t,"text/xml"),l=l||Ie,void 0!==d){var p=d.split("/");p.pop(),Ke=(1>p.length?".":p.join("/"))+"/"}r(),Ae(),je=a("library_images image",w,"image"),Ue=a("library_materials material",X,"material"),Pe=a("library_effects effect",$,"effect"),Re=a("library_geometries geometry",P,"geometry"),Be=a("library_cameras camera",oe,"camera"),ke=a("library_lights light",se,"light"),ze=a("library_controllers controller",C,"controller"),Oe=a("library_animations animation",te,"animation"),qe=a("library_visual_scenes visual_scene",_,"visual_scene"),Ze=a("library_kinematics_models kinematics_model",de,"kinematics_model"),Je=[],$e=[],Qe=o(),Se=new THREE.Group;for(var c=0;c<Qe.nodes.length;c++)Se.add(x(Qe.nodes[c]));Se.scale.multiplyScalar(Ge),s(),Ye=n(),f();var i={scene:Se,morphs:Je,skins:$e,animations:We,kinematics:Xe,dae:{images:je,materials:Ue,cameras:Be,lights:ke,effects:Pe,geometries:Re,controllers:ze,animations:Oe,visualScenes:qe,visualScene:Qe,scene:Qe,kinematicsModels:Ze,kinematicsModel:Ye}};return l&&l(i),i}function r(){var t=Ce.querySelectorAll("asset"),r=t[0];if(r&&r.childNodes)for(var a=0,i;a<r.childNodes.length;a++)switch(i=r.childNodes[a],i.nodeName){case"unit":var o=i.getAttribute("meter");o&&(Ge=parseFloat(o));break;case"up_axis":Ve=i.textContent.charAt(0);}}function a(t,r,a){for(var o=Ce.querySelectorAll(t),n={},s=0,i=o.length,l=0;l<i;l++){var d=o[l],p=new r().parse(d);p.id&&0!==p.id.length||(p.id=a+s++),n[p.id]=p}return n}function o(){var t=Ce.querySelectorAll("scene instance_visual_scene")[0];if(t){var r=t.getAttribute("url").replace(/^#/,"");return qe[0<r.length?r:"visual_scene0"]}return null}function n(){var t=Ce.querySelectorAll("instance_kinematics_model")[0];if(t){var r=t.getAttribute("url").replace(/^#/,"");return Ze[0<r.length?r:"kinematics_model0"]}return null}function s(){We=[],p(Se)}function p(t){var r=Qe.getChildById(t.colladaId,!0),a=null;if(r&&r.keys){a={fps:60,hierarchy:[{node:r,keys:r.keys,sids:r.sids}],node:t,name:"animation_"+t.name,length:0},We.push(a);for(var o=0,i=r.keys.length;o<i;o++)a.length=l(a.length,r.keys[o].time)}else a={hierarchy:[{keys:[],sids:[]}]};for(var o=0,i=t.children.length,s;o<i;o++){s=p(t.children[o]);for(var d=0,c=s.hierarchy.length;d<c;d++)a.hierarchy.push({keys:[],sids:[]})}return a}function d(){var t=1e6,r=-t,a=0,o;for(var n in Oe){var s=Oe[n];o=o||s.id;for(var d=0,i;d<s.sampler.length;d++)i=s.sampler[d],i.create(),t=m(t,i.startTime),r=l(r,i.endTime),a=l(a,i.input.length)}return{start:t,end:r,frames:a,ID:o}}function i(t,r){var a=r instanceof z?ze[r.url]:r;if(!a||!a.morph)return void console.log("could not find morph controller!");for(var o=a.morph,n=0;n<o.targets.length;n++){var i=o.targets[n],s=Re[i];if(s.mesh&&s.mesh.primitives&&s.mesh.primitives.length){var l=s.mesh.primitives[0].geometry;l.vertices.length===t.vertices.length&&t.morphTargets.push({name:"target_1",vertices:l.vertices})}}t.morphTargets.push({name:"target_Z",vertices:t.vertices})}function c(t,r,a,o){if(t.world=t.world||new THREE.Matrix4,t.localworld=t.localworld||new THREE.Matrix4,t.world.copy(t.matrix),t.localworld.copy(t.matrix),t.channels&&t.channels.length){var n=t.channels[0],s=n.sampler.output[a];s instanceof THREE.Matrix4&&(t.world.copy(s),t.localworld.copy(s),0===a&&t.matrix.copy(s))}o&&t.world.multiplyMatrices(o,t.world),r.push(t);for(var l=0;l<t.nodes.length;l++)c(t.nodes[l],r,a,t.world)}function u(t,r){for(var a=0;a<t.length;a++){var i=t[a],o=-1;if("JOINT"==i.type){for(var n=0;n<r.joints.length;n++)if(i.sid===r.joints[n]){o=n;break}if(0<=o){var s=r.invBindMatrices[o];i.invBindMatrix=s,i.skinningMatrix=new THREE.Matrix4,i.skinningMatrix.multiplyMatrices(i.world,s),i.animatrix=new THREE.Matrix4,i.animatrix.copy(i.localworld),i.weights=[];for(var n=0;n<r.weights.length;n++)for(var l=0,d;l<r.weights[n].length;l++)d=r.weights[n][l],d.joint===o&&i.weights.push(d)}else console.warn("ColladaLoader: Could not find joint '"+i.sid+"'."),i.skinningMatrix=new THREE.Matrix4,i.weights=[]}}}function g(t){var r=[];return function t(r,a,o){var n={name:a.sid,parent:r,matrix:a.matrix},s=[new THREE.Vector3,new THREE.Quaternion,new THREE.Vector3];for(var l in n.matrix.decompose(s[0],s[1],s[2]),n.pos=[s[0].x,s[0].y,s[0].z],n.scl=[s[2].x,s[2].y,s[2].z],n.rotq=[s[1].x,s[1].y,s[1].z,s[1].w],o.push(n),a.nodes)t(a.sid,a.nodes[l],o)}(-1,t,r),r}function h(t,r,a){var n=[];c(r,n,-1),u(n,a.skin);for(var l=new THREE.Vector3,d=[],p=0;p<t.vertices.length;p++)d.push(new THREE.Vector3);for(p=0;p<n.length;p++)if("JOINT"==n[p].type)for(var i=0;i<n[p].weights.length;i++){var m=n[p].weights[i],g=m.index,h=m.weight,y=t.vertices[g],o=d[g];l.x=y.x,l.y=y.y,l.z=y.z,l.applyMatrix4(n[p].skinningMatrix),o.x+=l.x*h,o.y+=l.y*h,o.z+=l.z*h}for(var p=0;p<t.vertices.length;p++)t.vertices[p]=d[p]}function y(t,r,a){void 0===a&&(a=40);var o=ze[r.url];if(!o||!o.skin)return void console.log("ColladaLoader: Could not find skin controller.");if(!r.skeleton||!r.skeleton.length)return void console.log("ColladaLoader: Could not find the skeleton for the skin. ");for(var n=d(),s=Qe.getChildById(r.skeleton[0],!0)||Qe.getChildBySid(r.skeleton[0],!0),l=g(s),p=o.skin.joints,m=[],y=0;y<p.length;y++)for(var i=0;i<l.length;i++)l[i].name===p[y]&&(m[y]=l[i]);for(var y=0;y<m.length;y++)for(var i=0;i<m.length;i++)m[y].parent===m[i].name&&(m[y].parent=i);var f=new THREE.Vector3,y,i,M;for(y=0;y<t.vertices.length;y++)t.vertices[y].applyMatrix4(o.skin.bindShapeMatrix);for(var x=[],E=[],v=o.skin.weights,y=0;y<v.length;y++){var A=new THREE.Vector4(v[y][0]?v[y][0].joint:0,v[y][1]?v[y][1].joint:0,v[y][2]?v[y][2].joint:0,v[y][3]?v[y][3].joint:0),M=new THREE.Vector4(v[y][0]?v[y][0].weight:0,v[y][1]?v[y][1].weight:0,v[y][2]?v[y][2].weight:0,v[y][3]?v[y][3].weight:0);x.push(A),E.push(M)}t.skinIndices=x,t.skinWeights=E,t.bones=m;for(var T={name:n.ID,fps:30,length:n.frames/30,hierarchy:[]},i=0;i<m.length;i++)T.hierarchy.push({parent:m[i].parent,name:m[i].name,keys:[]});for(console.log("ColladaLoader:",n.ID+" has "+m.length+" bones."),h(t,s,o),a=0;a<n.frames;a++){var b=[];c(s,b,a),u(b,o.skin);for(var y=0;y<b.length;y++)for(var i=0;i<T.hierarchy.length;i++)if(T.hierarchy[i].name===b[y].sid){var L={};L.time=a/30,L.matrix=b[y].animatrix,0===a&&(b[y].matrix=L.matrix);var N=[new THREE.Vector3,new THREE.Quaternion,new THREE.Vector3];L.matrix.decompose(N[0],N[1],N[2]),L.pos=[N[0].x,N[0].y,N[0].z],L.scl=[N[2].x,N[2].y,N[2].z],L.rot=N[1],T.hierarchy[i].keys.push(L)}t.animation=T}}function f(){if(Ye&&0===Ye.joints.length)return void(Xe=void 0);var t={},r=function(r,a){var i=a.getAttribute("id"),o=Qe.getChildById(i,!0),n=Ye.joints[r];Se.traverse(function(a){a.colladaId==i&&(t[r]={node:a,transforms:o.transforms,joint:n,position:n.zeroPosition})})};Xe={joints:Ye&&Ye.joints,getJointValue:function(r){var a=t[r];return a?a.position:void console.log("getJointValue: joint "+r+" doesn't exist")},setJointValue:function(r,a){var i=t[r];if(i){var n=i.joint;if(a>n.limits.max||a<n.limits.min)console.log("setJointValue: joint "+r+" value "+a+" outside of limits (min: "+n.limits.min+", max: "+n.limits.max+")");else if(n.static)console.log("setJointValue: joint "+r+" is static");else{var s=i.node,l=n.axis,d=i.transforms,p=new THREE.Matrix4,c=new THREE.Matrix4;for(o=0;o<d.length;o++){var u=d[o];if(u.sid&&-1!==u.sid.indexOf("joint"+r))switch(n.type){case"revolute":p.multiply(c.makeRotationAxis(l,THREE.Math.degToRad(a)));break;case"prismatic":p.multiply(c.makeTranslation(l.x*a,l.y*a,l.z*a));break;default:console.warn("setJointValue: unknown joint type: "+n.type);}else switch(u.type){case"matrix":p.multiply(u.obj);break;case"translate":p.multiply(c.makeTranslation(u.obj.x,u.obj.y,u.obj.z));break;case"rotate":p.multiply(c.makeRotationAxis(u.obj,u.angle));}}var m=p.elements,g=Array.prototype.slice.call(m),h=[g[0],g[4],g[8],g[12],g[1],g[5],g[9],g[13],g[2],g[6],g[10],g[14],g[3],g[7],g[11],g[15]];s.matrix.set.apply(s.matrix,h),s.matrix.decompose(s.position,s.quaternion,s.scale),t[r].position=a}}else console.log("setJointValue: joint "+r+" doesn't exist")}};var a=Ce.querySelector("scene instance_kinematics_scene");if(a)for(var o=0,i;o<a.childNodes.length;o++)if(i=a.childNodes[o],1==i.nodeType)switch(i.nodeName){case"bind_joint_axis":var n=i.getAttribute("target").split("/").pop(),s=i.querySelector("axis param").textContent,l=parseInt(s.split("joint").pop().split(".")[0]),d=Ce.querySelector("[sid=\""+n+"\"]");if(d){var p=d.parentElement;r(l,p)}break;default:}}function x(t){var r=new THREE.Object3D,a=!1,o,n,s,l;for(s=0;s<t.controllers.length;s++){var d=ze[t.controllers[s].url];switch(d.type){case"skin":if(Re[d.skin.source]){var p=new U;p.url=d.skin.source,p.instance_material=t.controllers[s].instance_material,t.geometries.push(p),a=!0,o=t.controllers[s]}else if(ze[d.skin.source]){var c=ze[d.skin.source];if(n=c,c.morph&&Re[c.morph.source]){var p=new U;p.url=c.morph.source,p.instance_material=t.controllers[s].instance_material,t.geometries.push(p)}}break;case"morph":if(Re[d.morph.source]){var p=new U;p.url=d.morph.source,p.instance_material=t.controllers[s].instance_material,t.geometries.push(p),n=t.controllers[s]}console.log("ColladaLoader: Morph-controller partially supported.");default:}}var u={};for(s=0;s<t.geometries.length;s++){var m=t.geometries[s],g=m.instance_material,h=Re[m.url],f={},M=[],E=0,v;if(h){if(!h.mesh||!h.mesh.primitives)continue;if(0===r.name.length&&(r.name=h.id),g)for(l=0;l<g.length;l++){var A=g[l],T=Ue[A.target],b=T.instance_effect.url,L=Pe[b].shader,N=L.material;if(h.doubleSided){if(!(A.symbol in u)){var D=N.clone();D.side=THREE.DoubleSide,u[A.symbol]=D}N=u[A.symbol]}N.opacity=N.opacity?N.opacity:1,f[A.symbol]=E,M.push(N),v=N,v.name=null===T.name||""===T.name?T.id:T.name,E++}var w=v||new THREE.MeshLambertMaterial({color:14540253,side:h.doubleSided?THREE.DoubleSide:THREE.FrontSide}),C=h.mesh.geometry3js,S;if(1<E)for(w=new THREE.MultiMaterial(M),l=0;l<C.faces.length;l++){var I=C.faces[l];I.materialIndex=f[I.daeMaterial]}void 0===o?void 0===n?!0===C.isLineStrip?S=new THREE.Line(C):S=new THREE.Mesh(C,w):(i(C,n),w.morphTargets=!0,S=new THREE.Mesh(C,w),S.name="morph_"+Je.length,Je.push(S)):(y(C,o),0<C.morphTargets.length?(w.morphTargets=!0,w.skinning=!1):(w.morphTargets=!1,w.skinning=!0),S=new THREE.SkinnedMesh(C,w,!1),S.name="skin_"+$e.length,$e.push(S)),r.add(S)}}for(s=0;s<t.cameras.length;s++){var _=t.cameras[s],j=Be[_.url],O=new THREE.PerspectiveCamera(j.yfov,parseFloat(j.aspect_ratio),parseFloat(j.znear),parseFloat(j.zfar));r.add(O)}for(s=0;s<t.lights.length;s++){var z=null,R=t.lights[s],P=ke[R.url];if(P&&P.technique){var B=P.color.getHex(),k=P.intensity,F=P.distance,G=P.falloff_angle;switch(P.technique){case"directional":z=new THREE.DirectionalLight(B,k,F),z.position.set(0,0,1);break;case"point":z=new THREE.PointLight(B,k,F);break;case"spot":z=new THREE.SpotLight(B,k,F,G),z.position.set(0,0,1);break;case"ambient":z=new THREE.AmbientLight(B);}}z&&r.add(z)}if(r.name=t.name||t.id||"",r.colladaId=t.id||"",r.layer=t.layer||"",r.matrix=t.matrix,r.matrix.decompose(r.position,r.quaternion,r.scale),Fe.centerGeometry&&r.geometry){var V=r.geometry.center();V.multiply(r.scale),V.applyQuaternion(r.quaternion),r.position.sub(V)}for(s=0;s<t.nodes.length;s++)r.add(x(t.nodes[s],t));return r}function E(t){for(var r=Ce.querySelectorAll("library_nodes node"),a=0,i;a<r.length;a++)if(i=r[a].attributes.getNamedItem("id"),i&&i.value===t)return r[a]}function v(t){var r=[],a=1e6,o=-1e6;for(var n in Oe)for(var s=Oe[n],d=0;d<s.channel.length;d++){var i=s.channel[d],p=s.sampler[d],n=i.target.split("/")[0];n==t.id&&(p.create(),i.sampler=p,a=m(a,p.startTime),o=l(o,p.endTime),r.push(i))}return r.length&&(t.startTime=a,t.endTime=o),r}function A(t){if(t.channels&&t.channels.length){for(var r=[],a=[],o=0,i=t.channels.length;o<i;o++){var n=t.channels[o],s=n.fullSid,l=n.sampler,d=l.input,p=t.getTransformBySid(n.sid),c;if(n.arrIndices){c=[];for(var u=0,m=n.arrIndices.length;u<m;u++)c[u]=De(n.arrIndices[u])}else c=we(n.member);if(p){-1===a.indexOf(s)&&a.push(s);for(var u=0,m=d.length;u<m;u++){var g=d[u],h=l.getData(p.type,u,c),y=T(r,g);if(!y){y=new ie(g);var f=b(r,g);r.splice(-1===f?r.length:f,0,y)}y.addTarget(s,p,c,h)}}else console.log("Could not find transform \""+n.sid+"\" in node "+t.id)}for(var o=0,M;o<a.length;o++){M=a[o];for(var u=0,y;u<r.length;u++)y=r[u],y.hasTarget(M)||L(r,y,u,M)}t.keys=r,t.sids=a}}function T(t,r){for(var a=null,o=0,i=t.length,n;o<i&&null===a;o++)if(n=t[o],n.time===r)a=n;else if(n.time>r)break;return a}function b(t,r){for(var a=-1,o=0,i=t.length,n;o<i&&-1===a;o++)n=t[o],n.time>=r&&(a=o);return a}function L(t,r,a,o){var n=D(t,o,a?a-1:0),s=N(t,o,a+1);if(n&&s){var l=(r.time-n.time)/(s.time-n.time),d=n.getTarget(o),p=s.getTarget(o).data,c=d.data,u;if("matrix"===d.type)u=c;else if(c.length){u=[];for(var m=0;m<c.length;++m)u[m]=c[m]+(p[m]-c[m])*l}else u=c+(p-c)*l;r.addTarget(o,d.transform,d.member,u)}}function N(t,r,a){for(;a<t.length;a++){var i=t[a];if(i.hasTarget(r))return i}return null}function D(t,r,a){for(a=0<=a?a:a+t.length;0<=a;a--){var i=t[a];if(i.hasTarget(r))return i}return null}function w(){this.id="",this.init_from=""}function C(){this.id="",this.name="",this.type="",this.skin=null,this.morph=null}function S(){this.method=null,this.source=null,this.targets=null,this.weights=null}function I(){this.source="",this.bindShapeMatrix=null,this.invBindMatrices=[],this.joints=[],this.weights=[]}function _(){this.id="",this.name="",this.nodes=[],this.scene=new THREE.Group}function j(){this.id="",this.name="",this.sid="",this.nodes=[],this.controllers=[],this.transforms=[],this.geometries=[],this.channels=[],this.matrix=new THREE.Matrix4}function O(){this.sid="",this.type="",this.data=[],this.obj=null}function z(){this.url="",this.skeleton=[],this.instance_material=[]}function R(){this.symbol="",this.target=""}function U(){this.url="",this.instance_material=[]}function P(){this.id="",this.mesh=null}function B(t){this.geometry=t.id,this.primitives=[],this.vertices=null,this.geometry3js=null}function k(){this.material="",this.count=0,this.inputs=[],this.vcount=null,this.p=[],this.geometry=new THREE.Geometry}function F(){k.call(this),this.vcount=[]}function G(){k.call(this),this.vcount=1}function V(){k.call(this),this.vcount=3}function H(){this.source="",this.count=0,this.stride=0,this.params=[]}function Q(){this.input={}}function Y(){this.semantic="",this.offset=0,this.source="",this.set=0}function W(t){this.id=t,this.type=null}function X(){this.id="",this.name="",this.instance_effect=null}function q(){this.color=new THREE.Color,this.color.setRGB(Math.random(),Math.random(),Math.random()),this.color.a=1,this.texture=null,this.texcoord=null,this.texOpts=null}function Z(t,r){this.type=t,this.effect=r,this.material=null}function K(t){this.effect=t,this.init_from=null,this.format=null}function J(t){this.effect=t,this.source=null,this.wrap_s=null,this.wrap_t=null,this.minfilter=null,this.magfilter=null,this.mipfilter=null}function $(){this.id="",this.name="",this.shader=null,this.surface={},this.sampler={}}function ee(){this.url=""}function te(){this.id="",this.name="",this.source={},this.sampler=[],this.channel=[]}function re(t){this.animation=t,this.source="",this.target="",this.fullSid=null,this.sid=null,this.dotSyntax=null,this.arrSyntax=null,this.arrIndices=null,this.member=null}function ae(t){this.id="",this.animation=t,this.inputs=[],this.input=null,this.output=null,this.strideOut=null,this.interpolation=null,this.startTime=null,this.endTime=null,this.duration=0}function ie(t){this.targets=[],this.time=t}function oe(){this.id="",this.name="",this.technique=""}function ne(){this.url=""}function se(){this.id="",this.name="",this.technique=""}function le(){this.url=""}function de(){this.id="",this.name="",this.joints=[],this.links=[]}function pe(){this.sid="",this.name="",this.axis=new THREE.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0}function ce(){this.sid="",this.name="",this.transforms=[],this.attachments=[]}function ue(){this.joint="",this.transforms=[],this.links=[]}function me(t){var r=t.getAttribute("id");return void 0==_e[r]?(_e[r]=new W(r).parse(t),_e[r]):_e[r]}function ge(t){for(var r=fe(t),a=[],o=0,i=r.length;o<i;o++)a.push("true"===r[o]||"1"===r[o]);return a}function he(t){for(var r=fe(t),a=[],o=0,i=r.length;o<i;o++)a.push(parseFloat(r[o]));return a}function ye(t){for(var r=fe(t),a=[],o=0,i=r.length;o<i;o++)a.push(parseInt(r[o],10));return a}function fe(t){return 0<t.length?Me(t).split(/\s+/):[]}function Me(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function xe(t,r,a){return t.hasAttribute(r)?parseInt(t.getAttribute(r),10):a}function Ee(t,r){var a=new THREE.ImageLoader;a.load(r,function(r){t.image=r,t.needsUpdate=!0})}function ve(t,r){t.doubleSided=!1;var a=r.querySelectorAll("extra double_sided")[0];a&&a&&1===parseInt(a.textContent,10)&&(t.doubleSided=!0)}function Ae(){!0!==Fe.convertUpAxis||Ve===Fe.upAxis?He=null:"X"===Ve?He="Y"===Fe.upAxis?"XtoY":"XtoZ":"Y"===Ve?He="X"===Fe.upAxis?"YtoX":"YtoZ":"Z"===Ve?He="X"===Fe.upAxis?"ZtoX":"ZtoY":void 0}function Te(t,r){if(!0===Fe.convertUpAxis&&Ve!==Fe.upAxis)switch(He){case"XtoY":var a=t[0];t[0]=r*t[1],t[1]=a;break;case"XtoZ":var a=t[2];t[2]=t[1],t[1]=t[0],t[0]=a;break;case"YtoX":var a=t[0];t[0]=t[1],t[1]=r*a;break;case"YtoZ":var a=t[1];t[1]=r*t[2],t[2]=a;break;case"ZtoX":var a=t[0];t[0]=t[1],t[1]=t[2],t[2]=a;break;case"ZtoY":var a=t[1];t[1]=t[2],t[2]=r*a;}}function be(t,r){if(!0!==Fe.convertUpAxis||Ve===Fe.upAxis)return r;switch(t){case"X":r="XtoY"===He?-1*r:r;break;case"Y":r="YtoZ"===He||"YtoX"===He?-1*r:r;break;case"Z":r="ZtoY"===He?-1*r:r;break;default:}return r}function Le(t,r){var a=[t[r],t[r+1],t[r+2]];return Te(a,-1),new THREE.Vector3(a[0],a[1],a[2])}function Ne(t){if(Fe.convertUpAxis){var r=[t[0],t[4],t[8]];Te(r,-1),t[0]=r[0],t[4]=r[1],t[8]=r[2],r=[t[1],t[5],t[9]],Te(r,-1),t[1]=r[0],t[5]=r[1],t[9]=r[2],r=[t[2],t[6],t[10]],Te(r,-1),t[2]=r[0],t[6]=r[1],t[10]=r[2],r=[t[0],t[1],t[2]],Te(r,-1),t[0]=r[0],t[1]=r[1],t[2]=r[2],r=[t[4],t[5],t[6]],Te(r,-1),t[4]=r[0],t[5]=r[1],t[6]=r[2],r=[t[8],t[9],t[10]],Te(r,-1),t[8]=r[0],t[9]=r[1],t[10]=r[2],r=[t[3],t[7],t[11]],Te(r,-1),t[3]=r[0],t[7]=r[1],t[11]=r[2]}return new THREE.Matrix4().set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function De(t){if(-1<t&&3>t){t=we(["X","Y","Z"][t]),t={X:0,Y:1,Z:2}[t]}return t}function we(t){return Fe.convertUpAxis&&("X"===t?"XtoY"===He||"XtoZ"===He||"YtoX"===He?t="Y":"ZtoX"===He?t="Z":void 0:"Y"===t?"XtoY"===He||"YtoX"===He||"ZtoX"===He?t="X":"XtoZ"===He||"YtoZ"===He||"ZtoY"===He?t="Z":void 0:"Z"===t?"XtoZ"===He?t="X":"YtoZ"===He||"ZtoX"===He||"ZtoY"===He?t="Y":void 0:void 0),t}var Ce=null,Se=null,Ie=null,_e={},je={},Oe={},ze={},Re={},Ue={},Pe={},Be={},ke={},Fe={centerGeometry:!1,convertUpAxis:!1,subdivideFaces:!0,upAxis:"Y",defaultEnvMap:null},Ge=1,Ve="Y",He=null,Qe,Ye,We,Xe,qe,Ze,Ke,Je,$e;return w.prototype.parse=function(t){this.id=t.getAttribute("id");for(var r=0,a;r<t.childNodes.length;r++)a=t.childNodes[r],"init_from"===a.nodeName&&(this.init_from=a.textContent);return this},C.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.type="none";for(var r=0,a;r<t.childNodes.length;r++)switch(a=t.childNodes[r],a.nodeName){case"skin":this.skin=new I().parse(a),this.type=a.nodeName;break;case"morph":this.morph=new S().parse(a),this.type=a.nodeName;break;default:}return this},S.prototype.parse=function(t){var r={},a=[],o;for(this.method=t.getAttribute("method"),this.source=t.getAttribute("source").replace(/^#/,""),o=0;o<t.childNodes.length;o++){var i=t.childNodes[o];if(1==i.nodeType)switch(i.nodeName){case"source":var n=new W().parse(i);r[n.id]=n;break;case"targets":a=this.parseInputs(i);break;default:console.log(i.nodeName);}}for(o=0;o<a.length;o++){var s=a[o],n=r[s.source];switch(s.semantic){case"MORPH_TARGET":this.targets=n.read();break;case"MORPH_WEIGHT":this.weights=n.read();break;default:}}return this},S.prototype.parseInputs=function(t){for(var r=[],a=0,i;a<t.childNodes.length;a++)if(i=t.childNodes[a],1==i.nodeType)switch(i.nodeName){case"input":r.push(new Y().parse(i));break;default:}return r},I.prototype.parse=function(t){var r={},a,o;this.source=t.getAttribute("source").replace(/^#/,""),this.invBindMatrices=[],this.joints=[],this.weights=[];for(var n=0,i;n<t.childNodes.length;n++)if(i=t.childNodes[n],1==i.nodeType)switch(i.nodeName){case"bind_shape_matrix":var s=he(i.textContent);this.bindShapeMatrix=Ne(s);break;case"source":var l=new W().parse(i);r[l.id]=l;break;case"joints":a=i;break;case"vertex_weights":o=i;break;default:console.log(i.nodeName);}return this.parseJoints(a,r),this.parseWeights(o,r),this},I.prototype.parseJoints=function(t,r){for(var a=0,i;a<t.childNodes.length;a++)if(i=t.childNodes[a],1==i.nodeType)switch(i.nodeName){case"input":var o=new Y().parse(i),n=r[o.source];"JOINT"===o.semantic?this.joints=n.read():"INV_BIND_MATRIX"===o.semantic&&(this.invBindMatrices=n.read());break;default:}},I.prototype.parseWeights=function(t,r){for(var a=[],o=0,i,n,s;o<t.childNodes.length;o++)if(s=t.childNodes[o],1==s.nodeType)switch(s.nodeName){case"input":a.push(new Y().parse(s));break;case"v":i=ye(s.textContent);break;case"vcount":n=ye(s.textContent);break;default:}for(var l=0,o=0;o<n.length;o++){for(var d=n[o],p=[],c=0,u;c<d;c++){u={};for(var m=0;m<a.length;m++){var g=a[m],h=i[l+g.offset];switch(g.semantic){case"JOINT":u.joint=h;break;case"WEIGHT":u.weight=r[g.source].data[h];break;default:}}p.push(u),l+=a.length}for(var c=0;c<p.length;c++)p[c].index=o;this.weights.push(p)}},_.prototype.getChildById=function(t,r){for(var a=0,i;a<this.nodes.length;a++)if(i=this.nodes[a].getChildById(t,r),i)return i;return null},_.prototype.getChildBySid=function(t,r){for(var a=0,i;a<this.nodes.length;a++)if(i=this.nodes[a].getChildBySid(t,r),i)return i;return null},_.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.nodes=[];for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"node":this.nodes.push(new j().parse(a));break;default:}return this},j.prototype.getChannelForTransform=function(t){for(var r=0;r<this.channels.length;r++){var a=this.channels[r],i=a.target.split("/"),o=i.shift(),n=i.shift(),s=0<=n.indexOf("."),l=0<=n.indexOf("("),d;if(s)i=n.split("."),n=i.shift();else if(l){d=n.split("("),n=d.shift();for(var p=0;p<d.length;p++)d[p]=parseInt(d[p].replace(/\)/,""))}if(n===t)return a.info={sid:n,dotSyntax:s,arrSyntax:l,arrIndices:d},a}return null},j.prototype.getChildById=function(t,r){if(this.id===t)return this;if(r)for(var a=0,i;a<this.nodes.length;a++)if(i=this.nodes[a].getChildById(t,r),i)return i;return null},j.prototype.getChildBySid=function(t,r){if(this.sid===t)return this;if(r)for(var a=0,i;a<this.nodes.length;a++)if(i=this.nodes[a].getChildBySid(t,r),i)return i;return null},j.prototype.getTransformBySid=function(t){for(var r=0;r<this.transforms.length;r++)if(this.transforms[r].sid===t)return this.transforms[r];return null},j.prototype.parse=function(t){var r;this.id=t.getAttribute("id"),this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.type=t.getAttribute("type"),this.layer=t.getAttribute("layer"),this.type="JOINT"===this.type?this.type:"NODE",this.nodes=[],this.transforms=[],this.geometries=[],this.cameras=[],this.lights=[],this.controllers=[],this.matrix=new THREE.Matrix4;for(var a=0,i;a<t.childNodes.length;a++)if(i=t.childNodes[a],1==i.nodeType)switch(i.nodeName){case"node":this.nodes.push(new j().parse(i));break;case"instance_camera":this.cameras.push(new ne().parse(i));break;case"instance_controller":this.controllers.push(new z().parse(i));break;case"instance_geometry":this.geometries.push(new U().parse(i));break;case"instance_light":this.lights.push(new le().parse(i));break;case"instance_node":r=i.getAttribute("url").replace(/^#/,"");var o=E(r);o&&this.nodes.push(new j().parse(o));break;case"rotate":case"translate":case"scale":case"matrix":case"lookat":case"skew":this.transforms.push(new O().parse(i));break;case"extra":break;default:console.log(i.nodeName);}return this.channels=v(this),A(this),this.updateMatrix(),this},j.prototype.updateMatrix=function(){this.matrix.identity();for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(this.matrix)},O.prototype.parse=function(t){return this.sid=t.getAttribute("sid"),this.type=t.nodeName,this.data=he(t.textContent),this.convert(),this},O.prototype.convert=function(){switch(this.type){case"matrix":this.obj=Ne(this.data);break;case"rotate":this.angle=THREE.Math.degToRad(this.data[3]);case"translate":Te(this.data,-1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;case"scale":Te(this.data,1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type);}},O.prototype.apply=function(){var t=new THREE.Matrix4;return function(r){switch(this.type){case"matrix":r.multiply(this.obj);break;case"translate":r.multiply(t.makeTranslation(this.obj.x,this.obj.y,this.obj.z));break;case"rotate":r.multiply(t.makeRotationAxis(this.obj,this.angle));break;case"scale":r.scale(this.obj);}}}(),O.prototype.update=function(t,r){var a=["X","Y","Z","ANGLE"];switch(this.type){case"matrix":if(!r)this.obj.copy(t);else if(1===r.length)switch(r[0]){case 0:this.obj.n11=t[0],this.obj.n21=t[1],this.obj.n31=t[2],this.obj.n41=t[3];break;case 1:this.obj.n12=t[0],this.obj.n22=t[1],this.obj.n32=t[2],this.obj.n42=t[3];break;case 2:this.obj.n13=t[0],this.obj.n23=t[1],this.obj.n33=t[2],this.obj.n43=t[3];break;case 3:this.obj.n14=t[0],this.obj.n24=t[1],this.obj.n34=t[2],this.obj.n44=t[3];}else if(2===r.length){var i="n"+(r[0]+1)+(r[1]+1);this.obj[i]=t}else console.log("Incorrect addressing of matrix in transform.");break;case"translate":case"scale":switch("[object Array]"===Object.prototype.toString.call(r)&&(r=a[r[0]]),r){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2];}break;case"rotate":switch("[object Array]"===Object.prototype.toString.call(r)&&(r=a[r[0]]),r){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;case"ANGLE":this.angle=THREE.Math.degToRad(t);break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2],this.angle=THREE.Math.degToRad(t[3]);}}},z.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.skeleton=[],this.instance_material=[];for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1===a.nodeType)switch(a.nodeName){case"skeleton":this.skeleton.push(a.textContent.replace(/^#/,""));break;case"bind_material":for(var i=a.querySelectorAll("instance_material"),o=0,n;o<i.length;o++)n=i[o],this.instance_material.push(new R().parse(n));break;case"extra":break;default:}return this},R.prototype.parse=function(t){return this.symbol=t.getAttribute("symbol"),this.target=t.getAttribute("target").replace(/^#/,""),this},U.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.instance_material=[];for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType&&"bind_material"===a.nodeName){for(var i=a.querySelectorAll("instance_material"),o=0,n;o<i.length;o++)n=i[o],this.instance_material.push(new R().parse(n));break}return this},P.prototype.parse=function(t){this.id=t.getAttribute("id"),ve(this,t);for(var r=0,a;r<t.childNodes.length;r++)switch(a=t.childNodes[r],a.nodeName){case"mesh":this.mesh=new B(this).parse(a);break;case"extra":break;default:}return this},B.prototype.parse=function(t){this.primitives=[];for(var r=0,a;r<t.childNodes.length;r++)switch(a=t.childNodes[r],a.nodeName){case"source":me(a);break;case"vertices":this.vertices=new Q().parse(a);break;case"linestrips":this.primitives.push(new G().parse(a));break;case"triangles":this.primitives.push(new V().parse(a));break;case"polygons":this.primitives.push(new k().parse(a));break;case"polylist":this.primitives.push(new F().parse(a));break;default:}if(this.geometry3js=new THREE.Geometry,null===this.vertices)return this;for(var i=_e[this.vertices.input.POSITION.source].data,r=0;r<i.length;r+=3)this.geometry3js.vertices.push(Le(i,r).clone());for(var r=0,o;r<this.primitives.length;r++)o=this.primitives[r],o.setVertices(this.vertices),this.handlePrimitive(o,this.geometry3js);return this.geometry3js.calcNormals&&(this.geometry3js.computeVertexNormals(),delete this.geometry3js.calcNormals),this},B.prototype.handlePrimitive=function(t,r){if(t instanceof G)return void(r.isLineStrip=!0);var a=t.p,o=t.inputs,n=0,s=0,l=[],d,c,u,m,g,h,y,f;for(d=0;d<o.length;d++){u=o[d];var M=u.offset+1;switch(s=s<M?M:s,u.semantic){case"TEXCOORD":l.push(u.set);}}for(var x=0;x<a.length;++x)for(var E=a[x],p=0;p<E.length;){var i=[],v=[],A=null,T=[];for(f=t.vcount?t.vcount.length?t.vcount[n++]:t.vcount:E.length/s,d=0;d<f;d++)for(c=0;c<o.length;c++)switch(u=o[c],h=_e[u.source],m=E[p+d*s+u.offset],y=h.accessor.params.length,g=m*y,u.semantic){case"VERTEX":i.push(m);break;case"NORMAL":v.push(Le(h.data,g));break;case"TEXCOORD":A=A||{},void 0===A[u.set]&&(A[u.set]=[]),A[u.set].push(new THREE.Vector2(h.data[g],h.data[g+1]));break;case"COLOR":T.push(new THREE.Color().setRGB(h.data[g],h.data[g+1],h.data[g+2]));break;default:}if(0===v.length)if(u=this.vertices.input.NORMAL,u){h=_e[u.source],y=h.accessor.params.length;for(var b=0,L=i.length;b<L;b++)v.push(Le(h.data,i[b]*y))}else r.calcNormals=!0;if(!A&&(A={},u=this.vertices.input.TEXCOORD,u)){l.push(u.set),h=_e[u.source],y=h.accessor.params.length;for(var b=0,L=i.length;b<L;b++)g=i[b]*y,void 0===A[u.set]&&(A[u.set]=[]),A[u.set].push(new THREE.Vector2(h.data[g],1-h.data[g+1]))}if(0===T.length&&(u=this.vertices.input.COLOR,u)){h=_e[u.source],y=h.accessor.params.length;for(var b=0,L=i.length;b<L;b++)g=i[b]*y,T.push(new THREE.Color().setRGB(h.data[g],h.data[g+1],h.data[g+2]))}var N=null,D=[],w,C;if(3===f)D.push(new THREE.Face3(i[0],i[1],i[2],v,T.length?T:new THREE.Color));else if(4===f)D.push(new THREE.Face3(i[0],i[1],i[3],v.length?[v[0].clone(),v[1].clone(),v[3].clone()]:[],T.length?[T[0],T[1],T[3]]:new THREE.Color)),D.push(new THREE.Face3(i[1],i[2],i[3],v.length?[v[1].clone(),v[2].clone(),v[3].clone()]:[],T.length?[T[1],T[2],T[3]]:new THREE.Color));else if(4<f&&Fe.subdivideFaces){var S=T.length?T:new THREE.Color;for(c=1;c<f-1;)D.push(new THREE.Face3(i[0],i[c],i[c+1],v.length?[v[0].clone(),v[c++].clone(),v[c].clone()]:[],S))}if(D.length)for(var b=0,L=D.length;b<L;b++)for(N=D[b],N.daeMaterial=t.material,r.faces.push(N),c=0;c<l.length;c++)w=A[l[c]],C=4<f?[w[0],w[b+1],w[b+2]]:4===f?0===b?[w[0],w[1],w[3]]:[w[1].clone(),w[2],w[3].clone()]:[w[0],w[1],w[2]],void 0===r.faceVertexUvs[c]&&(r.faceVertexUvs[c]=[]),r.faceVertexUvs[c].push(C);else console.log("dropped face with vcount "+f+" for geometry with id: "+r.id);p+=s*f}},k.prototype.setVertices=function(t){for(var r=0;r<this.inputs.length;r++)this.inputs[r].source===t.id&&(this.inputs[r].source=t.input.POSITION.source)},k.prototype.parse=function(t){this.material=t.getAttribute("material"),this.count=xe(t,"count",0);for(var r=0,a;r<t.childNodes.length;r++)switch(a=t.childNodes[r],a.nodeName){case"input":this.inputs.push(new Y().parse(t.childNodes[r]));break;case"vcount":this.vcount=ye(a.textContent);break;case"p":this.p.push(ye(a.textContent));break;case"ph":console.warn("polygon holes not yet supported!");break;default:}return this},F.prototype=Object.create(k.prototype),F.prototype.constructor=F,G.prototype=Object.create(k.prototype),G.prototype.constructor=G,V.prototype=Object.create(k.prototype),V.prototype.constructor=V,H.prototype.parse=function(t){this.params=[],this.source=t.getAttribute("source"),this.count=xe(t,"count",0),this.stride=xe(t,"stride",0);for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],"param"===a.nodeName){var i={};i.name=a.getAttribute("name"),i.type=a.getAttribute("type"),this.params.push(i)}return this},Q.prototype.parse=function(t){this.id=t.getAttribute("id");for(var r=0;r<t.childNodes.length;r++)if("input"===t.childNodes[r].nodeName){var a=new Y().parse(t.childNodes[r]);this.input[a.semantic]=a}return this},Y.prototype.parse=function(t){return this.semantic=t.getAttribute("semantic"),this.source=t.getAttribute("source").replace(/^#/,""),this.set=xe(t,"set",-1),this.offset=xe(t,"offset",0),"TEXCOORD"===this.semantic&&0>this.set&&(this.set=0),this},W.prototype.parse=function(t){this.id=t.getAttribute("id");for(var r=0,a;r<t.childNodes.length;r++)switch(a=t.childNodes[r],a.nodeName){case"bool_array":this.data=ge(a.textContent),this.type=a.nodeName;break;case"float_array":this.data=he(a.textContent),this.type=a.nodeName;break;case"int_array":this.data=ye(a.textContent),this.type=a.nodeName;break;case"IDREF_array":case"Name_array":this.data=fe(a.textContent),this.type=a.nodeName;break;case"technique_common":for(var i=0;i<a.childNodes.length;i++)if("accessor"===a.childNodes[i].nodeName){this.accessor=new H().parse(a.childNodes[i]);break}break;default:}return this},W.prototype.read=function(){var t=[],r=this.accessor.params[0];switch(r.type){case"IDREF":case"Name":case"name":case"float":return this.data;case"float4x4":for(var a=0;a<this.data.length;a+=16){var i=this.data.slice(a,a+16),o=Ne(i);t.push(o)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+r.type+".");}return t},X.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var r=0;r<t.childNodes.length;r++)if("instance_effect"===t.childNodes[r].nodeName){this.instance_effect=new ee().parse(t.childNodes[r]);break}return this},q.prototype.isColor=function(){return null===this.texture},q.prototype.isTexture=function(){return null!=this.texture},q.prototype.parse=function(t){"transparent"===t.nodeName&&(this.opaque=t.getAttribute("opaque"));for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"color":var i=he(a.textContent);this.color=new THREE.Color,this.color.setRGB(i[0],i[1],i[2]),this.color.a=i[3];break;case"texture":this.texture=a.getAttribute("texture"),this.texcoord=a.getAttribute("texcoord"),this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1},this.parseTexture(a);break;default:}return this},q.prototype.parseTexture=function(t){if(!t.childNodes)return this;t.childNodes[1]&&"extra"===t.childNodes[1].nodeName&&(t=t.childNodes[1],t.childNodes[1]&&"technique"===t.childNodes[1].nodeName&&(t=t.childNodes[1]));for(var r=0,a;r<t.childNodes.length;r++)switch(a=t.childNodes[r],a.nodeName){case"offsetU":case"offsetV":case"repeatU":case"repeatV":this.texOpts[a.nodeName]=parseFloat(a.textContent);break;case"wrapU":case"wrapV":this.texOpts[a.nodeName]="TRUE"===a.textContent.toUpperCase()?1:parseInt(a.textContent);break;default:this.texOpts[a.nodeName]=a.textContent;}return this},Z.prototype.parse=function(t){for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"emission":case"diffuse":case"specular":case"transparent":this[a.nodeName]=new q().parse(a);break;case"bump":var i=a.getAttribute("bumptype");i?"heightfield"===i.toLowerCase()?this.bump=new q().parse(a):"normalmap"===i.toLowerCase()?this.normal=new q().parse(a):(console.error("Shader.prototype.parse: Invalid value for attribute 'bumptype' ("+i+") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'"),this.bump=new q().parse(a)):(console.warn("Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'"),this.bump=new q().parse(a));break;case"shininess":case"reflectivity":case"index_of_refraction":case"transparency":var o=a.querySelectorAll("float");0<o.length&&(this[a.nodeName]=parseFloat(o[0].textContent));break;default:}return this.create(),this},Z.prototype.create=function(){var t={},r=!1;if(void 0!==this.transparency&&void 0!==this.transparent){var a=this.transparent,i=(this.transparent.color.r+this.transparent.color.g+this.transparent.color.b)/3*this.transparency;0<i&&(r=!0,t.transparent=!0,t.opacity=1-i)}var o={diffuse:"map",ambient:"lightMap",specular:"specularMap",emission:"emissionMap",bump:"bumpMap",normal:"normalMap"};for(var n in this)switch(n){case"ambient":case"emission":case"diffuse":case"specular":case"bump":case"normal":var s=this[n];if(s instanceof q)if(s.isTexture()){var l=s.texture,d=this.effect.sampler[l];if(void 0!==d&&void 0!==d.source){var p=this.effect.surface[d.source];if(void 0!==p){var c=je[p.init_from];if(c){var u=Ke+c.init_from,m=THREE.Loader.Handlers.get(u),g;null===m?(g=new THREE.Texture,Ee(g,u)):g=m.load(u),g.wrapS="MIRROR"===d.wrap_s?THREE.MirroredRepeatWrapping:"WRAP"===d.wrap_s||s.texOpts.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,g.wrapT="MIRROR"===d.wrap_t?THREE.MirroredRepeatWrapping:"WRAP"===d.wrap_t||s.texOpts.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,g.offset.x=s.texOpts.offsetU,g.offset.y=s.texOpts.offsetV,g.repeat.x=s.texOpts.repeatU,g.repeat.y=s.texOpts.repeatV,t[o[n]]=g,"emission"===n&&(t.emissive=16777215)}}}}else"diffuse"!==n&&r||("emission"===n?t.emissive=s.color.getHex():t[n]=s.color.getHex());break;case"shininess":t[n]=this[n];break;case"reflectivity":t[n]=this[n],0<t[n]&&(t.envMap=Fe.defaultEnvMap),t.combine=THREE.MixOperation;break;case"index_of_refraction":t.refractionRatio=this[n],1!==this[n]&&(t.envMap=Fe.defaultEnvMap);break;case"transparency":break;default:}switch(t.side=this.effect.doubleSided?THREE.DoubleSide:THREE.FrontSide,void 0!==t.diffuse&&(t.color=t.diffuse,delete t.diffuse),this.type){case"constant":void 0!=t.emissive&&(t.color=t.emissive),this.material=new THREE.MeshBasicMaterial(t);break;case"phong":case"blinn":this.material=new THREE.MeshPhongMaterial(t);break;case"lambert":default:this.material=new THREE.MeshLambertMaterial(t);}return this.material},K.prototype.parse=function(t){for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"init_from":this.init_from=a.textContent;break;case"format":this.format=a.textContent;break;default:console.log("unhandled Surface prop: "+a.nodeName);}return this},J.prototype.parse=function(t){for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"source":this.source=a.textContent;break;case"minfilter":this.minfilter=a.textContent;break;case"magfilter":this.magfilter=a.textContent;break;case"mipfilter":this.mipfilter=a.textContent;break;case"wrap_s":this.wrap_s=a.textContent;break;case"wrap_t":this.wrap_t=a.textContent;break;default:console.log("unhandled Sampler2D prop: "+a.nodeName);}return this},$.prototype.create=function(){if(null===this.shader)return null},$.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),ve(this,t),this.shader=null;for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"profile_COMMON":this.parseTechnique(this.parseProfileCOMMON(a));break;default:}return this},$.prototype.parseNewparam=function(t){for(var r=t.getAttribute("sid"),a=0,i;a<t.childNodes.length;a++)if(i=t.childNodes[a],1==i.nodeType)switch(i.nodeName){case"surface":this.surface[r]=new K(this).parse(i);break;case"sampler2D":this.sampler[r]=new J(this).parse(i);break;case"extra":break;default:console.log(i.nodeName);}},$.prototype.parseProfileCOMMON=function(t){for(var r=0,a,i;r<t.childNodes.length;r++)if(i=t.childNodes[r],1==i.nodeType)switch(i.nodeName){case"profile_COMMON":this.parseProfileCOMMON(i);break;case"technique":a=i;break;case"newparam":this.parseNewparam(i);break;case"image":var o=new w().parse(i);je[o.id]=o;break;case"extra":break;default:console.log(i.nodeName);}return a},$.prototype.parseTechnique=function(t){for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.shader=new Z(a.nodeName,this).parse(a);break;case"extra":this.parseExtra(a);break;default:}},$.prototype.parseExtra=function(t){for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"technique":this.parseExtraTechnique(a);break;default:}},$.prototype.parseExtraTechnique=function(t){for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"bump":this.shader.parse(t);break;default:}},ee.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},te.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.source={};for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"animation":var i=new te().parse(a);for(var o in i.source)this.source[o]=i.source[o];for(var n=0;n<i.channel.length;n++)this.channel.push(i.channel[n]),this.sampler.push(i.sampler[n]);break;case"source":var o=new W().parse(a);this.source[o.id]=o;break;case"sampler":this.sampler.push(new ae(this).parse(a));break;case"channel":this.channel.push(new re(this).parse(a));break;default:}return this},re.prototype.parse=function(t){this.source=t.getAttribute("source").replace(/^#/,""),this.target=t.getAttribute("target");var r=this.target.split("/"),a=r.shift(),i=r.shift(),o=0<=i.indexOf("."),n=0<=i.indexOf("(");if(o)r=i.split("."),this.sid=r.shift(),this.member=r.shift();else if(n){var s=i.split("(");this.sid=s.shift();for(var l=0;l<s.length;l++)s[l]=parseInt(s[l].replace(/\)/,""));this.arrIndices=s}else this.sid=i;return this.fullSid=i,this.dotSyntax=o,this.arrSyntax=n,this},ae.prototype.parse=function(t){this.id=t.getAttribute("id"),this.inputs=[];for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"input":this.inputs.push(new Y().parse(a));break;default:}return this},ae.prototype.create=function(){for(var t=0;t<this.inputs.length;t++){var r=this.inputs[t],a=this.animation.source[r.source];switch(r.semantic){case"INPUT":this.input=a.read();break;case"OUTPUT":this.output=a.read(),this.strideOut=a.accessor.stride;break;case"INTERPOLATION":this.interpolation=a.read();break;case"IN_TANGENT":break;case"OUT_TANGENT":break;default:console.log(r.semantic);}}if(this.startTime=0,this.endTime=0,this.duration=0,this.input.length){this.startTime=1e8,this.endTime=-1e8;for(var t=0;t<this.input.length;t++)this.startTime=m(this.startTime,this.input[t]),this.endTime=l(this.endTime,this.input[t]);this.duration=this.endTime-this.startTime}},ae.prototype.getData=function(t,r,a){var o;if("matrix"===t&&16===this.strideOut)o=this.output[r];else if(1<this.strideOut){o=[],r*=this.strideOut;for(var n=0;n<this.strideOut;++n)o[n]=this.output[r+n];3===this.strideOut?"rotate"===t||"translate"===t?Te(o,-1):"scale"===t?Te(o,1):void 0:4===this.strideOut&&"matrix"===t&&Te(o,-1)}else o=this.output[r],a&&"translate"===t&&(o=be(a,o));return o},ie.prototype.addTarget=function(t,r,a,i){this.targets.push({sid:t,member:a,transform:r,data:i})},ie.prototype.apply=function(t){for(var r=0,a;r<this.targets.length;++r)a=this.targets[r],t&&a.sid!==t||a.transform.update(a.data,a.member)},ie.prototype.getTarget=function(t){for(var r=0;r<this.targets.length;++r)if(this.targets[r].sid===t)return this.targets[r];return null},ie.prototype.hasTarget=function(t){for(var r=0;r<this.targets.length;++r)if(this.targets[r].sid===t)return!0;return!1},ie.prototype.interpolate=function(t,r){for(var a=0,i=this.targets.length;a<i;a++){var o=this.targets[a],n=t.getTarget(o.sid),s;if("matrix"!==o.transform.type&&n){var l=(r-this.time)/(t.time-this.time),d=n.data,p=o.data;if(0>l&&(l=0),1<l&&(l=1),p.length){s=[];for(var c=0;c<p.length;++c)s[c]=p[c]+(d[c]-p[c])*l}else s=p+(d-p)*l}else s=o.data;o.transform.update(s,o.member)}},oe.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"optics":this.parseOptics(a);break;default:}return this},oe.prototype.parseOptics=function(t){for(var r=0;r<t.childNodes.length;r++)if("technique_common"===t.childNodes[r].nodeName)for(var a=t.childNodes[r],i=0;i<a.childNodes.length;i++)if(this.technique=a.childNodes[i].nodeName,"perspective"===this.technique)for(var o=a.childNodes[i],n=0,s;n<o.childNodes.length;n++)switch(s=o.childNodes[n],s.nodeName){case"yfov":this.yfov=s.textContent;break;case"xfov":this.xfov=s.textContent;break;case"znear":this.znear=s.textContent;break;case"zfar":this.zfar=s.textContent;break;case"aspect_ratio":this.aspect_ratio=s.textContent;}else if("orthographic"===this.technique)for(var l=a.childNodes[i],n=0,s;n<l.childNodes.length;n++)switch(s=l.childNodes[n],s.nodeName){case"xmag":this.xmag=s.textContent;break;case"ymag":this.ymag=s.textContent;break;case"znear":this.znear=s.textContent;break;case"zfar":this.zfar=s.textContent;break;case"aspect_ratio":this.aspect_ratio=s.textContent;}return this},ne.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},se.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"technique_common":this.parseCommon(a);break;case"technique":this.parseTechnique(a);break;default:}return this},se.prototype.parseCommon=function(t){for(var r=0;r<t.childNodes.length;r++)switch(t.childNodes[r].nodeName){case"directional":case"point":case"spot":case"ambient":this.technique=t.childNodes[r].nodeName;for(var a=t.childNodes[r],i=0,o;i<a.childNodes.length;i++)switch(o=a.childNodes[i],o.nodeName){case"color":var n=he(o.textContent);this.color=new THREE.Color(0),this.color.setRGB(n[0],n[1],n[2]),this.color.a=n[3];break;case"falloff_angle":this.falloff_angle=parseFloat(o.textContent);break;case"quadratic_attenuation":var s=parseFloat(o.textContent);this.distance=s?M(1/s):0;}}return this},se.prototype.parseTechnique=function(t){this.profile=t.getAttribute("profile");for(var r=0,a;r<t.childNodes.length;r++)switch(a=t.childNodes[r],a.nodeName){case"intensity":this.intensity=parseFloat(a.textContent);}return this},le.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},de.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.joints=[],this.links=[];for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"technique_common":this.parseCommon(a);break;default:}return this},de.prototype.parseCommon=function(t){for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(t.childNodes[r].nodeName){case"joint":this.joints.push(new pe().parse(a));break;case"link":this.links.push(new ce().parse(a));break;default:}return this},pe.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.axis=new THREE.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0;var r=t.querySelector("axis"),a=he(r.textContent);this.axis=Le(a,0);var o=t.querySelector("limits min")?parseFloat(t.querySelector("limits min").textContent):-360,n=t.querySelector("limits max")?parseFloat(t.querySelector("limits max").textContent):360;this.limits={min:o,max:n};for(var s=["prismatic","revolute"],l=0;l<s.length;l++){var i=s[l],d=t.querySelector(i);d&&(this.type=i)}return this.limits.min>=this.limits.max&&(this.static=!0),this.middlePosition=(this.limits.min+this.limits.max)/2,this},ce.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.transforms=[],this.attachments=[];for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"attachment_full":this.attachments.push(new ue().parse(a));break;case"rotate":case"translate":case"matrix":this.transforms.push(new O().parse(a));break;default:}return this},ue.prototype.parse=function(t){this.joint=t.getAttribute("joint").split("/").pop(),this.links=[];for(var r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1==a.nodeType)switch(a.nodeName){case"link":this.links.push(new ce().parse(a));break;case"rotate":case"translate":case"matrix":this.transforms.push(new O().parse(a));break;default:}return this},{load:function(r,a,i,o){var n=0;if(document.implementation&&document.implementation.createDocument){var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState?0===s.status||200===s.status?s.response?(Ie=a,t(s.response,void 0,r)):o?o({type:"error",url:r}):console.error("ColladaLoader: Empty or non-existing file ("+r+")"):o?o({type:"error",url:r}):console.error("ColladaLoader: Couldn't load \""+r+"\" ("+s.status+")"):3===s.readyState&&i&&(0===n&&(n=s.getResponseHeader("Content-Length")),i({total:n,loaded:s.responseText.length}))},s.open("GET",r,!0),s.send(null)}else alert("Don't know how to parse XML!")},parse:t,applySkin:y,geometries:Re,options:Fe}}},{}],43:[function(){THREE.GLTFLoader=function(){function t(t){this.manager=void 0===t?THREE.DefaultLoadingManager:t}function r(){var t={};return{get:function(r){return t[r]},add:function(r,a){t[r]=a},remove:function(r){delete t[r]},removeAll:function(){t={}},update:function(r,a){for(var i in t){var o=t[i];o.update&&o.update(r,a)}}}}function a(t){this.name=g.KHR_LIGHTS,this.lights={};var r=t.extensions&&t.extensions[g.KHR_LIGHTS]||{},a=r.lights||{};for(var i in a){var o=a[i],n=new THREE.Color().fromArray(o.color),s;switch(o.type){case"directional":s=new THREE.DirectionalLight(n),s.position.set(0,0,1);break;case"point":s=new THREE.PointLight(n);break;case"spot":s=new THREE.SpotLight(n),s.position.set(0,0,1);break;case"ambient":s=new THREE.AmbientLight(n);}s&&(void 0!==o.constantAttenuation&&(s.intensity=o.constantAttenuation),void 0!==o.linearAttenuation&&(s.distance=1/o.linearAttenuation),void 0!==o.quadraticAttenuation&&(s.decay=o.quadraticAttenuation),void 0!==o.fallOffAngle&&(s.angle=o.fallOffAngle),void 0!==o.fallOffExponent&&console.warn("THREE.GLTFLoader:: light.fallOffExponent not currently supported."),s.name=o.name||"light_"+i,this.lights[i]=s)}}function i(){this.name=g.KHR_MATERIALS_COMMON}function o(t){this.name=g.KHR_BINARY_GLTF,this.content=null,this.body=null;var r=new DataView(t,0,y);if(this.header={magic:p(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==h)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");else if(2>this.header.version)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use GLTFLoader instead.");for(var a=new DataView(t,y),i=0,o;i<a.byteLength;){o=a.getUint32(i,!0),i+=4;var n=a.getUint32(i,!0);if(i+=4,n===f.JSON){var s=new Uint8Array(t,y+i,o);this.content=p(s)}else if(n===f.BIN){var l=y+i;this.body=t.slice(l,l+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function n(){return{name:g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,getMaterialType:function(){return THREE.ShaderMaterial},extendParams:function(t,r,a){var i=r.extensions[this.name],o=THREE.ShaderLib.standard,n=THREE.UniformsUtils.clone(o.uniforms),s=o.fragmentShader.replace("#include <specularmap_fragment>","").replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>","#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif").replace("#include <metalnessmap_pars_fragment>","#ifdef USE_GLOSSINESSMAP\n\tuniform sampler2D glossinessMap;\n#endif").replace("#include <roughnessmap_fragment>","vec3 specularFactor = specular;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tspecularFactor *= texelSpecular.rgb;\n#endif").replace("#include <metalnessmap_fragment>","float glossinessFactor = glossiness;\n#ifdef USE_GLOSSINESSMAP\n\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );\n\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tglossinessFactor *= texelGlossiness.a;\n#endif").replace("#include <lights_physical_fragment>","PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );\nmaterial.specularColor = specularFactor.rgb;");delete n.roughness,delete n.metalness,delete n.roughnessMap,delete n.metalnessMap,n.specular={value:new THREE.Color().setHex(1118481)},n.glossiness={value:0.5},n.specularMap={value:null},n.glossinessMap={value:null},t.vertexShader=o.vertexShader,t.fragmentShader=s,t.uniforms=n,t.defines={STANDARD:""},t.color=new THREE.Color(1,1,1),t.opacity=1;var l=[];if(Array.isArray(i.diffuseFactor)){var d=i.diffuseFactor;t.color.fromArray(d),t.opacity=d[3]}if(void 0!==i.diffuseTexture&&l.push(a.assignTexture(t,"map",i.diffuseTexture.index)),t.emissive=new THREE.Color(0,0,0),t.glossiness=void 0===i.glossinessFactor?1:i.glossinessFactor,t.specular=new THREE.Color(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var p=i.specularGlossinessTexture.index;l.push(a.assignTexture(t,"glossinessMap",p)),l.push(a.assignTexture(t,"specularMap",p))}return Promise.all(l)},createMaterial:function(t){var r=new THREE.ShaderMaterial({defines:t.defines,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,fog:!0,lights:!0,opacity:t.opacity,transparent:t.transparent});return r.isGLTFSpecularGlossinessMaterial=!0,r.color=t.color,r.map=void 0===t.map?null:t.map,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=void 0===t.aoMap?null:t.aoMap,r.aoMapIntensity=1,r.emissive=t.emissive,r.emissiveIntensity=1,r.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,r.bumpMap=void 0===t.bumpMap?null:t.bumpMap,r.bumpScale=1,r.normalMap=void 0===t.normalMap?null:t.normalMap,r.normalScale=new THREE.Vector2(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=void 0===t.specularMap?null:t.specularMap,r.specular=t.specular,r.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,r.glossiness=t.glossiness,r.alphaMap=null,r.envMap=void 0===t.envMap?null:t.envMap,r.envMapIntensity=1,r.refractionRatio=0.98,r.extensions.derivatives=!0,r},refreshUniforms:function(t,r,a,i,o){var n=o.uniforms,s=o.defines;n.opacity.value=o.opacity,n.diffuse.value.copy(o.color),n.emissive.value.copy(o.emissive).multiplyScalar(o.emissiveIntensity),n.map.value=o.map,n.specularMap.value=o.specularMap,n.alphaMap.value=o.alphaMap,n.lightMap.value=o.lightMap,n.lightMapIntensity.value=o.lightMapIntensity,n.aoMap.value=o.aoMap,n.aoMapIntensity.value=o.aoMapIntensity;var l;if(o.map?l=o.map:o.specularMap?l=o.specularMap:o.displacementMap?l=o.displacementMap:o.normalMap?l=o.normalMap:o.bumpMap?l=o.bumpMap:o.glossinessMap?l=o.glossinessMap:o.alphaMap?l=o.alphaMap:o.emissiveMap&&(l=o.emissiveMap),void 0!==l){l.isWebGLRenderTarget&&(l=l.texture);var d=l.offset,p=l.repeat;n.offsetRepeat.value.set(d.x,d.y,p.x,p.y)}n.envMap.value=o.envMap,n.envMapIntensity.value=o.envMapIntensity,n.flipEnvMap.value=o.envMap&&o.envMap.isCubeTexture?-1:1,n.refractionRatio.value=o.refractionRatio,n.specular.value.copy(o.specular),n.glossiness.value=o.glossiness,n.glossinessMap.value=o.glossinessMap,n.emissiveMap.value=o.emissiveMap,n.bumpMap.value=o.bumpMap,n.normalMap.value=o.normalMap,n.displacementMap.value=o.displacementMap,n.displacementScale.value=o.displacementScale,n.displacementBias.value=o.displacementBias,null!==n.glossinessMap.value&&void 0===s.USE_GLOSSINESSMAP&&(s.USE_GLOSSINESSMAP="",s.USE_ROUGHNESSMAP=""),null===n.glossinessMap.value&&void 0!==s.USE_GLOSSINESSMAP&&(delete s.USE_GLOSSINESSMAP,delete s.USE_ROUGHNESSMAP)}}}function s(t,r,a){if(!t)return Promise.resolve();var i=[],o;if("[object Array]"===Object.prototype.toString.call(t)){o=[];for(var n=t.length,s=0,l;s<n;s++)l=r.call(a||this,t[s],s),l&&(i.push(l),l instanceof Promise?l.then(function(t,r){o[t]=r}.bind(this,s)):o[s]=l)}else for(var d in o={},t)if(t.hasOwnProperty(d)){var l=r.call(a||this,t[d],d);l&&(i.push(l),l instanceof Promise?l.then(function(t,r){o[t]=r}.bind(this,d)):o[d]=l)}return Promise.all(i).then(function(){return o})}function l(t,r){return"string"!==typeof t||""===t?"":/^(https?:)?\/\//i.test(t)?t:/^data:.*,.*$/i.test(t)?t:/^blob:.*$/i.test(t)?t:(r||"")+t}function p(t){if(void 0!==window.TextDecoder)return new TextDecoder().decode(t);for(var r="",a=0,i=t.length;a<i;a++)r+=d(t[a]);return r}function c(){return new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide})}function u(t,r,a,o){var n=t.geometry,s=t.material,l=a.targets,d=n.morphAttributes;d.position=[],d.normal=[],s.morphTargets=!0;for(var p=0,i=l.length;p<i;p++){var c=l[p],u="morphTarget"+p,m,g;if(void 0!==c.POSITION){m=o.accessors[c.POSITION].clone();for(var h=n.attributes.position,y=0,f=m.count;y<f;y++)m.setXYZ(y,m.getX(y)+h.getX(y),m.getY(y)+h.getY(y),m.getZ(y)+h.getZ(y))}else m=n.attributes.position.clone();if(void 0!==c.NORMAL){s.morphNormals=!0,g=o.accessors[c.NORMAL].clone();for(var M=n.attributes.normal,y=0,f=g.count;y<f;y++)g.setXYZ(y,g.getX(y)+M.getX(y),g.getY(y)+M.getY(y),g.getZ(y)+M.getZ(y))}else g=n.attributes.normal.clone();void 0!==c.TANGENT,m.name=u,g.name=u,d.position.push(m),d.normal.push(g)}if(t.updateMorphTargets(),void 0!==r.weights)for(var p=0,i=r.weights.length;p<i;p++)t.morphTargetInfluences[p]=r.weights[p]}function m(t,a,i){this.json=t||{},this.extensions=a||{},this.options=i||{},this.cache=new r}t.prototype={constructor:t,crossOrigin:"Anonymous",load:function(t,r,a,i){var o=this,n=this.path&&"string"===typeof this.path?this.path:THREE.Loader.prototype.extractUrlBase(t),s=new THREE.FileLoader(o.manager);s.setResponseType("arraybuffer"),s.load(t,function(t){try{o.parse(t,n,r,i)}catch(t){i(t.constructor===Error?t:new Error("THREE.GLTFLoader: Unable to parse model."))}},a,i)},setCrossOrigin:function(t){this.crossOrigin=t},setPath:function(t){this.path=t},parse:function(t,r,s,l){var d={},c=p(new Uint8Array(t,0,4)),u;c===h?(d[g.KHR_BINARY_GLTF]=new o(t),u=d[g.KHR_BINARY_GLTF].content):u=p(new Uint8Array(t));var y=JSON.parse(u);if(void 0===y.asset||2>y.asset.version[0])return void l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));y.extensionsUsed&&(0<=y.extensionsUsed.indexOf(g.KHR_LIGHTS)&&(d[g.KHR_LIGHTS]=new a(y)),0<=y.extensionsUsed.indexOf(g.KHR_MATERIALS_COMMON)&&(d[g.KHR_MATERIALS_COMMON]=new i(y)),0<=y.extensionsUsed.indexOf(g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS)&&(d[g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]=new n)),console.time("GLTFLoader");var f=new m(y,d,{path:r||this.path,crossOrigin:this.crossOrigin});f.parse(function(t,r,a,i){console.timeEnd("GLTFLoader");s({scene:t,scenes:r,cameras:a,animations:i})},l)}};var g={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_COMMON:"KHR_materials_common",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness"};i.prototype.getMaterialType=function(t){var r=t.extensions[this.name];switch(r.type){case"commonBlinn":case"commonPhong":return THREE.MeshPhongMaterial;case"commonLambert":return THREE.MeshLambertMaterial;case"commonConstant":default:return THREE.MeshBasicMaterial;}},i.prototype.extendParams=function(t,r,a){var i=r.extensions[this.name],o=[],n=[];switch(i.type){case"commonBlinn":case"commonPhong":n.push("diffuseFactor","diffuseTexture","specularFactor","specularTexture","shininessFactor");break;case"commonLambert":n.push("diffuseFactor","diffuseTexture");break;case"commonConstant":default:}var s={};return n.forEach(function(t){void 0!==i[t]&&(s[t]=i[t])}),void 0!==s.diffuseFactor&&(t.color=new THREE.Color().fromArray(s.diffuseFactor),t.opacity=s.diffuseFactor[3]),void 0!==s.diffuseTexture&&o.push(a.assignTexture(t,"map",s.diffuseTexture.index)),void 0!==s.specularFactor&&(t.specular=new THREE.Color().fromArray(s.specularFactor)),void 0!==s.specularTexture&&o.push(a.assignTexture(t,"specularMap",s.specularTexture.index)),void 0!==s.shininessFactor&&(t.shininess=s.shininessFactor),Promise.all(o)};var h="glTF",y=12,f={JSON:1313821514,BIN:5130562},M={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},x={5126:Number,35675:THREE.Matrix3,35676:THREE.Matrix4,35664:THREE.Vector2,35665:THREE.Vector3,35666:THREE.Vector4,35678:THREE.Texture},E={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},v={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},A={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},T={6406:THREE.AlphaFormat,6407:THREE.RGBFormat,6408:THREE.RGBAFormat,6409:THREE.LuminanceFormat,6410:THREE.LuminanceAlphaFormat},b={5121:THREE.UnsignedByteType,32819:THREE.UnsignedShort4444Type,32820:THREE.UnsignedShort5551Type,33635:THREE.UnsignedShort565Type},L={1028:THREE.BackSide,1029:THREE.FrontSide},N={512:THREE.NeverDepth,513:THREE.LessDepth,514:THREE.EqualDepth,515:THREE.LessEqualDepth,516:THREE.GreaterEqualDepth,517:THREE.NotEqualDepth,518:THREE.GreaterEqualDepth,519:THREE.AlwaysDepth},D={32774:THREE.AddEquation,32778:THREE.SubtractEquation,32779:THREE.ReverseSubtractEquation},w={0:THREE.ZeroFactor,1:THREE.OneFactor,768:THREE.SrcColorFactor,769:THREE.OneMinusSrcColorFactor,770:THREE.SrcAlphaFactor,771:THREE.OneMinusSrcAlphaFactor,772:THREE.DstAlphaFactor,773:THREE.OneMinusDstAlphaFactor,774:THREE.DstColorFactor,775:THREE.OneMinusDstColorFactor,776:THREE.SrcAlphaSaturateFactor},C={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},S={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},I={CATMULLROMSPLINE:THREE.InterpolateSmooth,CUBICSPLINE:THREE.InterpolateSmooth,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},_={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};return m.prototype._withDependencies=function(t){for(var r={},a=0;a<t.length;a++){var i=t[a],o="load"+i.charAt(0).toUpperCase()+i.slice(1),n=this.cache.get(i);if(void 0!==n)r[i]=n;else if(this[o]){var l=this[o]();this.cache.add(i,l),r[i]=l}}return s(r,function(t){return t})},m.prototype.parse=function(t,r){var a=this.json;this.cache.removeAll(),this._withDependencies(["scenes","cameras","animations"]).then(function(r){var i=[];for(var o in r.scenes)i.push(r.scenes[o]);var n=void 0===a.scene?i[0]:r.scenes[a.scene],s=[];for(var o in r.cameras){var l=r.cameras[o];s.push(l)}var d=[];for(var o in r.animations)d.push(r.animations[o]);t(n,i,s,d)}).catch(r)},m.prototype.getDependency=function(t,r){var a=t+":"+r,i=this.cache.get(a);if(!i){var o="load"+t.charAt(0).toUpperCase()+t.slice(1);i=this[o](r),this.cache.add(a,i)}return i},m.prototype.loadBuffer=function(t){var r=this.json.buffers[t];if(r.type&&"arraybuffer"!==r.type)throw new Error("THREE.GLTFLoader: %s buffer type is not supported.",r.type);if(void 0===r.uri&&0===t)return Promise.resolve(this.extensions[g.KHR_BINARY_GLTF].body);var a=this.options;return new Promise(function(t){var i=new THREE.FileLoader;i.setResponseType("arraybuffer"),i.load(l(r.uri,a.path),t)})},m.prototype.loadBufferView=function(t){var r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(t){var a=r.byteLength||0,i=r.byteOffset||0;return t.slice(i,i+a)})},m.prototype.loadAccessors=function(){var t=this,r=this.json;return s(r.accessors,function(a){return t.getDependency("bufferView",a.bufferView).then(function(t){var i=C[a.type],o=E[a.componentType],n=o.BYTES_PER_ELEMENT,s=r.bufferViews[a.bufferView].byteStride,l;if(s&&s!==n*i){l=new o(t);var d=new THREE.InterleavedBuffer(l,s/n);return new THREE.InterleavedBufferAttribute(d,i,a.byteOffset/n)}return l=new o(t,a.byteOffset,a.count*i),new THREE.BufferAttribute(l,i)})})},m.prototype.loadTexture=function(t){var r=this,a=this.json,i=this.options,o=window.URL||window.webkitURL,n=a.textures[t],s=a.images[n.source],d=s.uri,p=!1;return void 0!==s.bufferView&&(d=r.getDependency("bufferView",s.bufferView).then(function(t){p=!0;var r=new Blob([t],{type:s.mimeType});return d=o.createObjectURL(r),d})),Promise.resolve(d).then(function(t){var r=THREE.Loader.Handlers.get(t)||new THREE.TextureLoader;return r.setCrossOrigin(i.crossOrigin),new Promise(function(a,o){r.load(l(t,i.path),a,void 0,o)})}).then(function(t){void 0!==p&&o.revokeObjectURL(d),t.flipY=!1,void 0!==n.name&&(t.name=n.name),t.format=void 0===n.format?THREE.RGBAFormat:T[n.format],void 0!==n.internalFormat&&t.format!==T[n.internalFormat]&&console.warn("THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. internalFormat will be forced to be the same value as format."),t.type=void 0===n.type?THREE.UnsignedByteType:b[n.type];var r=a.samplers||{},i=r[n.sampler]||{};return t.magFilter=v[i.magFilter]||THREE.LinearFilter,t.minFilter=v[i.minFilter]||THREE.LinearMipMapLinearFilter,t.wrapS=A[i.wrapS]||THREE.RepeatWrapping,t.wrapT=A[i.wrapT]||THREE.RepeatWrapping,t})},m.prototype.assignTexture=function(t,r,a){return this.getDependency("texture",a).then(function(a){t[r]=a})},m.prototype.loadMaterials=function(){var t=this,r=this.json,a=this.extensions;return s(r.materials,function(r){var i={},o=r.extensions||{},n=[],s;if(o[g.KHR_MATERIALS_COMMON]){var l=a[g.KHR_MATERIALS_COMMON];s=l.getMaterialType(r),n.push(l.extendParams(i,r,t))}else if(o[g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var d=a[g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];s=d.getMaterialType(r),n.push(d.extendParams(i,r,t))}else if(void 0!==r.pbrMetallicRoughness){s=THREE.MeshStandardMaterial;var p=r.pbrMetallicRoughness;if(i.color=new THREE.Color(1,1,1),i.opacity=1,Array.isArray(p.baseColorFactor)){var c=p.baseColorFactor;i.color.fromArray(c),i.opacity=c[3]}if(void 0!==p.baseColorTexture&&n.push(t.assignTexture(i,"map",p.baseColorTexture.index)),i.metalness=void 0===p.metallicFactor?1:p.metallicFactor,i.roughness=void 0===p.roughnessFactor?1:p.roughnessFactor,void 0!==p.metallicRoughnessTexture){var u=p.metallicRoughnessTexture.index;n.push(t.assignTexture(i,"metalnessMap",u)),n.push(t.assignTexture(i,"roughnessMap",u))}}else s=THREE.MeshPhongMaterial;!0===r.doubleSided&&(i.side=THREE.DoubleSide);var m=r.alphaMode||_.OPAQUE;return i.transparent=m!==_.OPAQUE,void 0!==r.normalTexture&&n.push(t.assignTexture(i,"normalMap",r.normalTexture.index)),void 0!==r.occlusionTexture&&n.push(t.assignTexture(i,"aoMap",r.occlusionTexture.index)),void 0!==r.emissiveFactor&&(s===THREE.MeshBasicMaterial?i.color=new THREE.Color().fromArray(r.emissiveFactor):i.emissive=new THREE.Color().fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&(s===THREE.MeshBasicMaterial?n.push(t.assignTexture(i,"map",r.emissiveTexture.index)):n.push(t.assignTexture(i,"emissiveMap",r.emissiveTexture.index))),Promise.all(n).then(function(){var t;return t=s===THREE.ShaderMaterial?a[g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(i):new s(i),void 0!==r.name&&(t.name=r.name),t.normalScale.x=-1,t.userData=r.extras,t})})},m.prototype.loadGeometries=function(t){return this._withDependencies(["accessors"]).then(function(r){return s(t,function(t){var a=new THREE.BufferGeometry,i=t.attributes;for(var o in i){var n=i[o];if(void 0===n)return;var s=r.accessors[n];"POSITION"===o?a.addAttribute("position",s):"NORMAL"===o?a.addAttribute("normal",s):"TEXCOORD_0"===o||"TEXCOORD0"===o||"TEXCOORD"===o?a.addAttribute("uv",s):"TEXCOORD_1"===o?a.addAttribute("uv2",s):"COLOR_0"===o||"COLOR0"===o||"COLOR"===o?a.addAttribute("color",s):"WEIGHTS_0"===o||"WEIGHT"===o?a.addAttribute("skinWeight",s):"JOINTS_0"===o||"JOINT"===o?a.addAttribute("skinIndex",s):void 0}return void 0!==t.indices&&a.setIndex(r.accessors[t.indices]),a})})},m.prototype.loadMeshes=function(){var t=this,r=this.json;return this._withDependencies(["accessors","materials"]).then(function(a){return s(r.meshes,function(r){var i=new THREE.Group;void 0!==r.name&&(i.name=r.name),r.extras&&(i.userData=r.extras);var o=r.primitives||[];return t.loadGeometries(o).then(function(t){for(var n in o){var s=o[n],l=t[n],d=void 0===s.material?c():a.materials[s.material];d.aoMap&&void 0===l.attributes.uv2&&void 0!==l.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),l.addAttribute("uv2",new THREE.BufferAttribute(l.attributes.uv.array,2))),void 0!==l.attributes.color&&(d.vertexColors=THREE.VertexColors,d.needsUpdate=!0),void 0===l.attributes.normal&&(void 0===d.flatShading?d.shading=THREE.FlatShading:d.flatShading=!0);var p;if(s.mode===M.TRIANGLES||void 0===s.mode)p=new THREE.Mesh(l,d);else if(s.mode===M.TRIANGLE_STRIP)p=new THREE.Mesh(l,d),p.drawMode=THREE.TriangleStripDrawMode;else if(s.mode===M.TRIANGLE_FAN)p=new THREE.Mesh(l,d),p.drawMode=THREE.TriangleFanDrawMode;else if(s.mode===M.LINES)p=new THREE.LineSegments(l,d);else if(s.mode===M.LINE_STRIP)p=new THREE.Line(l,d);else if(s.mode===M.LINE_LOOP)p=new THREE.LineLoop(l,d);else if(s.mode===M.POINTS)p=new THREE.Points(l,d);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: ",s.mode);p.name=i.name+"_"+n,void 0!==s.targets&&u(p,r,s,a),s.extras&&(p.userData=s.extras),i.add(p)}return i})})})},m.prototype.loadCameras=function(){var t=this.json;return s(t.cameras,function(t){var r=t[t.type],a;if(!r)return void console.warn("THREE.GLTFLoader: Missing camera parameters.");if("perspective"===t.type){var i=r.aspectRatio||1,o=r.yfov*i;a=new THREE.PerspectiveCamera(THREE.Math.radToDeg(o),i,r.znear||1,r.zfar||2e6)}else"orthographic"===t.type&&(a=new THREE.OrthographicCamera(r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar));return void 0!==t.name&&(a.name=t.name),t.extras&&(a.userData=t.extras),a})},m.prototype.loadSkins=function(){var t=this.json;return this._withDependencies(["accessors"]).then(function(r){return s(t.skins,function(t){var a={joints:t.joints,inverseBindMatrices:r.accessors[t.inverseBindMatrices]};return a})})},m.prototype.loadAnimations=function(){var t=this.json;return this._withDependencies(["accessors","nodes"]).then(function(r){return s(t.animations,function(t,a){var o=[];for(var n in t.channels){var s=t.channels[n],l=t.samplers[s.sampler];if(l){var d=s.target,p=void 0===d.node?d.id:d.node,c=void 0===t.parameters?l.input:t.parameters[l.input],u=void 0===t.parameters?l.output:t.parameters[l.output],m=r.accessors[c],g=r.accessors[u],h=r.nodes[p];if(h){h.updateMatrix(),h.matrixAutoUpdate=!0;var y;switch(S[d.path]){case S.weights:y=THREE.NumberKeyframeTrack;break;case S.rotation:y=THREE.QuaternionKeyframeTrack;break;case S.position:case S.scale:default:y=THREE.VectorKeyframeTrack;}var f=h.name?h.name:h.uuid;"CATMULLROMSPLINE"===l.interpolation&&console.warn("THREE.GLTFLoader: CATMULLROMSPLINE interpolation is not supported. Using CUBICSPLINE instead.");var M=void 0===l.interpolation?THREE.InterpolateLinear:I[l.interpolation],x=[];S[d.path]===S.weights?h.traverse(function(t){!0===t.isMesh&&!0===t.material.morphTargets&&x.push(t.name?t.name:t.uuid)}):x.push(f);for(var E=0,i=x.length;E<i;E++)o.push(new y(x[E]+"."+S[d.path],THREE.AnimationUtils.arraySlice(m.array,0),THREE.AnimationUtils.arraySlice(g.array,0),M))}}}var p=void 0===t.name?"animation_"+a:t.name;return new THREE.AnimationClip(p,void 0,o)})})},m.prototype.loadNodes=function(){var t=this.json,r=this.extensions,a=this,i=t.nodes||[],o=t.skins||[];return o.forEach(function(t){t.joints.forEach(function(t){i[t].isBone=!0})}),s(t.nodes,function(t){var r=new THREE.Matrix4,a=!0===t.isBone?new THREE.Bone:new THREE.Object3D;return void 0!==t.name&&(a.name=THREE.PropertyBinding.sanitizeNodeName(t.name)),t.extras&&(a.userData=t.extras),void 0===t.matrix?(void 0!==t.translation&&a.position.fromArray(t.translation),void 0!==t.rotation&&a.quaternion.fromArray(t.rotation),void 0!==t.scale&&a.scale.fromArray(t.scale)):(r.fromArray(t.matrix),a.applyMatrix(r)),a}).then(function(o){return a._withDependencies(["meshes","skins","cameras"]).then(function(a){return s(o,function(n,s){var d=t.nodes[s],p;if(void 0===d.mesh?void 0!==d.meshes&&(console.warn("THREE.GLTFLoader: Legacy glTF file detected. Nodes may have no more than one mesh."),p=d.meshes):p=[d.mesh],void 0!==p)for(var c in p){var u=p[c],h=a.meshes[u];if(void 0===h){console.warn("THREE.GLTFLoader: Could not find node \""+u+"\".");continue}var y=h.clone(!1);for(var f in h.children){var M=h.children[f],x=M,E=M.material,v=M.geometry,A=M.morphTargetInfluences,T=M.userData,b=M.name,L=E;switch(M.type){case"LineSegments":M=new THREE.LineSegments(v,L);break;case"LineLoop":M=new THREE.LineLoop(v,L);break;case"Line":M=new THREE.Line(v,L);break;case"Points":M=new THREE.Points(v,L);break;default:M=new THREE.Mesh(v,L),M.drawMode=x.drawMode;}M.castShadow=!0,M.morphTargetInfluences=A,M.userData=T,M.name=b;var N;if(void 0!==d.skin&&(N=a.skins[d.skin]),N){L=E,L.skinning=!0,M=new THREE.SkinnedMesh(v,L),M.castShadow=!0,M.userData=T,M.name=b;for(var D=[],w=[],C=0,i=N.joints.length;C<i;C++){var l=N.joints[C],S=o[l];if(S){D.push(S);var I=N.inverseBindMatrices.array,m=new THREE.Matrix4().fromArray(I,16*C);w.push(m)}else console.warn("THREE.GLTFLoader: Joint \"%s\" could not be found.",l)}M.bind(new THREE.Skeleton(D,w),M.matrixWorld)}y.add(M)}n.add(y)}if(void 0!==d.camera){var _=a.cameras[d.camera];n.add(_)}if(d.extensions&&d.extensions[g.KHR_LIGHTS]&&void 0!==d.extensions[g.KHR_LIGHTS].light){var j=r[g.KHR_LIGHTS].lights;n.add(j[d.extensions[g.KHR_LIGHTS].light])}return n})})})},m.prototype.loadScenes=function(){function t(a,o,n){var s=n[a];o.add(s);var d=r.nodes[a];if(d.children)for(var p=d.children,c=0,i=p.length,l;c<i;c++)l=p[c],t(l,s,n)}var r=this.json,a=this.extensions;return this._withDependencies(["nodes"]).then(function(o){return s(r.scenes,function(r){var n=new THREE.Scene;void 0!==r.name&&(n.name=r.name),r.extras&&(n.userData=r.extras);for(var s=r.nodes||[],d=0,i=s.length,l;d<i;d++)l=s[d],t(l,n,o.nodes);if(n.traverse(function(t){t.material&&t.material.isGLTFSpecularGlossinessMaterial&&(t.onBeforeRender=a[g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}),r.extensions&&r.extensions[g.KHR_LIGHTS]&&void 0!==r.extensions[g.KHR_LIGHTS].light){var p=a[g.KHR_LIGHTS].lights;n.add(p[r.extensions[g.KHR_LIGHTS].light])}return n})})},t}()},{}],44:[function(){THREE.MTLLoader=function(t){this.manager=t===void 0?THREE.DefaultLoadingManager:t},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(t,r,a,i){var o=this,n=new THREE.FileLoader(this.manager);n.setPath(this.path),n.load(t,function(t){r(o.parse(t))},a,i)},setPath:function(t){this.path=t},setTexturePath:function(t){this.texturePath=t},setBaseUrl:function(t){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(t)},setCrossOrigin:function(t){this.crossOrigin=t},setMaterialOptions:function(t){this.materialOptions=t},parse:function(t){for(var r=t.split("\n"),a={},o=/\s+/,n={},s=0,i;s<r.length;s++)if(i=r[s],i=i.trim(),0!==i.length&&"#"!==i.charAt(0)){var l=i.indexOf(" "),d=0<=l?i.substring(0,l):i;d=d.toLowerCase();var p=0<=l?i.substring(l+1):"";if(p=p.trim(),"newmtl"===d)a={name:p},n[p]=a;else if(a)if("ka"===d||"kd"===d||"ks"===d){var c=p.split(o,3);a[d]=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2])]}else a[d]=p}var u=new THREE.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return u.setCrossOrigin(this.crossOrigin),u.setManager(this.manager),u.setMaterials(n),u}},THREE.MTLLoader.MaterialCreator=function(t,r){this.baseUrl=t||"",this.options=r,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"Anonymous",setCrossOrigin:function(t){this.crossOrigin=t},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var r={};for(var a in t){var i=t[a],o={};for(var n in r[a]=o,i){var s=!0,l=i[n],d=n.toLowerCase();switch(d){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===l[0]&&0===l[1]&&0===l[2]&&(s=!1);break;default:}s&&(o[d]=l)}}return r},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var r in this.materialsInfo)this.materialsArray[t]=this.create(r),this.nameLookup[r]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){function r(t,r){return"string"!==typeof r||""===r?"":/^https?:\/\//i.test(r)?r:t+r}function a(t,a){if(!s[t]){var o=i.getTextureParams(a,s),n=i.loadTexture(r(i.baseUrl,o.url));n.repeat.copy(o.scale),n.offset.copy(o.offset),n.wrapS=i.wrap,n.wrapT=i.wrap,s[t]=n}}var i=this,o=this.materialsInfo[t],s={name:t,side:this.side};for(var l in o){var d=o[l],p;if(""!==d)switch(l.toLowerCase()){case"kd":s.color=new THREE.Color().fromArray(d);break;case"ks":s.specular=new THREE.Color().fromArray(d);break;case"map_kd":a("map",d);break;case"map_ks":a("specularMap",d);break;case"norm":a("normalMap",d);break;case"map_bump":case"bump":a("bumpMap",d);break;case"ns":s.shininess=parseFloat(d);break;case"d":p=parseFloat(d),1>p&&(s.opacity=p,s.transparent=!0);break;case"tr":p=parseFloat(d),0<p&&(s.opacity=1-p,s.transparent=!0);break;default:}}return this.materials[t]=new THREE.MeshPhongMaterial(s),this.materials[t]},getTextureParams:function(t,r){var a={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},i=t.split(/\s+/),o;return o=i.indexOf("-bm"),0<=o&&(r.bumpScale=parseFloat(i[o+1]),i.splice(o,2)),o=i.indexOf("-s"),0<=o&&(a.scale.set(parseFloat(i[o+1]),parseFloat(i[o+2])),i.splice(o,4)),o=i.indexOf("-o"),0<=o&&(a.offset.set(parseFloat(i[o+1]),parseFloat(i[o+2])),i.splice(o,4)),a.url=i.join(" ").trim(),a},loadTexture:function(t,r,a,i,o){var n=THREE.Loader.Handlers.get(t),s=void 0===this.manager?THREE.DefaultLoadingManager:this.manager,l;return null===n&&(n=new THREE.TextureLoader(s)),n.setCrossOrigin&&n.setCrossOrigin(this.crossOrigin),l=n.load(t,a,i,o),void 0!==r&&(l.mapping=r),l}}},{}],45:[function(){THREE.OBJLoader=function(){function t(){var t={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(t,r){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==r);var a=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==r,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(t,r){var a=this._finalize(!1);a&&(a.inherited||0>=a.groupCount)&&this.materials.splice(a.index,1);var i={index:this.materials.length,name:t||"",mtllib:Array.isArray(r)&&0<r.length?r[r.length-1]:"",smooth:void 0===a?this.smooth:a.smooth,groupStart:void 0===a?0:a.groupEnd,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var r={index:"number"===typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return r.clone=this.clone.bind(r),r}};return this.materials.push(i),i},currentMaterial:function(){return 0<this.materials.length?this.materials[this.materials.length-1]:void 0},_finalize:function(t){var r=this.currentMaterial();if(r&&-1===r.groupEnd&&(r.groupEnd=this.geometry.vertices.length/3,r.groupCount=r.groupEnd-r.groupStart,r.inherited=!1),t&&1<this.materials.length)for(var a=this.materials.length-1;0<=a;a--)0>=this.materials[a].groupCount&&this.materials.splice(a,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),r}},a&&a.name&&"function"===typeof a.clone){var i=a.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,r){var a=parseInt(t,10);return 3*(0<=a?a-1:a+r/3)},parseNormalIndex:function(t,r){var a=parseInt(t,10);return 3*(0<=a?a-1:a+r/3)},parseUVIndex:function(t,r){var a=parseInt(t,10);return 2*(0<=a?a-1:a+r/2)},addVertex:function(t,r,a){var i=this.vertices,o=this.object.geometry.vertices;o.push(i[t+0],i[t+1],i[t+2]),o.push(i[r+0],i[r+1],i[r+2]),o.push(i[a+0],i[a+1],i[a+2])},addVertexLine:function(t){var r=this.vertices,a=this.object.geometry.vertices;a.push(r[t+0],r[t+1],r[t+2])},addNormal:function(t,r,a){var i=this.normals,o=this.object.geometry.normals;o.push(i[t+0],i[t+1],i[t+2]),o.push(i[r+0],i[r+1],i[r+2]),o.push(i[a+0],i[a+1],i[a+2])},addUV:function(t,r,a){var i=this.uvs,o=this.object.geometry.uvs;o.push(i[t+0],i[t+1]),o.push(i[r+0],i[r+1]),o.push(i[a+0],i[a+1])},addUVLine:function(t){var r=this.uvs,a=this.object.geometry.uvs;a.push(r[t+0],r[t+1])},addFace:function(t,r,a,i,o,n,s,l,d){var p=this.vertices.length,c=this.parseVertexIndex(t,p),u=this.parseVertexIndex(r,p),m=this.parseVertexIndex(a,p);if(this.addVertex(c,u,m),void 0!==i){var g=this.uvs.length;c=this.parseUVIndex(i,g),u=this.parseUVIndex(o,g),m=this.parseUVIndex(n,g),this.addUV(c,u,m)}if(void 0!==s){var h=this.normals.length;c=this.parseNormalIndex(s,h),u=s===l?c:this.parseNormalIndex(l,h),m=s===d?c:this.parseNormalIndex(d,h),this.addNormal(c,u,m)}},addLineGeometry:function(t,r){this.object.geometry.type="Line";for(var a=this.vertices.length,i=this.uvs.length,o=0,n=t.length;o<n;o++)this.addVertexLine(this.parseVertexIndex(t[o],a));for(var s=0,n=r.length;s<n;s++)this.addUVLine(this.parseUVIndex(r[s],i))}};return t.startObject("",!1),t}function r(t){this.manager=void 0===t?THREE.DefaultLoadingManager:t,this.materials=null}var a=/^[og]\s*(.+)?/,o=/^mtllib /,n=/^usemtl /;return r.prototype={constructor:r,load:function(t,r,a,i){var o=this,n=new THREE.FileLoader(o.manager);n.setPath(this.path),n.load(t,function(t){r(o.parse(t))},a,i)},setPath:function(t){this.path=t},setMaterials:function(t){return this.materials=t,this},parse:function(r){console.time("OBJLoader");var s=new t;-1!==r.indexOf("\r\n")&&(r=r.replace(/\r\n/g,"\n")),-1!==r.indexOf("\\\n")&&(r=r.replace(/\\\n/g,""));for(var d=r.split("\n"),p="",c="",u=0,m=[],g="function"===typeof"".trimLeft,h=0,i=d.length;h<i;h++)if(p=d[h],p=p.trimLeft(),u=p.length,0!==u&&(c=p.charAt(0),"#"!==c))if("v"===c){var l=p.split(/\s+/);switch(l[0]){case"v":s.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));break;case"vn":s.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));break;case"vt":s.uvs.push(parseFloat(l[1]),parseFloat(l[2]));}}else if("f"===c){for(var y=p.substr(1).trim(),f=y.split(/\s+/),M=[],x=0,E=f.length,v;x<E;x++)if(v=f[x],0<v.length){var A=v.split("/");M.push(A)}for(var T=M[0],x=1,E=M.length-1;x<E;x++){var b=M[x],L=M[x+1];s.addFace(T[0],b[0],L[0],T[1],b[1],L[1],T[2],b[2],L[2])}}else if("l"===c){var N=p.substring(1).trim().split(" "),D=[],w=[];if(-1===p.indexOf("/"))D=N;else for(var C=0,S=N.length,I;C<S;C++)I=N[C].split("/"),""!==I[0]&&D.push(I[0]),""!==I[1]&&w.push(I[1]);s.addLineGeometry(D,w)}else if(null!==(m=a.exec(p))){var _=(" "+m[0].substr(1).trim()).substr(1);s.startObject(_)}else if(n.test(p))s.object.startMaterial(p.substring(7).trim(),s.materialLibraries);else if(o.test(p))s.materialLibraries.push(p.substring(7).trim());else if("s"===c){if(m=p.split(" "),1<m.length){var j=m[1].trim().toLowerCase();s.object.smooth="0"!==j&&"off"!==j}else s.object.smooth=!0;var O=s.object.currentMaterial();O&&(O.smooth=s.object.smooth)}else{if("\0"===p)continue;throw new Error("Unexpected line: '"+p+"'")}s.finalize();var z=new THREE.Group;z.materialLibraries=[].concat(s.materialLibraries);for(var h=0,i=s.objects.length;h<i;h++){var R=s.objects[h],U=R.geometry,P=R.materials,B="Line"===U.type;if(0!==U.vertices.length){var k=new THREE.BufferGeometry;k.addAttribute("position",new THREE.BufferAttribute(new Float32Array(U.vertices),3)),0<U.normals.length?k.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(U.normals),3)):k.computeVertexNormals(),0<U.uvs.length&&k.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(U.uvs),2));for(var F=[],G=0,V=P.length;G<V;G++){var H=P[G],O=void 0;if(null!==this.materials&&(O=this.materials.create(H.name),B&&O&&!(O instanceof THREE.LineBasicMaterial))){var Q=new THREE.LineBasicMaterial;Q.copy(O),O=Q}O||(O=B?new THREE.LineBasicMaterial:new THREE.MeshPhongMaterial,O.name=H.name),O.flatShading=!H.smooth,F.push(O)}var Y;if(1<F.length){for(var G=0,V=P.length,H;G<V;G++)H=P[G],k.addGroup(H.groupStart,H.groupCount,G);Y=B?new THREE.LineSegments(k,F):new THREE.Mesh(k,F)}else Y=B?new THREE.LineSegments(k,F[0]):new THREE.Mesh(k,F[0]);Y.name=R.name,z.add(Y)}}return console.timeEnd("OBJLoader"),z}},r}()},{}],46:[function(t,r,a){a=r.exports=function(t){return t.replace(/^\s*|\s*$/g,"")},a.left=function(t){return t.replace(/^\s*/,"")},a.right=function(t){return t.replace(/\s*$/,"")}},{}],47:[function(t,r){r.exports={_args:[[{raw:"webvr-polyfill@^0.9.36",scope:null,escapedName:"webvr-polyfill",name:"webvr-polyfill",rawSpec:"^0.9.36",spec:">=0.9.36 <0.10.0",type:"range"},"X:\\Development\\aframe"]],_from:"webvr-polyfill@>=0.9.36 <0.10.0",_id:"webvr-polyfill@0.9.38",_inCache:!0,_location:"/webvr-polyfill",_nodeVersion:"8.1.4",_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/webvr-polyfill-0.9.38.tgz_1505328121599_0.8887633208651096"},_npmUser:{name:"jsantell",email:"jsantell@gmail.com"},_npmVersion:"5.4.1",_phantomChildren:{},_requested:{raw:"webvr-polyfill@^0.9.36",scope:null,escapedName:"webvr-polyfill",name:"webvr-polyfill",rawSpec:"^0.9.36",spec:">=0.9.36 <0.10.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/webvr-polyfill/-/webvr-polyfill-0.9.38.tgz",_shasum:"740099a2f268a56a0bf18181fb57395efad70712",_shrinkwrap:null,_spec:"webvr-polyfill@^0.9.36",_where:"X:\\Development\\aframe",authors:["Boris Smus <boris@smus.com>","Brandon Jones <tojiro@gmail.com>","Jordan Santell <jordan@jsantell.com>"],bugs:{url:"https://github.com/googlevr/webvr-polyfill/issues"},dependencies:{},description:"Use WebVR today, on mobile or desktop, without requiring a special browser build.",devDependencies:{chai:"^3.5.0",jsdom:"^9.12.0",mocha:"^3.2.0",semver:"^5.3.0",webpack:"^2.6.1","webpack-dev-server":"^2.4.5"},directories:{},dist:{integrity:"sha512-HABweqWYE0suk6P5TdHlagJK56HSecB5xKj6ZshocrxSj9UmNOCjCRv4vFYHCaFZKtuKWa8niRHVbJ3Vo7JYDg==",shasum:"740099a2f268a56a0bf18181fb57395efad70712",tarball:"https://registry.npmjs.org/webvr-polyfill/-/webvr-polyfill-0.9.38.tgz"},gitHead:"8063169c6fc52342ebe5524d7f217987f9aa9cab",homepage:"https://github.com/googlevr/webvr-polyfill",keywords:["vr","webvr"],license:"Apache-2.0",main:"src/node-entry",maintainers:[{name:"jsantell",email:"jsantell@gmail.com"},{name:"toji",email:"tojiro@gmail.com"},{name:"smus",email:"boris@smus.com"}],name:"webvr-polyfill",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/googlevr/webvr-polyfill.git"},scripts:{build:"webpack",start:"npm run watch",test:"mocha",watch:"webpack-dev-server"},version:"0.9.38"}},{}],48:[function(t,r){function a(){this.isPolyfilled=!0,this.displayId=p++,this.displayName="webvr-polyfill displayName",this.depthNear=0.01,this.depthFar=1e4,this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new d}function i(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function o(){}function n(){}var s=t("./util.js"),d=t("./wakelock.js"),p=1e3,c=!1,u=[0,0,0.5,1],g=[0.5,0,0.5,1];a.prototype.getFrameData=function(t){return s.frameDataFromPose(t,this.getPose(),this)},a.prototype.getPose=function(){return this.getImmediatePose()},a.prototype.requestAnimationFrame=function(t){return window.requestAnimationFrame(t)},a.prototype.cancelAnimationFrame=function(t){return window.cancelAnimationFrame(t)},a.prototype.wrapForFullscreen=function(t){if(s.isIOS())return t;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var r=["height: "+m(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",r.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==t)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=t;var a=this.fullscreenElement_.parentElement;a.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),a.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var i=this;return function(){if(i.fullscreenElement_){var t=["position: absolute","top: 0","left: 0","width: "+l(screen.width,screen.height)+"px","height: "+m(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];i.fullscreenElement_.setAttribute("style",t.join("; ")+";")}}(),this.fullscreenWrapper_},a.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var t=this.fullscreenElement_;this.fullscreenElementCachedStyle_?t.setAttribute("style",this.fullscreenElementCachedStyle_):t.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var r=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(t),r.insertBefore(t,this.fullscreenWrapper_),r.removeChild(this.fullscreenWrapper_),t}},a.prototype.requestPresent=function(t){var r=this.isPresenting,a=this;return t instanceof Array||(!c&&(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),c=!0),t=[t]),new Promise(function(o,n){if(!a.capabilities.canPresent)return void n(new Error("VRDisplay is not capable of presenting."));if(0==t.length||t.length>a.capabilities.maxLayers)return void n(new Error("Invalid number of layers."));var l=t[0];if(!l.source)return void o();var d=l.leftBounds||u,p=l.rightBounds||g;if(r){var c=a.layer_;c.source!==l.source&&(c.source=l.source);for(var m=0;4>m;m++)c.leftBounds[m]=d[m],c.rightBounds[m]=p[m];return void o()}if(a.layer_={predistorted:l.predistorted,source:l.source,leftBounds:d.slice(0),rightBounds:p.slice(0)},a.waitingForPresent_=!1,a.layer_&&a.layer_.source){var i=a.wrapForFullscreen(a.layer_.source),h=function(){var t=s.getFullscreenElement();a.isPresenting=i===t,a.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(t){console.error("screen.orientation.lock() failed due to",t.message)}),a.waitingForPresent_=!1,a.beginPresent_(),o()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),a.removeFullscreenWrapper(),a.wakelock_.release(),a.endPresent_(),a.removeFullscreenListeners_()),a.fireVRDisplayPresentChange_()},y=function(){a.waitingForPresent_&&(a.removeFullscreenWrapper(),a.removeFullscreenListeners_(),a.wakelock_.release(),a.waitingForPresent_=!1,a.isPresenting=!1,n(new Error("Unable to present.")))};a.addFullscreenListeners_(i,h,y),s.requestFullscreen(i)?(a.wakelock_.request(),a.waitingForPresent_=!0):(s.isIOS()||s.isWebViewAndroid())&&(a.wakelock_.request(),a.isPresenting=!0,a.beginPresent_(),a.fireVRDisplayPresentChange_(),o())}a.waitingForPresent_||s.isIOS()||(s.exitFullscreen(),n(new Error("Unable to present.")))})},a.prototype.exitPresent=function(){var t=this.isPresenting,r=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(a,i){t?(!s.exitFullscreen()&&s.isIOS()&&(r.endPresent_(),r.fireVRDisplayPresentChange_()),s.isWebViewAndroid()&&(r.removeFullscreenWrapper(),r.removeFullscreenListeners_(),r.endPresent_(),r.fireVRDisplayPresentChange_()),a()):i(new Error("Was not presenting to VRDisplay."))})},a.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},a.prototype.fireVRDisplayPresentChange_=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(t)},a.prototype.fireVRDisplayConnect_=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(t)},a.prototype.addFullscreenListeners_=function(t,r,a){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=t,this.fullscreenChangeHandler_=r,this.fullscreenErrorHandler_=a,r&&(document.fullscreenEnabled?t.addEventListener("fullscreenchange",r,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",r,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",r,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",r,!1)),a&&(document.fullscreenEnabled?t.addEventListener("fullscreenerror",a,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",a,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",a,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",a,!1))},a.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var t=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var r=this.fullscreenChangeHandler_;t.removeEventListener("fullscreenchange",r,!1),t.removeEventListener("webkitfullscreenchange",r,!1),document.removeEventListener("mozfullscreenchange",r,!1),t.removeEventListener("msfullscreenchange",r,!1)}if(this.fullscreenErrorHandler_){var a=this.fullscreenErrorHandler_;t.removeEventListener("fullscreenerror",a,!1),t.removeEventListener("webkitfullscreenerror",a,!1),document.removeEventListener("mozfullscreenerror",a,!1),t.removeEventListener("msfullscreenerror",a,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},a.prototype.beginPresent_=function(){},a.prototype.endPresent_=function(){},a.prototype.submitFrame=function(){},a.prototype.getEyeParameters=function(){return null},o.prototype=new i,n.prototype=new i,r.exports.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},r.exports.VRDisplay=a,r.exports.VRDevice=i,r.exports.HMDVRDevice=o,r.exports.PositionSensorVRDevice=n},{"./util.js":68,"./wakelock.js":70}],49:[function(t,r){function a(t){this.gl=t,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=window.WebVRConfig.BUFFER_SCALE,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,o.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=o.linkProgram(t,s,l,this.attribs),this.uniforms=o.getProgramUniforms(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize(),window.WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new i(t))}var i=t("./cardboard-ui.js"),o=t("./util.js"),n=t("./deps/wglu-preserve-state.js"),s="attribute vec2 position;\nattribute vec3 texCoord;\nvarying vec2 vTexCoord;\nuniform vec4 viewportOffsetScale[2];\nvoid main() {\n  vec4 viewport = viewportOffsetScale[int(texCoord.z)];\n  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;\n  gl_Position = vec4( position, 1.0, 1.0 );\n}",l="precision mediump float;\nuniform sampler2D diffuse;\nvarying vec2 vTexCoord;\nvoid main() {\n  gl_FragColor = texture2D(diffuse, vTexCoord);\n}";a.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},a.prototype.onResize=function(){var t=this.gl,r=this,a=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];n(t,a,function(t){r.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),r.scissorTest&&r.realDisable.call(t,t.SCISSOR_TEST),r.realColorMask.call(t,!0,!0,!0,!0),r.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),r.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),r.realBindFramebuffer.call(t,t.FRAMEBUFFER,r.framebuffer),t.bindTexture(t.TEXTURE_2D,r.renderTarget),t.texImage2D(t.TEXTURE_2D,0,r.ctxAttribs.alpha?t.RGBA:t.RGB,r.bufferWidth,r.bufferHeight,0,r.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r.renderTarget,0),r.ctxAttribs.depth&&r.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,r.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,r.bufferWidth,r.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,r.depthStencilBuffer)):r.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,r.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,r.bufferWidth,r.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,r.depthBuffer)):r.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,r.bufferWidth,r.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,r.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),r.realBindFramebuffer.call(t,t.FRAMEBUFFER,r.lastBoundFramebuffer),r.scissorTest&&r.realEnable.call(t,t.SCISSOR_TEST),r.realColorMask.apply(t,r.colorMask),r.realViewport.apply(t,r.viewport),r.realClearColor.apply(t,r.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},a.prototype.patch=function(){if(!this.isPatched){var t=this,r=this.gl.canvas,i=this.gl;o.isIOS()||(r.width=o.getScreenWidth()*this.bufferScale,r.height=o.getScreenHeight()*this.bufferScale,Object.defineProperty(r,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(a){t.bufferWidth=a,t.realCanvasWidth.set.call(r,a),t.onResize()}}),Object.defineProperty(r,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(a){t.bufferHeight=a,t.realCanvasHeight.set.call(r,a),t.onResize()}})),this.lastBoundFramebuffer=i.getParameter(i.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(r,a){t.lastBoundFramebuffer=a?a:t.framebuffer,t.realBindFramebuffer.call(i,r,t.lastBoundFramebuffer)},this.cullFace=i.getParameter(i.CULL_FACE),this.depthTest=i.getParameter(i.DEPTH_TEST),this.blend=i.getParameter(i.BLEND),this.scissorTest=i.getParameter(i.SCISSOR_TEST),this.stencilTest=i.getParameter(i.STENCIL_TEST),i.enable=function(r){r===i.CULL_FACE?t.cullFace=!0:r===i.DEPTH_TEST?t.depthTest=!0:r===i.BLEND?t.blend=!0:r===i.SCISSOR_TEST?t.scissorTest=!0:r===i.STENCIL_TEST?t.stencilTest=!0:void 0,t.realEnable.call(i,r)},i.disable=function(r){r===i.CULL_FACE?t.cullFace=!1:r===i.DEPTH_TEST?t.depthTest=!1:r===i.BLEND?t.blend=!1:r===i.SCISSOR_TEST?t.scissorTest=!1:r===i.STENCIL_TEST?t.stencilTest=!1:void 0,t.realDisable.call(i,r)},this.colorMask=i.getParameter(i.COLOR_WRITEMASK),i.colorMask=function(o,r,n,s){t.colorMask[0]=o,t.colorMask[1]=r,t.colorMask[2]=n,t.colorMask[3]=s,t.realColorMask.call(i,o,r,n,s)},this.clearColor=i.getParameter(i.COLOR_CLEAR_VALUE),i.clearColor=function(o,r,n,s){t.clearColor[0]=o,t.clearColor[1]=r,t.clearColor[2]=n,t.clearColor[3]=s,t.realClearColor.call(i,o,r,n,s)},this.viewport=i.getParameter(i.VIEWPORT),i.viewport=function(r,a,o,n){t.viewport[0]=r,t.viewport[1]=a,t.viewport[2]=o,t.viewport[3]=n,t.realViewport.call(i,r,a,o,n)},this.isPatched=!0,o.safariCssSizeWorkaround(r)}},a.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,r=this.gl.canvas;o.isIOS()||(Object.defineProperty(r,"width",this.realCanvasWidth),Object.defineProperty(r,"height",this.realCanvasHeight)),r.width=this.bufferWidth,r.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){o.safariCssSizeWorkaround(r)},1)}},a.prototype.setTextureBounds=function(t,r){t||(t=[0,0,0.5,1]),r||(r=[0.5,0,0.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=r[0],this.viewportOffsetScale[5]=r[1],this.viewportOffsetScale[6]=r[2],this.viewportOffsetScale[7]=r[3]},a.prototype.submitFrame=function(){var t=this.gl,r=this,a=[];if(window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||a.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),n(t,a,function(t){r.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),r.cullFace&&r.realDisable.call(t,t.CULL_FACE),r.depthTest&&r.realDisable.call(t,t.DEPTH_TEST),r.blend&&r.realDisable.call(t,t.BLEND),r.scissorTest&&r.realDisable.call(t,t.SCISSOR_TEST),r.stencilTest&&r.realDisable.call(t,t.STENCIL_TEST),r.realColorMask.call(t,!0,!0,!0,!0),r.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(r.ctxAttribs.alpha||o.isIOS())&&(r.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(r.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer),t.enableVertexAttribArray(r.attribs.position),t.enableVertexAttribArray(r.attribs.texCoord),t.vertexAttribPointer(r.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(r.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(r.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,r.renderTarget),t.uniform4fv(r.uniforms.viewportOffsetScale,r.viewportOffsetScale),t.drawElements(t.TRIANGLES,r.indexCount,t.UNSIGNED_SHORT,0),r.cardboardUI&&r.cardboardUI.renderNoState(),r.realBindFramebuffer.call(r.gl,t.FRAMEBUFFER,r.framebuffer),r.ctxAttribs.preserveDrawingBuffer||(r.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||r.realBindFramebuffer.call(t,t.FRAMEBUFFER,r.lastBoundFramebuffer),r.cullFace&&r.realEnable.call(t,t.CULL_FACE),r.depthTest&&r.realEnable.call(t,t.DEPTH_TEST),r.blend&&r.realEnable.call(t,t.BLEND),r.scissorTest&&r.realEnable.call(t,t.SCISSOR_TEST),r.stencilTest&&r.realEnable.call(t,t.STENCIL_TEST),r.realColorMask.apply(t,r.colorMask),r.realViewport.apply(t,r.viewport),(r.ctxAttribs.alpha||!r.ctxAttribs.preserveDrawingBuffer)&&r.realClearColor.apply(t,r.clearColor)}),o.isIOS()){var i=t.canvas;(i.width!=r.bufferWidth||i.height!=r.bufferHeight)&&(r.bufferWidth=i.width,r.bufferHeight=i.height,r.onResize())}},a.prototype.updateDeviceInfo=function(t){var r=this.gl,a=this,i=[r.ARRAY_BUFFER_BINDING,r.ELEMENT_ARRAY_BUFFER_BINDING];n(r,i,function(r){var i=a.computeMeshVertices_(a.meshWidth,a.meshHeight,t);if(r.bindBuffer(r.ARRAY_BUFFER,a.vertexBuffer),r.bufferData(r.ARRAY_BUFFER,i,r.STATIC_DRAW),!a.indexCount){var o=a.computeMeshIndices_(a.meshWidth,a.meshHeight);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a.indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,o,r.STATIC_DRAW),a.indexCount=o.length}})},a.prototype.computeMeshVertices_=function(a,n,l){for(var p=new Float32Array(5*(2*a*n)),c=l.getLeftEyeVisibleTanAngles(),m=l.getLeftEyeNoLensTanAngles(),g=l.getLeftEyeVisibleScreenRect(m),h=0,f=0;2>f;f++){for(var E=0;E<n;E++)for(var A=0;A<a;A++,h++){var i=A/(a-1),u=E/(n-1),v=i,s=u,t=o.lerp(c[0],c[2],i),x=o.lerp(c[3],c[1],u),y=M(t*t+x*x),d=l.distortion.distortInverse(y);i=(t*d/y-m[0])/(m[2]-m[0]),u=(x*d/y-m[3])/(m[1]-m[3]);l.device.widthMeters/l.device.heightMeters;i=2*(g.x+i*g.width-0.5),u=2*(g.y+u*g.height-0.5),p[5*h+0]=i,p[5*h+1]=u,p[5*h+2]=v,p[5*h+3]=s,p[5*h+4]=f}var r=c[2]-c[0];c[0]=-(r+c[0]),c[2]=r-c[2],r=m[2]-m[0],m[0]=-(r+m[0]),m[2]=r-m[2],g.x=1-(g.x+g.width)}return p},a.prototype.computeMeshIndices_=function(t,r){for(var a=new Uint16Array(6*(2*(t-1)*(r-1))),o=0,n=0,s=0;2>s;s++)for(var l=0;l<r;l++)for(var d=0;d<t;d++,o++)0!=d&&0!=l&&(d<=t/2==l<=r/2?(a[n++]=o,a[n++]=o-t-1,a[n++]=o-t,a[n++]=o-t-1,a[n++]=o,a[n++]=o-1):(a[n++]=o-1,a[n++]=o-t,a[n++]=o,a[n++]=o-t,a[n++]=o-1,a[n++]=o-t-1));return a},a.prototype.getOwnPropertyDescriptor_=function(t,r){var a=Object.getOwnPropertyDescriptor(t,r);return(void 0===a.get||void 0===a.set)&&(a.configurable=!0,a.enumerable=!0,a.get=function(){return this.getAttribute(r)},a.set=function(t){this.setAttribute(r,t)}),a},r.exports=a},{"./cardboard-ui.js":50,"./deps/wglu-preserve-state.js":52,"./util.js":68}],50:[function(t,r){function a(t){this.gl=t,this.attribs={position:0},this.program=i.linkProgram(t,n,s,this.attribs),this.uniforms=i.getProgramUniforms(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}var i=t("./util.js"),o=t("./deps/wglu-preserve-state.js"),n="attribute vec2 position;\nuniform mat4 projectionMat;\nvoid main() {\n  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );\n}",s="precision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}",d=L/180,p=60,c=12,u=20,m=1,g=0.75,h=0.3125,y=28,f=1.5;a.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},a.prototype.listen=function(t,r){var a=this.gl.canvas;this.listener=function(i){var o=a.clientWidth/2,n=y*f;i.clientX>o-n&&i.clientX<o+n&&i.clientY>a.clientHeight-n?t(i):i.clientX<n&&i.clientY<n&&r(i)},a.addEventListener("click",this.listener,!1)},a.prototype.onResize=function(){var t=this.gl,r=this,a=[t.ARRAY_BUFFER_BINDING];o(t,a,function(t){function a(t,a){var r=(90-t)*d,i=A(r),o=E(r);n.push(h*i*L+s,h*o*L+L),n.push(a*i*L+s,a*o*L+L)}function o(r,a){n.push(N+r,t.drawingBufferHeight-N-a)}var n=[],s=t.drawingBufferWidth/2,M=l(screen.width,screen.height)*window.devicePixelRatio,x=t.drawingBufferWidth/M,v=x*window.devicePixelRatio,T=4*v/2,b=y*f*v,L=y*v/2,N=(y*f-y)*v;n.push(s-T,b),n.push(s-T,t.drawingBufferHeight),n.push(s+T,b),n.push(s+T,t.drawingBufferHeight),r.gearOffset=n.length/2;for(var D=0,i;6>=D;D++)i=D*p,a(i,m),a(i+c,m),a(i+u,g),a(i+(p-u),g),a(i+(p-c),m);r.gearVertexCount=n.length/2-r.gearOffset,r.arrowOffset=n.length/2;var w=T/E(45*d);o(0,L),o(L,0),o(L+w,w),o(w,L+w),o(w,L-w),o(0,L),o(L,2*L),o(L+w,2*L-w),o(w,L-w),o(0,L),o(w,L-T),o(y*v,L-T),o(w,L+T),o(y*v,L+T),r.arrowVertexCount=n.length/2-r.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW)})},a.prototype.render=function(){var t=this.gl,r=this,a=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];o(t,a,function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),r.renderNoState()})},a.prototype.renderNoState=function(){var t=this.gl;t.useProgram(this.program),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.enableVertexAttribArray(this.attribs.position),t.vertexAttribPointer(this.attribs.position,2,t.FLOAT,!1,8,0),t.uniform4f(this.uniforms.color,1,1,1,1),i.orthoMatrix(this.projMat,0,t.drawingBufferWidth,0,t.drawingBufferHeight,0.1,1024),t.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.drawArrays(t.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),t.drawArrays(t.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},r.exports=a},{"./deps/wglu-preserve-state.js":52,"./util.js":68}],51:[function(t,r){function a(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=window.WebVRConfig.BUFFER_SCALE,this.poseSensor_=new d,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new s(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new n(this.dpdb_.getDeviceParams()),this.viewerSelector_=new c,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new p),g.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this))}var i=t("./cardboard-distorter.js"),o=t("./cardboard-ui.js"),n=t("./device-info.js"),s=t("./dpdb/dpdb.js"),d=t("./sensor-fusion/fusion-pose-sensor.js"),p=t("./rotate-instructions.js"),c=t("./viewer-selector.js"),u=t("./base.js").VRDisplay,g=t("./util.js"),h={LEFT:"left",RIGHT:"right"};a.prototype=new u,a.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},a.prototype.resetPose=function(){this.poseSensor_.resetPose()},a.prototype.getEyeParameters=function(t){var r=[0.5*this.deviceInfo_.viewer.interLensDistance,0,0],a;if(t==h.LEFT)r[0]*=-1,a=this.deviceInfo_.getFieldOfViewLeftEye();else if(t==h.RIGHT)a=this.deviceInfo_.getFieldOfViewRightEye();else return console.error("Invalid eye provided: %s",t),null;return{fieldOfView:a,offset:r,renderWidth:0.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},a.prototype.onDeviceParamsUpdated_=function(t){g.isDebug()&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},a.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},a.prototype.beginPresent_=function(){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2"));t&&(this.layer_.predistorted?!window.WebVRConfig.CARDBOARD_UI_DISABLED&&(t.canvas.width=g.getScreenWidth()*this.bufferScale_,t.canvas.height=g.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new o(t)):(this.distorter_=new i(t),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(t){this.viewerSelector_.show(this.layer_.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.rotateInstructions_&&(g.isLandscapeMode()&&g.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},a.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},a.prototype.submitFrame=function(){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;(t.width!=this.lastWidth||t.height!=this.lastHeight)&&this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},a.prototype.onOrientationChange_=function(){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},a.prototype.onResize_=function(){if(this.layer_){var t=this.layer_.source.getContext("webgl"),r=["position: absolute","top: 0","left: 0","width: "+l(screen.width,screen.height)+"px","height: "+m(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0","box-sizing: content-box"];t.canvas.setAttribute("style",r.join("; ")+";"),g.safariCssSizeWorkaround(t.canvas)}},a.prototype.onViewerChanged_=function(t){this.deviceInfo_.setViewer(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},a.prototype.fireVRDisplayDeviceParamsChange_=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(t)},r.exports=a},{"./base.js":48,"./cardboard-distorter.js":49,"./cardboard-ui.js":50,"./device-info.js":53,"./dpdb/dpdb.js":57,"./rotate-instructions.js":62,"./sensor-fusion/fusion-pose-sensor.js":64,"./util.js":68,"./viewer-selector.js":69}],52:[function(t,r){r.exports=function(t,r,a){if(!r)return void a(t);for(var o=[],n=null,s=0,i;s<r.length;++s)switch(i=r[s],i){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:var l=r[++s];if(l<t.TEXTURE0||l>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),o.push(null,null);break}n||(n=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(l),o.push(t.getParameter(i),null);break;case t.ACTIVE_TEXTURE:n=t.getParameter(t.ACTIVE_TEXTURE),o.push(null);break;default:o.push(t.getParameter(i));}a(t);for(var s=0;s<r.length;++s){var i=r[s],d=o[s];switch(i){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,d);break;case t.COLOR_CLEAR_VALUE:t.clearColor(d[0],d[1],d[2],d[3]);break;case t.COLOR_WRITEMASK:t.colorMask(d[0],d[1],d[2],d[3]);break;case t.CURRENT_PROGRAM:t.useProgram(d);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,d);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,d);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,d);break;case t.TEXTURE_BINDING_2D:var l=r[++s];if(l<t.TEXTURE0||l>t.TEXTURE31)break;t.activeTexture(l),t.bindTexture(t.TEXTURE_2D,d);break;case t.TEXTURE_BINDING_CUBE_MAP:var l=r[++s];if(l<t.TEXTURE0||l>t.TEXTURE31)break;t.activeTexture(l),t.bindTexture(t.TEXTURE_CUBE_MAP,d);break;case t.VIEWPORT:t.viewport(d[0],d[1],d[2],d[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:d?t.enable(i):t.disable(i);break;default:console.log("No GL restore behavior for 0x"+i.toString(16));}n&&t.activeTexture(n)}}},{}],53:[function(t,i){function o(t){this.width=t.width||u.getScreenWidth(),this.height=t.height||u.getScreenHeight(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}function s(t){this.viewer=y.CardboardV2,this.updateDeviceParams(t),this.distortion=new p(this.viewer.distortionCoefficients)}function d(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}var p=t("./distortion/distortion.js"),c=t("./math-util.js"),u=t("./util.js"),g=new o({widthMeters:0.11,heightMeters:0.062,bevelMeters:4e-3}),h=new o({widthMeters:0.1038,heightMeters:0.0584,bevelMeters:4e-3}),y={CardboardV1:new d({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:0.06,baselineLensDistance:0.035,screenLensDistance:0.042,distortionCoefficients:[0.441,0.156],inverseCoefficients:[-0.4410035,0.42756155,-0.4804439,0.5460139,-0.58821183,0.5733938,-0.48303202,0.33299083,-0.17573841,0.0651772,-0.01488963,0.001559834]}),CardboardV2:new d({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:0.064,baselineLensDistance:0.035,screenLensDistance:0.039,distortionCoefficients:[0.34,0.55],inverseCoefficients:[-0.33836704,-0.18162185,0.862655,-1.2462051,1.0560602,-0.58208317,0.21609078,-0.05444823,0.009177956,-0.0009904169,0.00006183535,-0.0000016981803]})};s.prototype.updateDeviceParams=function(t){this.device=this.determineDevice_(t)||this.device},s.prototype.getDevice=function(){return this.device},s.prototype.setViewer=function(t){this.viewer=t,this.distortion=new p(this.viewer.distortionCoefficients)},s.prototype.determineDevice_=function(t){if(!t)return u.isIOS()?(console.warn("Using fallback iOS device measurements."),h):(console.warn("Using fallback Android device measurements."),g);var r=0.0254,a=r/t.xdpi,i=r/t.ydpi,n=u.getScreenWidth(),s=u.getScreenHeight();return new o({widthMeters:a*n,heightMeters:i*s,bevelMeters:1e-3*t.bevelMm})},s.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,r=this.device,i=this.distortion,o=t.screenLensDistance,n=(r.widthMeters-t.interLensDistance)/2,s=t.interLensDistance/2,l=t.baselineLensDistance-r.bevelMeters,d=r.heightMeters-l,p=c.radToDeg*a(i.distort(n/o)),u=c.radToDeg*a(i.distort(s/o)),g=c.radToDeg*a(i.distort(l/o)),h=c.radToDeg*a(i.distort(d/o));return{leftDegrees:m(p,t.fov),rightDegrees:m(u,t.fov),downDegrees:m(g,t.fov),upDegrees:m(h,t.fov)}},s.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,a=this.device,i=this.distortion,o=r(-c.degToRad*t.fov),n=r(c.degToRad*t.fov),s=r(c.degToRad*t.fov),d=r(-c.degToRad*t.fov),p=a.widthMeters/4,u=a.heightMeters/2,g=t.baselineLensDistance-a.bevelMeters-u,h=t.interLensDistance/2-p,y=-g,f=t.screenLensDistance,M=i.distort((h-p)/f),x=i.distort((y+u)/f),E=i.distort((h+p)/f),v=i.distort((y-u)/f),A=new Float32Array(4);return A[0]=l(o,M),A[1]=m(n,x),A[2]=m(s,E),A[3]=l(d,v),A},s.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,a=this.device,i=this.distortion,o=new Float32Array(4),n=i.distortInverse(r(-c.degToRad*t.fov)),s=i.distortInverse(r(c.degToRad*t.fov)),d=i.distortInverse(r(c.degToRad*t.fov)),p=i.distortInverse(r(-c.degToRad*t.fov)),u=a.widthMeters/4,g=a.heightMeters/2,h=t.baselineLensDistance-a.bevelMeters-g,y=t.interLensDistance/2-u,f=-h,M=t.screenLensDistance;return o[0]=l(n,(y-u)/M),o[1]=m(s,(f+g)/M),o[2]=m(d,(y+u)/M),o[3]=l(p,(f-g)/M),o},s.prototype.getLeftEyeVisibleScreenRect=function(t){var r=this.viewer,a=this.device,i=r.screenLensDistance,o=(a.widthMeters-r.interLensDistance)/2,n=r.baselineLensDistance-a.bevelMeters,s=(t[0]*i+o)/a.widthMeters,l=(t[1]*i+n)/a.heightMeters,d=(t[2]*i+o)/a.widthMeters,p=(t[3]*i+n)/a.heightMeters;return{x:s,y:p,width:d-s,height:l-p}},s.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},s.prototype.getFieldOfViewRightEye=function(t){var r=this.getFieldOfViewLeftEye(t);return{leftDegrees:r.rightDegrees,rightDegrees:r.leftDegrees,upDegrees:r.upDegrees,downDegrees:r.downDegrees}},s.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.getUndistortedParams_();return{leftDegrees:c.radToDeg*a(t.outerDist),rightDegrees:c.radToDeg*a(t.innerDist),downDegrees:c.radToDeg*a(t.bottomDist),upDegrees:c.radToDeg*a(t.topDist)}},s.prototype.getUndistortedViewportLeftEye=function(){var t=this.getUndistortedParams_(),r=this.viewer,a=this.device,i=r.screenLensDistance,o=a.widthMeters/i,s=a.heightMeters/i,l=a.width/o,d=a.height/s,p=n((t.eyePosX-t.outerDist)*l),c=n((t.eyePosY-t.bottomDist)*d);return{x:p,y:c,width:n((t.eyePosX+t.innerDist)*l)-p,height:n((t.eyePosY+t.topDist)*d)-c}},s.prototype.getUndistortedParams_=function(){var t=this.viewer,a=this.device,i=this.distortion,o=t.screenLensDistance,n=t.interLensDistance/2/o,s=a.widthMeters/o,l=a.heightMeters/o,d=s/2-n,p=(t.baselineLensDistance-a.bevelMeters)/o,u=t.fov,g=i.distortInverse(r(c.degToRad*u)),h=m(d,g),y=m(n,g),f=m(p,g),M=m(l-p,g);return{outerDist:h,innerDist:y,topDist:M,bottomDist:f,eyePosX:d,eyePosY:p}},s.Viewers=y,i.exports=s},{"./distortion/distortion.js":55,"./math-util.js":59,"./util.js":68}],54:[function(t,r){function a(t){this.display=t,this.hardwareUnitId=t.displayId,this.deviceId="webvr-polyfill:HMD:"+t.displayId,this.deviceName=t.displayName+" (HMD)"}function i(t){this.display=t,this.hardwareUnitId=t.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+t.displayId,this.deviceName=t.displayName+" (PositionSensor)"}var o=t("./base.js").VRDisplay,n=t("./base.js").HMDVRDevice,s=t("./base.js").PositionSensorVRDevice;a.prototype=new n,a.prototype.getEyeParameters=function(t){var r=this.display.getEyeParameters(t);return{currentFieldOfView:r.fieldOfView,maximumFieldOfView:r.fieldOfView,minimumFieldOfView:r.fieldOfView,recommendedFieldOfView:r.fieldOfView,eyeTranslation:{x:r.offset[0],y:r.offset[1],z:r.offset[2]},renderRect:{x:"right"==t?r.renderWidth:0,y:0,width:r.renderWidth,height:r.renderHeight}}},a.prototype.setFieldOfView=function(){},i.prototype=new s,i.prototype.getState=function(){var t=this.display.getPose();return{position:t.position?{x:t.position[0],y:t.position[1],z:t.position[2]}:null,orientation:t.orientation?{x:t.orientation[0],y:t.orientation[1],z:t.orientation[2],w:t.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},i.prototype.resetState=function(){return this.positionDevice.resetPose()},r.exports.VRDisplayHMDDevice=a,r.exports.VRDisplayPositionSensorDevice=i},{"./base.js":48}],55:[function(t,r){function a(t){this.coefficients=t}a.prototype.distortInverse=function(t){for(var r=0,a=1,i=t-this.distort(r);1e-4<g(a-r);){var o=t-this.distort(a),n=a-o*((a-r)/(o-i));r=a,a=n,i=o}return a},a.prototype.distort=function(t){for(var r=0,a=0;a<this.coefficients.length;a++)r=t*t*(r+this.coefficients[a]);return(r+1)*t},r.exports=a},{}],56:[function(t,r){r.exports={format:1,last_updated:"2017-08-27T14:39:31Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1000},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1000},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1000},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1000},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1000},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1000},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1000},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1000},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1000},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1000},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1000}]}},{}],57:[function(t,r){function a(t,r){if(this.dpdb=o,this.recalculateDeviceParams_(),t){this.onDeviceParamsUpdated=r;var a=new XMLHttpRequest,i=this;a.open("GET",s,!0),a.addEventListener("load",function(){i.loading=!1,200<=a.status&&299>=a.status?(i.dpdb=JSON.parse(a.response),i.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),a.send()}}function i(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}var o=t("./dpdb.json"),n=t("../util.js"),s="https://dpdb.webvr.rocks/dpdb.json";a.prototype.getDeviceParams=function(){return this.deviceParams},a.prototype.recalculateDeviceParams_=function(){var t=this.calcDeviceParams_();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},a.prototype.calcDeviceParams_=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var r=navigator.userAgent||navigator.vendor||window.opera,a=n.getScreenWidth(),o=n.getScreenHeight();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var s=0,l;s<t.devices.length;s++){if(l=t.devices[s],!l.rules){console.warn("Device["+s+"] has no rules section.");continue}if("ios"!=l.type&&"android"!=l.type){console.warn("Device["+s+"] has invalid type.");continue}if(n.isIOS()==("ios"==l.type)){for(var d=!1,p=0,c;p<l.rules.length;p++)if(c=l.rules[p],this.matchRule_(c,r,a,o)){d=!0;break}if(d){var u=l.dpi[0]||l.dpi,m=l.dpi[1]||l.dpi;return new i({xdpi:u,ydpi:m,bevelMm:l.bw})}}}return console.warn("No DPDB device match."),null},a.prototype.matchRule_=function(t,r,a,i){if(!t.ua&&!t.res)return!1;if(t.ua&&0>r.indexOf(t.ua))return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var o=t.res[0],n=t.res[1];if(m(a,i)!=m(o,n)||l(a,i)!=l(o,n))return!1}return!0},r.exports=a},{"../util.js":68,"./dpdb.json":56}],58:[function(t){var r=t("./util.js"),a=t("./webvr-polyfill.js").WebVRPolyfill;window.WebVRConfig=r.extend({FORCE_ENABLE_VR:!1,K_FILTER:0.98,PREDICTION_TIME_S:0.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:0.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1,ALWAYS_APPEND_POLYFILL_DISPLAY:!1,GET_VR_DISPLAYS_TIMEOUT:1e3},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new a}:new a,window.WebVRPolyfill=a},{"./util.js":68,"./webvr-polyfill.js":71}],59:[function(t,r){var a=window.MathUtil||{};a.degToRad=L/180,a.radToDeg=180/L,a.Vector2=function(t,r){this.x=t||0,this.y=r||0},a.Vector2.prototype={constructor:a.Vector2,set:function(t,r){return this.x=t,this.y=r,this},copy:function(t){return this.x=t.x,this.y=t.y,this},subVectors:function(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}},a.Vector3=function(t,r,a){this.x=t||0,this.y=r||0,this.z=a||0},a.Vector3.prototype={constructor:a.Vector3,set:function(t,r,a){return this.x=t,this.y=r,this.z=a,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return M(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){this.multiplyScalar(1/t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var r=this.x,a=this.y,i=this.z,o=t.x,n=t.y,s=t.z,l=t.w,d=l*r+n*i-s*a,p=l*a+s*r-o*i,c=l*i+o*a-n*r,u=-o*r-n*a-s*i;return this.x=d*l+u*-o+p*-s-c*-n,this.y=p*l+u*-n+c*-o-d*-s,this.z=c*l+u*-s+d*-n-p*-o,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,r){var a=t.x,i=t.y,o=t.z,n=r.x,s=r.y,l=r.z;return this.x=i*l-o*s,this.y=o*n-a*l,this.z=a*s-i*n,this}},a.Quaternion=function(t,r,a,i){this.x=t||0,this.y=r||0,this.z=a||0,this.w=i===void 0?1:i},a.Quaternion.prototype={constructor:a.Quaternion,set:function(t,r,a,i){return this.x=t,this.y=r,this.z=a,this.w=i,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,r,a){var i=A(t/2),o=A(r/2),n=A(a/2),s=E(t/2),l=E(r/2),d=E(a/2);return this.x=s*o*n+i*l*d,this.y=i*l*n-s*o*d,this.z=i*o*d+s*l*n,this.w=i*o*n-s*l*d,this},setFromEulerYXZ:function(t,r,a){var i=A(t/2),o=A(r/2),n=A(a/2),s=E(t/2),l=E(r/2),d=E(a/2);return this.x=s*o*n+i*l*d,this.y=i*l*n-s*o*d,this.z=i*o*d-s*l*n,this.w=i*o*n+s*l*d,this},setFromAxisAngle:function(t,r){var a=r/2,i=E(a);return this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this.w=A(a),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,r){var a=t.x,i=t.y,o=t.z,n=t.w,s=r.x,l=r.y,d=r.z,p=r.w;return this.x=a*p+n*s+i*d-o*l,this.y=i*p+n*l+o*s-a*d,this.z=o*p+n*d+a*l-i*s,this.w=n*p-a*s-i*l-o*d,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=M(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this},slerp:function(r,a){if(0===a)return this;if(1===a)return this.copy(r);var t=this.x,i=this.y,n=this.z,s=this.w,l=s*r.w+t*r.x+i*r.y+n*r.z;if(0>l?(this.w=-r.w,this.x=-r.x,this.y=-r.y,this.z=-r.z,l=-l):this.copy(r),1<=l)return this.w=s,this.x=t,this.y=i,this.z=n,this;var d=o(l),p=M(1-l*l);if(1e-3>g(p))return this.w=0.5*(s+this.w),this.x=0.5*(t+this.x),this.y=0.5*(i+this.y),this.z=0.5*(n+this.z),this;var c=E((1-a)*d)/p,u=E(a*d)/p;return this.w=s*c+this.w*u,this.x=t*c+this.x*u,this.y=i*c+this.y*u,this.z=n*c+this.z*u,this},setFromUnitVectors:function(){var t,i;return function(r,o){return void 0===t&&(t=new a.Vector3),i=r.dot(o)+1,i<1e-6?(i=0,g(r.x)>g(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,o),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()},r.exports=a},{}],60:[function(t,r){function a(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new o.Quaternion,this.rotateStart_=new o.Vector2,this.rotateEnd_=new o.Vector2,this.rotateDelta_=new o.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}var i=t("./base.js").VRDisplay,o=t("./math-util.js"),n=t("./util.js"),s=0.15,l=80;a.prototype=new i,a.prototype.getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},a.prototype.onKeyDown_=function(t){38==t.keyCode?this.animatePhi_(this.phi_+s):39==t.keyCode?this.animateTheta_(this.theta_-s):40==t.keyCode?this.animatePhi_(this.phi_-s):37==t.keyCode&&this.animateTheta_(this.theta_+s)},a.prototype.animateTheta_=function(t){this.animateKeyTransitions_("theta_",t)},a.prototype.animatePhi_=function(t){t=n.clamp(t,-L/2,L/2),this.animateKeyTransitions_("phi_",t)},a.prototype.animateKeyTransitions_=function(t,r){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var a=this[t],i=new Date;this.angleAnimation_=requestAnimationFrame(function o(){var n=new Date-i;if(n>=l)return this[t]=r,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(o.bind(this));this[t]=a+(r-a)*(n/l)}.bind(this))},a.prototype.onMouseDown_=function(t){this.rotateStart_.set(t.clientX,t.clientY),this.isDragging_=!0},a.prototype.onMouseMove_=function(t){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var r=t.movementX||t.mozMovementX||0,a=t.movementY||t.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-r,this.rotateStart_.y-a)}else this.rotateEnd_.set(t.clientX,t.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*L*this.rotateDelta_.y/screen.height*0.3,this.theta_+=2*L*this.rotateDelta_.x/screen.width*0.5,this.phi_=n.clamp(this.phi_,-L/2,L/2)}},a.prototype.onMouseUp_=function(){this.isDragging_=!1},a.prototype.isPointerLocked_=function(){var t=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement;return t!==void 0},a.prototype.resetPose=function(){this.phi_=0,this.theta_=0},r.exports=a},{"./base.js":48,"./math-util.js":59,"./util.js":68}],61:[function(t){(function(r){"undefined"!==typeof r&&r.window&&(r.document=r.window.document,r.navigator=r.window.navigator),t("./main")}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{"./main":58}],62:[function(t,r){function a(){this.loadIcon_();var t=document.createElement("div"),r=t.style;r.position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var a=document.createElement("img");a.src=this.icon;var r=a.style;r.marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(a);var i=document.createElement("div"),r=i.style;r.textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",i.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(i);var o=document.createElement("div"),r=o.style;r.backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(o);var n=document.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var s=document.createElement("a");s.href="https://www.google.com/get/cardboard/get-cardboard/",s.innerHTML="get one",s.target="_blank";var r=s.style;r.float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",o.appendChild(n),o.appendChild(s),this.overlay=t,this.text=i,this.hide()}var i=t("./util.js");a.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var r=this.overlay.querySelector("img"),a=r.style;i.isLandscapeMode()?(a.width="20%",a.marginLeft="40%",a.marginTop="3%"):(a.width="50%",a.marginLeft="25%",a.marginTop="25%")},a.prototype.hide=function(){this.overlay.style.display="none"},a.prototype.showTemporarily=function(t,r){this.show(r),this.timer=setTimeout(this.hide.bind(this),t)},a.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},a.prototype.update=function(){this.disableShowTemporarily(),!i.isLandscapeMode()&&i.isMobile()?this.show():this.hide()},a.prototype.loadIcon_=function(){this.icon=i.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")},r.exports=a},{"./util.js":68}],63:[function(t,r){function a(t){this.kFilter=t,this.currentAccelMeasurement=new i,this.currentGyroMeasurement=new i,this.previousGyroMeasurement=new i,this.filterQ=n.isIOS()?new o.Quaternion(-1,0,0,1):new o.Quaternion(1,0,0,1),this.previousFilterQ=new o.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new o.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new o.Vector3,this.measuredGravity=new o.Vector3,this.gyroIntegralQ=new o.Quaternion}var i=t("./sensor-sample.js"),o=t("../math-util.js"),n=t("../util.js");a.prototype.addAccelMeasurement=function(t,r){this.currentAccelMeasurement.set(t,r)},a.prototype.addGyroMeasurement=function(t,r){this.currentGyroMeasurement.set(t,r);var a=r-this.previousGyroMeasurement.timestampS;n.isTimestampDeltaValid(a)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},a.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,r=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(r),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(r);var a=new o.Quaternion;a.copy(this.filterQ),a.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(a),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var i=new o.Quaternion;i.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),i.inverse(),n.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",o.radToDeg*n.getQuaternionAngle(i),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var s=new o.Quaternion;s.copy(this.filterQ),s.multiply(i),this.filterQ.slerp(s,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},a.prototype.getOrientation=function(){return this.filterQ},a.prototype.accelToQuaternion_=function(t){var r=new o.Vector3;r.copy(t),r.normalize();var a=new o.Quaternion;return a.setFromUnitVectors(new o.Vector3(0,0,-1),r),a.inverse(),a},a.prototype.gyroToQuaternionDelta_=function(t,r){var a=new o.Quaternion,i=new o.Vector3;return i.copy(t),i.normalize(),a.setFromAxisAngle(i,t.length()*r),a},r.exports=a},{"../math-util.js":59,"../util.js":68,"./sensor-sample.js":66}],64:[function(t,r){function a(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new s.Vector3,this.gyroscope=new s.Vector3,this.start(),this.filter=new i(window.WebVRConfig.K_FILTER),this.posePredictor=new o(window.WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new n,this.filterToWorldQ=new s.Quaternion,l.isIOS()?this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),L/2):this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),-L/2),this.inverseWorldToScreenQ=new s.Quaternion,this.worldToScreenQ=new s.Quaternion,this.originalPoseAdjustQ=new s.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new s.Vector3(0,0,1),-window.orientation*L/180),this.setScreenTransform_(),l.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new s.Quaternion,this.isFirefoxAndroid=l.isFirefoxAndroid(),this.isIOS=l.isIOS(),this.orientationOut_=new Float32Array(4)}var i=t("./complementary-filter.js"),o=t("./pose-predictor.js"),n=t("../touch-panner.js"),s=t("../math-util.js"),l=t("../util.js");a.prototype.getPosition=function(){return null},a.prototype.getOrientation=function(){var t=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(t,this.gyroscope,this.previousTimestampS);var r=new s.Quaternion;return r.copy(this.filterToWorldQ),r.multiply(this.resetQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||r.multiply(this.touchPanner.getOrientation()),r.multiply(this.predictedQ),r.multiply(this.worldToScreenQ),window.WebVRConfig.YAW_ONLY&&(r.x=0,r.z=0,r.normalize()),this.orientationOut_[0]=r.x,this.orientationOut_[1]=r.y,this.orientationOut_[2]=r.z,this.orientationOut_[3]=r.w,this.orientationOut_},a.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),l.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},a.prototype.onDeviceMotion_=function(t){this.updateDeviceMotion_(t)},a.prototype.updateDeviceMotion_=function(t){var r=t.accelerationIncludingGravity,a=t.rotationRate,i=t.timeStamp/1e3,o=i-this.previousTimestampS;return o<=l.MIN_TIMESTEP||o>l.MAX_TIMESTEP?(console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=i)):void(this.accelerometer.set(-r.x,-r.y,-r.z),this.gyroscope.set(a.alpha,a.beta,a.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(L/180),this.filter.addAccelMeasurement(this.accelerometer,i),this.filter.addGyroMeasurement(this.gyroscope,i),this.previousTimestampS=i)},a.prototype.onOrientationChange_=function(){this.setScreenTransform_()},a.prototype.onMessage_=function(t){var r=t.data;if(r&&r.type){var a=r.type.toLowerCase();"devicemotion"!==a||this.updateDeviceMotion_(r.deviceMotionEvent)}},a.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),-L/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),L/2);break;case 180:}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},a.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),l.isIOS()&&l.isInsideCrossDomainIFrame()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},a.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)},r.exports=a},{"../math-util.js":59,"../touch-panner.js":67,"../util.js":68,"./complementary-filter.js":63,"./pose-predictor.js":65}],65:[function(t,r){function a(t){this.predictionTimeS=t,this.previousQ=new i.Quaternion,this.previousTimestampS=null,this.deltaQ=new i.Quaternion,this.outQ=new i.Quaternion}var i=t("../math-util"),o=t("../util");a.prototype.getPrediction=function(t,r,a){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=a,t;var n=new i.Vector3;n.copy(r),n.normalize();var s=r.length();if(s<20*i.degToRad)return o.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(i.radToDeg*s).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var l=a-this.previousTimestampS,d=s*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(n,d),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=a,this.outQ},r.exports=a},{"../math-util":59,"../util":68}],66:[function(t,r){function a(t,r){this.set(t,r)}a.prototype.set=function(t,r){this.sample=t,this.timestampS=r},a.prototype.copy=function(t){this.set(t.sample,t.timestampS)},r.exports=a},{}],67:[function(t,r){function a(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new i.Vector2,this.rotateEnd=new i.Vector2,this.rotateDelta=new i.Vector2,this.theta=0,this.orientation=new i.Quaternion}var i=t("./math-util.js"),o=t("./util.js");a.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},a.prototype.resetSensor=function(){this.theta=0},a.prototype.onTouchStart_=function(t){t.touches&&1==t.touches.length&&(this.rotateStart.set(t.touches[0].pageX,t.touches[0].pageY),this.isTouching=!0)},a.prototype.onTouchMove_=function(t){if(this.isTouching){this.rotateEnd.set(t.touches[0].pageX,t.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),o.isIOS()&&(this.rotateDelta.x*=-1);var r=document.body;this.theta+=2*L*this.rotateDelta.x/r.clientWidth*0.5}},a.prototype.onTouchEnd_=function(){this.isTouching=!1},r.exports=a},{"./math-util.js":59,"./util.js":68}],68:[function(t,a){var i=window.Util||{};i.MIN_TIMESTEP=1e-3,i.MAX_TIMESTEP=1,i.base64=function(t,r){return"data:"+t+";base64,"+r},i.clamp=function(t,r,a){return m(l(r,t),a)},i.lerp=function(r,a,i){return r+(a-r)*i},i.race=function(t){return Promise.race?Promise.race(t):new Promise(function(r,a){for(var o=0;o<t.length;o++)t[o].then(r,a)})},i.isIOS=function(){var t=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return t}}(),i.isWebViewAndroid=function(){var t=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return t}}(),i.isSafari=function(){var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return t}}(),i.isFirefoxAndroid=function(){var t=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return t}}(),i.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},i.isTimestampDeltaValid=function(t){return!isNaN(t)&&!(t<=i.MIN_TIMESTEP)&&!(t>i.MAX_TIMESTEP)},i.getScreenWidth=function(){return l(window.screen.width,window.screen.height)*window.devicePixelRatio},i.getScreenHeight=function(){return m(window.screen.width,window.screen.height)*window.devicePixelRatio},i.requestFullscreen=function(t){if(i.isWebViewAndroid())return!1;if(t.requestFullscreen)t.requestFullscreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else if(t.msRequestFullscreen)t.msRequestFullscreen();else return!1;return!0},i.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else return!1;return!0},i.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},i.linkProgram=function(t,r,a,i){var o=t.createShader(t.VERTEX_SHADER);t.shaderSource(o,r),t.compileShader(o);var n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,a),t.compileShader(n);var s=t.createProgram();for(var l in t.attachShader(s,o),t.attachShader(s,n),i)t.bindAttribLocation(s,i[l],l);return t.linkProgram(s),t.deleteShader(o),t.deleteShader(n),s},i.getProgramUniforms=function(t,r){for(var a={},o=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n="",s=0,i;s<o;s++)i=t.getActiveUniform(r,s),n=i.name.replace("[0]",""),a[n]=t.getUniformLocation(r,n);return a},i.orthoMatrix=function(t,r,a,i,o,n,s){var l=1/(r-a),d=1/(i-o),p=1/(n-s);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*p,t[11]=0,t[12]=(r+a)*l,t[13]=(o+i)*d,t[14]=(s+n)*p,t[15]=1,t},i.copyArray=function(t,r){for(var a=0,i=t.length;a<i;a++)r[a]=t[a]},i.isMobile=function(){var t=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},i.extend=function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a]);return t},i.safariCssSizeWorkaround=function(t){if(i.isIOS()){var r=t.style.width,a=t.style.height;t.style.width=parseInt(r)+1+"px",t.style.height=parseInt(a)+"px",setTimeout(function(){t.style.width=r,t.style.height=a},100)}window.Util=i,window.canvas=t},i.isDebug=function(){return i.getQueryParameter("debug")},i.getQueryParameter=function(t){var t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+t+"=([^&#]*)"),a=r.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},i.frameDataFromPose=function(){function t(t,a,i,o){var n=r(a?a.upDegrees*s:l),d=r(a?a.downDegrees*s:l),p=r(a?a.leftDegrees*s:l),c=r(a?a.rightDegrees*s:l),u=2/(p+c),m=2/(n+d);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=m,t[6]=0,t[7]=0,t[8]=-(0.5*((p-c)*u)),t[9]=0.5*((n-d)*m),t[10]=o/(i-o),t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i/(i-o),t[15]=0,t}function a(t,r,a){var i=r[0],o=r[1],n=r[2],s=r[3],l=i+i,d=o+o,p=n+n,c=i*l,u=i*d,m=i*p,g=o*d,h=o*p,y=n*p,f=s*l,M=s*d,x=s*p;return t[0]=1-(g+y),t[1]=u+x,t[2]=m-M,t[3]=0,t[4]=u-x,t[5]=1-(c+y),t[6]=h+f,t[7]=0,t[8]=m+M,t[9]=h-f,t[10]=1-(c+g),t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function i(t,r,a){var i=a[0],o=a[1],n=a[2],s,l,d,p,c,u,m,g,h,y,f,M;return r===t?(t[12]=r[0]*i+r[4]*o+r[8]*n+r[12],t[13]=r[1]*i+r[5]*o+r[9]*n+r[13],t[14]=r[2]*i+r[6]*o+r[10]*n+r[14],t[15]=r[3]*i+r[7]*o+r[11]*n+r[15]):(s=r[0],l=r[1],d=r[2],p=r[3],c=r[4],u=r[5],m=r[6],g=r[7],h=r[8],y=r[9],f=r[10],M=r[11],t[0]=s,t[1]=l,t[2]=d,t[3]=p,t[4]=c,t[5]=u,t[6]=m,t[7]=g,t[8]=h,t[9]=y,t[10]=f,t[11]=M,t[12]=s*i+c*o+h*n+r[12],t[13]=l*i+u*o+y*n+r[13],t[14]=d*i+m*o+f*n+r[14],t[15]=p*i+g*o+M*n+r[15]),t}function o(t,r){var a=r[0],i=r[1],o=r[2],n=r[3],s=r[4],l=r[5],d=r[6],p=r[7],c=r[8],u=r[9],m=r[10],g=r[11],h=r[12],y=r[13],f=r[14],M=r[15],x=a*l-i*s,E=a*d-o*s,v=a*p-n*s,A=i*d-o*l,T=i*p-n*l,b=o*p-n*d,L=c*y-u*h,N=c*f-m*h,D=c*M-g*h,w=u*f-m*y,C=u*M-g*y,S=m*M-g*f,I=x*S-E*C+v*w+A*D-T*N+b*L;return I?(I=1/I,t[0]=(l*S-d*C+p*w)*I,t[1]=(o*C-i*S-n*w)*I,t[2]=(y*b-f*T+M*A)*I,t[3]=(m*T-u*b-g*A)*I,t[4]=(d*D-s*S-p*N)*I,t[5]=(a*S-o*D+n*N)*I,t[6]=(f*v-h*b-M*E)*I,t[7]=(c*b-m*v+g*E)*I,t[8]=(s*C-l*D+p*L)*I,t[9]=(i*D-a*C-n*L)*I,t[10]=(h*T-y*v+M*x)*I,t[11]=(u*v-c*T-g*x)*I,t[12]=(l*N-s*w-d*L)*I,t[13]=(a*w-i*N+o*L)*I,t[14]=(y*E-h*A-f*x)*I,t[15]=(c*A-u*E+m*x)*I,t):null}function n(r,n,s,l,c){t(r,l?l.fieldOfView:null,c.depthNear,c.depthFar);var u=s.orientation||d,m=s.position||p;a(n,u,m),l&&i(n,n,l.offset),o(n,n)}var s=L/180,l=0.25*L;var d=new Float32Array([0,0,0,1]),p=new Float32Array([0,0,0]);return function(t,r,a){return t&&r&&(t.pose=r,t.timestamp=r.timestamp,n(t.leftProjectionMatrix,t.leftViewMatrix,r,a.getEyeParameters("left"),a),n(t.rightProjectionMatrix,t.rightViewMatrix,r,a.getEyeParameters("right"),a),!0)}}(),i.isInsideCrossDomainIFrame=function(){var t=window.self!==window.top,r=i.getDomainFromUrl(document.referrer),a=i.getDomainFromUrl(window.location.href);return t&&r!==a},i.getDomainFromUrl=function(t){var r;return r=-1<t.indexOf("://")?t.split("/")[2]:t.split("/")[0],r=r.split(":")[0],r},a.exports=i},{}],69:[function(t,r){function a(){try{this.selectedKey=localStorage.getItem(s)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=n),this.dialog=this.createDialog_(i.Viewers),this.root=null,this.onChangeCallbacks_=[]}var i=t("./device-info.js"),o=t("./util.js"),n="CardboardV1",s="WEBVR_CARDBOARD_VIEWER";a.prototype.show=function(t){this.root=t,t.appendChild(this.dialog);var r=this.dialog.querySelector("#"+this.selectedKey);r.checked=!0,this.dialog.style.display="block"},a.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},a.prototype.getCurrentViewer=function(){return i.Viewers[this.selectedKey]},a.prototype.getSelectedKey_=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},a.prototype.onChange=function(t){this.onChangeCallbacks_.push(t)},a.prototype.fireOnChange_=function(t){for(var r=0;r<this.onChangeCallbacks_.length;r++)this.onChangeCallbacks_[r](t)},a.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!i.Viewers[this.selectedKey])return void console.error("ViewerSelector.onSave_: this should never happen!");this.fireOnChange_(i.Viewers[this.selectedKey]);try{localStorage.setItem(s,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()},a.prototype.createDialog_=function(t){var r=document.createElement("div");r.classList.add("webvr-polyfill-viewer-selector"),r.style.display="none";var a=document.createElement("div"),i=a.style;i.position="fixed",i.left=0,i.top=0,i.width="100%",i.height="100%",i.background="rgba(0, 0, 0, 0.3)",a.addEventListener("click",this.hide.bind(this));var o=280,n=document.createElement("div"),i=n.style;for(var s in i.boxSizing="border-box",i.position="fixed",i.top="24px",i.left="50%",i.marginLeft=-o/2+"px",i.width=o+"px",i.padding="24px",i.overflow="hidden",i.background="#fafafa",i.fontFamily="'Roboto', sans-serif",i.boxShadow="0px 5px 20px #666",n.appendChild(this.createH1_("Select your viewer")),t)n.appendChild(this.createChoice_(s,t[s].label));return n.appendChild(this.createButton_("Save",this.onSave_.bind(this))),r.appendChild(a),r.appendChild(n),r},a.prototype.createH1_=function(t){var r=document.createElement("h1"),a=r.style;return a.color="black",a.fontSize="20px",a.fontWeight="bold",a.marginTop=0,a.marginBottom="24px",r.innerHTML=t,r},a.prototype.createChoice_=function(t,r){var a=document.createElement("div");a.style.marginTop="8px",a.style.color="black";var i=document.createElement("input");i.style.fontSize="30px",i.setAttribute("id",t),i.setAttribute("type","radio"),i.setAttribute("value",t),i.setAttribute("name","field");var o=document.createElement("label");return o.style.marginLeft="4px",o.setAttribute("for",t),o.innerHTML=r,a.appendChild(i),a.appendChild(o),a},a.prototype.createButton_=function(t,r){var a=document.createElement("button");a.innerHTML=t;var i=a.style;return i.float="right",i.textTransform="uppercase",i.color="#1094f7",i.fontSize="14px",i.letterSpacing=0,i.border=0,i.background="none",i.marginTop="16px",a.addEventListener("click",r),a},r.exports=a},{"./device-info.js":53,"./util.js":68}],70:[function(t,r){function a(){function t(t,r,a){var i=document.createElement("source");i.src=a,i.type="video/"+r,t.appendChild(i)}var r=document.createElement("video");r.setAttribute("loop",""),t(r,"webm",o.base64("video/webm","GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=")),t(r,"mp4",o.base64("video/mp4","AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==")),this.request=function(){r.paused&&r.play()},this.release=function(){r.pause()}}function i(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){t&&(clearInterval(t),t=null)}}var o=t("./util.js");r.exports=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return t.match(/iPhone/i)||t.match(/iPod/i)?i:a}()},{"./util.js":68}],71:[function(t,r){function a(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeGetVRDisplaysFunc=this.nativeWebVRAvailable?navigator.getVRDisplays:null,this.nativeLegacyWebVRAvailable||this.nativeWebVRAvailable||(this.enablePolyfill(),window.WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill()),i()}function i(){"VRDisplay"in window&&!("VRFrameData"in window)&&(window.VRFrameData=d,!("depthNear"in window.VRDisplay.prototype)&&(window.VRDisplay.prototype.depthNear=0.01),!("depthFar"in window.VRDisplay.prototype)&&(window.VRDisplay.prototype.depthFar=1e4),window.VRDisplay.prototype.getFrameData=function(t){return o.frameDataFromPose(t,this.getPose(),this)})}var o=t("./util.js"),n=t("./cardboard-vr-display.js"),s=t("./mouse-keyboard-vr-display.js"),l=t("./base.js").VRDisplay,d=t("./base.js").VRFrameData,p=t("./base.js").HMDVRDevice,c=t("./base.js").PositionSensorVRDevice,u=t("./display-wrappers.js").VRDisplayHMDDevice,m=t("./display-wrappers.js").VRDisplayPositionSensorDevice,g=t("../package.json").version;a.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},a.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},a.prototype.connectDisplay=function(t){t.fireVRDisplayConnect_(),this.displays.push(t)},a.prototype.populateDevices=function(){if(!this.devicesPopulated){var t=null;this.isCardboardCompatible()&&(t=new n,this.connectDisplay(t),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new u(t)),this.devices.push(new m(t)))),this.isMobile()||window.WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(t=new s,this.connectDisplay(t),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new u(t)),this.devices.push(new m(t)))),this.devicesPopulated=!0}},a.prototype.enablePolyfill=function(){if(navigator.getVRDisplays=this.getVRDisplays.bind(this),this.nativeWebVRAvailable&&window.VRFrameData){var t=window.VRFrameData,r=new window.VRFrameData,a=window.VRDisplay.prototype.getFrameData;window.VRFrameData=d,window.VRDisplay.prototype.getFrameData=function(i){return i instanceof t?void a.call(this,i):void(a.call(this,r),i.pose=r.pose,o.copyArray(r.leftProjectionMatrix,i.leftProjectionMatrix),o.copyArray(r.rightProjectionMatrix,i.rightProjectionMatrix),o.copyArray(r.leftViewMatrix,i.leftViewMatrix),o.copyArray(r.rightViewMatrix,i.rightViewMatrix))}}if(window.VRDisplay=l,navigator&&"undefined"===typeof navigator.vrEnabled){var i=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return i.isCardboardCompatible()&&(i.isFullScreenAvailable()||o.isIOS())}})}"VRFrameData"in window||(window.VRFrameData=d)},a.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=p,window.PositionSensorVRDevice=c},a.prototype.getVRDisplays=function(){this.populateDevices();var t=this.displays;if(!this.nativeWebVRAvailable)return Promise.resolve(t);var r=this.nativeGetVRDisplaysFunc.call(navigator),a=new Promise(function(t){i=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),t([])},window.WebVRConfig.GET_VR_DISPLAYS_TIMEOUT)}),i;return o.race([r,a]).then(function(r){return clearTimeout(i),window.WebVRConfig.ALWAYS_APPEND_POLYFILL_DISPLAY?r.concat(t):0<r.length?r:t})},a.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var t=this;return new Promise(function(r,a){try{if(!t.devicesPopulated){if(t.nativeWebVRAvailable)return navigator.getVRDisplays(function(a){for(var o=0;o<a.length;++o)t.devices.push(new u(a[o])),t.devices.push(new m(a[o]));t.devicesPopulated=!0,r(t.devices)},a);if(t.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(a){for(var o=0;o<a.length;++o)a[o]instanceof p&&t.devices.push(a[o]),a[o]instanceof c&&t.devices.push(a[o]);t.devicesPopulated=!0,r(t.devices)},a)}t.populateDevices(),r(t.devices)}catch(t){a(t)}})},a.prototype.NativeVRFrameData=window.VRFrameData,a.prototype.isMobile=function(){return /Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},a.prototype.isCardboardCompatible=function(){return this.isMobile()||window.WebVRConfig.FORCE_ENABLE_VR},a.prototype.isFullScreenAvailable=function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||!1};a.InstallWebVRSpecShim=i,a.version=g,r.exports.WebVRPolyfill=a},{"../package.json":47,"./base.js":48,"./cardboard-vr-display.js":51,"./display-wrappers.js":54,"./mouse-keyboard-vr-display.js":60,"./util.js":68}],72:[function(r,a){function i(t,r,a,i){var o=t.indexOf(r,a);return-1===o||o>i?i:o}function o(t){return u.test(t)}function n(t,r,a,o,n){for(var s=[],l=a,d=a;d<o&&d<r.length;d++){var i=r.charAt(d),c=p.test(i);if(c||d===o-1){var u=c?d:d+1,m=t(r,l,u,n);s.push(m),l=d+1}}return s}function s(r,a,n,s,l,d){var p=[],u=l;for("nowrap"===d&&(u=t);n<s&&n<a.length;){for(var m=i(a,c,n,s);n<m&&!!o(a.charAt(n));)n++;var g=r(a,n,m,u),h=n+(g.end-g.start),y=h+c.length;if(h<m){for(;h>n&&!o(a.charAt(h));)h--;if(h===n)y>n+c.length&&y--,h=y;else for(y=h;h>n&&!!o(a.charAt(h-c.length));)h--}if(h>=n){var f=r(a,n,h,u);p.push(f)}n=y}return p}function d(t,r,a,i){var o=m(i,a-r);return{start:r,end:r+o}}var p=/\n/,c="\n",u=/\s/;a.exports=function(t,r){var i=a.exports.lines(t,r);return i.map(function(r){return t.substring(r.start,r.end)}).join("\n")},a.exports.lines=function(r,a){if(a=a||{},0===a.width&&"nowrap"!==a.mode)return[];r=r||"";var i="number"===typeof a.width?a.width:t,o=l(0,a.start||0),p="number"===typeof a.end?a.end:r.length,c=a.mode,u=a.measure||d;return"pre"===c?n(u,r,o,p,i):s(u,r,o,p,i,c)}},{}],73:[function(t,r){"use strict";function a(t){for(var r in t)if(t.hasOwnProperty(r))return!1;return!0}function i(t,r,a){var i=t;return d(r)?(a=r,"string"===typeof t&&(i={uri:t})):i=c(r,{uri:t}),i.callback=a,i}function o(t,r,a){return r=i(t,r,a),n(r)}function n(t){function r(){var t;if(t=c.response?c.response:c.responseText||s(c),f)try{t=JSON.parse(t)}catch(t){}return t}function i(t){return clearTimeout(v),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,d(t,M)}function n(){if(!E){var a;clearTimeout(v),a=t.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var i=M,o=null;return 0===a?o=new Error("Internal XMLHttpRequest Error"):(i={body:r(),statusCode:a,method:m,headers:{},url:u,rawRequest:c},c.getAllResponseHeaders&&(i.headers=p(c.getAllResponseHeaders()))),d(o,i,i.body)}}if("undefined"===typeof t.callback)throw new Error("callback argument missing");var l=!1,d=function(r,a,i){l||(l=!0,t.callback(r,a,i))},c=t.xhr||null;c||(t.cors||t.useXDR?c=new o.XDomainRequest:c=new o.XMLHttpRequest);var u=c.url=t.uri||t.url,m=c.method=t.method||"GET",g=t.body||t.data,h=c.headers=t.headers||{},y=!!t.sync,f=!1,M={body:void 0,headers:{},statusCode:0,method:m,url:u,rawRequest:c},x,E,v;if("json"in t&&!1!==t.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),g=JSON.stringify(!0===t.json?g:t.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(n,0)},c.onload=n,c.onerror=i,c.onprogress=function(){},c.onabort=function(){E=!0},c.ontimeout=i,c.open(m,u,!y,t.username,t.password),y||(c.withCredentials=!!t.withCredentials),!y&&0<t.timeout&&(v=setTimeout(function(){if(!E){E=!0,c.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",i(t)}},t.timeout)),c.setRequestHeader)for(x in h)h.hasOwnProperty(x)&&c.setRequestHeader(x,h[x]);else if(t.headers&&!a(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(c.responseType=t.responseType),"beforeSend"in t&&"function"===typeof t.beforeSend&&t.beforeSend(c),c.send(g||null),c}function s(t){if("document"===t.responseType)return t.responseXML;var r=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||r?null:t.responseXML}var l=t("global/window"),d=t("is-function"),p=t("parse-headers"),c=t("xtend");r.exports=o,o.XMLHttpRequest=l.XMLHttpRequest||function(){},o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:l.XDomainRequest,function(t,r){for(var a=0;a<t.length;a++)r(t[a])}(["get","put","post","patch","head","delete"],function(t){o["delete"===t?"del":t]=function(r,a,o){return a=i(r,a,o),a.method=t.toUpperCase(),n(a)}})},{"global/window":17,"is-function":21,"parse-headers":31,xtend:75}],74:[function(t,r){r.exports=function(){return"undefined"===typeof self.DOMParser?"undefined"!==typeof self.ActiveXObject&&new self.ActiveXObject("Microsoft.XMLDOM")?function(t){var r=new self.ActiveXObject("Microsoft.XMLDOM");return r.async="false",r.loadXML(t),r}:function(t){var r=document.createElement("div");return r.innerHTML=t,r}:function(t){var r=new self.DOMParser;return r.parseFromString(t,"application/xml")}}()},{}],75:[function(t,r){r.exports=function(){for(var t={},r=0,i;r<arguments.length;r++)for(var o in i=arguments[r],i)a.call(i,o)&&(t[o]=i[o]);return t};var a=Object.prototype.hasOwnProperty},{}],76:[function(t,r){r.exports={name:"aframe",version:"0.7.1",description:"A web framework for building virtual reality experiences.",homepage:"https://aframe.io/",main:"dist/aframe-master.js",scripts:{browserify:"browserify src/index.js -s 'AFRAME' -p browserify-derequire",build:"shx mkdir -p build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js",codecov:"codecov",dev:"npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify",dist:"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"npm run browserify -s -- --debug | exorcist dist/aframe-v0.7.1.js.map > dist/aframe-v0.7.1.js","dist:min":"npm run browserify -s -- --debug -p [minifyify --map aframe-v0.7.1.min.js.map --output dist/aframe-v0.7.1.min.js.map] -o dist/aframe-v0.7.1.min.js",docs:"markserv --dir docs --port 9001",preghpages:"node ./scripts/preghpages.js",ghpages:"ghpages -p gh-pages/",lint:"semistandard -v | snazzy","lint:fix":"semistandard --fix",precommit:"npm run lint",prerelease:"node scripts/release.js 0.6.1 0.7.0",start:"npm run dev",test:"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:node":"mocha --ui tdd tests/node"},repository:"aframevr/aframe",license:"MIT",dependencies:{"@tweenjs/tween.js":"^16.8.0","browserify-css":"^0.8.2",debug:"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","document-register-element":"dmarcos/document-register-element#8ccc532b7",envify:"^3.4.1","load-bmfont":"^1.2.3","object-assign":"^4.0.1",present:"0.0.6","promise-polyfill":"^3.1.0","style-attr":"^1.0.2",three:"^0.87.0","three-bmfont-text":"^2.1.0","webvr-polyfill":"^0.9.36"},devDependencies:{browserify:"^13.1.0","browserify-derequire":"^0.9.4","browserify-istanbul":"^2.0.0",budo:"^9.2.0",chai:"^3.5.0","chai-shallow-deep-equal":"^1.4.0",chalk:"^1.1.3",codecov:"^1.0.1","cross-env":"^5.0.1",exorcist:"^0.4.0",ghpages:"0.0.8","git-rev":"^0.2.1",glob:"^7.1.1",husky:"^0.11.7",istanbul:"^0.4.5",jsdom:"^9.11.0",karma:"1.4.1","karma-browserify":"^5.1.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^1.0.0","karma-mocha":"^1.1.1","karma-mocha-reporter":"^2.1.0","karma-sinon-chai":"1.2.4",lolex:"^1.5.1",markserv:"0.0.20",minifyify:"^7.3.3",mocha:"^3.0.2","mozilla-download":"^1.1.1","replace-in-file":"^2.5.3",semistandard:"^9.0.0",shelljs:"^0.7.7",shx:"^0.2.2",sinon:"^1.17.5","sinon-chai":"2.8.0",snazzy:"^5.0.0","too-wordy":"ngokevin/too-wordy",uglifyjs:"^2.4.10","write-good":"^0.9.1"},link:!0,browserify:{transform:["browserify-css","envify"]},semistandard:{ignore:["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},keywords:["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","web-components","webvr"],"browserify-css":{minify:!0},engines:{node:">= 4.6.0",npm:"^2.15.9"}}},{}],77:[function(t,r){var a=t("../core/component").registerComponent,i=t("../lib/three"),o=t("../utils/"),n=o.bind,s=o.device.checkHasPositionalTracking;r.exports.Component=a("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:5e-3,min:0},userHeight:{default:0,min:0},zoom:{default:1,min:0}},init:function(){var t=this.el,r=t.sceneEl,a;this.savedPose=null,a=this.camera=new i.PerspectiveCamera,t.setObject3D("camera",a),this.onEnterVR=n(this.onEnterVR,this),this.onExitVR=n(this.onExitVR,this),r.addEventListener("enter-vr",this.onEnterVR),r.addEventListener("exit-vr",this.onExitVR)},update:function(t){var r=this.el,a=this.data,i=this.camera,o=this.system;this.addHeightOffset(t.userHeight),i.aspect=a.aspect||window.innerWidth/window.innerHeight,i.far=a.far,i.fov=a.fov,i.near=a.near,i.zoom=a.zoom,i.updateProjectionMatrix();t&&t.active===a.active||(a.active&&o.activeCameraEl!==r?o.setActiveCamera(r):!a.active&&o.activeCameraEl===r&&o.disableActiveCamera())},remove:function(){var t=this.el.sceneEl;this.el.removeObject3D("camera"),t.removeEventListener("enter-vr",this.onEnterVR),t.removeEventListener("exit-vr",this.onExitVR)},onEnterVR:function(){this.saveCameraPose(),this.removeHeightOffset()},onExitVR:function(){this.restoreCameraPose()},addHeightOffset:function(t){var r=this.el,a=this.data.userHeight,i;t=t||0,i=r.getAttribute("position")||{x:0,y:0,z:0},r.setAttribute("position",{x:i.x,y:i.y-t+a,z:i.z})},removeHeightOffset:function(){var t=this.el,r=this.data.userHeight,a,i;i=this.hasPositionalTracking===void 0?s():this.hasPositionalTracking;r&&i&&(a=t.getAttribute("position")||{x:0,y:0,z:0},t.setAttribute("position",{x:a.x,y:a.y-r,z:a.z}))},saveCameraPose:function(){var t=this.el,r=this.hasPositionalTracking===void 0?s():this.hasPositionalTracking;this.savedPose||!r||(this.savedPose={position:t.getAttribute("position"),rotation:t.getAttribute("rotation")})},restoreCameraPose:function(){var t=this.el,r=this.savedPose,a=this.hasPositionalTracking===void 0?s():this.hasPositionalTracking;r&&a&&(t.setAttribute("position",r.position),t.setAttribute("rotation",r.rotation),this.savedPose=null)}})},{"../core/component":125,"../lib/three":173,"../utils/":195}],78:[function(t,r){var a=t("../core/component").registerComponent,i=t("../lib/three");r.exports.Component=a("collada-model",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new i.ColladaLoader,this.loader.options.convertUpAxis=!0},update:function(){var t=this,r=this.el,a=this.data;a&&(this.remove(),this.loader.load(a,function(a){t.model=a.scene,r.setObject3D("mesh",t.model),r.emit("model-loaded",{format:"collada",model:t.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":125,"../lib/three":173}],79:[function(t,r){var a=t("../core/component").registerComponent,i=t("../utils/"),o=i.bind,n={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},s={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},l={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]};r.exports.Component=a("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:i.device.isMobile()},fuseTimeout:{default:1500,min:0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity"]}},init:function(){var t=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersection=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.updateCanvasBounds=i.debounce(function(){t.canvasBounds=t.el.sceneEl.canvas.getBoundingClientRect()},200),this.onCursorDown=o(this.onCursorDown,this),this.onCursorUp=o(this.onCursorUp,this),this.onIntersection=o(this.onIntersection,this),this.onIntersectionCleared=o(this.onIntersectionCleared,this),this.onMouseMove=o(this.onMouseMove,this)},update:function(t){this.data.rayOrigin===t.rayOrigin||this.updateMouseEventListeners()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var t=this.el;t.removeState(s.HOVERING),t.removeState(s.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(s.HOVERED),this.removeEventListeners()},addEventListeners:function(){function t(){o=a.sceneEl.canvas,l.DOWN.forEach(function(t){o.addEventListener(t,i.onCursorDown)}),l.UP.forEach(function(t){o.addEventListener(t,i.onCursorUp)})}var r=this.data,a=this.el,i=this,o;o=a.sceneEl.canvas,o?t():a.sceneEl.addEventListener("render-target-loaded",t),r.downEvents.forEach(function(t){a.addEventListener(t,i.onCursorDown)}),r.upEvents.forEach(function(t){a.addEventListener(t,i.onCursorUp)}),a.addEventListener("raycaster-intersection",this.onIntersection),a.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),window.addEventListener("resize",this.updateCanvasBounds)},removeEventListeners:function(){var t=this.data,r=this.el,a=this,i;i=r.sceneEl.canvas,i&&(l.DOWN.forEach(function(t){i.removeEventListener(t,a.onCursorDown)}),l.UP.forEach(function(t){i.removeEventListener(t,a.onCursorUp)})),t.downEvents.forEach(function(t){r.removeEventListener(t,a.onCursorDown)}),t.upEvents.forEach(function(t){r.removeEventListener(t,a.onCursorUp)}),r.removeEventListener("raycaster-intersection",this.onIntersection),r.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("resize",this.updateCanvasBounds)},updateMouseEventListeners:function(){var t=this.el;window.removeEventListener("mousemove",this.onMouseMove),t.setAttribute("raycaster","useWorldCoordinates",!1);"mouse"!==this.data.rayOrigin||(window.addEventListener("mousemove",this.onMouseMove,!1),t.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var t=new THREE.Vector2,r=new THREE.Vector3,a=new THREE.Vector3,i={origin:r,direction:a};return function(o){var n=this.el.sceneEl.camera;n.parent.updateMatrixWorld(),n.updateMatrixWorld();var s=this.canvasBounds,l=o.clientX-s.left,d=o.clientY-s.top;t.x=2*(l/s.width)-1,t.y=2*-(d/s.height)+1,r.setFromMatrixPosition(n.matrixWorld),a.set(t.x,t.y,0.5).unproject(n).sub(r).normalize(),this.el.setAttribute("raycaster",i)}}(),onCursorDown:function(){this.twoWayEmit(n.MOUSEDOWN),this.cursorDownEl=this.intersectedEl},onCursorUp:function(){this.twoWayEmit(n.MOUSEUP),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&this.cursorDownEl.emit(n.MOUSEUP,{cursorEl:this.el,intersection:null}),!this.data.fuse&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(n.CLICK),this.cursorDownEl=null},onIntersection:function(t){var r=this,a=this.el,i=this.data,o,l,d;if(o=t.detail.els[0]===a?1:0,d=t.detail.intersections[o],l=t.detail.els[o],!!l){if(this.intersectedEl===l)return void(this.intersection=d);this.intersectedEl&&this.clearCurrentIntersection(),this.intersection=d,this.intersectedEl=l,a.addState(s.HOVERING),l.addState(s.HOVERED),r.twoWayEmit(n.MOUSEENTER),0!==i.fuseTimeout&&i.fuse&&(a.addState(s.FUSING),this.twoWayEmit(n.FUSING),this.fuseTimeout=setTimeout(function(){a.removeState(s.FUSING),r.twoWayEmit(n.CLICK)},i.fuseTimeout))}},onIntersectionCleared:function(t){var r=this.el,a=t.detail.el;r===a||a!==this.intersectedEl||this.clearCurrentIntersection()},clearCurrentIntersection:function(){var t=this.el;this.intersectedEl.removeState(s.HOVERED),t.removeState(s.HOVERING),t.removeState(s.FUSING),this.twoWayEmit(n.MOUSELEAVE),this.intersection=null,this.intersectedEl=null,clearTimeout(this.fuseTimeout)},twoWayEmit:function(t){var r=this.el,a=this.intersectedEl,i=this.intersection;r.emit(t,{intersectedEl:a,intersection:i});a&&a.emit(t,{cursorEl:r,intersection:i})}})},{"../core/component":125,"../utils/":195}],80:[function(t,r){var a=t("../core/component").registerComponent,i=t("../utils/bind"),o=t("../utils/tracked-controls").checkControllerPresentAndSetup,n=t("../utils/tracked-controls").emitIfAxesChanged,s="https://cdn.aframe.io/controllers/google/",l="Daydream Controller";r.exports.Component=a("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},rotationOffset:{default:0},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=i(this.removeControllersUpdateListener,this),this.onAxisMoved=i(this.onAxisMoved,this),this.onGamepadConnectionEvent=i(this.onGamepadConnectionEvent,this)},init:function(){var t=this;this.animationActive="pointing",this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(r){t.onButtonEvent(r.detail.id,"down")},this.onButtonUp=function(r){t.onButtonEvent(r.detail.id,"up")},this.onButtonTouchStart=function(r){t.onButtonEvent(r.detail.id,"touchstart")},this.onButtonTouchEnd=function(r){t.onButtonEvent(r.detail.id,"touchend")},this.onAxisMoved=i(this.onAxisMoved,this),this.controllerPresent=!1,this.everGotGamepadEvent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=o,this.emitIfAxesChanged=n},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,l,{hand:this.data.hand})},onGamepadConnectionEvent:function(){this.everGotGamepadEvent=!0,this.checkIfControllerPresent()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener(),window.addEventListener("gamepadconnected",this.onGamepadConnectionEvent,!1),window.addEventListener("gamepaddisconnected",this.onGamepadConnectionEvent,!1)},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener(),window.removeEventListener("gamepadconnected",this.onGamepadConnectionEvent,!1),window.removeEventListener("gamepaddisconnected",this.onGamepadConnectionEvent,!1)},injectTrackedControls:function(){var t=this.el,r=this.data;t.setAttribute("tracked-controls",{armModel:r.armModel,hand:r.hand,idPrefix:l,rotationOffset:r.rotationOffset});this.data.model&&this.el.setAttribute("obj-model",{obj:s+"vr_controller_daydream.obj",mtl:s+"vr_controller_daydream.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.everGotGamepadEvent||this.checkIfControllerPresent()},onModelLoaded:function(t){var r=t.detail.model,a;this.data.model&&(a=this.buttonMeshes={},a.menu=r.getObjectByName("AppButton_AppButton_Cylinder.004"),a.system=r.getObjectByName("HomeButton_HomeButton_Cylinder.005"),a.trackpad=r.getObjectByName("TouchPad_TouchPad_Cylinder.003"),r.position.set(0,0,-0.04))},onAxisMoved:function(t){this.emitIfAxesChanged(this,this.mapping.axes,t)},onButtonChanged:function(t){var r=this.mapping.buttons[t.detail.id];r&&this.el.emit(r+"changed",t.detail.state)},onButtonEvent:function(t,r){var a=this.mapping.buttons[t],o;if(Array.isArray(a))for(o=0;o<a.length;o++)this.el.emit(a[o]+r);else this.el.emit(a+r);this.updateModel(a,r)},updateModel:function(t,r){var a;if(this.data.model)if(Array.isArray(t))for(a=0;a<t.length;a++)this.updateButtonModel(t[a],r);else this.updateButtonModel(t,r)},updateButtonModel:function(t,r){var a=this.buttonMeshes;if(a&&a[t]){var i;i="down"===r?this.data.buttonHighlightColor:"touchstart"===r?this.data.buttonTouchedColor:this.data.buttonColor,a[t].material.color.set(i)}}})},{"../core/component":125,"../utils/bind":189,"../utils/tracked-controls":199}],81:[function(t,r){var a=t("../core/component").registerComponent,i=t("../utils/bind"),o=t("../utils/tracked-controls").checkControllerPresentAndSetup,n=t("../utils/tracked-controls").emitIfAxesChanged,s="https://cdn.aframe.io/controllers/samsung/",l="Gear VR";r.exports.Component=a("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},rotationOffset:{default:0},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=i(this.removeControllersUpdateListener,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var t=this;this.animationActive="pointing",this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(r){t.onButtonEvent(r.detail.id,"down")},this.onButtonUp=function(r){t.onButtonEvent(r.detail.id,"up")},this.onButtonTouchStart=function(r){t.onButtonEvent(r.detail.id,"touchstart")},this.onButtonTouchEnd=function(r){t.onButtonEvent(r.detail.id,"touchend")},this.onAxisMoved=i(this.onAxisMoved,this),this.controllerPresent=!1,this.everGotGamepadEvent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=o,this.emitIfAxesChanged=n},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,l,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.el,r=this.data;t.setAttribute("tracked-controls",{armModel:r.armModel,idPrefix:l,rotationOffset:r.rotationOffset});this.data.model&&this.el.setAttribute("obj-model",{obj:s+"gear_vr_controller.obj",mtl:s+"gear_vr_controller.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(t){var r=t.detail.model,a;this.data.model&&(a=this.buttonMeshes={},a.trigger=r.getObjectByName("Trigger"),a.trackpad=r.getObjectByName("Touchpad"))},onButtonChanged:function(t){var r=this.mapping.buttons[t.detail.id];r&&this.el.emit(r+"changed",t.detail.state)},onButtonEvent:function(t,r){var a=this.mapping.buttons[t],o;if(Array.isArray(a))for(o=0;o<a.length;o++)this.el.emit(a[o]+r);else this.el.emit(a+r);this.updateModel(a,r)},onAxisMoved:function(t){this.emitIfAxesChanged(this,this.mapping.axes,t)},updateModel:function(t,r){var a;if(this.data.model)if(Array.isArray(t))for(a=0;a<t.length;a++)this.updateButtonModel(t[a],r);else this.updateButtonModel(t,r)},updateButtonModel:function(t,r){var a=this.buttonMeshes;if(a&&a[t]){var i;i="down"===r?this.data.buttonHighlightColor:"touchstart"===r?this.data.buttonTouchedColor:this.data.buttonColor,a[t].material.color.set(i)}}})},{"../core/component":125,"../utils/bind":189,"../utils/tracked-controls":199}],82:[function(t,r){var a=t("../utils/debug"),i=t("../core/geometry").geometries,o=t("../core/geometry").geometryNames,n=t("../core/component").registerComponent,s=t("../lib/three"),l=new s.Geometry,d=a("components:geometry:warn");r.exports.Component=n("geometry",{schema:{buffer:{default:!0},mergeTo:{type:"selector"},primitive:{default:"box",oneOf:o},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(t){var r=this.data,a=this.el.getOrCreateObject3D("mesh",s.Mesh),i=this.system;this.geometry&&(i.unuseGeometry(t),this.geometry=null),this.geometry=a.geometry=i.getOrCreateGeometry(r),r.mergeTo&&this.mergeTo(r.mergeTo)},mergeTo:function(t){var r=this.el,a=r.getObject3D("mesh"),i;return t&&t.isEntity?t===r?void d("Source and target geometries cannot be the same for merge"):(i=t.getObject3D("mesh"),i?!1===i.geometry instanceof s.Geometry||!1===a.geometry instanceof s.Geometry?void d("Geometry merge is only available for `THREE.Geometry` types. Check that both of the merging geometry and the target geometry have `buffer` set to false"):!1===this.data.skipCache?void d("Cached geometries are not allowed to merge. Set `skipCache` to true"):void(a.parent.updateMatrixWorld(),i.geometry.merge(a.geometry,a.matrixWorld),r.emit("geometry-merged",{mergeTarget:t}),r.parentNode.removeChild(r)):(i=t.getOrCreateObject3D("mesh",s.Mesh),void t.setAttribute("material",r.getAttribute("material")))):void d("There is not a valid entity to merge the geometry to")},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=l,this.geometry=null},updateSchema:function(t){var r=t.primitive,a=this.data&&this.data.primitive,o=i[r]&&i[r].schema;if(!o)throw new Error("Unknown geometry schema `"+r+"`");a&&a===r||this.extendSchema(o)}})},{"../core/component":125,"../core/geometry":126,"../lib/three":173,"../utils/debug":191}],83:[function(t,r){var a=t("../core/component").registerComponent,i=t("../lib/three"),o=t("../utils/"),n=o.debug("components:gltf-model:warn");r.exports.Component=a("gltf-model",{schema:{type:"model"},init:function(){this.model=null,this.loader=new i.GLTFLoader},update:function(){var t=this,r=this.el,a=this.data;a&&(this.remove(),this.loader.load(a,function(a){t.model=a.scene||a.scenes[0],t.model.animations=a.animations,r.setObject3D("mesh",t.model),r.emit("model-loaded",{format:"gltf",model:t.model})},void 0,function(t){var i=t&&t.message?t.message:"Failed to load glTF model";n(i),r.emit("model-error",{format:"gltf",src:a})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":125,"../lib/three":173,"../utils/":195}],84:[function(t,r){function a(t,r){var a;if(t)return a=l[t],"grip"===a?a+(r?"close":"open"):"point"===a||"thumb"===a?a+(r?"up":"down"):"pointing"===a||"pistol"===a?a+(r?"start":"end"):void 0}function i(t){var r=t&&t.controller&&t.controller.id;return r&&0===r.indexOf("OpenVR ")}var o=t("../core/component").registerComponent,n={left:"https://cdn.aframe.io/controllers/oculus-hands/v2/leftHand.json",right:"https://cdn.aframe.io/controllers/oculus-hands/v2/rightHand.json"},s={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},l={};l[s.fist]="grip",l[s.thumbUp]="pistol",l[s.point]="pointing",l[s.thumb]="thumb",r.exports.Component=o("hand-controls",{schema:{default:"left"},init:function(){var t=this,r=this.el;this.gesture=s.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.ObjectLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){t.handleButton("grip","down")},this.onGripUp=function(){t.handleButton("grip","up")},this.onTrackpadDown=function(){t.handleButton("trackpad","down")},this.onTrackpadUp=function(){t.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){t.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){t.handleButton("trackpad","touchend")},this.onTriggerDown=function(){t.handleButton("trigger","down")},this.onTriggerUp=function(){t.handleButton("trigger","up")},this.onTriggerTouchStart=function(){t.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){t.handleButton("trigger","touchend")},this.onGripTouchStart=function(){t.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){t.handleButton("grip","touchend")},this.onThumbstickDown=function(){t.handleButton("thumbstick","down")},this.onThumbstickUp=function(){t.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){t.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){t.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){t.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){t.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){t.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){t.handleButton("surface","touchend")},this.onControllerConnected=function(){t.setModelVisibility(!0)},this.onControllerDisconnected=function(){t.setModelVisibility(!1)},r.addEventListener("controllerconnected",this.onControllerConnected),r.addEventListener("controllerdisconnected",this.onControllerDisconnected)},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(t,r){var a=this.el.getObject3D("mesh");a&&a.mixer&&a.mixer.update(r/1e3)},addEventListeners:function(){var t=this.el;t.addEventListener("gripdown",this.onGripDown),t.addEventListener("gripup",this.onGripUp),t.addEventListener("trackpaddown",this.onTrackpadDown),t.addEventListener("trackpadup",this.onTrackpadUp),t.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),t.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),t.addEventListener("triggerdown",this.onTriggerDown),t.addEventListener("triggerup",this.onTriggerUp),t.addEventListener("triggertouchstart",this.onTriggerTouchStart),t.addEventListener("triggertouchend",this.onTriggerTouchEnd),t.addEventListener("griptouchstart",this.onGripTouchStart),t.addEventListener("griptouchend",this.onGripTouchEnd),t.addEventListener("thumbstickdown",this.onThumbstickDown),t.addEventListener("thumbstickup",this.onThumbstickUp),t.addEventListener("abuttontouchstart",this.onAorXTouchStart),t.addEventListener("abuttontouchend",this.onAorXTouchEnd),t.addEventListener("bbuttontouchstart",this.onBorYTouchStart),t.addEventListener("bbuttontouchend",this.onBorYTouchEnd),t.addEventListener("xbuttontouchstart",this.onAorXTouchStart),t.addEventListener("xbuttontouchend",this.onAorXTouchEnd),t.addEventListener("ybuttontouchstart",this.onBorYTouchStart),t.addEventListener("ybuttontouchend",this.onBorYTouchEnd),t.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),t.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var t=this.el;t.removeEventListener("gripdown",this.onGripDown),t.removeEventListener("gripup",this.onGripUp),t.removeEventListener("trackpaddown",this.onTrackpadDown),t.removeEventListener("trackpadup",this.onTrackpadUp),t.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),t.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),t.removeEventListener("triggerdown",this.onTriggerDown),t.removeEventListener("triggerup",this.onTriggerUp),t.removeEventListener("triggertouchstart",this.onTriggerTouchStart),t.removeEventListener("triggertouchend",this.onTriggerTouchEnd),t.removeEventListener("griptouchstart",this.onGripTouchStart),t.removeEventListener("griptouchend",this.onGripTouchEnd),t.removeEventListener("thumbstickdown",this.onThumbstickDown),t.removeEventListener("thumbstickup",this.onThumbstickUp),t.removeEventListener("abuttontouchstart",this.onAorXTouchStart),t.removeEventListener("abuttontouchend",this.onAorXTouchEnd),t.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),t.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),t.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),t.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),t.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),t.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),t.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),t.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(t){var r=this.el,a=this.data,i;i={hand:a,model:!1,rotationOffset:"left"===a?90:-90},a!==t&&this.loader.load(n[a],function(t){var a=t.getObjectByName("Hand");a.material.skinning=!0,a.mixer=new THREE.AnimationMixer(a),r.setObject3D("mesh",a),a.position.set(0,0,0),a.rotation.set(0,0,0),a.visible=!1,r.setAttribute("vive-controls",i),r.setAttribute("oculus-touch-controls",i),r.setAttribute("windows-motion-controls",i)})},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(t,r){var a="down"===r,i="touchstart"===r,o;if(0===r.indexOf("touch")){if(i===this.touchedButtons[t])return;this.touchedButtons[t]=i}else{if(a===this.pressedButtons[t])return;this.pressedButtons[t]=a}o=this.gesture,this.gesture=this.determineGesture();this.gesture===o||(this.animateGesture(this.gesture,o),this.emitGestureEvents(this.gesture,o))},determineGesture:function(){var t=this.pressedButtons.grip,r=this.pressedButtons.surface||this.touchedButtons.surface,a=this.pressedButtons.trackpad||this.touchedButtons.trackpad,o=this.pressedButtons.trigger||this.touchedButtons.trigger,n=this.touchedButtons.AorX||this.touchedButtons.BorY,l=i(this.el.components["tracked-controls"]),d;return t?l?d=s.fist:r||n||a?d=o?s.fist:s.point:d=o?s.thumbUp:s.pointThumb:o?d=l?s.fist:s.hold:l&&a&&(d=s.point),d},animateGesture:function(t,r){return t?void this.playAnimation(t||s.open,r,!1):void this.playAnimation(r,r,!0)},emitGestureEvents:function(t,r){var i=this.el,o;r===t||(o=a(r,!1),o&&i.emit(o),o=a(t,!0),o&&i.emit(o))},playAnimation:function(t,r,a){var i=this.el.getObject3D("mesh"),o,n;if(i)return n=i.mixer.clipAction(t),n.clampWhenFinished=!0,n.loop=THREE.PingPong,n.repetitions=0,n.timeScale=a?-1:1,n.weight=1,r&&t!==r?void(o=i.mixer.clipAction(r),i.mixer.stopAllAction(),o.weight=0.15,o.play(),n.play(),o.crossFadeTo(n,0.15,!0)):(i.mixer.stopAllAction(),void n.play())},setModelVisibility:function(t){var r=this.el.getObject3D("mesh");r&&(r.visible=t)}})},{"../core/component":125}],85:[function(t){t("./camera"),t("./collada-model"),t("./cursor"),t("./daydream-controls"),t("./gearvr-controls"),t("./geometry"),t("./gltf-model"),t("./hand-controls"),t("./laser-controls"),t("./light"),t("./line"),t("./link"),t("./look-controls"),t("./material"),t("./obj-model"),t("./oculus-touch-controls"),t("./position"),t("./raycaster"),t("./rotation"),t("./scale"),t("./shadow"),t("./sound"),t("./text"),t("./tracked-controls"),t("./visible"),t("./vive-controls"),t("./wasd-controls"),t("./windows-motion-controls"),t("./scene/debug"),t("./scene/embedded"),t("./scene/inspector"),t("./scene/fog"),t("./scene/keyboard-shortcuts"),t("./scene/pool"),t("./scene/screenshot"),t("./scene/stats"),t("./scene/vr-mode-ui")},{"./camera":77,"./collada-model":78,"./cursor":79,"./daydream-controls":80,"./gearvr-controls":81,"./geometry":82,"./gltf-model":83,"./hand-controls":84,"./laser-controls":86,"./light":87,"./line":88,"./link":89,"./look-controls":90,"./material":91,"./obj-model":92,"./oculus-touch-controls":93,"./position":94,"./raycaster":95,"./rotation":96,"./scale":97,"./scene/debug":98,"./scene/embedded":99,"./scene/fog":100,"./scene/inspector":101,"./scene/keyboard-shortcuts":102,"./scene/pool":103,"./scene/screenshot":104,"./scene/stats":105,"./scene/vr-mode-ui":106,"./shadow":107,"./sound":108,"./text":109,"./tracked-controls":110,"./visible":111,"./vive-controls":112,"./wasd-controls":113,"./windows-motion-controls":114}],86:[function(t){var r=t("../core/component").registerComponent,a=t("../utils/");r("laser-controls",{schema:{hand:{default:"right"}},init:function(){function t(t){var i=r[t.detail.name];if(i){var s=a.extend({showLine:!0},i.raycaster||{});t.detail.rayOrigin&&(s.origin=t.detail.rayOrigin.origin,s.direction=t.detail.rayOrigin.direction,s.showLine=!0),t.detail.rayOrigin||!n.modelReady?o.setAttribute("raycaster",s):o.setAttribute("raycaster","showLine",!0),o.setAttribute("cursor",a.extend({fuse:!1},i.cursor))}}var r=this.config,i=this.data,o=this.el,n=this;o.setAttribute("daydream-controls",{hand:i.hand}),o.setAttribute("gearvr-controls",{hand:i.hand}),o.setAttribute("oculus-touch-controls",{hand:i.hand}),o.setAttribute("vive-controls",{hand:i.hand}),o.setAttribute("windows-motion-controls",{hand:i.hand}),o.addEventListener("controllerconnected",t),o.addEventListener("controllerdisconnected",function(){o.setAttribute("raycaster","showLine",!1)}),o.addEventListener("controllermodelready",function(r){t(r),n.modelReady=!0})},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown"],upEvents:["trackpadup"]}},"gearvr-controls":{cursor:{downEvents:["trackpaddown"],upEvents:["trackpadup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:1e-3,y:0,z:0.065},direction:{x:0,y:-0.8,z:-1}}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},{"../core/component":125,"../utils/":195}],87:[function(t,r){var a=t("../utils/bind"),i=t("../utils").diff,o=t("../utils/debug"),n=t("../core/component").registerComponent,s=t("../lib/three"),l=s.Math.degToRad,d=o("components:light:warn");r.exports.Component=n("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color"},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot"]},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:0.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}}},init:function(){var t=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(t)},update:function(t){var r=this.data,o=i(r,t),n=this.light,s=this;if(n&&!("type"in o)){var d=!1;return void Object.keys(o).forEach(function(t){var i=r[t];switch(t){case"color":{n.color.set(i);break}case"groundColor":{n.groundColor.set(i);break}case"angle":{n.angle=l(i);break}case"target":{null===i?("spot"===r.type||"directional"===r.type)&&(n.target=s.defaultTarget):i.hasLoaded?s.onSetTarget(i,n):i.addEventListener("loaded",a(s.onSetTarget,s,i,n));break}case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":d||(s.updateShadow(),d=!0);break;default:n[t]=i;}})}this.setLight(this.data),this.updateShadow()},setLight:function(t){var r=this.el,a=this.getLight(t);a&&(this.light&&r.removeObject3D("light"),this.light=a,this.light.el=r,r.setObject3D("light",this.light),("spot"===t.type||"directional"===t.type||"hemisphere"===t.type)&&r.getObject3D("light").translateY(-1),"spot"===t.type&&(r.setObject3D("light-target",this.defaultTarget),r.getObject3D("light-target").position.set(0,0,-1)))},updateShadow:function(){var t=this.el,r=this.data,a=this.light;a.castShadow=r.castShadow;var i=t.getObject3D("cameraHelper");return r.shadowCameraVisible&&!i?t.setObject3D("cameraHelper",new s.CameraHelper(a.shadow.camera)):!r.shadowCameraVisible&&i&&t.removeObject3D("cameraHelper"),r.castShadow?void(a.shadow.bias=r.shadowBias,a.shadow.mapSize.height=r.shadowMapHeight,a.shadow.mapSize.width=r.shadowMapWidth,a.shadow.camera.near=r.shadowCameraNear,a.shadow.camera.far=r.shadowCameraFar,a.shadow.camera instanceof s.OrthographicCamera?(a.shadow.camera.top=r.shadowCameraTop,a.shadow.camera.right=r.shadowCameraRight,a.shadow.camera.bottom=r.shadowCameraBottom,a.shadow.camera.left=r.shadowCameraLeft):a.shadow.camera.fov=r.shadowCameraFov,a.shadow.camera.updateProjectionMatrix(),i&&i.update()):a},getLight:function(t){var r=t.angle,i=new s.Color(t.color).getHex(),o=t.decay,n=t.distance,p=new s.Color(t.groundColor).getHex(),c=t.intensity,u=t.type,m=t.target,g=null;switch(u.toLowerCase()){case"ambient":return new s.AmbientLight(i,c);case"directional":return g=new s.DirectionalLight(i,c),this.defaultTarget=g.target,m&&(m.hasLoaded?this.onSetTarget(m,g):m.addEventListener("loaded",a(this.onSetTarget,this,m,g))),g;case"hemisphere":return new s.HemisphereLight(i,p,c);case"point":return new s.PointLight(i,c,n,o);case"spot":return g=new s.SpotLight(i,c,n,l(r),t.penumbra,o),this.defaultTarget=g.target,m&&(m.hasLoaded?this.onSetTarget(m,g):m.addEventListener("loaded",a(this.onSetTarget,this,m,g))),g;default:d("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",u);}},onSetTarget:function(t,r){r.target=t.object3D},remove:function(){var t=this.el;t.removeObject3D("light"),t.getObject3D("cameraHelper")&&t.removeObject3D("cameraHelper")}})},{"../core/component":125,"../lib/three":173,"../utils":195,"../utils/bind":189,"../utils/debug":191}],88:[function(t,r){function a(t,r){return t&&r&&t.x===r.x&&t.y===r.y&&t.z===r.z}var i=t("../core/component").registerComponent;r.exports.Component=i("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var t=this.data,r,a;a=this.material=new THREE.LineBasicMaterial({color:t.color,opacity:t.opacity,transparent:1>t.opacity,visible:t.visible}),r=this.geometry=new THREE.BufferGeometry,r.addAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.line=new THREE.Line(r,a),this.el.setObject3D(this.attrName,this.line)},update:function(t){var r=this.data,i=this.geometry,o=!1,n=this.material,s=i.attributes.position.array;a(r.start,t.start)||(s[0]=r.start.x,s[1]=r.start.y,s[2]=r.start.z,o=!0),a(r.end,t.end)||(s[3]=r.end.x,s[4]=r.end.y,s[5]=r.end.z,o=!0),o&&(i.attributes.position.needsUpdate=!0,i.computeBoundingSphere()),n.color.setStyle(r.color),n.opacity=r.opacity,n.transparent=1>r.opacity,n.visible=r.visible},remove:function(){this.el.removeObject3D("line",this.line)}})},{"../core/component":125}],89:[function(t,r){var a=t("../core/component").registerComponent,i=t("../core/shader").registerShader,o=t("../lib/three");r.exports.Component=a("link",{schema:{color:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},visualAspectEnabled:{default:!0}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.hiddenEls=[],this.initVisualAspect()},update:function(t){var r=this.data,a=this.el,i=r.highlighted?r.highlightedColor:r.color;a.setAttribute("material","strokeColor",i),r.on!==t.on&&this.updateEventListener(),r.visualAspectEnabled&&t.peekMode!==void 0&&r.peekMode!==t.peekMode&&this.updatePeekMode();r.image&&t.image!==r.image&&a.setAttribute("material","pano","string"===typeof r.image?r.image:r.image.src)},updatePeekMode:function(){var t=this.el,r=this.sphereEl;this.data.peekMode?(this.hideAll(),t.getObject3D("mesh").visible=!1,r.setAttribute("visible",!0)):(this.showAll(),t.getObject3D("mesh").visible=!0,r.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var t=this.el;t.isPlaying&&(this.removeEventListener(),t.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var t=this.data.on;t&&this.el.removeEventListener(t,this.navigate)},initVisualAspect:function(){var t=this.el,r,a,i;this.data.visualAspectEnabled&&(r=this.textEl=this.textEl||document.createElement("a-entity"),a=this.sphereEl=this.sphereEl||document.createElement("a-entity"),i=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),t.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),t.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),r.setAttribute("text",{color:"white",align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),r.setAttribute("position","0 1.5 0"),t.appendChild(r),i.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),i.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),i.setAttribute("rotation","0 180 0"),i.setAttribute("position","0 0 0"),i.setAttribute("visible",!1),t.appendChild(i),a.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),a.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),a.setAttribute("visible",!1),t.appendChild(a))},navigate:function(){window.location=this.data.href},tick:function(){var t=new o.Vector3,r=new o.Vector3,a=new o.Vector3,i=new o.Quaternion;return function(){if(this.data.visualAspectEnabled){var o=this.el,n=o.object3D,s=o.sceneEl.camera,l=this.textEl,d,p;if(n.updateMatrixWorld(),s.parent.updateMatrixWorld(),s.updateMatrixWorld(),n.matrix.decompose(t,i,a),t.setFromMatrixPosition(n.matrixWorld),r.setFromMatrixPosition(s.matrixWorld),p=t.distanceTo(r),this.previousQuaternion=this.previousQuaternion||i.clone(),20<p)n.lookAt(r);else{if(d=this.calculateCameraPortalOrientation(),0.5>p){if(!0===this.semiSphereEl.getAttribute("visible"))return;l.setAttribute("text","width",1.5),0>=d?(l.setAttribute("position","0 0 0.75"),l.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(l.setAttribute("position","0 0 -0.75"),l.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),o.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=d}else 0>=d?l.setAttribute("rotation","0 180 0"):l.setAttribute("rotation","0 0 0"),l.setAttribute("text","width",5),l.setAttribute("position","0 1.5 0"),o.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(n.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}}(),hideAll:function(){var t=this.el,r=this.hiddenEls,a=this;0<r.length||t.sceneEl.object3D.traverse(function(i){i&&i.el&&i.el.hasAttribute("link-controls")||!i.el||i===t.sceneEl.object3D||i.el===t||i.el===a.sphereEl||i.el===t.sceneEl.cameraEl||!1===i.el.getAttribute("visible")||i.el===a.textEl||i.el===a.semiSphereEl||(i.el.setAttribute("visible",!1),r.push(i.el))})},showAll:function(){this.hiddenEls.forEach(function(t){t.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var t=new o.Matrix4,r=new o.Vector3,a=new o.Vector3(0,0,1),i=new o.Vector3(0,0,0);return function(){var o=this.el,n=o.sceneEl.camera;return r.set(0,0,0),a.set(0,0,1),i.set(0,0,0),o.object3D.matrixWorld.extractRotation(t),a.applyMatrix4(t),o.object3D.updateMatrixWorld(),o.object3D.localToWorld(i),n.parent.parent.updateMatrixWorld(),n.parent.updateMatrixWorld(),n.updateMatrixWorld(),n.localToWorld(r),r.sub(i).normalize(),a.normalize(),s(a.dot(r))}}(),remove:function(){this.removeEventListener()}}),i("portal",{schema:{pano:{type:"map",is:"uniform"},borderEnabled:{default:1,type:"int",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:"vec3 portalPosition;\nvarying vec3 vWorldPosition;\nvarying float vDistanceToCenter;\nvarying float vDistance;\nvoid main() {\nvDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);\nportalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;\nvDistance = length(portalPosition - cameraPosition);\nvWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"#define RECIPROCAL_PI2 0.15915494\nuniform sampler2D pano;\nuniform vec3 strokeColor;\nuniform float borderEnabled;\nvarying float vDistanceToCenter;\nvarying float vDistance;\nvarying vec3 vWorldPosition;\nvoid main() {\nvec3 direction = normalize(vWorldPosition - cameraPosition);\nvec2 sampleUV;\nfloat borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);\nsampleUV.y = saturate(direction.y * 0.5  + 0.5);\nsampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;\nif (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {\ngl_FragColor = vec4(strokeColor, 1.0);\n} else {\ngl_FragColor = mix(texture2D(pano, sampleUV), vec4(0.93, 0.17, 0.36, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));\n}\n}"})},{"../core/component":125,"../core/shader":134,"../lib/three":173}],90:[function(t,r){function a(t){return 0===t.x&&0===t.y&&0===t.z}var i=t("../core/component").registerComponent,o=t("../lib/three"),n=t("../constants").DEFAULT_CAMERA_HEIGHT,s=t("../utils/bind"),d="a-grabbing",p=L/2,c=o.Math.radToDeg;r.exports.Component=i("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},touchEnabled:{default:!0},hmdEnabled:{default:!0},reverseMouseDrag:{default:!1},standing:{default:!0}},init:function(){var t=this.el.sceneEl;this.previousHMDPosition=new o.Vector3,this.hmdQuaternion=new o.Quaternion,this.hmdEuler=new o.Euler,this.position=new o.Vector3,this.rotation={},this.setupMouseControls(),this.setupHMDControls(),this.bindMethods(),t.addEventListener("exit-vr",this.onExitVR)},update:function(t){var r=this.data;r.enabled!==t.enabled&&this.updateGrabCursor(r.enabled),!t||r.hmdEnabled||t.hmdEnabled||(this.pitchObject.rotation.set(0,0,0),this.yawObject.rotation.set(0,0,0))},tick:function(){var t=this.data;t.enabled&&(this.controls.standing=t.standing,this.controls.userHeight=this.getUserHeight(),this.controls.update(),this.updateOrientation(),this.updatePosition())},getUserHeight:function(){var t=this.el,r=t.hasAttribute("camera")&&t.getAttribute("camera").userHeight||n;return r},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.removeEventListeners()},bindMethods:function(){this.onMouseDown=s(this.onMouseDown,this),this.onMouseMove=s(this.onMouseMove,this),this.onMouseUp=s(this.onMouseUp,this),this.onTouchStart=s(this.onTouchStart,this),this.onTouchMove=s(this.onTouchMove,this),this.onTouchEnd=s(this.onTouchEnd,this),this.onExitVR=s(this.onExitVR,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new o.Object3D,this.yawObject=new o.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},setupHMDControls:function(){this.dolly=new o.Object3D,this.euler=new o.Euler,this.controls=new o.VRControls(this.dolly),this.controls.userHeight=0},addEventListeners:function(){var t=this.el.sceneEl,r=t.canvas;return r?void(r.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),r.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd)):void t.addEventListener("render-target-loaded",s(this.addEventListeners,this))},removeEventListeners:function(){var t=this.el.sceneEl,r=t&&t.canvas;r&&(r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseout",this.onMouseUp),r.removeEventListener("touchstart",this.onTouchStart),r.removeEventListener("touchmove",this.onTouchMove),r.removeEventListener("touchend",this.onTouchEnd))},updateOrientation:function(){var t=this.hmdEuler,r=this.hmdQuaternion,i=this.pitchObject,o=this.yawObject,n=this.el.sceneEl,s=this.rotation,l,d;r=r.copy(this.dolly.quaternion),t.setFromQuaternion(r,"YXZ"),n.isMobile?(s.x=c(t.x)+c(i.rotation.x),s.y=c(t.y)+c(o.rotation.y),s.z=c(t.z)):n.is("vr-mode")&&!a(t)&&this.data.hmdEnabled?(s.x=c(t.x),s.y=c(t.y),s.z=c(t.z)):(l=this.el.getAttribute("rotation"),d=this.calculateDeltaRotation(),this.data.reverseMouseDrag?(s.x=l.x-d.x,s.y=l.y-d.y,s.z=l.z):(s.x=l.x+d.x,s.y=l.y+d.y,s.z=l.z)),this.el.setAttribute("rotation",s)},calculateDeltaRotation:function(){var t=c(this.pitchObject.rotation.x),r=c(this.yawObject.rotation.y),a;return a={x:t-(this.previousRotationX||0),y:r-(this.previousRotationY||0)},this.previousRotationX=t,this.previousRotationY=r,a},updatePosition:function(){var t=this.el,r=this.position,a=this.previousHMDPosition,i=this.el.sceneEl,o,n;i.is("vr-mode")&&(o=this.calculateHMDPosition(),n=t.getAttribute("position"),r.copy(n).sub(a).add(o),t.setAttribute("position",r),a.copy(o))},calculateHMDPosition:function(){var t=new o.Vector3;return function(){return this.dolly.updateMatrix(),t.setFromMatrixPosition(this.dolly.matrix),t}}(),onMouseMove:function(t){var r=this.pitchObject,a=this.yawObject,i=this.previousMouseEvent,o,n;this.mouseDown&&this.data.enabled&&(o=t.movementX||t.mozMovementX,n=t.movementY||t.mozMovementY,(o===void 0||n===void 0)&&(o=t.screenX-i.screenX,n=t.screenY-i.screenY),this.previousMouseEvent=t,a.rotation.y-=2e-3*o,r.rotation.x-=2e-3*n,r.rotation.x=l(-p,m(p,r.rotation.x)))},onMouseDown:function(t){this.data.enabled&&0===t.button&&(this.mouseDown=!0,this.previousMouseEvent=t,document.body.classList.add(d))},onMouseUp:function(){this.mouseDown=!1,document.body.classList.remove(d)},onTouchStart:function(t){1===t.touches.length&&this.data.touchEnabled&&(this.touchStart={x:t.touches[0].pageX,y:t.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(t){var r=this.el.sceneEl.canvas,a=this.yawObject,i;this.touchStarted&&this.data.touchEnabled&&(i=2*L*(t.touches[0].pageX-this.touchStart.x)/r.clientWidth,a.rotation.y-=0.5*i,this.touchStart={x:t.touches[0].pageX,y:t.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onExitVR:function(){this.previousHMDPosition.set(0,0,0)},updateGrabCursor:function(t){function r(){i.canvas.classList.add("a-grab-cursor")}function a(){i.canvas.classList.remove("a-grab-cursor")}var i=this.el.sceneEl;return i.canvas?t?void r():void a():void(t?i.addEventListener("render-target-loaded",r):i.addEventListener("render-target-loaded",a))}})},{"../constants":116,"../core/component":125,"../lib/three":173,"../utils/bind":189}],91:[function(t,r){function a(t){return"back"===t?l.BackSide:"double"===t?l.DoubleSide:l.FrontSide}function i(t){return"face"===t?l.FaceColors:"vertex"===t?l.VertexColors:l.NoColors}function o(t,r){t.dispose(),r.unregisterMaterial(t)}var n=t("../utils/"),s=t("../core/component"),l=t("../lib/three"),d=t("../core/shader"),p=n.debug("components:material:error"),c=s.registerComponent,u=d.shaders,m=d.shaderNames;r.exports.Component=c("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:m},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColors:{type:"string",default:"none",oneOf:["face","vertex"]},visible:{default:!0}},init:function(){this.material=null},update:function(t){var r=this.data;this.shader&&r.shader===t.shader||this.updateShader(r.shader),this.shader.update(this.data),this.updateMaterial(t)},updateSchema:function(t){var r=t.shader,a=this.data&&this.data.shader,i=r||a,o=u[i]&&u[i].schema;o||p("Unknown shader schema "+i);a&&r===a||(this.extendSchema(o),this.updateBehavior())},updateBehavior:function(){var t=this.schema,r=this,a=this.el.sceneEl,i={},o=function(t){Object.keys(i).forEach(function(r){i[r]=t}),r.shader.update(i)};this.tick=void 0,Object.keys(t).forEach(function(a){"time"===t[a].type&&(r.tick=o,i[a]=!0)});a&&(this.tick?a.addBehavior(this):a.removeBehavior(this))},updateShader:function(t){var r=this.data,a=u[t]&&u[t].Shader,i;if(!a)throw new Error("Unknown shader "+t);i=this.shader=new a,i.el=this.el,i.init(r),this.setMaterial(i.material),this.updateSchema(r)},updateMaterial:function(t){var r=this.data,o=this.material;o.alphaTest=r.alphaTest,o.depthTest=!1!==r.depthTest,o.depthWrite=!1!==r.depthWrite,o.opacity=r.opacity,o.flatShading=r.flatShading,o.side=a(r.side),o.transparent=!1!==r.transparent||1>r.opacity,o.vertexColors=i(r.vertexColors),o.visible=r.visible,Object.keys(t).length&&(t.alphaTest!==r.alphaTest||t.side!==r.side||t.vertexColors!==r.vertexColors)&&(o.needsUpdate=!0)},remove:function(){var t=new l.MeshBasicMaterial,r=this.material,a=this.el.getObject3D("mesh");a&&(a.material=t),o(r,this.system)},setMaterial:function(t){var r=this.el.getOrCreateObject3D("mesh",l.Mesh),a=this.system;this.material&&o(this.material,a),this.material=r.material=t,a.registerMaterial(t)}})},{"../core/component":125,"../core/shader":134,"../lib/three":173,"../utils/":195}],92:[function(t,r){var a=t("../utils/debug"),i=t("../core/component").registerComponent,o=t("../lib/three"),n=a("components:obj-model:warn");r.exports.Component=i("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){this.model=null,this.objLoader=new o.OBJLoader,this.mtlLoader=new o.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin=""},update:function(){var t=this.data;t.obj&&(this.remove(),this.loadObj(t.obj,t.mtl))},remove:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(t,r){var a=this,i=this.el,s=this.mtlLoader,l=this.objLoader;return r?(i.hasAttribute("material")&&n("Material component properties are ignored when a .MTL is provided"),s.setTexturePath(r.substr(0,r.lastIndexOf("/")+1)),void s.load(r,function(r){r.preload(),l.setMaterials(r),l.load(t,function(t){a.model=t,i.setObject3D("mesh",t),i.emit("model-loaded",{format:"obj",model:t})})})):void l.load(t,function(t){var r=i.components.material;r&&t.traverse(function(t){t instanceof o.Mesh&&(t.material=r.material)}),a.model=t,i.setObject3D("mesh",t),i.emit("model-loaded",{format:"obj",model:t})})}})},{"../core/component":125,"../lib/three":173,"../utils/debug":191}],93:[function(t,r){var a=t("../utils/bind"),i=t("../core/component").registerComponent,o=t("../utils/tracked-controls"),n="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-",s={x:0,y:-0.015,z:0.04};r.exports.Component=i("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},rotationOffset:{default:0}},mapping:{left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},bindMethods:function(){this.onModelLoaded=a(this.onModelLoaded,this),this.onControllersUpdate=a(this.onControllersUpdate,this),this.checkIfControllerPresent=a(this.checkIfControllerPresent,this),this.onAxisMoved=a(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=a(this.onButtonChanged,this),this.onButtonDown=function(r){t.onButtonEvent(r.detail.id,"down")},this.onButtonUp=function(r){t.onButtonEvent(r.detail.id,"up")},this.onButtonTouchStart=function(r){t.onButtonEvent(r.detail.id,"touchstart")},this.onButtonTouchEnd=function(r){t.onButtonEvent(r.detail.id,"touchend")},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.emitIfAxesChanged=o.emitIfAxesChanged,this.checkControllerPresentAndSetup=o.checkControllerPresentAndSetup},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("axismove",this.onAxisMoved),t.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("axismove",this.onAxisMoved),t.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Oculus Touch",{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){var t,r;this.data.model&&("right"===this.data.hand?(t="url("+(n+"right.obj")+")",r="url("+(n+"right.mtl")+")"):(t="url("+(n+"left.obj")+")",r="url("+(n+"left.mtl")+")"),this.el.setAttribute("obj-model",{obj:t,mtl:r}))},injectTrackedControls:function(){var t=this.data,r="right"===t.hand?-90:90;this.el.setAttribute("tracked-controls",{id:"right"===t.hand?"Oculus Touch (Right)":"Oculus Touch (Left)",controller:0,rotationOffset:-999===t.rotationOffset?r:t.rotationOffset}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(t){var r=this.mapping[this.data.hand].buttons[t.detail.id],a=this.buttonMeshes,i;r&&(("trigger"===r||"grip"===r)&&(i=t.detail.state.value),a&&("trigger"===r&&a.trigger&&(a.trigger.rotation.x=-i*(L/24)),"grip"===r&&a.grip&&(a.grip.rotation.y=("left"===this.data.hand?-1:1)*i*(L/60))),this.el.emit(r+"changed",t.detail.state))},onModelLoaded:function(t){var r=t.detail.model,a;if(this.data.model){var i="left"===this.data.hand;a=this.buttonMeshes={},a.grip=r.getObjectByName(i?"buttonHand_oculus-touch-controller-left.004":"buttonHand_oculus-touch-controller-right.005"),a.thumbstick=r.getObjectByName(i?"stick_oculus-touch-controller-left.007":"stick_oculus-touch-controller-right.004"),a.trigger=r.getObjectByName(i?"buttonTrigger_oculus-touch-controller-left.005":"buttonTrigger_oculus-touch-controller-right.006"),a.xbutton=r.getObjectByName("buttonX_oculus-touch-controller-left.002"),a.abutton=r.getObjectByName("buttonA_oculus-touch-controller-right.002"),a.ybutton=r.getObjectByName("buttonY_oculus-touch-controller-left.001"),a.bbutton=r.getObjectByName("buttonB_oculus-touch-controller-right.003"),r.position=s}},onButtonEvent:function(t,r){var a=this.mapping[this.data.hand].buttons[t],o;if(Array.isArray(a))for(o=0;o<a.length;o++)this.el.emit(a[o]+r);else this.el.emit(a+r);this.updateModel(a,r)},onAxisMoved:function(t){this.emitIfAxesChanged(this,this.mapping[this.data.hand].axes,t)},updateModel:function(t,r){var a;if(Array.isArray(t))for(a=0;a<t.length;a++)this.updateButtonModel(t[a],r);else this.updateButtonModel(t,r)},updateButtonModel:function(t,r){var a="up"===r||"touchend"===r?this.data.buttonColor:"touchstart"===r?this.data.buttonTouchColor:this.data.buttonHighlightColor,i=this.buttonMeshes;!this.data.model||i&&i[t]&&i[t].material.color.set(a)}})},{"../core/component":125,"../utils/bind":189,"../utils/tracked-controls":199}],94:[function(t,r){var a=t("../core/component").registerComponent;r.exports.Component=a("position",{schema:{type:"vec3"},update:function(){var t=this.el.object3D,r=this.data;t.position.set(r.x,r.y,r.z)}})},{"../core/component":125}],95:[function(t,r){function a(t,r){var a;for(t.length=r.length,a=0;a<r.length;a++)t[a]=r[a]}var i=t("../core/component").registerComponent,o=t("../lib/three"),n=t("../utils/"),s=n.bind,l=new o.Vector3;r.exports.Component=i("raycaster",{schema:{direction:{type:"vec3",default:{x:0,y:0,z:-1}},far:{default:1e3},interval:{default:100},near:{default:0},objects:{default:""},origin:{type:"vec3"},recursive:{default:!0},showLine:{default:!1},useWorldCoordinates:{default:!1}},init:function(){this.lineData={},this.lineEndVec3=new o.Vector3,this.unitLineEndVec3=new o.Vector3,this.intersectedEls=[],this.objects=null,this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.raycaster=new o.Raycaster,this.updateOriginDirection(),this.refreshObjects=s(this.refreshObjects,this),this.refreshOnceChildLoaded=s(this.refreshOnceChildLoaded,this)},update:function(t){var r=this.data,a=this.el,i=this.raycaster;i.far=r.far,i.near=r.near,r.showLine&&(r.far!==t.far||r.origin!==t.origin||r.direction!==t.direction||r.showLine!==t.showLine)&&(this.unitLineEndVec3.copy(r.origin).add(r.direction).normalize(),this.drawLine()),!r.showLine&&t.showLine&&a.removeAttribute("line"),this.refreshObjects()},play:function(){this.el.sceneEl.addEventListener("loaded",this.refreshObjects),this.el.sceneEl.addEventListener("child-attached",this.refreshOnceChildLoaded),this.el.sceneEl.addEventListener("child-detached",this.refreshObjects)},pause:function(){this.el.sceneEl.removeEventListener("loaded",this.refreshObjects),this.el.sceneEl.removeEventListener("child-attached",this.refreshOnceChildLoaded),this.el.sceneEl.removeEventListener("child-detached",this.refreshObjects)},remove:function(){this.data.showLine&&this.el.removeAttribute("line")},refreshOnceChildLoaded:function(t){var r=this,a=t.detail.el;a&&(a.hasLoaded?this.refreshObjects():a.addEventListener("loaded",function t(){a.removeEventListener("loaded",t),r.refreshObjects()}))},refreshObjects:function(){var t=this.data,r=t.objects?this.el.sceneEl.querySelectorAll(t.objects):null,a,o,i;if(r)for(i=[],o=0;o<r.length;o++)i.push(r[o].object3D);else i=this.el.sceneEl.object3D.children;for(this.objects=[],o=0;o<i.length;o++)a=i[o].children,a&&this.objects.push.apply(this.objects,a)},tick:function(){var t=[];return function(r){var o=this.el,n=this.data,s=this.intersectedEls,l=this.prevCheckTime,d=this.prevIntersectedEls,p,i,c,u;if(!(l&&r-l<n.interval)){for(this.prevCheckTime=r,a(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),u=this.raycaster.intersectObjects(this.objects,n.recursive),t.length=0,p=0;p<u.length;p++)(i=u[p],!(n.showLine&&i.object===o.getObject3D("line")))&&i.object.el&&t.push(i);for(s.length=t.length,p=0;p<t.length;p++)s[p]=t[p].object.el;for(p=0;p<t.length;p++)t[p].object.el.emit("raycaster-intersected",{el:o,intersection:t[p]});for(t.length&&o.emit("raycaster-intersection",{els:s,intersections:t}),p=0;p<d.length;p++){if(-1!==s.indexOf(d[p]))return;o.emit("raycaster-intersection-cleared",{el:d[p]}),d[p].emit("raycaster-intersected-cleared",{el:o})}n.showLine&&(t.length&&(t[0].object.el===o&&t[1]?c=t[1].distance:c=t[0].distance),this.drawLine(c))}}}(),updateOriginDirection:function(){var t=new o.Vector3,r=new o.Quaternion,a=new o.Vector3;return function(){var i=this.el,o=this.data;return o.useWorldCoordinates?void this.raycaster.set(o.origin,o.direction):void(i.object3D.updateMatrixWorld(),i.object3D.matrixWorld.decompose(a,r,l),(0!==o.origin.x||0!==o.origin.y||0!==o.origin.z)&&(a=i.object3D.localToWorld(a.copy(o.origin))),t.copy(o.direction).add(o.origin).applyQuaternion(r).normalize(),this.raycaster.set(a,t))}}(),drawLine:function(){var t=new o.Vector3,r={};return function(a){var i=this.data,o=this.el;a===void 0&&(a=i.far===Infinity?1e3:i.far),r.start=i.origin,r.end=t.copy(this.unitLineEndVec3).multiplyScalar(a),o.setAttribute("line",r)}}()})},{"../core/component":125,"../lib/three":173,"../utils/":195}],96:[function(t,r){var a=t("../lib/three").Math.degToRad,i=t("../core/component").registerComponent;r.exports.Component=i("rotation",{schema:{type:"vec3"},update:function(){var t=this.data,r=this.el.object3D;r.rotation.set(a(t.x),a(t.y),a(t.z)),r.rotation.order="YXZ"}})},{"../core/component":125,"../lib/three":173}],97:[function(t,r){var a=t("../core/component").registerComponent,i=1e-5;r.exports.Component=a("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var t=this.data,r=this.el.object3D,a=0===t.x?i:t.x,o=0===t.y?i:t.y,n=0===t.z?i:t.z;r.scale.set(a,o,n)}})},{"../core/component":125}],98:[function(t,r){var a=t("../../core/component").registerComponent;r.exports.Component=a("debug",{schema:{default:!0}})},{"../../core/component":125}],99:[function(t,r){var a=t("../../core/component").registerComponent;r.exports.Component=a("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var t=this.el,r=t.querySelector(".a-enter-vr");!0===this.data?(r&&r.classList.add("embedded"),t.removeFullScreenStyles()):(r&&r.classList.remove("embedded"),t.addFullScreenStyles())}})},{"../../core/component":125}],100:[function(t,r){function a(t){var r;return r="exponential"===t.type?new o.FogExp2(t.color,t.density):new o.Fog(t.color,t.near,t.far),r.name=t.type,r}var i=t("../../core/component").registerComponent,o=t("../../lib/three"),n=t("../../utils/debug"),s=n("components:fog:warn");r.exports.Component=i("fog",{schema:{color:{type:"color",default:"#000"},density:{default:2.5e-4},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var t=this.data,r=this.el,i=this.el.object3D.fog;return r.isScene?i&&t.type===i.name?void Object.keys(this.schema).forEach(function(r){var a=t[r];"color"===r&&(a=new o.Color(a)),i[r]=a}):(r.object3D.fog=a(t),void r.systems.material.updateMaterials()):void s("Fog component can only be applied to <a-scene>")},remove:function(){var t=this.el.object3D.fog;t&&(t.far=0,t.near=0.1)}})},{"../../core/component":125,"../../lib/three":173,"../../utils/debug":191}],101:[function(t,r){(function(a){var i=t("../../constants").AFRAME_INJECTED,o=t("../../utils/bind"),n=t("../../../package"),s=t("../../core/component").registerComponent,l="https://unpkg.com/aframe-inspector@"+function(t){var r=t.split(".");return r[2]="x",r.join(".")}(n.version)+"/dist/aframe-inspector.min.js",d="dev"===a.env.INSPECTOR_VERSION?"https://aframe.io/aframe-inspector/dist/aframe-inspector.js":l;r.exports.Component=s("inspector",{schema:{url:{default:d}},init:function(){this.onKeydown=o(this.onKeydown,this),this.onMessage=o(this.onMessage,this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML="Loading Inspector"+"<span class=\"dots\"><span>.</span><span>.</span><span>.</span></span>"},remove:function(){this.removeEventListeners()},onKeydown:function(t){var r=73===t.keyCode&&t.ctrlKey&&t.altKey;this.data&&r&&this.injectInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(t){"INJECT_AFRAME_INSPECTOR"===t.data&&this.injectInspector()},injectInspector:function(){var t=this,r;AFRAME.INSPECTOR||AFRAME.inspectorInjected||(this.showLoader(),r=document.createElement("script"),r.src=this.data.url,r.setAttribute("data-name","aframe-inspector"),r.setAttribute(i,""),r.onload=function(){AFRAME.INSPECTOR.open(),t.hideLoader(),t.removeEventListeners()},r.onerror=function(){t.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(r),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})}).call(this,t("_process"))},{"../../../package":76,"../../constants":116,"../../core/component":125,"../../utils/bind":189,_process:6}],102:[function(t,r){var a=t("../../core/component").registerComponent,i=t("../../utils/").shouldCaptureKeyEvent;r.exports.Component=a("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){var t=this,r=this.el;this.listener=window.addEventListener("keyup",function(a){i(a)&&(t.enterVREnabled&&70===a.keyCode&&r.enterVR(),t.enterVREnabled&&27===a.keyCode&&r.exitVR())},!1)},update:function(){var t=this.data;this.enterVREnabled=t.enterVR},remove:function(){window.removeEventListener("keyup",this.listener)}})},{"../../core/component":125,"../../utils/":195}],103:[function(t,r){var a=t("../../utils/debug"),i=t("../../core/component").registerComponent,o=a("components:pool:warn");r.exports.Component=i("pool",{schema:{mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var t=this.data.mixin,r;if(t)for(this.availableEls=[],this.usedEls=[],r=0;r<this.data.size;++r)this.createEntity()},update:function(t){var r=this.data;(t.mixin!==r.mixin||t.size!==r.size)&&this.initPool()},createEntity:function(){var t=document.createElement("a-entity");t.play=this.wrapPlay(t.play),t.setAttribute("mixin",this.data.mixin),t.setAttribute("visible",!1),this.el.appendChild(t),this.availableEls.push(t)},wrapPlay:function(t){var r=this.usedEls;return function(){-1===r.indexOf(this)||t.call(this)}},requestEntity:function(){var t;if(0===this.availableEls.length){if(!1===this.data.dynamic)return void o("Requested entity from empty pool "+this.name);o("Requested entity from empty pool. This pool is dynamicand will resize automatically. You might want to increase its initial size"+this.name),this.createEntity()}return t=this.availableEls.shift(),this.usedEls.push(t),t.setAttribute("visible",!0),t},returnEntity:function(t){var r=this.usedEls.indexOf(t);return-1===r?void o("The returned entity was not previously pooled from "+this.name):void(this.usedEls.splice(r,1),this.availableEls.push(t),t.setAttribute("visible",!1),t.pause())}})},{"../../core/component":125,"../../utils/debug":191}],104:[function(t,r){var a=t("../../core/component").registerComponent,i=t("../../lib/three");r.exports.Component=a("screenshot",{schema:{width:{default:4096},height:{default:2048}},init:function(){function t(){var t=r.renderer.getContext();a.cubeMapSize=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),a.material=new i.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:"attribute vec3 position;\nattribute vec2 uv;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUv;\nvoid main()  {\n  vUv = vec2( 1.- uv.x, uv.y );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform samplerCube map;\nvarying vec2 vUv;\n#define M_PI 3.141592653589793238462643383279\nvoid main() {\n  vec2 uv = vUv;\n  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;\n  float latitude = uv.y * M_PI;\n  vec3 dir = vec3(\n    - sin( longitude ) * sin( latitude ),\n    cos( latitude ),\n    - cos( longitude ) * sin( latitude )\n  );\n  normalize( dir );\n  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );\n}",side:i.DoubleSide}),a.quad=new i.Mesh(new i.PlaneBufferGeometry(1,1),a.material),a.quad.visible=!1,a.camera=new i.OrthographicCamera(-1/2,1/2,1/2,-1/2,-1e4,1e4),a.canvas=document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),r.camera&&r.camera.add(a.quad),a.onKeyDown=a.onKeyDown.bind(a),a.onCameraActive=a.onCameraActive.bind(a),r.addEventListener("camera-set-active",a.onCameraActive)}var r=this.el,a=this;r.renderer?t():r.addEventListener("render-target-loaded",t)},getRenderTarget:function(t,r){return new i.WebGLRenderTarget(t,r,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,wrapS:i.ClampToEdgeWrapping,wrapT:i.ClampToEdgeWrapping,format:i.RGBAFormat,type:i.UnsignedByteType})},resize:function(t,r){this.quad.scale.set(t,r,1),this.camera.left=-1*t/2,this.camera.right=t/2,this.camera.top=r/2,this.camera.bottom=-1*r/2,this.camera.updateProjectionMatrix(),this.canvas.width=t,this.canvas.height=r},play:function(){window.addEventListener("keydown",this.onKeyDown)},onCameraActive:function(t){var r=this.quad.parent;r&&r.remove(this.quad),t.detail.cameraEl.getObject3D("camera").add(this.quad)},onKeyDown:function(t){var r=83===t.keyCode&&t.ctrlKey&&t.altKey;if(this.data&&r){var a=t.shiftKey?"equirectangular":"perspective";this.capture(a)}},setCapture:function(t){var r=this.el,a,o,n;return"perspective"===t?(this.quad.visible=!1,o=r.camera,a={width:this.data.width,height:this.data.height}):(o=this.camera,o.position.copy(r.camera.getWorldPosition()),o.rotation.copy(r.camera.getWorldRotation()),n=new i.CubeCamera(r.camera.near,r.camera.far,m(this.cubeMapSize,2048)),n.position.copy(r.camera.getWorldPosition()),n.rotation.copy(r.camera.getWorldRotation()),n.updateCubeMap(r.renderer,r.object3D),this.quad.material.uniforms.map.value=n.renderTarget.texture,a={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:o,size:a,projection:t}},capture:function(t){var r=this.setCapture(t);this.renderCapture(r.camera,r.size,r.projection),this.saveCapture()},getCanvas:function(t){var r=this.setCapture(t);return this.renderCapture(r.camera,r.size,r.projection),this.canvas},renderCapture:function(t,r,a){var i=this.el.renderer.autoClear,o=this.el,n=this.el.renderer,s,l,d;l=this.getRenderTarget(r.width,r.height),d=new Uint8Array(4*r.width*r.height),this.resize(r.width,r.height),n.autoClear=!0,n.render(o.object3D,t,l,!0),n.autoClear=i,n.readRenderTargetPixels(l,0,0,r.width,r.height,d),"perspective"===a&&(d=this.flipPixelsVertically(d,r.width,r.height)),s=new ImageData(new Uint8ClampedArray(d),r.width,r.height),this.quad.visible=!1,this.ctx.putImageData(s,0,0)},flipPixelsVertically:function(t,r,a){for(var i=t.slice(0),o=0;o<r;++o)for(var n=0;n<a;++n)i[4*o+4*(n*r)]=t[4*o+4*((a-n)*r)],i[4*o+1+4*(n*r)]=t[4*o+1+4*((a-n)*r)],i[4*o+2+4*(n*r)]=t[4*o+2+4*((a-n)*r)],i[4*o+3+4*(n*r)]=t[4*o+3+4*((a-n)*r)];return i},saveCapture:function(){this.canvas.toBlob(function(t){var r="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",a=document.createElement("a"),i=URL.createObjectURL(t);a.href=i,a.setAttribute("download",r),a.innerHTML="downloading...",a.style.display="none",document.body.appendChild(a),setTimeout(function(){a.click(),document.body.removeChild(a)},1)},"image/png")}})},{"../../core/component":125,"../../lib/three":173}],105:[function(t,r){function a(t){var r=new p(t.renderer),a=new s(t),i=t.isMobile?[]:[r,a];return new o({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:i})}var i=t("../../core/component").registerComponent,o=t("../../../vendor/rStats"),n=t("../../utils");t("../../../vendor/rStats.extras"),t("../../lib/rStatsAframe");var s=window.aframeStats,l=n.bind,d="a-hidden",p=window.threeStats;r.exports.Component=i("stats",{schema:{default:!0},init:function(){var t=this.el;"false"===n.getUrlParameter("stats")||(this.stats=a(t),this.statsEl=document.querySelector(".rs-base"),this.hideBound=l(this.hide,this),this.showBound=l(this.show,this),t.addEventListener("enter-vr",this.hideBound),t.addEventListener("exit-vr",this.showBound))},update:function(){return this.stats?this.data?this.show():this.hide():void 0},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound);this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var t=this.stats;t&&(t("rAF").tick(),t("FPS").frame(),t().update())},hide:function(){this.statsEl.classList.add(d)},show:function(){this.statsEl.classList.remove(d)}})},{"../../../vendor/rStats":203,"../../../vendor/rStats.extras":202,"../../core/component":125,"../../lib/rStatsAframe":172,"../../utils":195}],106:[function(t,r){function a(t){var r,a;return a=document.createElement("div"),a.classList.add(d),a.setAttribute(n.AFRAME_INJECTED,""),r=document.createElement("button"),r.className=p,r.setAttribute("title","Enter VR mode with a headset or fullscreen mode on a desktop. Visit https://webvr.rocks or https://webvr.info for more information."),r.setAttribute(n.AFRAME_INJECTED,""),a.appendChild(r),r.addEventListener("click",function(){t()}),a}function i(t){var r=document.createElement("div");r.className=u,r.classList.add(c),r.setAttribute(n.AFRAME_INJECTED,"");var a=document.createElement("button");return a.setAttribute(n.AFRAME_INJECTED,""),a.innerHTML="Exit VR",a.addEventListener("click",t),r.appendChild(a),r}var o=t("../../core/component").registerComponent,n=t("../../constants/"),s=t("../../utils/"),l=s.bind,d="a-enter-vr",p="a-enter-vr-button",c="a-hidden",u="a-orientation-modal";r.exports.Component=o("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0}},init:function(){var t=this,r=this.el;"false"===s.getUrlParameter("ui")||(this.enterVR=l(r.enterVR,r),this.exitVR=l(r.exitVR,r),this.insideLoader=!1,this.enterVREl=null,this.orientationModalEl=null,r.addEventListener("enter-vr",l(this.updateEnterVRInterface,this)),r.addEventListener("exit-vr",l(this.updateEnterVRInterface,this)),window.addEventListener("message",function(r){"loaderReady"===r.data.type&&(t.insideLoader=!0,t.remove())}),window.addEventListener("orientationchange",l(this.toggleOrientationModalIfNeeded,this)))},update:function(){var t=this.el;return!this.data.enabled||this.insideLoader||"false"===s.getUrlParameter("ui")?this.remove():void(this.enterVREl||this.orientationModalEl||(this.enterVREl=a(this.enterVR),t.appendChild(this.enterVREl),this.orientationModalEl=i(this.exitVR),t.appendChild(this.orientationModalEl),this.updateEnterVRInterface()))},remove:function(){[this.enterVREl,this.orientationModalEl].forEach(function(t){t&&t.parentNode.removeChild(t)})},updateEnterVRInterface:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var t=this.el;this.enterVREl&&(t.is("vr-mode")?this.enterVREl.classList.add(c):this.enterVREl.classList.remove(c))},toggleOrientationModalIfNeeded:function(){var t=this.el,r=this.orientationModalEl;r&&t.isMobile&&(!s.device.isLandscape()&&t.is("vr-mode")?r.classList.remove(c):r.classList.add(c))}})},{"../../constants/":116,"../../core/component":125,"../../utils/":195}],107:[function(t,r){var a=t("../core/component"),o=t("../lib/three"),i=t("../utils/bind"),n=a.registerComponent;r.exports.Component=n("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=i(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var t=this.data;this.updateDescendants(t.cast,t.receive)},remove:function(){var t=this.el;t.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(t,r){var a=this.el.sceneEl;this.el.object3D.traverse(function(n){if(n instanceof o.Mesh&&(n.castShadow=t,n.receiveShadow=r,a.hasLoaded&&n.material))for(var s=n.material.materials||[n.material],l=0;l<s.length;l++)s[l].needsUpdate=!0})}})},{"../core/component":125,"../lib/three":173,"../utils/bind":189}],108:[function(t,r){var a=t("../core/component").registerComponent,i=t("../utils/debug"),o=t("../utils/bind"),n=t("../lib/three"),s=i("components:sound:warn");r.exports.Component=a("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){this.listener=null,this.audioLoader=new n.AudioLoader,this.pool=new n.Group,this.loaded=!1,this.mustPlay=!1,this.playSound=o(this.playSound,this)},update:function(t){var r=this.data,a=r.src!==t.src;if(a){if(!r.src)return void s("Audio source was not specified with `src`");this.setupSound()}if(this.pool.children.forEach(function(t){r.positional&&(t.setDistanceModel(r.distanceModel),t.setMaxDistance(r.maxDistance),t.setRefDistance(r.refDistance),t.setRolloffFactor(r.rolloffFactor)),t.setLoop(r.loop),t.setVolume(r.volume),t.isPaused=!1}),r.on!==t.on&&this.updateEventListener(t.on),a){var i=this;this.loaded=!1,this.audioLoader.load(r.src,function(t){i.pool.children.forEach(function(r){r.setBuffer(t)}),i.loaded=!0,n.Cache.remove(r.src),(i.data.autoplay||i.mustPlay)&&i.playSound(),i.el.emit("sound-loaded")})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){this.removeEventListener(),this.el.removeObject3D(this.attrName);try{this.pool.children.forEach(function(t){t.disconnect()})}catch(t){s("Audio source not properly disconnected")}},updateEventListener:function(t){var r=this.el;t&&r.removeEventListener(t,this.playSound),r.addEventListener(this.data.on,this.playSound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSound)},setupSound:function(){var t=this.el,r=t.sceneEl;0<this.pool.children.length&&(this.stopSound(),t.removeObject3D("sound"));var a=this.listener=r.audioListener||new n.AudioListener;r.audioListener=a,r.camera&&r.camera.add(a),r.addEventListener("camera-set-active",function(t){t.detail.cameraEl.getObject3D("camera").add(a)}),this.pool=new n.Group;for(var o=0,s;o<this.data.poolSize;o++)s=this.data.positional?new n.PositionalAudio(a):new n.Audio(a),this.pool.add(s);t.setObject3D(this.attrName,this.pool),this.pool.children.forEach(function(r){r.onEnded=function(){r.isPlaying=!1,t.emit("sound-ended",{index:o})}})},pauseSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(t){t.source&&t.source.buffer&&t.isPlaying&&!t.isPaused&&(t.isPaused=!0,t.pause())})},playSound:function(){if(!this.loaded)return s("Sound not loaded yet. It will be played once it finished loading"),void(this.mustPlay=!0);var t=!1;return this.isPlaying=!0,this.pool.children.forEach(function(r){if(!r.isPlaying&&r.buffer&&!t)return r.play(),r.isPaused=!1,void(t=!0)}),t?void(this.mustPlay=!1):void s("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(t){t.source&&t.source.buffer&&t.stop()})}})},{"../core/component":125,"../lib/three":173,"../utils/bind":189,"../utils/debug":191}],109:[function(t,r){function a(t){return"back"===t?y.BackSide:"double"===t?y.DoubleSide:y.FrontSide}function i(t){return t=f.clone(t),void 0!==t.lineHeight&&(t.lineHeight=parseFloat(t.lineHeight),!isFinite(t.lineHeight)&&(t.lineHeight=void 0)),void 0!==t.width&&(t.width=parseFloat(t.width),!isFinite(t.width)&&(t.width=void 0)),t}function o(t,r){return new Promise(function(a,i){u(t,function(o,n){return o?(M("Error loading font",t),void i(o)):void(0<=t.indexOf("/Roboto-msdf.json")&&(r=30),r&&n.chars.map(function(t){t.yoffset+=r}),a(n))})})}function n(t){return new Promise(function(r,a){new y.ImageLoader().load(t,function(t){r(t)},void 0,function(){M("Error loading font image",t),a(null)})})}function s(t,r,a){var i,o;return o=new x[r].Shader,o.el=t,o.init(a),o.update(a),i=o.material,i.transparent=a.transparent,{material:i,shader:o}}function l(t,r){t.side=r.side}function d(t,r,a){return t||(0.5+r)*a}function p(t){var r=0,a=0,i=0;return t.chars.map(function(t){r+=t.xadvance,48<=t.id&&57>=t.id&&(i++,a+=t.xadvance)}),i?a/i:r/t.chars.length}var c=t("three-bmfont-text"),u=t("load-bmfont"),m=t("path"),g=t("../core/component").registerComponent,h=t("../core/shader"),y=t("../lib/three"),f=t("../utils/"),M=f.debug("components:text:error"),x=h.shaders,E=f.debug("components:text:warn"),v="https://cdn.aframe.io/fonts/",A={aileronsemibold:v+"Aileron-Semibold.fnt",dejavu:v+"DejaVu-sdf.fnt",exo2bold:v+"Exo2Bold.fnt",exo2semibold:v+"Exo2SemiBold.fnt",kelsonsans:v+"KelsonSans.fnt",monoid:v+"Monoid.fnt",mozillavr:v+"mozillavr.fnt",roboto:v+"Roboto-msdf.json",sourcecodepro:v+"SourceCodePro.fnt"},T=["roboto"],b="roboto";r.exports.FONTS=A;var L=new function(){var t=this.cache={};this.get=function(r,a){return r in t?t[r]:(t[r]=a(),t[r])}},N={};r.exports.Component=g("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:0.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:b},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:x},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},yOffset:{type:"number",default:0},zOffset:{type:"number",default:1e-3}},init:function(){this.texture=new y.Texture,this.texture.anisotropy=16,this.geometry=c(),this.createOrUpdateMaterial(),this.mesh=new y.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh)},update:function(t){var r=i(this.data),a=this.currentFont;return this.createOrUpdateMaterial(),t.font===r.font?void(a&&(this.updateGeometry(this.geometry,r,a),this.updateLayout(r))):void this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var t=this.data,r=this.material,i,o,n,d;return d=t.shader,-1!==T.indexOf(t.font)||0<=t.font.indexOf("-msdf.")?d="msdf":t.font in A&&-1===T.indexOf(t.font)&&(d="sdf"),i=(this.shaderObject&&this.shaderObject.name)!==d,n={alphaTest:t.alphaTest,color:t.color,map:this.texture,opacity:t.opacity,side:a(t.side),transparent:t.transparent},i?void(o=s(this.el,d,n),this.material=o.material,this.shaderObject=o.shader,l(this.material,n),this.mesh&&(this.mesh.material=this.material)):(this.shaderObject.update(n),r.transparent=n.transparent,void l(r,n))},updateFont:function(){var t=this.data,r=this.el,a=this.geometry,s=this,l;t.font||E("No font specified. Using the default font."),this.mesh.visible=!1,l=this.lookupFont(t.font||b)||t.font,L.get(l,function(){return o(l,t.yOffset)}).then(function(o){var d,c;if(1!==o.pages.length)throw new Error("Currently only single-page bitmap fonts are supported.");N[l]||(o.widthFactor=N[o]=p(o)),d=i(t),s.updateGeometry(a,s.data,o),s.currentFont=o,s.updateLayout(d),c=t.fontImage||l.replace(/(\.fnt)|(\.json)/,".png")||m.dirname(t.font)+"/"+o.pages[0],L.get(c,function(){return n(c)}).then(function(a){s.mesh.visible=!0,s.texture.image=a,s.texture.needsUpdate=!0,r.emit("textfontset",{font:t.font,fontObj:o})}).catch(function(t){throw M(t),t})}).catch(function(t){throw M(t),t})},updateLayout:function(t){var r=this.el,a=this.geometry,i=r.getAttribute("geometry"),o=a.layout,n=this.mesh,s,l,p,c,u,m,g,h;if(i=r.getAttribute("geometry"),m=t.width||i&&i.width||1,c=d(t.wrapPixels,t.wrapCount,this.currentFont.widthFactor),u=m/c,p=u*(o.height+o.descender),i&&(!i.width&&r.setAttribute("geometry","width",m),!i.height&&r.setAttribute("geometry","height",p)),s="align"===t.anchor?t.align:t.anchor,"left"===s)g=0;else if("right"===s)g=-1*o.width;else if("center"===s)g=-1*o.width/2;else throw new TypeError("Invalid text.anchor property value",s);if(l=t.baseline,"bottom"===l)h=0;else if("top"===l)h=-1*o.height+o.ascender;else if("center"===l)h=-1*o.height/2;else throw new TypeError("Invalid text.baseline property value",l);n.position.x=g*u,n.position.y=h*u,n.position.z=t.zOffset,n.scale.set(u,-1*u,u),this.geometry.computeBoundingSphere()},lookupFont:function(t){return A[t]},updateGeometry:function(t,r,a){t.update(f.extend({},r,{font:a,width:d(r.wrapPixels,r.wrapCount,a.widthFactor),text:r.value.toString().replace(/\\n/g,"\n").replace(/\\t/g,"\t"),lineHeight:r.lineHeight||a.common.lineHeight}))}})},{"../core/component":125,"../core/shader":134,"../lib/three":173,"../utils/":195,"load-bmfont":24,path:32,"three-bmfont-text":37}],110:[function(t,r){var a=t("../core/component").registerComponent,i=t("../utils/tracked-controls"),o=t("../lib/three"),n=t("../constants").DEFAULT_CAMERA_HEIGHT,s=t("../constants").DEFAULT_HANDEDNESS,l={x:0.175,y:-0.3,z:-0.03},d={x:0,y:0,z:-0.175};r.exports.Component=a("tracked-controls",{schema:{controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},rotationOffset:{default:0},armModel:{default:!0},headElement:{type:"selector"}},init:function(){this.axis=[0,0,0],this.buttonStates={},this.targetControllerNumber=this.data.controller,this.dolly=new o.Object3D,this.controllerEuler=new o.Euler,this.controllerEuler.order="YXZ",this.controllerPosition=new o.Vector3,this.controllerQuaternion=new o.Quaternion,this.deltaControllerPosition=new o.Vector3,this.position=new o.Vector3,this.rotation={},this.standingMatrix=new o.Matrix4,this.previousControllerPosition=new o.Vector3,this.updateGamepad()},tick:function(t,r){var a=this.el.getObject3D("mesh");a&&a.update&&a.update(r/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return n},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var t=this.data,r=i.findMatchingController(this.system.controllers,t.id,t.idPrefix,t.hand,t.controller);this.controller=r},applyArmModel:function(t){var r=this.controller,a=this.controllerEuler,i=this.controllerQuaternion,o=this.deltaControllerPosition,n,p,c,u,m,g;c=this.getHeadElement(),u=c.object3D,p=c.components.camera,g=(p?p.data.userHeight:0)||this.defaultUserHeight(),m=r.pose,n=(r?r.hand:void 0)||s,t.copy(u.position),o.set(l.x*("left"===n?-1:"right"===n?1:0),l.y,l.z),o.multiplyScalar(g),o.applyAxisAngle(u.up,u.rotation.y),t.add(o),o.set(d.x,d.y,d.z),o.multiplyScalar(g),m.orientation?i.fromArray(m.orientation):i.copy(u.quaternion),a.setFromQuaternion(i),a.set(a.x,a.y,0),o.applyEuler(a),t.add(o)},updatePose:function(){var t=this.controller,r=this.controllerEuler,a=this.controllerPosition,i=this.previousControllerPosition,n=this.dolly,s=this.el,l=this.standingMatrix,d=this.system.vrDisplay,p=this.getHeadElement(),c=p.components.camera,u=(c?c.data.userHeight:0)||this.defaultUserHeight(),m,g;t&&(g=t.pose,null!==g.orientation&&n.quaternion.fromArray(g.orientation),null===g.position?this.data.armModel&&this.applyArmModel(n.position):n.position.fromArray(g.position),null!=g.position&&d?d.stageParameters?(l.fromArray(d.stageParameters.sittingToStandingTransform),n.matrix.compose(n.position,n.quaternion,n.scale),n.matrix.multiplyMatrices(l,n.matrix)):(n.position.y+=u,n.matrix.compose(n.position,n.quaternion,n.scale)):n.matrix.compose(n.position,n.quaternion,n.scale),r.setFromRotationMatrix(n.matrix),a.setFromMatrixPosition(n.matrix),this.rotation.x=o.Math.radToDeg(r.x),this.rotation.y=o.Math.radToDeg(r.y),this.rotation.z=o.Math.radToDeg(r.z)+this.data.rotationOffset,s.setAttribute("rotation",this.rotation),m=s.getAttribute("position"),this.position.copy(m).sub(i).add(a),s.setAttribute("position",this.position),i.copy(a))},updateButtons:function(){var t=this.controller,r,a;if(t){for(a=0;a<t.buttons.length;++a)this.buttonStates[a]||(this.buttonStates[a]={pressed:!1,touched:!1,value:0}),r=t.buttons[a],this.handleButton(a,r);this.handleAxes()}},handleButton:function(t,r){var a=this.handlePress(t,r)||this.handleTouch(t,r)||this.handleValue(t,r);return!!a&&(this.el.emit("buttonchanged",{id:t,state:r}),!0)},handleAxes:function(){var t=!1,r=this.controller.axes,a=this.axis,o=[],n;for(n=0;n<r.length;++n)o.push(a[n]!==r[n]),o[n]&&(t=!0);return!!t&&(this.axis=r.slice(),this.el.emit("axismove",{axis:this.axis,changed:o}),!0)},handlePress:function(t,r){var a=this.buttonStates[t],i;return r.pressed!==a.pressed&&(i=r.pressed?"down":"up",this.el.emit("button"+i,{id:t,state:r}),a.pressed=r.pressed,!0)},handleTouch:function(t,r){var a=this.buttonStates[t],i;return r.touched!==a.touched&&(i=r.touched?"start":"end",this.el.emit("touch"+i,{id:t,state:r},!0,{touches:[]}),a.touched=r.touched,!0)},handleValue:function(t,r){var a=this.buttonStates[t];return r.value!==a.value&&(a.value=r.value,!0)}})},{"../constants":116,"../core/component":125,"../lib/three":173,"../utils/tracked-controls":199}],111:[function(t,r){var a=t("../core/component").registerComponent;r.exports.Component=a("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},{"../core/component":125}],112:[function(t,r){var a=t("../core/component").registerComponent,i=t("../utils/"),o=i.bind,n=i.trackedControls.checkControllerPresentAndSetup,s=i.trackedControls.emitIfAxesChanged,l="OpenVR ";r.exports.Component=a("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},rotationOffset:{default:0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},init:function(){var t=this;this.animationActive="pointing",this.checkControllerPresentAndSetup=n,this.controllerPresent=!1,this.emitIfAxesChanged=s,this.lastControllerCheck=0,this.onButtonChanged=o(this.onButtonChanged,this),this.onButtonDown=function(r){t.onButtonEvent(r.detail.id,"down")},this.onButtonUp=function(r){t.onButtonEvent(r.detail.id,"up")},this.onButtonTouchEnd=function(r){t.onButtonEvent(r.detail.id,"touchend")},this.onButtonTouchStart=function(r){t.onButtonEvent(r.detail.id,"touchstart")},this.onAxisMoved=o(this.onAxisMoved,this),this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=o(this.onModelLoaded,this),this.onControllersUpdate=o(this.onControllersUpdate,this),this.checkIfControllerPresent=o(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=o(this.removeControllersUpdateListener,this),this.onAxisMoved=o(this.onAxisMoved,this)},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var t=this.data,r="right"===t.hand?0:"left"===t.hand?1:2;this.checkControllerPresentAndSetup(this,l,{index:r})},injectTrackedControls:function(){var t=this.el,r=this.data;t.setAttribute("tracked-controls",{idPrefix:l,controller:"right"===r.hand?0:"left"===r.hand?1:2,rotationOffset:r.rotationOffset});this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",mtl:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(t){var r=this.mapping.buttons[t.detail.id],a=this.buttonMeshes,i;r&&("trigger"===r&&(i=t.detail.state.value,a&&a.trigger&&(a.trigger.rotation.x=-i*(L/12))),this.el.emit(r+"changed",t.detail.state))},onModelLoaded:function(t){var r=t.detail.model,a=this,i;this.data.model&&(i=this.buttonMeshes={},i.grip={left:r.getObjectByName("leftgrip"),right:r.getObjectByName("rightgrip")},i.menu=r.getObjectByName("menubutton"),i.system=r.getObjectByName("systembutton"),i.trackpad=r.getObjectByName("touchpad"),i.trigger=r.getObjectByName("trigger"),Object.keys(i).forEach(function(t){a.setButtonColor(t,a.data.buttonColor)}),r.position.set(0,-0.015,0.04))},onAxisMoved:function(t){this.emitIfAxesChanged(this,this.mapping.axes,t)},onButtonEvent:function(t,r){var a=this.mapping.buttons[t],o=-1!==r.indexOf("touch"),n,s;if(Array.isArray(a))for(s=0;s<a.length;s++)this.el.emit(a[s]+r);else this.el.emit(a+r);if(this.data.model&&!o)if(n="up"===r?this.data.buttonColor:this.data.buttonHighlightColor,Array.isArray(a))for(s=0;s<a.length;s++)this.setButtonColor(a[s],n);else this.setButtonColor(a,n)},setButtonColor:function(t,r){var a=this.buttonMeshes;return a?"grip"===t?(a.grip.left.material.color.set(r),void a.grip.right.material.color.set(r)):void a[t].material.color.set(r):void 0}})},{"../core/component":125,"../utils/":195}],113:[function(t,r){function a(t){for(var r in t)return!1;return!0}var i=t("../constants").keyboardevent.KEYCODE_TO_CODE,o=t("../core/component").registerComponent,n=t("../lib/three"),s=t("../utils/"),l=s.bind,d=s.shouldCaptureKeyEvent,p=1e-5,c=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];r.exports.Component=o("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},easing:{default:20},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.position={},this.velocity=new n.Vector3,this.onBlur=l(this.onBlur,this),this.onFocus=l(this.onFocus,this),this.onKeyDown=l(this.onKeyDown,this),this.onKeyUp=l(this.onKeyUp,this),this.onVisibilityChange=l(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(t,r){var i=this.data,o=this.el,n=this.position,s=this.velocity,l,d;(s[i.adAxis]||s[i.wsAxis]||!a(this.keys))&&(r/=1e3,this.updateVelocity(r),(s[i.adAxis]||s[i.wsAxis])&&(l=o.getAttribute("position"),d=this.getMovementVector(r),n.x=l.x+d.x,n.y=l.y+d.y,n.z=l.z+d.z,o.setAttribute("position",n)))},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(t){var r=this.data,a=this.keys,i=this.velocity,o,n,s,l,d;return(n=r.adAxis,l=r.wsAxis,t>0.2)?(i[n]=0,void(i[l]=0)):void(0!==i[n]&&(i[n]-=i[n]*r.easing*t),0!==i[l]&&(i[l]-=i[l]*r.easing*t),g(i[n])<p&&(i[n]=0),g(i[l])<p&&(i[l]=0),r.enabled&&(o=r.acceleration,r.adEnabled&&(s=r.adInverted?-1:1,(a.KeyA||a.ArrowLeft)&&(i[n]-=s*o*t),(a.KeyD||a.ArrowRight)&&(i[n]+=s*o*t)),r.wsEnabled&&(d=r.wsInverted?-1:1,(a.KeyW||a.ArrowUp)&&(i[l]-=d*o*t),(a.KeyS||a.ArrowDown)&&(i[l]+=d*o*t))))},getMovementVector:function(){var t=new n.Vector3(0,0,0),r=new n.Euler(0,0,0,"YXZ");return function(a){var i=this.el.getAttribute("rotation"),o=this.velocity,s;return(t.copy(o),t.multiplyScalar(a),!i)?t:(s=this.data.fly?i.x:0,r.set(n.Math.degToRad(s),n.Math.degToRad(i.y),0),t.applyEuler(r),t)}}(),attachVisibilityEventListeners:function(){window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(t){var r;d(t)&&(r=t.code||i[t.keyCode],-1!==c.indexOf(r)&&(this.keys[r]=!0))},onKeyUp:function(t){var r;r=t.code||i[t.keyCode],delete this.keys[r]}})},{"../constants":116,"../core/component":125,"../lib/three":173,"../utils/":195}],114:[function(t,r){var a=t("../utils/bind"),i=t("../core/component").registerComponent,o=t("../utils/tracked-controls"),n=t("../utils/"),s=n.debug("components:windows-motion-controls:debug"),l=n.debug("components:windows-motion-controls:warn"),d=t("../constants").DEFAULT_HANDEDNESS,p={left:"left.glb",right:"right.glb",default:"universal.glb"},c="Spatial Controller (Spatial Interaction Source) ",u=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/;r.exports.Component=i("windows-motion-controls",{schema:{hand:{default:d},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:{axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=a(this.onModelError,this),this.onModelLoaded=a(this.onModelLoaded,this),this.onControllersUpdate=a(this.onControllersUpdate,this),this.checkIfControllerPresent=a(this.checkIfControllerPresent,this),this.onAxisMoved=a(this.onAxisMoved,this)},init:function(){var t=this,r=this.el;this.onButtonChanged=a(this.onButtonChanged,this),this.onButtonDown=function(r){t.onButtonEvent(r,"down")},this.onButtonUp=function(r){t.onButtonEvent(r,"up")},this.onButtonTouchStart=function(r){t.onButtonEvent(r,"touchstart")},this.onButtonTouchEnd=function(r){t.onButtonEvent(r,"touchend")},this.onControllerConnected=function(){t.setModelVisibility(!0)},this.onControllerDisconnected=function(){t.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},this.emitIfAxesChanged=o.emitIfAxesChanged,this.checkControllerPresentAndSetup=o.checkControllerPresentAndSetup,r.addEventListener("controllerconnected",this.onControllerConnected),r.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("axismove",this.onAxisMoved),t.addEventListener("model-error",this.onModelError),t.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("axismove",this.onAxisMoved),t.removeEventListener("model-error",this.onModelError),t.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,c,{hand:this.data.hand,index:this.data.pair})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh)return void this.modelReady();var t=this.createControllerModelUrl();this.loadModel(t)},createControllerModelUrl:function(t){var r=this.el.components["tracked-controls"],a=r?r.controller:null,i="default",o=this.data.hand,n;if(a&&(o=a.hand,!t)){var s=a.id.match(u);i=s&&s[0]||i}return n=p[o]||p.default,"https://cdn.aframe.io/controllers/microsoft/"+i+"/"+n},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{idPrefix:c,controller:t.pair,hand:t.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(t){var r=this.createControllerModelUrl(!0);t.detail.src===r?l("Failed to load default controller model."):(l("Failed to load controller model for device, attempting to load default."),this.loadModel(r))},loadModel:function(t){this.el.setAttribute("gltf-model","url("+t+")")},onModelLoaded:function(t){function r(t,r){for(var a=0,i=t.children.length,o;a<i;a++)if(o=t.children[a],o&&o.name===r)return o}var a=this.controllerModel=t.detail.model,o=this.loadedMeshInfo,n,d,p,c;if(s("Processing model"),o.buttonMeshes={},o.axisMeshes={},a){for(n=0;n<this.mapping.buttons.length;n++){if(d=this.mapping.buttonMeshNames[this.mapping.buttons[n]],!d){s("Skipping unknown button at index: "+n+" with mapped name: "+this.mapping.buttons[n]);continue}if(p=a.getObjectByName(d),!p){l("Missing button mesh with name: "+d);continue}c={index:n,value:r(p,"VALUE"),pressed:r(p,"PRESSED"),unpressed:r(p,"UNPRESSED")},c.value&&c.pressed&&c.unpressed?o.buttonMeshes[this.mapping.buttons[n]]=c:l("Missing button submesh under mesh with name: "+d+"(VALUE: "+!!c.value+", PRESSED: "+!!c.pressed+", UNPRESSED:"+!!c.unpressed+")")}for(n=0;n<this.mapping.axisMeshNames.length;n++){if(d=this.mapping.axisMeshNames[n],!d){s("Skipping unknown axis at index: "+n);continue}if(p=a.getObjectByName(d),!p){l("Missing axis mesh with name: "+d);continue}c={index:n,value:r(p,"VALUE"),min:r(p,"MIN"),max:r(p,"MAX")},c.value&&c.min&&c.max?o.axisMeshes[n]=c:l("Missing axis submesh under mesh with name: "+d+"(VALUE: "+!!c.value+", MIN: "+!!c.min+", MAX:"+!!c.max+")")}this.calculateRayOriginFromMesh(a),this.setModelVisibility()}s("Model load complete.")},calculateRayOriginFromMesh:function(){var t=new THREE.Quaternion;return function(r){var a;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,a=r.getObjectByName(this.mapping.pointingPoseMeshName),a){var i=r.parent;i&&(r.parent=null,r.updateMatrixWorld(!0),r.parent=i),a.getWorldPosition(this.rayOrigin.origin),a.getWorldQuaternion(t),this.rayOrigin.direction.applyQuaternion(t),i&&r.updateMatrixWorld(!0)}else s("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var t=new THREE.Quaternion;return function(r,a){var i=this.loadedMeshInfo.axisMeshes[r];if(i){var o=i.min,n=i.max,s=i.value,l=0.5*a+0.5;s.setRotationFromQuaternion(t.copy(o.quaternion).slerp(n.quaternion,l)),s.position.lerpVectors(o.position,n.position,l)}}}(),lerpButtonTransform:function(){var t=new THREE.Quaternion;return function(r,a){var i=this.loadedMeshInfo.buttonMeshes[r];if(i){var o=i.unpressed,n=i.pressed,s=i.value;s.setRotationFromQuaternion(t.copy(o.quaternion).slerp(n.quaternion,a)),s.position.lerpVectors(o.position,n.position,a)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(t){var r=this.mapping.buttons[t.detail.id];r&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(r,t.detail.state.value),this.el.emit(r+"changed",t.detail.state))},onButtonEvent:function(t,r){var a=this.mapping.buttons[t.detail.id];s("onButtonEvent("+t.detail.id+", "+r+")"),a&&this.el.emit(a+r)},onAxisMoved:function(t){var r=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var a=0;a<r;a++)this.lerpAxisTransform(a,t.detail.axis[a]||0);this.emitIfAxesChanged(this,this.mapping.axes,t)},setModelVisibility:function(t){var r=this.el.getObject3D("mesh");t=t===void 0?this.modelVisible:t,this.modelVisible=t;r&&(r.visible=t)}})},{"../constants":116,"../core/component":125,"../utils/":195,"../utils/bind":189,"../utils/tracked-controls":199}],115:[function(t,r){var a=t("@tweenjs/tween.js"),i={alternate:"alternate",alternateReverse:"alternate-reverse",normal:"normal",reverse:"reverse"},o={linear:a.Easing.Linear.None,ease:a.Easing.Cubic.InOut,"ease-in":a.Easing.Cubic.In,"ease-out":a.Easing.Cubic.Out,"ease-in-out":a.Easing.Cubic.InOut,"ease-cubic":a.Easing.Cubic.In,"ease-in-cubic":a.Easing.Cubic.In,"ease-out-cubic":a.Easing.Cubic.Out,"ease-in-out-cubic":a.Easing.Cubic.InOut,"ease-quad":a.Easing.Quadratic.InOut,"ease-in-quad":a.Easing.Quadratic.In,"ease-out-quad":a.Easing.Quadratic.Out,"ease-in-out-quad":a.Easing.Quadratic.InOut,"ease-quart":a.Easing.Quartic.InOut,"ease-in-quart":a.Easing.Quartic.In,"ease-out-quart":a.Easing.Quartic.Out,"ease-in-out-quart":a.Easing.Quartic.InOut,"ease-quint":a.Easing.Quintic.InOut,"ease-in-quint":a.Easing.Quintic.In,"ease-out-quint":a.Easing.Quintic.Out,"ease-in-out-quint":a.Easing.Quintic.InOut,"ease-sine":a.Easing.Sinusoidal.InOut,"ease-in-sine":a.Easing.Sinusoidal.In,"ease-out-sine":a.Easing.Sinusoidal.Out,"ease-in-out-sine":a.Easing.Sinusoidal.InOut,"ease-expo":a.Easing.Exponential.InOut,"ease-in-expo":a.Easing.Exponential.In,"ease-out-expo":a.Easing.Exponential.Out,"ease-in-out-expo":a.Easing.Exponential.InOut,"ease-circ":a.Easing.Circular.InOut,"ease-in-circ":a.Easing.Circular.In,"ease-out-circ":a.Easing.Circular.Out,"ease-in-out-circ":a.Easing.Circular.InOut,"ease-elastic":a.Easing.Elastic.InOut,"ease-in-elastic":a.Easing.Elastic.In,"ease-out-elastic":a.Easing.Elastic.Out,"ease-in-out-elastic":a.Easing.Elastic.InOut,"ease-back":a.Easing.Back.InOut,"ease-in-back":a.Easing.Back.In,"ease-out-back":a.Easing.Back.Out,"ease-in-out-back":a.Easing.Back.InOut,"ease-bounce":a.Easing.Bounce.InOut,"ease-in-bounce":a.Easing.Bounce.In,"ease-out-bounce":a.Easing.Bounce.Out,"ease-in-out-bounce":a.Easing.Bounce.InOut},n={backwards:"backwards",both:"both",forwards:"forwards",none:"none"},s={attribute:"rotation",begin:"",end:"",delay:0,dur:1e3,easing:"ease",direction:i.normal,fill:n.forwards,from:void 0,repeat:0,to:void 0};r.exports.defaults=s,r.exports.directions=i,r.exports.easingFunctions=o,r.exports.fills=n,r.exports.repeats={indefinite:"indefinite"}},{"@tweenjs/tween.js":1}],116:[function(t,r){r.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",animation:t("./animation"),keyboardevent:t("./keyboardevent")}},{"./animation":115,"./keyboardevent":117}],117:[function(t,r){r.exports={KEYCODE_TO_CODE:{37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",65:"KeyA",68:"KeyD",83:"KeyS",87:"KeyW"}}},{}],118:[function(t,r){function a(t){return E.extend({},t)}function i(t,r,a,i,s){function l(){c=new x.Color(a||t.getAttribute(r)),m=new x.Color(i),E=function(a){1<p.length&&t.setAttribute(p[0],p[1],d(a)),t.setAttribute(r,d(a))}}var p=r.split("."),c={},m={},g,h,f,M,E;return 2===p.length?function(){var r=p[0],a=p[1],i=t.components[r],o=i&&i.schema;return o&&o[a]&&"color"===o[a].type}()?l():function(){M=p[0],f=p[1],h=t.components[M],h||(t.setAttribute(M,""),h=t.components[M]),g=h.schema,c[r]=void 0===a?A(t,r):a,c[r]=y(c[r],g[f]),m[r]=y(i,g[f]),E=function(a){r in a&&t.setAttribute(M,f,a[r])}}():i&&w(i)?function(){c=a?u.parse(a):s,m=u.parse(i),E=function(a){t.setAttribute(r,a)}}():-1===["true","false"].indexOf(i)?isNaN(i)?l():function(){c[r]=void 0===a?parseFloat(t.getAttribute(r)):parseFloat(a),m[r]=parseFloat(i),E=function(a){t.setAttribute(r,a[r])}}():function(){c[r]=void 0!==a&&o(a),c[r]=n(c[r]),m[r]=n(o(i)),E=function(a){t.setAttribute(r,!!a[r])}}(),{from:c,partialSetAttribute:E,to:m}}function o(t){return!("true"!==t)}function n(t){return t?1:0}function s(t){var r=t.toString(16);return 1===r.length?"0"+r:r}function l(t){return h(255*m(g(t),1))}function d(t){return"#"+["r","g","b"].map(function(r){return s(l(t[r]))}).join("")}var p=t("./a-node"),c=t("../constants/animation"),u=t("../utils/").coordinates,y=t("./schema").parseProperty,f=t("./a-register-element").registerElement,M=t("@tweenjs/tween.js"),x=t("../lib/three"),E=t("../utils/"),v=E.bind,A=E.entity.getComponentProperty,T=c.defaults,b=c.directions,L=c.easingFunctions,N=c.fills,D=c.repeats,w=u.isCoordinates;r.exports.AAnimation=f("a-animation",{prototype:Object.create(p.prototype,{createdCallback:{value:function(){this.bindMethods(),this.isRunning=!1,this.partialSetAttribute=function(){},this.tween=null}},attachedCallback:{value:function(){this.el=this.parentNode,this.handleMixinUpdate(),this.update(),this.load()}},attributeChangedCallback:{value:function(){this.hasLoaded&&this.isRunning&&(this.stop(),this.handleMixinUpdate(),this.update())}},detachedCallback:{value:function(){this.isRunning&&this.stop()}},getTween:{value:function(){var t=this,r=t.data,o=t.el,n=r.attribute,s=parseInt(r.delay,10),l=A(o,n),d=t.getDirection(r.direction),p=L[r.easing],c=r.fill,u=r.repeat===D.indefinite?Infinity:0,m=!1,g,h,y,f;return g=i(o,n,r.from||t.initialValue,r.to,l),h=g.from,y=g.to,t.partialSetAttribute=g.partialSetAttribute,void 0===t.count&&(t.count=u===Infinity?0:parseInt(r.repeat,10)),isNaN(s)&&(s=0),t.initialValue=t.initialValue||a(l),u===Infinity&&c===N.forwards&&-1!==[b.alternate,b.alternateReverse].indexOf(r.direction)&&(m=!0),d===b.reverse&&(f=y,y=a(h),h=a(f)),-1!==[N.backwards,N.both].indexOf(c)&&t.partialSetAttribute(h),new M.Tween(a(h)).to(y,r.dur).delay(s).easing(p).repeat(u).yoyo(m).onUpdate(function(){t.partialSetAttribute(this)}).onComplete(v(t.onCompleted,t))}},update:{value:function(){var t=this.data;"infinite"===t.repeat&&console.warn("Using 'infinite' as 'repeat' value is invalid.  Use 'indefinite' instead."),""===t.begin||isNaN(t.begin)||(console.warn("Using 'begin' to specify a delay is deprecated. Use 'delay' instead."),t.delay=t.begin,t.begin="");var r=t.begin,a=t.end;this.evt&&this.removeEventListeners(this.evt),this.evt={begin:r,end:a},this.addEventListeners(this.evt),""===r&&(this.stop(),this.start())},writable:window.debug},onCompleted:{value:function(){var t=this.data;return this.isRunning=!1,-1!==[N.backwards,N.none].indexOf(t.fill)&&this.partialSetAttribute(this.initialValue),0===this.count?(this.count=void 0,void this.emit("animationend")):void(this.isRunning=!1,this.count--,this.start())}},start:{value:function(){var t=this;return this.el.hasLoaded?void(this.isRunning||!this.el.isPlaying||(this.tween=this.getTween(),this.isRunning=!0,this.tween.start(),this.emit("animationstart"))):void this.el.addEventListener("loaded",function(){t.start()})},writable:!0},stop:{value:function(){var t=this.tween;t&&(t.stop(),this.isRunning=!1,-1!==[N.backwards,N.none].indexOf(this.data.fill)&&this.partialSetAttribute(this.initialValue),this.emit("animationstop"))},writable:!0},getDirection:{value:function(t){return t===b.alternate?(this.prevDirection=this.prevDirection===b.normal?b.reverse:b.normal,this.prevDirection):t===b.alternateReverse?(this.prevDirection=this.prevDirection===b.reverse?b.normal:b.reverse,this.prevDirection):t}},bindMethods:{value:function(){this.start=v(this.start,this),this.stop=v(this.stop,this),this.onStateAdded=v(this.onStateAdded,this),this.onStateRemoved=v(this.onStateRemoved,this)}},addEventListeners:{value:function(t){var r=this.el,a=this;E.splitString(t.begin).forEach(function(t){r.addEventListener(t,a.start)}),E.splitString(t.end).forEach(function(t){r.addEventListener(t,a.stop)}),""===t.begin&&r.addEventListener("play",this.start),r.addEventListener("pause",this.stop),r.addEventListener("stateadded",this.onStateAdded),r.addEventListener("stateremoved",this.onStateRemoved)}},removeEventListeners:{value:function(t){var r=this.el,a=this.start,i=this.stop;E.splitString(t.begin).forEach(function(t){r.removeEventListener(t,a)}),E.splitString(t.end).forEach(function(t){r.removeEventListener(t,i)}),r.removeEventListener("stateadded",this.onStateAdded),r.removeEventListener("stateremoved",this.onStateRemoved)}},onStateAdded:{value:function(t){t.detail.state===this.data.begin&&this.start()},writable:!0},onStateRemoved:{value:function(t){t.detail.state===this.data.begin&&this.stop()},writable:!0},handleMixinUpdate:{value:function(){var t={},r,a,i;i=document.querySelector("#"+this.getAttribute("mixin")),a=i?E.getElData(i,T):{},r=E.getElData(this,T),E.extend(t,T,a,r),this.data=t}}})}),r.exports.getAnimationValues=i},{"../constants/animation":115,"../lib/three":173,"../utils/":195,"./a-node":123,"./a-register-element":124,"./schema":133,"@tweenjs/tween.js":1}],119:[function(t,r){function a(t){return t.hasAttribute("autoplay")||"auto"===t.getAttribute("preload")?new Promise(function(r,a){function i(){for(var a=0,o=0;o<t.buffered.length;o++)a+=t.buffered.end(o)-t.buffered.start(o);a>=t.duration&&(u.Cache.files[t.getAttribute("src")]=t,r())}return 4===t.readyState?r():t.error?a():void(t.addEventListener("loadeddata",i,!1),t.addEventListener("progress",i,!1),t.addEventListener("error",a,!1))}):void 0}function o(t){var r=i(t);return r.tagName&&"video"===r.tagName.toLowerCase()&&(r.setAttribute("playsinline",""),r.setAttribute("webkit-playsinline","")),r!==t&&(t.parentNode.appendChild(r),t.parentNode.removeChild(t)),r}function i(t){var r,a;if(t.hasAttribute("crossorigin"))return t;if(a=t.getAttribute("src"),null!==a){if(-1===a.indexOf("://"))return t;if(n(a)===window.location.host)return t}return g("Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin=\"anonymous\">)",a),t.crossOrigin="anonymous",r=t.cloneNode(!0),r}function n(t){var r=-1<t.indexOf("://")?t.split("/")[2]:t.split("/")[0];return r.split(":")[0]}function s(t){var r=t.lastIndexOf(".");if(0<=r){var a=t.slice(r,t.length);if(".gltf"===a||".glb"===a)return"arraybuffer"}return"text"}var l=t("./a-node"),d=t("../utils/bind"),p=t("../utils/debug"),c=t("./a-register-element").registerElement,u=t("../lib/three"),m=new u.FileLoader,g=p("core:a-assets:warn");r.exports=c("a-assets",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){this.isAssets=!0,this.fileLoader=m,this.timeout=null}},attachedCallback:{value:function(){var t=this,r=[],n,i,s,l,p,c;if(!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(p=this.querySelectorAll("img"),n=0;n<p.length;n++)l=o(p[n]),r.push(new Promise(function(t,r){u.Cache.files[p[n].getAttribute("src")]=l,l.onload=t,l.onerror=r}));for(s=this.querySelectorAll("audio, video"),n=0;n<s.length;n++)i=o(s[n]),r.push(a(i));Promise.all(r).then(d(this.load,this)),c=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){t.hasLoaded||(g("Asset loading timed out in ",c,"ms"),t.emit("timeout"),t.load())},c)}},detachedCallback:{value:function(){this.timeout&&clearTimeout(this.timeout)}},load:{value:function(){l.prototype.load.call(this,null,function(t){return t.isAssetItem&&t.hasAttribute("src")})}}})}),c("a-asset-item",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){this.data=null,this.isAssetItem=!0}},attachedCallback:{value:function(){var t=this,r=this.getAttribute("src");m.setResponseType(this.getAttribute("response-type")||s(r)),m.load(r,function(r){t.data=r,setTimeout(function(){l.prototype.load.call(t)})},function(r){t.emit("progress",{loadedBytes:r.loaded,totalBytes:r.total,xhr:r})},function(r){t.emit("error",{xhr:r})})}}})}),r.exports.inferResponseType=s},{"../lib/three":173,"../utils/bind":189,"../utils/debug":191,"./a-node":123,"./a-register-element":124}],120:[function(t,r){var a=t("../utils/debug"),i=t("./a-register-element").registerElement,o=a("core:cubemap:warn");r.exports=i("a-cubemap",{prototype:Object.create(window.HTMLElement.prototype,{attachedCallback:{value:function(){this.srcs=this.validate()},writable:window.debug},validate:{value:function(){var t=this.querySelectorAll("[src]"),r=[],a;if(6===t.length){for(a=0;a<t.length;a++)r.push(t[a].getAttribute("src"));return r}o("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")},writable:window.debug}})})},{"../utils/debug":191,"./a-register-element":124}],121:[function(t,r){function a(t,r){return void 0!==t.defaultComponents[r]||t.components[r]&&t.components[r].attrValue||i(r,t.mixinEls)}function i(t,r){var a=!1,o;for(o=0;o<r.length&&(a=r[o].hasAttribute(t),!a);++o);return a}function o(t,r){return r?r.constructor===Object?c.extend(r,c.styleParser.parse(t||{})):t||r:t}function n(t){return-1!==t.indexOf(h)&&(t=t.split(h)[0]),!!l[t]}var s=t("./a-node"),l=t("./component").components,d=t("./a-register-element").registerElement,p=t("../lib/three"),c=t("../utils/"),u=c.bind,m=c.debug("core:a-entity:debug"),g=c.debug("core:a-entity:warn"),h="__",y=Object.create(s.prototype,{defaultComponents:{value:{position:"",rotation:"",scale:"",visible:""}},createdCallback:{value:function(){this.components={},this.initializingComponents={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new p.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.states=[]}},attributeChangedCallback:{value:function(t,r,a){var i=this.components[t];return i&&i.justInitialized&&""===a?void delete i.justInitialized:void(!i&&null===a||this.setEntityAttribute(t,r,a))}},attachedCallback:{value:function(){var t=this.sceneEl,r=this,a;if(this.addToParent(),!this.isScene)return t?(a=t.querySelector("a-assets"),a&&!a.hasLoaded?void a.addEventListener("loaded",function(){r.load()}):void this.load()):void this.load()}},detachedCallback:{value:function(){if(this.parentEl){for(var t in this.components)this.removeComponent(t);this.isScene||(this.removeFromParent(),s.prototype.detachedCallback.call(this),this.object3D.el=null)}}},handleMixinUpdate:{value:function(t){return t?void this.updateComponent(t,this.getDOMAttribute(t)):void this.updateComponents()}},mapStateMixins:{value:function(t,r){var a,o,n;if(a=this.getAttribute("mixin"),!!a){for(o=a.split(" "),n=0;n<o.length;n++)r(o[n]+"-"+t);this.updateComponents()}}},updateStateMixins:{value:function(t,r){var a,o,n,s,i,l;for(o=t.split(" "),n=r||""?r.split(" "):[],a=n.filter(function(t){return 0>o.indexOf(t)}),s=0;s<a.length;s++)for(l=document.querySelectorAll("[id^="+a[s]+"-]"),i=0;i<l.length;i++)this.unregisterMixin(l[i].id);for(s=0;s<this.states.length;s++)for(i=0;i<o.length;i++)this.registerMixin(o[i]+"-"+this.states[s])}},getObject3D:{value:function(t){return this.object3DMap[t]}},setObject3D:{value:function(t,r){var a=this,i;if(!(r instanceof p.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");i=this.getObject3D(t),i&&this.object3D.remove(i),r.el=this,r.children.length&&r.traverse(function(t){t.el=a}),this.object3D.add(r),this.object3DMap[t]=r,this.emit("object3dset",{object:r,type:t})}},removeObject3D:{value:function(t){var r=this.getObject3D(t);return r?void(this.object3D.remove(r),delete this.object3DMap[t],this.emit("object3dremove",{type:t})):void g("Tried to remove `Object3D` of type:",t,"which was not defined.")}},getOrCreateObject3D:{value:function(t,r){var a=this.getObject3D(t);return!a&&r&&(a=new r,this.setObject3D(t,a)),a}},add:{value:function(t){if(!t.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(t.object3D),this.emit("child-attached",{el:t})}},addToParent:{value:function(){var t=this.parentEl=this.parentNode;t&&t.add&&!this.attachedToParent&&(t.add(this),this.attachedToParent=!0)}},removeFromParent:{value:function(){var t=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=this.parentNode=null,t.emit("child-detached",{el:this})}},load:{value:function(){var t=this;this.hasLoaded||!this.parentEl||s.prototype.load.call(this,function(){t.parentEl&&(t.updateComponents(),(t.isScene||t.parentEl.isPlaying)&&t.play())})},writable:window.debug},remove:{value:function(t){this.object3D.remove(t.object3D)}},getChildEntities:{value:function(){for(var t=this.children,r=[],a=0,i;a<t.length;a++)i=t[a],i instanceof f&&r.push(i);return r}},initComponent:{value:function(t,r,i){var o=t.split(h),n=o[1],s=o[0],d=a(this,t)||void 0!==r,p;if(l[s]&&(d||i)&&!(t in this.components)){if(this.initComponentDependencies(s),n&&!l[s].multiple)throw new Error("Trying to initialize multiple components of type `"+s+"`. There can only be one component of this type per entity.");p=new l[s].Component(this,r,n),this.isPlaying&&p.play(),this.hasAttribute(t)||(p.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,t,"")),m("Component initialized: %s",t)}},writable:window.debug},initComponentDependencies:{value:function(t){var r=this,a=l[t],o,n;if(a&&(o=l[t].dependencies,!!o))for(n=0;n<o.length;n++)r.initComponent(o[n],window.HTMLElement.prototype.getAttribute.call(r,o[n])||void 0,!0)}},removeComponent:{value:function(t){var r,a,o;if(a=t in this.defaultComponents,o=i(t,this.mixinEls),!(a||o))return r=this.components[t],r?r.initialized?void(r.pause(),r.remove(),delete this.components[t],this.emit("componentremoved",r.evtDetail)):void this.addEventListener("componentinitialized",function r(a){a.detail.name!==t||(this.removeComponent(t),this.removeEventListener("componentinitialized",r))}):void 0},writable:window.debug},updateComponents:{value:function(){var t={};return function(){var r,a,s,i;if(this.hasLoaded){for(s=0;s<this.mixinEls.length;s++)for(i in this.mixinEls[s].componentCache)n(i)&&(t[i]=!0);if(this.getExtraComponents)for(i in a=this.getExtraComponents(),a)n(i)&&(t[i]=!0);for(s=0;s<this.attributes.length;++s)i=this.attributes[s].name,n(i)&&(t[i]=!0);for(i in this.defaultComponents)r=o(this.getDOMAttribute(i),a&&a[i]),this.updateComponent(i,r),delete t[i];for(i in t)r=o(this.getDOMAttribute(i),a&&a[i]),this.updateComponent(i,r),delete t[i]}}}(),writable:window.debug},updateComponent:{value:function(t,r,a){var i=this.components[t],o=t in this.defaultComponents;return i?null!==r||o?void i.updateProperties(r,a):void this.removeComponent(t):void this.initComponent(t,r,!1)}},removeAttribute:{value:function(t,r){var a=this.components[t];return a&&void 0===r&&(this.setEntityAttribute(t,void 0,null),this.components[t])?void 0:a&&void 0!==r?void a.resetProperty(r):void("mixin"===t&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,t))}},play:{value:function(){var t,r,a;if(!this.isPlaying&&this.hasLoaded){for(a in this.isPlaying=!0,this.components)this.components[a].play();for(t=this.getChildEntities(),r=0;r<t.length;r++)t[r].play();this.emit("play")}},writable:!0},pause:{value:function(){var t,r,a;if(this.isPlaying){for(a in this.isPlaying=!1,this.components)this.components[a].pause();for(t=this.getChildEntities(),r=0;r<t.length;r++)t[r].pause();this.emit("pause")}},writable:!0},setEntityAttribute:{value:function(t,r,a){return l[t]||this.components[t]?void this.updateComponent(t,a):"mixin"===t?void this.mixinUpdate(a,r):void 0}},mixinUpdate:{value:function(t,r){r=r||this.getAttribute("mixin"),this.updateMixins(t,r),this.updateStateMixins(t,r),this.updateComponents()}},setAttribute:{value:function(t,r,a){var i,o,n,d,p;return d=t.indexOf(h),n=0<d?t.substring(0,d):t,l[n]?void(!this.components[t]&&this.hasAttribute(t)&&this.updateComponent(t,window.HTMLElement.prototype.getAttribute.call(this,t)),"undefined"!==typeof a&&"string"===typeof r&&0<r.length&&"string"===typeof c.styleParser.parse(r)?(i={},i[r]=a,o=!1):(i=r,o=!0===a),this.updateComponent(t,i,o),p=this.sceneEl&&this.sceneEl.getAttribute("debug"),p&&this.components[t].flushToDOM()):(s.prototype.setAttribute.call(this,t,r),void("mixin"===t&&this.mixinUpdate(r)))},writable:window.debug},flushToDOM:{value:function(t){var r=this.components,a=this.defaultComponents,o=this.children,n,s,i;for(i in r)r[i].flushToDOM(i in a);if(t)for(s=0;s<o.length;++s)(n=o[s],!!n.flushToDOM)&&n.flushToDOM(t)}},getAttribute:{value:function(t){var r=this.components[t];return r?r.data:window.HTMLElement.prototype.getAttribute.call(this,t)},writable:window.debug},getComputedAttribute:{value:function(t){return g("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(t)}},getDOMAttribute:{value:function(t){var r=this.components[t];return r?r.attrValue:window.HTMLElement.prototype.getAttribute.call(this,t)},writable:window.debug},addState:{value:function(t){this.is(t)||(this.states.push(t),this.mapStateMixins(t,u(this.registerMixin,this)),this.emit("stateadded",{state:t}))}},removeState:{value:function(t){var r=this.states.indexOf(t);-1===r||(this.states.splice(r,1),this.mapStateMixins(t,u(this.unregisterMixin,this)),this.emit("stateremoved",{state:t}))}},is:{value:function(t){return-1!==this.states.indexOf(t)}}}),f;f=d("a-entity",{prototype:y}),r.exports=f},{"../lib/three":173,"../utils/":195,"./a-node":123,"./a-register-element":124,"./component":125}],122:[function(t,r){var a=t("./a-node"),i=t("./a-register-element").registerElement,o=t("./component").components;r.exports=i("a-mixin",{prototype:Object.create(a.prototype,{createdCallback:{value:function(){this.componentCache={},this.id=this.getAttribute("id")}},attributeChangedCallback:{value:function(t,r,a){this.cacheAttribute(t,a)}},attachedCallback:{value:function(){this.sceneEl=this.closestScene(),this.cacheAttributes(),this.updateEntities(),this.load()}},setAttribute:{value:function(t,r){this.cacheAttribute(t,r),window.HTMLElement.prototype.setAttribute.call(this,t,r)}},cacheAttribute:{value:function(t,r){var a=t.split("__")[0],i=o[a];i&&(r===void 0&&(r=window.HTMLElement.prototype.getAttribute.call(this,t)),this.componentCache[t]=i.parseAttrValueForCache(r))}},getAttribute:{value:function(t){return this.componentCache[t]||window.HTMLElement.prototype.getAttribute.call(this,t)}},cacheAttributes:{value:function(){var t=this.attributes,r,a;for(a=0;a<t.length;a++)r=t[a].name,this.cacheAttribute(r)}},updateEntities:{value:function(){if(this.sceneEl)for(var t=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),r=0,a;r<t.length;r++)(a=t[r],!!a.hasLoaded)&&(a.registerMixin(this.id),Object.keys(this.componentCache).forEach(function(t){a.updateComponent(t)}))}}})})},{"./a-node":123,"./a-register-element":124,"./component":125}],123:[function(t,r){var a=t("./a-register-element").registerElement,i=t("./a-register-element").isNode,o=t("../utils/"),n=o.bind,s=o.debug("core:a-node:warn");r.exports=a("a-node",{prototype:Object.create(window.HTMLElement.prototype,{createdCallback:{value:function(){this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[],this.mixinObservers={}},writable:window.debug},attachedCallback:{value:function(){var t;this.sceneEl=this.closestScene(),this.sceneEl||s("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",{},!1),t=this.getAttribute("mixin"),t&&this.updateMixins(t)},writable:window.debug},attributeChangedCallback:{value:function(t,r,a){"mixin"===t&&this.updateMixins(a,r)}},closestScene:{value:function(){for(var t=this;t&&!t.isScene;)t=t.parentElement;return t}},closest:{value:function(t){for(var r=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,a=this;a&&!r.call(a,t);)a=a.parentElement;return a}},detachedCallback:{value:function(){this.hasLoaded=!1}},load:{value:function(t,r){var a=this,o,n;this.hasLoaded||(r=r||i,o=this.getChildren(),n=o.filter(r).map(function(t){return new Promise(function(r){return t.hasLoaded?r():void t.addEventListener("loaded",r)})}),Promise.all(n).then(function(){a.hasLoaded=!0,t&&t(),a.emit("loaded",void 0,!1)}))},writable:!0},getChildren:{value:function(){return Array.prototype.slice.call(this.children,0)}},updateMixins:{value:function(t,r){var a=t?t.trim().split(/\s+/):[],i=r?r.trim().split(/\s+/):[];i.filter(function(t){return 0>a.indexOf(t)}).forEach(n(this.unregisterMixin,this)),this.mixinEls=[],a.forEach(n(this.registerMixin,this))}},registerMixin:{value:function(t){if(this.sceneEl){var r=this.sceneEl.querySelector("a-mixin#"+t);r&&(this.attachMixinListener(r),this.mixinEls.push(r))}}},setAttribute:{value:function(t,r){"mixin"===t&&this.updateMixins(r),window.HTMLElement.prototype.setAttribute.call(this,t,r)}},unregisterMixin:{value:function(t){var r=this.mixinEls,a,o;for(o=0;o<r.length;++o)if(a=r[o],t===a.id){r.splice(o,1);break}this.removeMixinListener(t)}},removeMixinListener:{value:function(t){var r=this.mixinObservers[t];r&&(r.disconnect(),this.mixinObservers[t]=null)}},attachMixinListener:{value:function(t){var r=this,a=t.id,i=this.mixinObservers[a];if(t&&!i){var o=new MutationObserver(function(t){var a=t[0].attributeName;r.handleMixinUpdate(a)});o.observe(t,{attributes:!0}),this.mixinObservers[a]=o}}},handleMixinUpdate:{value:function(){}},emit:{value:function(t,r,a,i){var n=this,s;return void 0===a&&(a=!0),s={bubbles:!!a,detail:r},i&&o.extend(s,i),o.fireEvent(n,t,s)},writable:window.debug},emitter:{value:function(t,r,a){var i=this;return function(){i.emit(t,r,a)}}}})})},{"../utils/":195,"./a-register-element":124}],124:[function(t,r){function a(t){d[t.toLowerCase()]=!0}function i(t){var r={};return n(r,["attachedCallback","attributeChangedCallback","createdCallback"],t,p.prototype),l(t,r),r}function o(t){var r={};return n(r,["attachedCallback","attributeChangedCallback","createdCallback"],t,p.prototype),n(r,["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],t,c.prototype),l(t,r),r}function n(t,r,a,i){r.forEach(function(r){s(t,r,a,i)})}function s(t,r,a,i){var o=a[r],n=i[r];o&&n&&o!==n&&(t[r]={value:function(){return n.apply(this,arguments),o.apply(this,arguments)},writable:window.debug})}function l(t,r){var a=Object.getOwnPropertyNames(t);a.forEach(function(a){var i;r[a]||(i=Object.getOwnPropertyDescriptor(t,a),r[a]={value:t[a],writable:i.writable})})}t("document-register-element");var d=r.exports.knownTags={},p,c;r.exports.isNode=function(t){return t.tagName.toLowerCase()in d||t.isNode},r.exports.registerElement=function(t,r){var n=Object.getPrototypeOf(r.prototype),s=r,l=p&&n===p.prototype,d=c&&n===c.prototype;return(l||d)&&a(t),l&&(s=i(r.prototype),s={prototype:Object.create(n,s)}),d&&(s=o(r.prototype),s={prototype:Object.create(n,s)}),document.registerElement(t,s)},r.exports.wrapMethods=n,p=t("./a-node"),c=t("./a-entity")},{"./a-entity":121,"./a-node":123,"document-register-element":13}],125:[function(t,r){function a(t){var r={},a,i;for(i in t)a=t[i],r[i]=a&&a.constructor===Object?c.clone(a):a;return r}function o(t,r,a){return a&&(null===r||"object"!==("undefined"===typeof r?"undefined":babelHelpers.typeof(r)))?r:c.extend(t,r)}function i(t){return t.tick||t.tock}function n(t){return function(){var r=this.el.sceneEl;this.isPlaying&&(t.call(this),this.isPlaying=!1,i(this)&&r.removeBehavior(this))}}function s(t){return function(){var r=this.el.sceneEl,a=this.el.isPlaying&&!this.isPlaying;this.initialized&&a&&(t.call(this),this.isPlaying=!0,i(this)&&r.addBehavior(this))}}var l=t("./schema"),d=t("./scene/scenes"),p=t("./system"),c=t("../utils/"),u=r.exports.components={},m=l.parseProperties,g=l.parseProperty,h=l.process,y=l.isSingleProperty,f=l.stringifyProperties,M=l.stringifyProperty,x=c.styleParser,E=c.debug("core:component:warn"),v=document.currentScript,A=/[A-Z]+/,T=r.exports.Component=function(t,r,a){var i=this;this.el=t,this.id=a,this.attrName=this.name+(a?"__"+a:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.oldData=void 0,this.previousAttrValue=void 0,this.throttledEmitComponentChanged=c.throttle(function(){t.emit("componentchanged",i.evtDetail,!1)},200),this.updateProperties(r)};if(T.prototype={schema:{},init:function(){},update:function(){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(t,r){var a=this.schema;return y(a)?g(t,a):m(x.parse(t),a,!0,this.name,r)},stringify:function(t){var r=this.schema;return"string"===typeof t?t:y(r)?M(t,r):(t=f(t,r),x.stringify(t))},updateCachedAttrValue:function(t,r){var a=this.parseAttrValueForCache(t),i=y(this.schema),n;if(void 0!==t){if(!i&&!r&&this.attrValue)for(n in this.attrValue)n in a||(a[n]=this.attrValue[n]);this.attrValue=o({},a,i)}},parseAttrValueForCache:function(t){var r;return"string"===typeof t?(y(this.schema)?(r=this.schema.parse(t),"string"===typeof r&&(r=t)):r=x.parse(t),r):t},flushToDOM:function(t){var r=t?this.data:this.attrValue;r&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(r))},updateProperties:function(t,r){var a=this.el,i=this.oldData,n,s;if(!a.hasLoaded)return void this.updateCachedAttrValue(t);if(n=y(this.schema),s=null!==t&&"object"===babelHelpers.typeof(this.previousAttrValue)&&t===this.previousAttrValue,this.previousAttrValue=t,t=this.parseAttrValueForCache(t),this.updateSchema&&this.updateSchema(this.buildData(t,!1,!0)),this.data=this.buildData(t,r,!1,s),this.updateCachedAttrValue(t,r),!this.initialized){if(a.initializingComponents[this.name])return;a.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete a.initializingComponents[this.name],i=n&&"object"!==babelHelpers.typeof(g(void 0,this.schema))?void 0:{},this.oldData=o({},this.data,n),this.update(i),a.isPlaying&&this.play(),a.emit("componentinitialized",this.evtDetail,!1)}else{if(c.deepEqual(this.oldData,this.data))return;this.oldData=o({},this.data,n),this.update(i),this.throttledEmitComponentChanged()}},resetProperty:function(t){if(y(this.schema))this.attrValue=void 0;else{if(!(t in this.attrValue))return;delete this.attrValue[t]}this.updateProperties(this.attrValue)},extendSchema:function(t){var r=c.extend({},u[this.name].schema);c.extend(r,t),this.schema=h(r),this.el.emit("schemachanged",{component:this.name})},buildData:function(t,r,n,s){var l=this.schema,d=y(l),p=this.el.mixinEls,u,h,f,M,x,E,i;if(d)u=l.default&&l.default.constructor===Object?c.clone(l.default):l.default;else for(i=!r&&this.attrValue,u="object"===("undefined"===typeof i?"undefined":babelHelpers.typeof(i))?a(i):{},(E=0,f=Object.keys(l),M=f.length);E<M;E++)(h=l[f[E]].default,void 0===u[f[E]])&&(u[f[E]]=h&&h.constructor===Object?c.clone(h):h);for(E=0;E<p.length;E++)x=p[E].getAttribute(this.attrName),x&&(u=o(u,x,d));if(void 0!==t&&null!==t){if(d)return!0===s?t:g(t,l);u=o(u,t,d)}else{if(!0===s)return u;if(d)return g(u,l)}return!0===s?u:m(u,l,void 0,this.name,n)}},window.debug)var b=r.exports.registrationOrderWarnings={};r.exports.registerComponent=function(t,r){var a={},i;if(document.currentScript&&document.currentScript!==v&&d.forEach(function(r){r.hasLoaded||document.currentScript.compareDocumentPosition(r)===Node.DOCUMENT_POSITION_FOLLOWING||(E("The component `"+t+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(b[t]=!0))}),!0===A.test(t)&&E("The component name `"+t+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+t.toLowerCase()+"`"),-1!==t.indexOf("__"))throw new Error("The component name `"+t+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(r).forEach(function(t){a[t]={value:r[t],writable:!0}}),u[t])throw new Error("The component `"+t+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");return i=function(t,r,a){T.call(this,t,r,a)},i.prototype=Object.create(T.prototype,a),i.prototype.name=t,i.prototype.constructor=i,i.prototype.system=p&&p.systems[t],i.prototype.play=s(i.prototype.play),i.prototype.pause=n(i.prototype.pause),u[t]={Component:i,dependencies:i.prototype.dependencies,isSingleProp:y(i.prototype.schema),multiple:i.prototype.multiple,parse:i.prototype.parse,parseAttrValueForCache:i.prototype.parseAttrValueForCache,schema:c.extend(h(i.prototype.schema,i.prototype.name)),stringify:i.prototype.stringify,type:i.prototype.type},i}},{"../utils/":195,"./scene/scenes":131,"./schema":133,"./system":135}],126:[function(t,r){var a=t("./schema"),i=a.process,o=r.exports.geometries={},n=r.exports.geometryNames=[],s=t("../lib/three"),l=r.exports.Geometry=function(){};l.prototype={schema:{},init:function(){return this.geometry=new s.Geometry,this.geometry},update:function(){}},r.exports.registerGeometry=function(t,r){var a={},s;if(Object.keys(r).forEach(function(t){a[t]={value:r[t],writable:!0}}),o[t])throw new Error("The geometry `"+t+"` has been already registered");return s=function(){l.call(this)},s.prototype=Object.create(l.prototype,a),s.prototype.name=t,s.prototype.constructor=s,o[t]={Geometry:s,schema:i(s.prototype.schema)},n.push(t),s}},{"../lib/three":173,"./schema":133}],127:[function(t,r){function a(t,r,a,i){return"type"in g?void u("Property type "+t+" is already registered."):void(g[t]={default:r,parse:a||o,stringify:i||n})}function i(t){var r,a;return"string"===typeof t?(a=t.match(/\url\((.+)\)/),a?a[1]:"#"===t.charAt(0)?(r=document.getElementById(t.substring(1)),r)?"CANVAS"===r.tagName||"VIDEO"===r.tagName||"IMG"===r.tagName?r:r.getAttribute("src"):void m("\""+t+"\" asset not found."):t):t}function o(t){return t}function n(t){return null===t?"null":t.toString()}function s(t){return parseInt(t,10)}function l(t){return p.parse(t,this.default)}function d(t,r){if(null===t)return!0;if("object"!==("undefined"===typeof t?"undefined":babelHelpers.typeof(t)))return!1;if(Object.keys(t).length!==r)return!1;var a=t.x,i=t.y,o=t.z,n=t.w;return"number"!==typeof a||"number"!==typeof i?!1:2<r&&"number"!==typeof o?!1:3<r&&"number"!==typeof n?!1:!0}var p=t("../utils/coordinates"),c=t("debug"),u=c("core:propertyTypes:warn"),m=c("core:propertyTypes:warn"),g=r.exports.propertyTypes={},h=/[,> .[\]:]/;a("audio","",i),a("array",[],function(t){return Array.isArray(t)?t:t&&"string"===typeof t?t.split(",").map(function(t){return t.trim()}):[]},function(t){return t.join(", ")}),a("asset","",i),a("boolean",!1,function(t){return"false"!==t&&!1!==t}),a("color","#FFF",o,n),a("int",0,s),a("number",0,function(t){return parseFloat(t,10)}),a("map","",i),a("model","",i),a("selector",null,function(t){return t?"string"===typeof t?"#"!==t[0]||h.test(t)?document.querySelector(t):document.getElementById(t.substring(1)):t:null},function(t){return t.getAttribute?"#"+t.getAttribute("id"):n(t)}),a("selectorAll",null,function(t){return t?"string"===typeof t?Array.prototype.slice.call(document.querySelectorAll(t),0):t:null},function(t){return t instanceof Array?t.map(function(t){return"#"+t.getAttribute("id")}).join(", "):n(t)}),a("src","",function(t){return m("`src` property type is deprecated. Use `asset` instead."),i(t)}),a("string","",o,n),a("time",0,s),a("vec2",{x:0,y:0},l,p.stringify),a("vec3",{x:0,y:0,z:0},l,p.stringify),a("vec4",{x:0,y:0,z:0,w:0},l,p.stringify),r.exports.registerPropertyType=a,r.exports.isValidDefaultValue=function(t,r){return"audio"===t&&"string"!==typeof r?!1:("array"!==t||Array.isArray(r))&&("asset"===t&&"string"!==typeof r?!1:"boolean"===t&&"boolean"!==typeof r?!1:"color"===t&&"string"!==typeof r?!1:"int"===t&&"number"!==typeof r?!1:"number"===t&&"number"!==typeof r?!1:"map"===t&&"string"!==typeof r?!1:"model"===t&&"string"!==typeof r?!1:"selector"===t&&"string"!==typeof r&&null!==r?!1:"selectorAll"===t&&"string"!==typeof r&&null!==r?!1:"src"===t&&"string"!==typeof r?!1:"string"===t&&"string"!==typeof r?!1:"time"===t&&"number"!==typeof r?!1:"vec2"===t?d(r,2):"vec3"===t?d(r,3):"vec4"!==t||d(r,4))},r.exports.isValidDefaultCoordinate=d},{"../utils/coordinates":190,debug:10}],128:[function(t,r){function a(t,r){return r?{height:t.parentElement.offsetHeight,width:t.parentElement.offsetWidth}:{height:window.innerHeight,width:window.innerWidth}}function i(t){var r=t.requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen;r.apply(t)}function o(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function n(t){return null===t.getAttribute("antialias")?!t.isMobile:"true"===t.getAttribute("antialias")}function s(t){function r(){var r=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;r||t.exitVR(),document.activeElement.blur(),document.body.focus()}var a;a=document.createElement("canvas"),a.classList.add("a-canvas"),a.dataset.aframeCanvas=!0,t.appendChild(a),document.addEventListener("fullscreenchange",r),document.addEventListener("mozfullscreenchange",r),document.addEventListener("webkitfullscreenchange",r),a.addEventListener("touchmove",function(t){t.preventDefault()}),t.canvas=a,t.emit("render-target-loaded",{target:a}),setTimeout(x(t.resize,t),0)}var l=t("./metaTags").inject,d=t("./wakelock"),p=t("../a-register-element"),c=t("./scenes"),u=t("../system").systems,m=t("../../lib/three"),g=t("@tweenjs/tween.js"),h=t("../../utils/"),y=t("../a-entity"),f=t("../a-node"),M=t("./postMessage"),x=h.bind,E=h.device.isIOS(),v=h.device.isMobile(),A=p.registerElement,T=h.debug("core:a-scene:warn");r.exports.AScene=A("a-scene",{prototype:Object.create(y.prototype,{defaultComponents:{value:{inspector:"","keyboard-shortcuts":"",screenshot:"","vr-mode-ui":""}},createdCallback:{value:function(){this.isIOS=E,this.isMobile=v,this.isScene=!0,this.object3D=new m.Scene,this.render=x(this.render,this),this.systems={},this.systemNames=[],this.time=0,this.init()}},init:{value:function(){this.behaviors={tick:[],tock:[]},this.hasLoaded=!1,this.isPlaying=!1,this.originalHTML=this.innerHTML,this.renderTarget=null,s(this),this.setupRenderer(),this.resize(),this.addFullScreenStyles(),M(this)},writable:!0},addFullScreenStyles:{value:function(){var t=document.documentElement;t.classList.add("a-html"),document.body.classList.add("a-body"),this.classList.add("fullscreen")}},removeFullScreenStyles:{value:function(){var t=document.documentElement;t.classList.remove("a-html"),document.body.classList.remove("a-body"),this.classList.remove("fullscreen")}},attachedCallback:{value:function(){var t=this,r;l(this),d(this),this.initSystems(),r=x(this.resize,this),window.addEventListener("load",r),window.addEventListener("resize",r),this.play(),c.push(this),this.onVRPresentChangeBound=x(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){t.enterVR()},this.exitVRBound=function(){t.exitVR()},this.exitVRTrueBound=function(){t.exitVR(!0)},this.pointerRestrictedBound=function(){t.pointerRestricted()},this.pointerUnrestrictedBound=function(){t.pointerUnrestricted()},window.addEventListener("vrdisplayactivate",this.enterVRBound),window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)},writable:window.debug},initSystems:{value:function(){Object.keys(u).forEach(x(this.initSystem,this))}},initSystem:{value:function(t){this.systems[t]||(this.systems[t]=new u[t](this),this.systemNames.push(t))}},detachedCallback:{value:function(){var t;this.effect&&this.effect.cancelAnimationFrame?this.effect.cancelAnimationFrame(this.animationFrameID):window.cancelAnimationFrame(this.animationFrameID),this.animationFrameID=null,t=c.indexOf(this),c.splice(t,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)}},addBehavior:{value:function(t){var r=this,a=this.behaviors;Object.keys(a).forEach(function(a){if(t[a]){var i=r.behaviors[a];-1===i.indexOf(t)&&i.push(t)}})}},getPointerLockElement:{value:function(){return document.pointerLockElement},writable:window.debug},checkHeadsetConnected:{value:h.device.checkHeadsetConnected,writable:window.debug},enterVR:{value:function(t){function r(){a.addState("vr-mode"),a.emit("enter-vr",{target:a}),a.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),a.addFullScreenStyles(),a.isMobile||a.checkHeadsetConnected()||i(a.canvas),a.resize()}var a=this,o=this.effect;return this.is("vr-mode")?Promise.resolve("Already in VR."):!t&&(this.checkHeadsetConnected()||this.isMobile)?o&&o.requestPresent().then(r,function(t){if(t&&t.message)throw new Error("Failed to enter VR mode (`requestPresent`): "+t.message);else throw new Error("Failed to enter VR mode (`requestPresent`).")})||Promise.reject(new Error("VREffect not initialized")):(r(),Promise.resolve())},writable:window.debug},exitVR:{value:function(t){function r(){a.removeState("vr-mode"),a.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),a.hasAttribute("embedded")&&a.removeFullScreenStyles(),a.resize(),a.isIOS&&h.forceCanvasResizeSafariMobile(this.canvas),a.emit("exit-vr",{target:a})}var a=this;return this.is("vr-mode")?(o(),!t&&(this.checkHeadsetConnected()||this.isMobile))?this.effect.exitPresent().then(r,function(t){if(t&&t.message)throw new Error("Failed to exit VR mode (`exitPresent`): "+t.message);else throw new Error("Failed to exit VR mode (`exitPresent`).")}):(r(),Promise.resolve()):Promise.resolve("Not in VR.")},writable:window.debug},pointerRestricted:{value:function(){if(this.canvas){var t=this.getPointerLockElement();t&&t!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}},pointerUnrestricted:{value:function(){var t=this.getPointerLockElement();t&&t===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}},onVRPresentChange:{value:function(t){var r=t.display||t.detail.display;return r.isPresenting?void this.enterVR(!0):void this.exitVR(!0)}},getAttribute:{value:function(t){var r=this.systems[t];return r?r.data:y.prototype.getAttribute.call(this,t)}},getComputedAttribute:{value:function(t){T("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(t)}},getDOMAttribute:{value:function(t){var r=this.systems[t];return r?r.data:y.prototype.getDOMAttribute.call(this,t)}},setAttribute:{value:function(t,r,a){var i=this.systems[t];return i?(f.prototype.setAttribute.call(this,t,r),void i.updateProperties(r)):void y.prototype.setAttribute.call(this,t,r,a)}},removeBehavior:{value:function(t){var r=this,a=this.behaviors;Object.keys(a).forEach(function(a){if(t[a]){var i=r.behaviors[a],o=i.indexOf(t);-1!==o&&i.splice(o,1)}})}},resize:{value:function(){var t=this.camera,r=this.canvas,i=this.getAttribute("embedded")&&!this.is("vr-mode"),o=this.effect&&this.effect.isPresenting,n;!t||!r||this.is("vr-mode")&&(this.isMobile||o)||(n=a(r,i),t.aspect=n.width/n.height,t.updateProjectionMatrix(),this.renderer.setSize(n.width,n.height))},writable:window.debug},setupRenderer:{value:function(){var t;t=this.renderer=new m.WebGLRenderer({canvas:this.canvas,antialias:n(this),alpha:!0}),t.setPixelRatio(window.devicePixelRatio),t.sortObjects=!1,this.effect=new m.VREffect(t),this.effect.autoSubmitFrame=!1},writable:window.debug},play:{value:function(){var t=this;return this.renderStarted?void y.prototype.play.call(this):void(this.addEventListener("loaded",function(){function t(t){t.renderStarted||(t.resize(),t.renderer&&(window.performance&&window.performance.mark("render-started"),t.clock=new m.Clock,t.render(),t.renderStarted=!0,t.emit("renderstart")))}return y.prototype.play.call(this),this.camera?void t(this):void this.addEventListener("camera-set-active",function(){t(this)})}),setTimeout(function(){y.prototype.load.call(t)}))}},reload:{value:function(t){var r=this;t&&this.pause(),this.innerHTML=this.originalHTML,this.init(),f.prototype.load.call(this,function(){r.isPlaying&&y.prototype.play.call(r)})}},updateComponent:{value:function(t){t in u||y.prototype.updateComponent.apply(this,arguments)}},tick:{value:function(t,r){var a=this.systems,o;for(g.update(),o=0;o<this.behaviors.tick.length;o++)this.behaviors.tick[o].el.isPlaying&&this.behaviors.tick[o].tick(t,r);for(o=0;o<this.systemNames.length;o++)a[this.systemNames[o]].tick&&a[this.systemNames[o]].tick(t,r)}},tock:{value:function(t,r){var a=this.systems,o;for(o=0;o<this.behaviors.tock.length;o++)this.behaviors.tock[o].el.isPlaying&&this.behaviors.tock[o].tock(t,r);for(o=0;o<this.systemNames.length;o++)a[this.systemNames[o]].tock&&a[this.systemNames[o]].tock(t,r)}},render:{value:function(){var t=this.effect,r=1e3*this.clock.getDelta();this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,r),this.animationFrameID=t.requestAnimationFrame(this.render),t.render(this.object3D,this.camera,this.renderTarget),this.isPlaying&&this.tock(this.time,r),this.effect.submitFrame()},writable:!0}})}),r.exports.shouldAntiAlias=n,r.exports.setupCanvas=s},{"../../lib/three":173,"../../utils/":195,"../a-entity":121,"../a-node":123,"../a-register-element":124,"../system":135,"./metaTags":129,"./postMessage":130,"./scenes":131,"./wakelock":132,"@tweenjs/tween.js":1}],129:[function(t,r){function a(t){return{tagName:"meta",attributes:t,exists:function(){return document.querySelector("meta[name=\""+t.name+"\"]")}}}function i(t){if(t&&t.tagName){var r=document.createElement(t.tagName);return r.setAttribute(o.AFRAME_INJECTED,""),n(r,t.attributes)}}var o=t("../../constants/"),n=t("../../utils").extend,s=r.exports.MOBILE_HEAD_TAGS=[a({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui"}),a({name:"mobile-web-app-capable",content:"yes"}),a({name:"theme-color",content:"black"})],l=[a({name:"apple-mobile-web-app-capable",content:"yes"}),a({name:"apple-mobile-web-app-status-bar-style",content:"black"}),function(t){return{tagName:"link",attributes:t,exists:function(){return document.querySelector("link[rel=\""+t.rel+"\"]")}}}({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];r.exports.inject=function(t){function r(t){t&&!t.exists()&&(d=i(t),d&&(o?o.parentNode.insertBefore(d,o):a.appendChild(d),n.push(d)))}var a=document.head,o=a.querySelector("script"),n=[],d;return s.forEach(r),t.isIOS&&l.forEach(r),n}},{"../../constants/":116,"../../utils":195}],130:[function(t,r){function a(t){var r=this;if(t.data)switch(t.data.type){case"vr":switch(t.data.data){case"enter":r.enterVR();break;case"exit":r.exitVR();}}}var i=t("../../utils/bind"),o=t("../../utils/").isIframed;r.exports=function(t){o()&&window.addEventListener("message",i(a,t))}},{"../../utils/":195,"../../utils/bind":189}],131:[function(t,r){r.exports=[]},{}],132:[function(t,r){var a=t("../../../vendor/wakelock/wakelock");r.exports=function(t){if(t.isMobile){var r=t.wakelock=new a;t.addEventListener("enter-vr",function(){r.request()}),t.addEventListener("exit-vr",function(){r.release()})}}},{"../../../vendor/wakelock/wakelock":205}],133:[function(t,r){function a(t){return"type"in t?"string"===typeof t.type:"default"in t}function i(t,r){var a=t.default,i=t.type,o,n;return t.type?"bool"===t.type?i="boolean":"float"===t.type&&(i="number"):void 0!==a&&-1!==["boolean","number"].indexOf("undefined"===typeof a?"undefined":babelHelpers.typeof(a))?i="undefined"===typeof a?"undefined":babelHelpers.typeof(a):Array.isArray(a)?i="array":i="string",n=c[i],n||u("Unknown property type for component `"+r+"`: "+i),o=!!t.parse,t.parse=t.parse||n.parse,t.stringify=t.stringify||n.stringify,t.type=i,"default"in t?!o&&!p(i,a)&&u("Default value `"+a+"` does not match type `"+i+"` in component `"+r+"`"):t.default=n.default,t}function o(t,r){return(void 0===t||null===t||""===t)&&(t=r.default,Array.isArray(t)&&(t=t.slice())),r.parse(t,r.default)}function n(t,r){return"object"===("undefined"===typeof t?"undefined":babelHelpers.typeof(t))?r&&null!==t?r.stringify(t):JSON.stringify(t):t}var s=t("../utils/"),l=t("./propertyTypes"),d=s.debug,p=l.isValidDefaultValue,c=l.propertyTypes,u=d("core:schema:warn");r.exports.isSingleProperty=a,r.exports.process=function(t,r){return a(t)?i(t,r):(Object.keys(t).forEach(function(a){t[a]=i(t[a],r)}),t)},r.exports.processPropertyDefinition=i,r.exports.parseProperties=function(t,r,a,i,n){var s=Object.keys(a?t:r);return null===t||"object"!==("undefined"===typeof t?"undefined":babelHelpers.typeof(t))?t:(Object.keys(t).forEach(function(t){r[t]||n||u("Unknown property `"+t+"` for component/system `"+i+"`.")}),s.forEach(function(a){var i=r[a],n=t[a];r[a]&&(t[a]=o(n,i))}),t)},r.exports.parseProperty=o,r.exports.stringifyProperties=function(t,r){var a={};return Object.keys(t).forEach(function(i){var o=r[i],s=t[i],l=s;"object"===("undefined"===typeof l?"undefined":babelHelpers.typeof(l))&&(l=n(s,o),!o&&u("Unknown component property: "+i)),a[i]=l}),a},r.exports.stringifyProperty=n},{"../utils/":195,"./propertyTypes":127}],134:[function(t,r){var a=t("./schema"),i=a.process,o=r.exports.shaders={},n=r.exports.shaderNames=[],s=t("../lib/three"),l=t("../utils"),d={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},p=r.exports.Shader=function(){};p.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(t){return this.attributes=this.initVariables(t,"attribute"),this.uniforms=this.initVariables(t,"uniform"),this.material=new(this.raw?s.RawShaderMaterial:s.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(t,r){var a={},i=this.schema;return Object.keys(i).forEach(function(t){if(i[t].is===r){var o=d[i[t].type];a[t]={type:o,value:void 0}}}),a},update:function(t){this.updateVariables(t,"attribute"),this.updateVariables(t,"uniform")},updateVariables:function(t,r){var a=this,i="uniform"===r?this.uniforms:this.attributes,o=this.schema;Object.keys(t).forEach(function(n){var s;return o[n]&&o[n].is===r?"map"===o[n].type?i[n]&&i[n].value!==t[n]?(s="_texture_"+n,a.el.addEventListener("materialtextureloaded",function(){i[n].value=a.material[s],i[n].needsUpdate=!0}),void l.material.updateMapMaterialFromData(s,n,a,t)):void 0:void(i[n].value=a.parseValue(o[n].type,t[n]),i[n].needsUpdate=!0):void 0})},parseValue:function(t,r){var a;return"vec2"===t?new s.Vector2(r.x,r.y):"vec3"===t?new s.Vector3(r.x,r.y,r.z):"vec4"===t?new s.Vector4(r.x,r.y,r.z,r.w):"color"===t?(a=new s.Color(r),new s.Vector3(a.r,a.g,a.b)):"map"===t?s.ImageUtils.loadTexture(r):r}},r.exports.registerShader=function(t,r){var a={},s;if(Object.keys(r).forEach(function(t){a[t]={value:r[t],writable:!0}}),o[t])throw new Error("The shader "+t+" has been already registered");return s=function(){p.call(this)},s.prototype=Object.create(p.prototype,a),s.prototype.name=t,s.prototype.constructor=s,o[t]={Shader:s,schema:i(s.prototype.schema)},n.push(t),s}},{"../lib/three":173,"../utils":195,"./schema":133}],135:[function(t,r){var a=t("./component"),i=t("./schema"),o=t("../utils/"),n=i.parseProperties,s=i.parseProperty,l=i.process,d=i.isSingleProperty,p=o.styleParser,c=r.exports.systems={},u=r.exports.System=function(t){var r=a&&a.components[this.name];this.el=t,this.sceneEl=t,r&&(r.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};u.prototype={schema:{},init:function(){},update:function(){},updateProperties:function(t){var r=this.data;Object.keys(i).length&&(this.buildData(t),this.update(r))},buildData:function(t){var r=this.schema;Object.keys(r).length&&(t=t||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),this.data=d(r)?s(t,r):n(p.parse(t)||{},r))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},r.exports.registerSystem=function(t,r){var a={},n=o.findAllScenes(document),s,i;if(Object.keys(r).forEach(function(t){a[t]={value:r[t],writable:!0}}),c[t])throw new Error("The system `"+t+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(i=function(t){u.call(this,t)},i.prototype=Object.create(u.prototype,a),i.prototype.name=t,i.prototype.constructor=i,i.prototype.schema=o.extend(l(i.prototype.schema)),c[t]=i,s=0;s<n.length;s++)n[s].initSystem(t)}},{"../utils/":195,"./component":125,"./schema":133}],136:[function(t){t("./pivot")},{"./pivot":137}],137:[function(t){var r=t("../../core/component").registerComponent,a=t("../../lib/three"),i=new a.Vector3,o=new a.Vector3;r("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var t=this.data,r=this.el,n=r.object3D.parent,s=r.object3D,l=new a.Group;i.copy(s.position),o.copy(s.rotation),n.remove(s),l.add(s),n.add(l),r.object3D=l,s.position.set(-1*t.x,-1*t.y,-1*t.z),l.position.set(t.x+i.x,t.y+i.y,t.z+i.z),l.rotation.copy(s.rotation),s.rotation.set(0,0,0)}})},{"../../core/component":125,"../../lib/three":173}],138:[function(t,r){function a(t){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();"fog"===t&&(r="material-fog"),"visible"===t&&(r="material-visible"),s[r]="material."+t}var i=t("../../core/component").components,o=t("../../core/shader").shaders,n=t("../../utils/"),s={};Object.keys(i.material.schema).forEach(a),Object.keys(o.standard.schema).forEach(a),r.exports=function(){return{defaultComponents:{material:{}},mappings:n.extend({},s)}}},{"../../core/component":125,"../../core/shader":134,"../../utils/":195}],139:[function(t){t("./primitives/a-camera"),t("./primitives/a-collada-model"),t("./primitives/a-cursor"),t("./primitives/a-curvedimage"),t("./primitives/a-gltf-model"),t("./primitives/a-image"),t("./primitives/a-light"),t("./primitives/a-link"),t("./primitives/a-obj-model"),t("./primitives/a-sky"),t("./primitives/a-sound"),t("./primitives/a-text"),t("./primitives/a-video"),t("./primitives/a-videosphere"),t("./primitives/meshPrimitives")},{"./primitives/a-camera":141,"./primitives/a-collada-model":142,"./primitives/a-cursor":143,"./primitives/a-curvedimage":144,"./primitives/a-gltf-model":145,"./primitives/a-image":146,"./primitives/a-light":147,"./primitives/a-link":148,"./primitives/a-obj-model":149,"./primitives/a-sky":150,"./primitives/a-sound":151,"./primitives/a-text":152,"./primitives/a-video":153,"./primitives/a-videosphere":154,"./primitives/meshPrimitives":155}],140:[function(t,r){function a(t,r){var a=o[t].schema;Object.keys(a).map(function(a){var i=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();r[i]!==void 0&&(i=t+"-"+a),r[i]=t+"."+a})}var i=t("../../core/a-entity"),o=t("../../core/component").components,n=t("../../core/a-register-element").registerElement,s=t("../../utils/"),l=s.debug,d=s.entity.setComponentProperty,p=l("extras:primitives:debug"),c=l("extras:primitives:warn"),u=r.exports.primitives={};r.exports.registerPrimitive=function(t,r){t=t.toLowerCase(),p("Registering <%s>",t),r.defaultAttributes&&c("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var a=n(t,{prototype:Object.create(i.prototype,{defaultComponentsFromPrimitive:{value:r.defaultComponents||r.defaultAttributes||{}},deprecated:{value:r.deprecated||null},deprecatedMappings:{value:r.deprecatedMappings||{}},mappings:{value:r.mappings||{}},createdCallback:{value:function(){r.deprecated&&console.warn(r.deprecated),this.resolveMappingCollisions()}},resolveMappingCollisions:{value:function(){var t=this.mappings,r=this;Object.keys(t).forEach(function(a){var i;a!==a.toLowerCase()&&c("Mapping keys should be specified in lower case. The mapping key "+a+" may not be recognized"),o[a]&&(i=t[a].replace(".","-"),t[i]=t[a],delete t[a],console.warn("The primitive "+r.tagName.toLowerCase()+" has a mapping collision. The attribute "+a+" has the same name as a registered component and has been renamed to "+i))})}},getExtraComponents:{value:function(){function t(t,i){return r(t)?a(i):r(i)?a(t):o(t)&&o(i)?s.extendDeep(t,i):a(i)}function r(t){return"undefined"===typeof t}function a(t){return o(t)?s.extendDeep({},t):t}function o(t){return null!==t&&t.constructor===Object}var n=this,l,d,p,i,c,u;for(d=s.clone(this.defaultComponentsFromPrimitive),c=this.getAttribute("mixin"),c&&(c=c.trim().split(" "),c.forEach(function(r){var a=n.sceneEl.querySelector("#"+r).componentCache;Object.keys(a).forEach(function(r){d[r]=t(d[r],a[r])})})),p=0;p<this.attributes.length;p++)if(l=this.attributes[p],i=this.mappings[l.name],i){u=s.entity.getComponentPropertyPath(i),u.constructor===Array?(d[u[0]]=d[u[0]]||{},d[u[0]][u[1]]=l.value):d[u]=l.value;continue}return d}},attributeChangedCallback:{value:function(t,r,a){var i=this.mappings[t];t in this.deprecatedMappings&&console.warn(this.deprecatedMappings[t]),t&&i&&d(this,i,a)}}})});return u[t]=a,a},r.exports.definePrimitive=function(t,i,o){o=o||{},Object.keys(i).map(function(t){a(t,o)}),r.exports.registerPrimitive(t,s.extendDeep({},null,{defaultComponents:i,mappings:o}))}},{"../../core/a-entity":121,"../../core/a-register-element":124,"../../core/component":125,"../../utils/":195}],141:[function(t){var r=t("../../../constants/").DEFAULT_CAMERA_HEIGHT,a=t("../primitives").registerPrimitive;a("a-camera",{defaultComponents:{camera:{userHeight:r},"look-controls":{},"wasd-controls":{}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag","user-height":"camera.userHeight",zoom:"camera.zoom"},deprecatedMappings:{"cursor-color":"a-camera[cursor-color] has been removed. Use a-cursor[color] instead.","cursor-maxdistance":"a-camera[cursor-maxdistance] has been removed. Use a-cursor[max-distance] instead.","cursor-offset":"a-camera[cursor-offset] has been removed. Use a-cursor[position] instead.","cursor-opacity":"a-camera[cursor-offset] has been removed. Use a-cursor[opacity] instead.","cursor-scale":"a-camera[cursor-scale] has been removed. Use a-cursor[scale] instead.","cursor-visible":"a-camera[cursor-visible] has been removed. Use a-cursor[visible] instead."}})},{"../../../constants/":116,"../primitives":140}],142:[function(t){var r=t("../primitives").registerPrimitive;r("a-collada-model",{mappings:{src:"collada-model"}})},{"../primitives":140}],143:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,i=t("../../../utils/");a("a-cursor",i.extendDeep({},r(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:0.016,radiusInner:0.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:0.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],144:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,i=t("../../../utils/");a("a-curvedimage",i.extendDeep({},r(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],145:[function(t){var r=t("../primitives").registerPrimitive;r("a-gltf-model",{mappings:{src:"gltf-model"}})},{"../primitives":140}],146:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,i=t("../../../utils/");a("a-image",i.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],147:[function(t){var r=t("../primitives").registerPrimitive;r("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target"}})},{"../primitives":140}],148:[function(t){var r=t("../primitives").registerPrimitive;r("a-link",{defaultComponents:{},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},{"../primitives":140}],149:[function(t){var r=t("../getMeshMixin")(),a=t("../primitives").registerPrimitive,i=t("../../../utils/");a("a-obj-model",i.extendDeep({},r,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],150:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,i=t("../../../utils/"),o=t("./meshPrimitives");a("a-sky",i.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:i.extendDeep({},o["a-sphere"].prototype.mappings)}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140,"./meshPrimitives":155}],151:[function(t){var r=t("../primitives").registerPrimitive;r("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},{"../primitives":140}],152:[function(t){var r=t("../primitives").definePrimitive;r("a-text",{text:{anchor:"align",width:5}})},{"../primitives":140}],153:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,i=t("../../../utils/");a("a-video",i.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],154:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,i=t("../../../utils/");a("a-videosphere",i.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],155:[function(t,r){function a(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var i=t("../getMeshMixin"),o=t("../../../core/geometry").geometries,n=t("../../../core/geometry").geometryNames,s=t("../primitives").registerPrimitive,l=t("../../../utils/"),d=r.exports={};n.forEach(function(t){var r=o[t],n=a(t),p={};Object.keys(r.schema).forEach(function(t){p[a(t)]="geometry."+t});var c="a-"+n,u=s(c,l.extendDeep({},i(),{defaultComponents:{geometry:{primitive:t}},mappings:p}));d[c]=u})},{"../../../core/geometry":126,"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],156:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new a.BoxGeometry(t.width,t.height,t.depth,t.segmentsWidth,t.segmentsHeight,t.segmentsDepth)}})},{"../core/geometry":126,"../lib/three":173}],157:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),i=a.Math.degToRad;r("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.CircleGeometry(t.radius,t.segments,i(t.thetaStart),i(t.thetaLength))}})},{"../core/geometry":126,"../lib/three":173}],158:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),i=a.Math.degToRad;r("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:0.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.CylinderGeometry(t.radiusTop,t.radiusBottom,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,i(t.thetaStart),i(t.thetaLength))}})},{"../core/geometry":126,"../lib/three":173}],159:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),i=a.Math.degToRad;r("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.CylinderGeometry(t.radius,t.radius,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,i(t.thetaStart),i(t.thetaLength))}})},{"../core/geometry":126,"../lib/three":173}],160:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.DodecahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":126,"../lib/three":173}],161:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.IcosahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":126,"../lib/three":173}],162:[function(t){t("./box.js"),t("./circle.js"),t("./cone.js"),t("./cylinder.js"),t("./dodecahedron.js"),t("./icosahedron.js"),t("./octahedron.js"),t("./plane.js"),t("./ring.js"),t("./sphere.js"),t("./tetrahedron.js"),t("./torus.js"),t("./torusKnot.js"),t("./triangle.js")},{"./box.js":156,"./circle.js":157,"./cone.js":158,"./cylinder.js":159,"./dodecahedron.js":160,"./icosahedron.js":161,"./octahedron.js":163,"./plane.js":164,"./ring.js":165,"./sphere.js":166,"./tetrahedron.js":167,"./torus.js":168,"./torusKnot.js":169,"./triangle.js":170}],163:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.OctahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":126,"../lib/three":173}],164:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new a.PlaneGeometry(t.width,t.height,t.segmentsWidth,t.segmentsHeight)}})},{"../core/geometry":126,"../lib/three":173}],165:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),i=a.Math.degToRad;r("ring",{schema:{radiusInner:{default:0.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.RingGeometry(t.radiusInner,t.radiusOuter,t.segmentsTheta,t.segmentsPhi,i(t.thetaStart),i(t.thetaLength))}})},{"../core/geometry":126,"../lib/three":173}],166:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),i=a.Math.degToRad;r("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(t){this.geometry=new a.SphereGeometry(t.radius,t.segmentsWidth,t.segmentsHeight,i(t.phiStart),i(t.phiLength),i(t.thetaStart),i(t.thetaLength))}})},{"../core/geometry":126,"../lib/three":173}],167:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.TetrahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":126,"../lib/three":173}],168:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),i=a.Math.degToRad;r("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:0.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(t){this.geometry=new a.TorusGeometry(t.radius,2*t.radiusTubular,t.segmentsRadial,t.segmentsTubular,i(t.arc))}})},{"../core/geometry":126,"../lib/three":173}],169:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:0.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(t){this.geometry=new a.TorusKnotGeometry(t.radius,2*t.radiusTubular,t.segmentsTubular,t.segmentsRadial,t.p,t.q)}})},{"../core/geometry":126,"../lib/three":173}],170:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),i=new a.Quaternion,o=new a.Vector3(0,0,1),n=new a.Vector2,s=new a.Vector2,d=new a.Vector2;r("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:0.5,z:0}},vertexB:{type:"vec3",default:{x:-0.5,y:-0.5,z:0}},vertexC:{type:"vec3",default:{x:0.5,y:-0.5,z:0}}},init:function(t){var r,p,c,u,g,h;c=new a.Triangle,c.a.set(t.vertexA.x,t.vertexA.y,t.vertexA.z),c.b.set(t.vertexB.x,t.vertexB.y,t.vertexB.z),c.c.set(t.vertexC.x,t.vertexC.y,t.vertexC.z),p=c.normal(),i.setFromUnitVectors(p,o),u=c.a.clone().applyQuaternion(i),g=c.b.clone().applyQuaternion(i),h=c.c.clone().applyQuaternion(i),n.set(m(u.x,g.x,h.x),m(u.y,g.y,h.y)),s.set(l(u.x,g.x,h.x),l(u.y,g.y,h.y)),d.set(0,0).subVectors(s,n),u=new a.Vector2().subVectors(u,n).divide(d),g=new a.Vector2().subVectors(g,n).divide(d),h=new a.Vector2().subVectors(h,n).divide(d),r=this.geometry=new a.Geometry,r.vertices.push(c.a),r.vertices.push(c.b),r.vertices.push(c.c),r.faces.push(new a.Face3(0,1,2,p)),r.faceVertexUvs[0]=[[u,g,h]]}})},{"../core/geometry":126,"../lib/three":173}],171:[function(t,r){var a=t("./utils/"),i=a.debug,o=i("A-Frame:error"),n=i("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&n("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),"file:"===window.location.protocol&&o("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),window.Promise=window.Promise||t("promise-polyfill"),window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.WebVRConfig=window.WebVRConfig||{BUFFER_SCALE:1,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,TOUCH_PANNER_DISABLED:!0,MOUSE_KEYBOARD_CONTROLS_DISABLED:!0},a.device.isIOSOlderThan10(window.navigator.userAgent)&&(window.WebVRConfig.BUFFER_SCALE=1/window.devicePixelRatio),t("webvr-polyfill"),t("present"),a.device.isBrowserEnvironment&&(t("./style/aframe.css"),t("./style/rStats.css"));var s=t("./core/scene/a-scene").AScene,l=t("./core/component").components,d=t("./core/component").registerComponent,p=t("./core/geometry").registerGeometry,c=t("./extras/primitives/primitives").registerPrimitive,u=t("./core/shader").registerShader,m=t("./core/system").registerSystem,g=t("./core/shader").shaders,h=t("./core/system").systems,y=window.THREE=t("./lib/three"),f=window.TWEEN=t("@tweenjs/tween.js"),M=t("../package");t("./components/index"),t("./geometries/index"),t("./shaders/index"),t("./systems/index");var x=t("./core/a-node"),E=t("./core/a-entity");t("./core/a-animation"),t("./core/a-assets"),t("./core/a-cubemap"),t("./core/a-mixin"),t("./extras/components/"),t("./extras/primitives/"),console.log("A-Frame Version: 0.7.1 (Date 18-10-2017, Commit #0da6cf4)"),console.log("three Version:",M.dependencies.three),console.log("WebVR Polyfill Version:",M.dependencies["webvr-polyfill"]),r.exports=window.AFRAME={AComponent:t("./core/component").Component,AEntity:E,ANode:x,AScene:s,components:l,geometries:t("./core/geometry").geometries,registerComponent:d,registerElement:t("./core/a-register-element").registerElement,registerGeometry:p,registerPrimitive:c,registerShader:u,registerSystem:m,primitives:{getMeshMixin:t("./extras/primitives/getMeshMixin"),primitives:t("./extras/primitives/primitives").primitives},scenes:t("./core/scene/scenes"),schema:t("./core/schema"),shaders:g,systems:h,THREE:y,TWEEN:f,utils:a,version:M.version}},{"../package":76,"./components/index":85,"./core/a-animation":118,"./core/a-assets":119,"./core/a-cubemap":120,"./core/a-entity":121,"./core/a-mixin":122,"./core/a-node":123,"./core/a-register-element":124,"./core/component":125,"./core/geometry":126,"./core/scene/a-scene":128,"./core/scene/scenes":131,"./core/schema":133,"./core/shader":134,"./core/system":135,"./extras/components/":136,"./extras/primitives/":139,"./extras/primitives/getMeshMixin":138,"./extras/primitives/primitives":140,"./geometries/index":162,"./lib/three":173,"./shaders/index":175,"./style/aframe.css":180,"./style/rStats.css":181,"./systems/index":184,"./utils/":195,"@tweenjs/tween.js":1,present:33,"promise-polyfill":34,"webvr-polyfill":61}],172:[function(t,r){window.aframeStats=function(t){function r(){var t=i.querySelectorAll("*");return Array.prototype.slice.call(t).filter(function(t){return t.isEntity}),t.length}var a=null,i=t;return{update:function(){a("te").set(r()),window.performance.getEntriesByName&&a("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(t){a=t},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}},"object"===("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&(r.exports={aframeStats:window.aframeStats})},{}],173:[function(t,r){(function(a){var i=a.THREE=t("three");i.TextureLoader&&(i.TextureLoader.prototype.crossOrigin="anonymous"),i.ImageLoader&&(i.ImageLoader.prototype.crossOrigin="anonymous"),i.Cache&&(i.Cache.enabled=!0),t("three/examples/js/loaders/GLTFLoader"),t("three/examples/js/loaders/OBJLoader"),t("three/examples/js/loaders/MTLLoader"),t("three/examples/js/loaders/ColladaLoader"),t("../../vendor/VRControls"),t("../../vendor/VREffect"),i.ColladaLoader.prototype.crossOrigin="anonymous",i.GLTFLoader.prototype.crossOrigin="anonymous",i.MTLLoader.prototype.crossOrigin="anonymous",i.OBJLoader.prototype.crossOrigin="anonymous",r.exports=i}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{"../../vendor/VRControls":200,"../../vendor/VREffect":201,three:41,"three/examples/js/loaders/ColladaLoader":42,"three/examples/js/loaders/GLTFLoader":43,"three/examples/js/loaders/MTLLoader":44,"three/examples/js/loaders/OBJLoader":45}],174:[function(t,r){function a(t){return{fog:t.fog,color:new o.Color(t.color),wireframe:t.wireframe,wireframeLinewidth:t.wireframeLinewidth}}var i=t("../core/shader").registerShader,o=t("../lib/three"),n=t("../utils/");r.exports.Shader=i("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.textureSrc=null,this.material=new o.MeshBasicMaterial(a(t)),n.material.updateMap(this,t)},update:function(t){this.updateMaterial(t),n.material.updateMap(this,t)},updateMaterial:function(t){var r=this.material;t=a(t),Object.keys(t).forEach(function(a){r[a]=t[a]})}})},{"../core/shader":134,"../lib/three":173,"../utils/":195}],175:[function(t){t("./flat"),t("./standard"),t("./sdf"),t("./msdf"),t("./ios10hls")},{"./flat":174,"./ios10hls":176,"./msdf":177,"./sdf":178,"./standard":179}],176:[function(t,r){var a=t("../core/shader").registerShader;r.exports.Shader=a("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:"varying vec2 vUV;\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUV = uv;\n}",fragmentShader:"uniform sampler2D src;\nuniform float opacity;\nvarying vec2 vUV;\nvoid main() {\n  vec2 offset = vec2(0, 0);\n  vec2 repeat = vec2(1, 1);\n  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;\n  gl_FragColor = vec4(color.rgb, opacity);\n}"})},{"../core/shader":134}],177:[function(t,r){var a=t("../core/shader").registerShader;r.exports.Shader=a("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:0.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:"attribute vec2 uv;\nattribute vec3 position;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUV;\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUV = uv;\n}",fragmentShader:"#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives: enable\n#endif\nprecision highp float;\n#define BIG_ENOUGH 0.001\n#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\n#define ALL_SMOOTH 0.4\n#define ALL_ROUGH 0.02\n#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))\nuniform sampler2D map;\nuniform vec3 color;\nuniform float opacity;\nuniform float alphaTest;\nvarying vec2 vUV;\nfloat median(float r, float g, float b) {\n  return max(min(r, g), min(max(r, g), b));\n}\nvoid main() {\n  vec3 sample = 1.0 - texture2D(map, vUV).rgb;\n  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;\n  float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);\n  float dscale = 0.353505;\n  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));\n  float isBigEnough = max(abs(duv.x), abs(duv.y));\n  if (isBigEnough > BIG_ENOUGH) {\n    float ratio = BIG_ENOUGH / isBigEnough;\n    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);\n  }\n  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }\n  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\n  gl_FragColor = vec4(color.xyz, alpha * opacity);\n}"})},{"../core/shader":134}],178:[function(t,r){var a=t("../core/shader").registerShader;r.exports.Shader=a("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:0.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:"attribute vec2 uv;\nattribute vec3 position;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUV;\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUV = uv;\n}",fragmentShader:"#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives: enable\n#endif\nprecision highp float;\n#define BIG_ENOUGH 0.001\n#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\n#define ALL_SMOOTH 0.4\n#define ALL_ROUGH 0.02\n#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))\nuniform sampler2D map;\nuniform vec3 color;\nuniform float opacity;\nuniform float alphaTest;\nvarying vec2 vUV;\n#ifdef GL_OES_standard_derivatives\nfloat contour(float width, float value) {\n  return smoothstep(0.5 - value, 0.5 + value, width);\n}\n#else\nfloat aastep(float value, float afwidth) {\n  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);\n}\n#endif\nvoid main() {\n#ifdef GL_OES_standard_derivatives\n  vec2 uv = vUV;\n  vec4 texColor = texture2D(map, uv);\n  float dist = texColor.a;\n  float width = fwidth(dist);\n  float alpha = contour(dist, width);\n  float dscale = 0.353505;\n  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));\n  float isBigEnough = max(abs(duv.x), abs(duv.y));\n  if (isBigEnough > BIG_ENOUGH) {\n    float ratio = BIG_ENOUGH / isBigEnough;\n    alpha = ratio * alpha + (1.0 - ratio) * dist;\n  }\n  else if (isBigEnough <= BIG_ENOUGH) {\n    vec4 box = vec4 (uv - duv, uv + duv);\n    alpha = (alpha + 0.5 * (\n      contour(texture2D(map, box.xy).a, width)\n      + contour(texture2D(map, box.zw).a, width)\n      + contour(texture2D(map, box.xw).a, width)\n      + contour(texture2D(map, box.zy).a, width)\n    )) / 3.0;\n  }\n  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }\n  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\n#else\n  vec4 texColor = texture2D(map, vUV);\n  float value = texColor.a;\n  float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));\n  float alpha = aastep(value, afwidth);\n  float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);\n  if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }\n  alpha = alpha * ratio + (1.0 - ratio) * value;\n  if (ratio < 1.0)\n    if (alpha <= DISCARD_ALPHA) { discard; return; }\n#endif\n  gl_FragColor = vec4(color, opacity * alpha);\n}"})},{"../core/shader":134}],179:[function(t,r){function a(t){var r={color:new o.Color(t.color),emissive:new o.Color(t.emissive),emissiveIntensity:t.emissiveIntensity,fog:t.fog,metalness:t.metalness,roughness:t.roughness,wireframe:t.wireframe,wireframeLinewidth:t.wireframeLinewidth};return t.normalMap&&(r.normalScale=t.normalScale),t.ambientOcclusionMap&&(r.aoMapIntensity=t.ambientOcclusionMapIntensity),t.displacementMap&&(r.displacementScale=t.displacementScale,r.displacementBias=t.displacementBias),r}var i=t("../core/shader").registerShader,o=t("../lib/three"),n=t("../utils/"),s=new o.CubeTextureLoader,l={};r.exports.Shader=i("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:0.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:0.5,min:0,max:1},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.material=new o.MeshStandardMaterial(a(t)),n.material.updateMap(this,t),t.normalMap&&n.material.updateDistortionMap("normal",this,t),t.displacementMap&&n.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&n.material.updateDistortionMap("ambientOcclusion",this,t),this.updateEnvMap(t)},update:function(t){this.updateMaterial(t),n.material.updateMap(this,t),t.normalMap&&n.material.updateDistortionMap("normal",this,t),t.displacementMap&&n.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&n.material.updateDistortionMap("ambientOcclusion",this,t),this.updateEnvMap(t)},updateMaterial:function(t){var r=this.material;t=a(t),Object.keys(t).forEach(function(a){r[a]=t[a]})},updateEnvMap:function(t){var r=this,a=this.material,i=t.envMap,d=t.sphericalEnvMap;return(i||d)&&!this.isLoadingEnvMap?(this.isLoadingEnvMap=!0,d?void this.el.sceneEl.systems.material.loadTexture(d,{src:d},function(t){r.isLoadingEnvMap=!1,t.mapping=o.SphericalReflectionMapping,a.envMap=t,n.material.handleTextureEvents(r.el,t),a.needsUpdate=!0}):l[i]?void l[i].then(function(t){r.isLoadingEnvMap=!1,a.envMap=t,n.material.handleTextureEvents(r.el,t),a.needsUpdate=!0}):void(l[i]=new Promise(function(t){n.srcLoader.validateCubemapSrc(i,function(i){s.load(i,function(i){r.isLoadingEnvMap=!1,a.envMap=i,n.material.handleTextureEvents(r.el,i),t(i)})})}))):(a.envMap=null,void(a.needsUpdate=!0))}})},{"../core/shader":134,"../lib/three":173,"../utils/":195}],180:[function(t,r){var a=".a-html{bottom:0;left:0;position:fixed;right:0;top:0}.a-body{height:100%;margin:0;overflow:hidden;padding:0;width:100%}:-webkit-full-screen{background-color:transparent}.a-hidden{display:none!important}.a-canvas{height:100%;left:0;position:absolute;top:0;width:100%}.a-canvas.a-grab-cursor:hover{cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.a-canvas.a-grab-cursor:active,.a-grabbing{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}// Class is removed when doing <a-scene embedded>. a-scene.fullscreen .a-canvas{width:100%!important;height:100%!important;top:0!important;left:0!important;right:0!important;bottom:0!important;z-index:999999!important;position:fixed!important}.a-inspector-loader{background-color:#ed3160;position:fixed;left:3px;top:3px;padding:6px 10px;color:#fff;text-decoration:none;font-size:12px;font-family:Roboto,sans-serif;text-align:center;z-index:99999;width:204px}@keyframes dots-1{from{opacity:0}25%{opacity:1}}@keyframes dots-2{from{opacity:0}50%{opacity:1}}@keyframes dots-3{from{opacity:0}75%{opacity:1}}@-webkit-keyframes dots-1{from{opacity:0}25%{opacity:1}}@-webkit-keyframes dots-2{from{opacity:0}50%{opacity:1}}@-webkit-keyframes dots-3{from{opacity:0}75%{opacity:1}}.a-inspector-loader .dots span{animation:dots-1 2s infinite steps(1);-webkit-animation:dots-1 2s infinite steps(1)}.a-inspector-loader .dots span:first-child+span{animation-name:dots-2;-webkit-animation-name:dots-2}.a-inspector-loader .dots span:first-child+span+span{animation-name:dots-3;-webkit-animation-name:dots-3}a-scene{display:block;position:relative;height:100%;width:100%}a-assets,a-scene audio,a-scene img,a-scene video{display:none}.a-enter-vr-modal,.a-orientation-modal{font-family:Consolas,Andale Mono,Courier New,monospace}.a-enter-vr-modal a{border-bottom:1px solid #fff;padding:2px 0;text-decoration:none;transition:.1s color ease-in}.a-enter-vr-modal a:hover{background-color:#fff;color:#111;padding:2px 4px;position:relative;left:-4px}.a-enter-vr{font-family:sans-serif,monospace;font-size:13px;width:100%;font-weight:200;line-height:16px;position:absolute;right:20px;bottom:20px}.a-enter-vr.embedded{right:5px;bottom:5px}.a-enter-vr-button,.a-enter-vr-modal,.a-enter-vr-modal a{color:#fff}.a-enter-vr-button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20245.82%20141.73%22%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill%3A%23fff%3Bfill-rule%3Aevenodd%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Emask%3C%2Ftitle%3E%3Cpath%20class%3D%22a%22%20d%3D%22M175.56%2C111.37c-22.52%2C0-40.77-18.84-40.77-42.07S153%2C27.24%2C175.56%2C27.24s40.77%2C18.84%2C40.77%2C42.07S198.08%2C111.37%2C175.56%2C111.37ZM26.84%2C69.31c0-23.23%2C18.25-42.07%2C40.77-42.07s40.77%2C18.84%2C40.77%2C42.07-18.26%2C42.07-40.77%2C42.07S26.84%2C92.54%2C26.84%2C69.31ZM27.27%2C0C11.54%2C0%2C0%2C12.34%2C0%2C28.58V110.9c0%2C16.24%2C11.54%2C30.83%2C27.27%2C30.83H99.57c2.17%2C0%2C4.19-1.83%2C5.4-3.7L116.47%2C118a8%2C8%2C0%2C0%2C1%2C12.52-.18l11.51%2C20.34c1.2%2C1.86%2C3.22%2C3.61%2C5.39%2C3.61h72.29c15.74%2C0%2C27.63-14.6%2C27.63-30.83V28.58C245.82%2C12.34%2C233.93%2C0%2C218.19%2C0H27.27Z%22%2F%3E%3C%2Fsvg%3E) 50% 50%/70% 70% no-repeat rgba(0,0,0,.35);border:0;bottom:0;cursor:pointer;min-width:50px;min-height:30px;padding-right:5%;padding-top:4%;position:absolute;right:0;transition:background-color .05s ease;-webkit-transition:background-color .05s ease;z-index:9999}.a-enter-vr-button:active,.a-enter-vr-button:hover{background-color:#666}[data-a-enter-vr-no-webvr] .a-enter-vr-button{border-color:#666;opacity:.65}[data-a-enter-vr-no-webvr] .a-enter-vr-button:active,[data-a-enter-vr-no-webvr] .a-enter-vr-button:hover{background-color:rgba(0,0,0,.35);cursor:not-allowed}.a-enter-vr-modal{background-color:#666;border-radius:0;display:none;min-height:32px;margin-right:70px;padding:9px;width:280px;right:2%;position:absolute}.a-enter-vr-modal:after{border-bottom:10px solid transparent;border-left:10px solid #666;border-top:10px solid transparent;display:inline-block;content:'';position:absolute;right:-5px;top:5px;width:0;height:0}.a-enter-vr-modal a,.a-enter-vr-modal p{display:inline}.a-enter-vr-modal p{margin:0}.a-enter-vr-modal p:after{content:' '}[data-a-enter-vr-no-headset].a-enter-vr:hover .a-enter-vr-modal,[data-a-enter-vr-no-webvr].a-enter-vr:hover .a-enter-vr-modal{display:block}.a-orientation-modal{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center/50% 50% no-repeat rgba(244,244,244,1);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-orientation-modal:after{color:#666;content:\"Insert phone into Cardboard holder.\";display:block;position:absolute;text-align:center;top:70%;transform:translateY(-70%);width:100%}.a-orientation-modal button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;border:none;height:50px;text-indent:-9999px;width:50px}";t("browserify-css").createStyle(a,{href:"src\\style\\aframe.css"}),r.exports=a},{"browserify-css":5}],181:[function(t,r){var a=".rs-base{background-color:#333;color:#fafafa;border-radius:0;font:10px monospace;left:5px;line-height:1em;opacity:.85;overflow:hidden;padding:10px;position:fixed;top:5px;width:300px;z-index:10000}.rs-base div.hidden{display:none}.rs-base h1{color:#fff;cursor:pointer;font-size:1.4em;font-weight:300;margin:0 0 5px;padding:0}.rs-group{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;margin-bottom:5px}.rs-group:last-child{margin-bottom:0}.rs-counter-base{align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:10px;-webkit-justify-content:space-between;justify-content:space-between;margin:2px 0}.rs-counter-base.alarm{color:#b70000;text-shadow:0 0 0 #b70000,0 0 1px #fff,0 0 1px #fff,0 0 2px #fff,0 0 2px #fff,0 0 3px #fff,0 0 3px #fff,0 0 4px #fff,0 0 4px #fff}.rs-counter-id{font-weight:300;-webkit-box-ordinal-group:0;-webkit-order:0;order:0;width:54px}.rs-counter-value{font-weight:300;-webkit-box-ordinal-group:1;-webkit-order:1;order:1;text-align:right;width:35px}.rs-canvas{-webkit-box-ordinal-group:2;-webkit-order:2;order:2}@media (min-width:480px){.rs-base{left:20px;top:20px}}";t("browserify-css").createStyle(a,{href:"src\\style\\rStats.css"}),r.exports=a},{"browserify-css":5}],182:[function(t,r){function a(t){var r=t.camera,a;r&&(a=t.querySelector("["+s+"]"),a&&t.removeChild(a))}var i=t("../utils/bind"),o=t("../constants/"),n=t("../core/system").registerSystem,s="data-aframe-default-camera";r.exports.System=n("camera",{init:function(){this.activeCameraEl=null,this.sceneEl.addEventListener("loaded",i(this.setupDefaultCamera,this))},setupDefaultCamera:function(){var t=this.sceneEl,r;return t.camera?void t.emit("camera-ready",{cameraEl:t.camera.el}):void(r=document.createElement("a-entity"),r.setAttribute("position","0 0 0"),r.setAttribute(s,""),r.setAttribute("camera",{active:!0,userHeight:o.DEFAULT_CAMERA_HEIGHT}),r.setAttribute("wasd-controls",""),r.setAttribute("look-controls",""),r.setAttribute(o.AFRAME_INJECTED,""),t.appendChild(r),t.addEventListener("enter-vr",this.removeDefaultOffset),t.addEventListener("exit-vr",this.addDefaultOffset),t.emit("camera-ready",{cameraEl:r}))},disableActiveCamera:function(){var t=this.sceneEl.querySelectorAll("[camera]"),r=t[t.length-1];r.setAttribute("camera","active",!0)},setActiveCamera:function(t){var r=this.activeCameraEl,o=this.sceneEl,n,l,d,i;if(i=t.getObject3D("camera"),i&&t!==this.activeCameraEl){var p=o.querySelector("["+s+"]"),c=p&&p.querySelector("[camera]");for(t!==c&&a(o),this.activeCameraEl=t,this.activeCameraEl.play(),o.camera=i,r&&r.setAttribute("camera","active",!1),l=o.querySelectorAll("[camera]"),d=0;d<l.length;d++)(n=l[d],t!==n)&&(n.setAttribute("camera","active",!1),n.pause());o.emit("camera-set-active",{cameraEl:t})}}})},{"../constants/":116,"../core/system":135,"../utils/bind":189}],183:[function(t,r){function a(t){var r=t.primitive,a=s[r]&&s[r].Geometry,i=new a;if(!a)throw new Error("Unknown geometry `"+r+"`");return i.init(t),n(i.geometry,t.buffer)}function i(t,r){t[r]--}function o(t,r){t[r]=t[r]===void 0?1:t[r]+1}function n(t,r){var a;return r?(a=new d.BufferGeometry().fromGeometry(t),a.metadata={type:t.type,parameters:t.parameters||{}},t.dispose(),a):t}var s=t("../core/geometry").geometries,l=t("../core/system").registerSystem,d=t("../lib/three");r.exports.System=l("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(t){var r=this.cache,i,n;return t.skipCache||t.mergeTo?a(t):(n=this.hash(t),i=r[n],o(this.cacheCount,n),i)?i:(i=a(t),r[n]=i,i)},unuseGeometry:function(t){var r=this.cache,a=this.cacheCount,o,n;t.skipCache||t.mergeTo||(n=this.hash(t),!!r[n])&&(i(a,n),0<a[n]||(o=r[n],o.dispose(),delete r[n],delete a[n]))},hash:function(t){return JSON.stringify(t)}})},{"../core/geometry":126,"../core/system":135,"../lib/three":173}],184:[function(t){t("./camera"),t("./geometry"),t("./light"),t("./material"),t("./shadow"),t("./tracked-controls")},{"./camera":182,"./geometry":183,"./light":185,"./material":186,"./shadow":187,"./tracked-controls":188}],185:[function(t,r){var a=t("../core/system").registerSystem,i=t("../utils/bind"),o=t("../constants/"),n="data-aframe-default-light";r.exports.System=a("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",i(this.setupDefaultLights,this))},registerLight:function(t){t.hasAttribute(n)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var t=this.sceneEl,r;if(this.defaultLights){r=document.querySelectorAll("["+n+"]");for(var a=0;a<r.length;a++)t.removeChild(r[a]);this.defaultLights=!1}},setupDefaultLights:function(){var t=this.sceneEl,r,a;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(r=document.createElement("a-entity"),r.setAttribute("light",{color:"#BBB",type:"ambient"}),r.setAttribute(n,""),r.setAttribute(o.AFRAME_INJECTED,""),t.appendChild(r),a=document.createElement("a-entity"),a.setAttribute("light",{color:"#FFF",intensity:0.6,castShadow:!0}),a.setAttribute("position",{x:-0.5,y:1,z:1}),a.setAttribute(n,""),a.setAttribute(o.AFRAME_INJECTED,""),t.appendChild(a),this.defaultLights=!0)}})},{"../constants/":116,"../core/system":135,"../utils/bind":189}],186:[function(t,r){function a(t,r){var a=r.getAttribute("id"),o,i,n;if(a)return a;for(i="",n=t||{},o=0;o<r.attributes.length;o++)n[r.attributes[o].name]=r.attributes[o].value;return Object.keys(n).sort().forEach(function(t){i+=t+":"+n[t]+";"}),i}function i(t,r){return new Promise(function(a){function i(t){o(t,r),t.needsUpdate=!0,a(t)}return"string"!==typeof t?void i(new d.Texture(t)):void h.load(t,i,function(){},function(t){g("`$s` could not be fetched (Error code: %s; Response: %s)",t.status,t.statusText)})})}function o(t,r){var a=r.offset||{x:0,y:0},i=r.repeat||{x:1,y:1},o=r.npot||!1;o&&(t.wrapS=d.ClampToEdgeWrapping,t.wrapT=d.ClampToEdgeWrapping,t.magFilter=d.LinearFilter,t.minFilter=d.LinearFilter),(1!==i.x||1!==i.y)&&(t.wrapS=d.RepeatWrapping,t.wrapT=d.RepeatWrapping,t.repeat.set(i.x,i.y)),(0!==a.x||0!==a.y)&&t.offset.set(a.x,a.y)}function n(t,r,a){var i=document.createElement("video");return i.width=r,i.height=a,i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline",""),i.autoplay=!0,i.loop=!0,i.crossOrigin="anonymous",i.addEventListener("error",function(){y("`$s` is not a valid video",t)},!0),i.src=t,i}function s(t){return t.autoplay=t.hasAttribute("autoplay")&&"false"!==t.getAttribute("autoplay"),t.controls=t.hasAttribute("controls")&&"false"!==t.getAttribute("controls"),"false"===t.getAttribute("loop")&&t.removeAttribute("loop"),"false"===t.getAttribute("preload")&&(t.preload="none"),t.crossOrigin=t.crossOrigin||"anonymous",t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),t}var l=t("../core/system").registerSystem,d=t("../lib/three"),p=t("../utils/"),c=t("../utils/material").isHLS,u=p.bind,m=p.debug,g=m("components:texture:error"),h=new d.TextureLoader,y=m("components:texture:warn");h.setCrossOrigin("anonymous"),r.exports.System=l("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",u(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(t,r,a){var i=this;return"CANVAS"===t.tagName?void this.loadCanvas(t,r,a):"VIDEO"===t.tagName?(t.hasAttribute("src")||t.hasAttribute("srcObject")||y("Video element was defined without `src` nor `srcObject` attributes."),void this.loadVideo(t,r,a)):void p.srcLoader.validateSrc(t,function(t){i.loadImage(t,r,a)},function(t){i.loadVideo(t,r,a)})},loadImage:function(t,r,a){var o=this.hash(r),n=this.textureCache;return n[o]?void n[o].then(a):void(n[o]=i(t,r),n[o].then(a))},loadCanvas:function(t,r,a){t.readyState=2,t.HAVE_CURRENT_DATA=2,this.loadVideo(t,r,a)},loadVideo:function(t,r,a){function i(t){t.texture.needsUpdate=!0,a(t.texture,t.videoEl)}var l=this.textureCache,p,u,m,g;if("string"!==typeof t){if(m=t,p=this.hashVideo(r,m),l[p])return void l[p].then(i);s(m)}return m=m||n(t,r.width,r.height),p=this.hashVideo(r,m),l[p]?void l[p].then(i):void(u=new d.VideoTexture(m),u.minFilter=d.LinearFilter,o(u,r),this.sceneEl.isIOS&&c(m.src||m.getAttribute("src"),m.type||m.getAttribute("type"))&&(u.format=d.RGBAFormat,u.needsCorrectionBGRA=!0,u.flipY=!1,u.needsCorrectionFlipY=!0),g={texture:u,videoEl:m},l[p]=Promise.resolve(g),i(g))},hash:function(t){return t.src.tagName&&(t=p.extendDeep({},t),t.src=t.src.getAttribute("src")),JSON.stringify(t)},hashVideo:function(t,r){return a(t,r)},registerMaterial:function(t){this.materials[t.uuid]=t},unregisterMaterial:function(t){delete this.materials[t.uuid];var r=this.textureCounts;Object.keys(t).filter(function(r){return t[r]&&t[r].isTexture}).forEach(function(a){r[t[a].uuid]--,0>=r[t[a].uuid]&&t[a].dispose()})},updateMaterials:function(){var t=this.materials;Object.keys(t).forEach(function(r){t[r].needsUpdate=!0})},onMaterialTextureLoaded:function(t){this.textureCounts[t.detail.texture.uuid]||(this.textureCounts[t.detail.texture.uuid]=0),this.textureCounts[t.detail.texture.uuid]++}})},{"../core/system":135,"../lib/three":173,"../utils/":195,"../utils/material":196}],187:[function(t,r){var a=t("../core/system").registerSystem,i=t("../utils/bind"),o=t("../lib/three"),n={basic:o.BasicShadowMap,pcf:o.PCFShadowMap,pcfsoft:o.PCFSoftShadowMap};r.exports.System=a("shadow",{schema:{type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]},renderReverseSided:{default:!0},renderSingleSided:{default:!0}},init:function(){var t=this.sceneEl,r=this.data;this.shadowMapEnabled=!1,t.addEventListener("render-target-loaded",i(function(){t.renderer&&(t.renderer.shadowMap.type=n[r.type],t.renderer.shadowMap.renderReverseSided=r.renderReverseSided,t.renderer.shadowMap.renderSingleSided=r.renderSingleSided,this.setShadowMapEnabled(this.shadowMapEnabled))},this))},setShadowMapEnabled:function(t){var r=this.sceneEl.renderer;this.shadowMapEnabled=t,r&&(r.shadowMap.enabled=t)}})},{"../core/system":135,"../lib/three":173,"../utils/bind":189}],188:[function(t,r){var a=t("../core/system").registerSystem;r.exports.System=a("tracked-controls",{init:function(){var t=this;this.controllers=[],this.updateControllerList();navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(r){r.length&&(t.vrDisplay=r[0])})})},tick:function(){this.updateControllerList()},updateControllerList:function(){var t=this.controllers,r,a,o,i;if(a=navigator.getGamepads&&navigator.getGamepads(),!!a){for(i=t.length,t.length=0,o=0;o<a.length;++o)r=a[o],r&&r.pose&&t.push(r);t.length!==i&&this.el.emit("controllersupdated",void 0,!1)}}})},{"../core/system":135}],189:[function(t,r){r.exports=function(t,r){return function(a){return function(){var i=a.concat(Array.prototype.slice.call(arguments,0));return t.apply(r,i)}}(Array.prototype.slice.call(arguments,2))}},{}],190:[function(t,r){function a(t){return l.test(t)}function i(t){for(var r in t){if(t[r]===void 0){delete t[r];continue}t[r].constructor===String&&(t[r]=parseFloat(t[r],10))}return t}var o=t("./debug"),n=t("object-assign"),s=o("utils:coordinates:warn"),l=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;r.exports.regex=l,r.exports.parse=function(t,r){var a,o;return t&&t instanceof Object?(r&&(t.x=void 0===t.x?r.x:t.x,t.y=void 0===t.y?r.y:t.y,t.z=void 0===t.z?r.z:t.z,t.w=void 0===t.w?r.w:t.w),i(t)):null===t||void 0===t?"object"===("undefined"===typeof r?"undefined":babelHelpers.typeof(r))?n({},r):r:(a=t.trim().replace(/\s+/g," ").split(" "),o={},o.x=a[0]||r&&r.x,o.y=a[1]||r&&r.y,o.z=a[2]||r&&r.z,o.w=a[3]||r&&r.w,i(o))},r.exports.stringify=function(t){return"object"===("undefined"===typeof t?"undefined":babelHelpers.typeof(t))?[t.x,t.y,t.z,t.w].join(" ").trim():t},r.exports.isCoordinates=a,r.exports.isCoordinate=function(t){return s("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),a(t)},r.exports.toVector3=function(t){return new THREE.Vector3(t.x,t.y,t.z)}},{"./debug":191,"object-assign":26}],191:[function(t,r){(function(a){function i(t){var r=t.split(":");return r[r.length-1]}function o(t){var r=i(t),a=l.colors&&l.colors[r];return a||null}var n=t("debug"),s=t("object-assign"),l={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},d=function(t){var r=n(t);return r.color=o(t),r};s(d,n);var p=function(){try{return window.localStorage}catch(t){}}();p&&(parseInt(p.logs,10)||"true"===p.logs)?d.enable("*"):d.enable("*:error,*:info,*:warn"),a.browser&&(window.logs=d),r.exports=d}).call(this,t("_process"))},{_process:6,debug:10,"object-assign":26}],192:[function(t,r){(function(a){function i(t){var r=t||window.navigator.userAgent;return /ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(r)}function o(){return /iPad|iPhone|iPod/.test(window.navigator.platform)}function n(){return /SamsungBrowser.+Mobile VR/i.test(window.navigator.userAgent)}var s=t("../lib/three"),l=new s.Object3D,d=new s.VRControls(l);r.exports.checkHeadsetConnected=function(){var t=d.getVRDisplay(),r;return t&&"isConnected"in t?t.isConnected:(d.update(),r=l.quaternion,0!==r._x||0!==r._y||0!==r._z)},r.exports.checkHasPositionalTracking=function(){var t=d.getVRDisplay();return p()||n()?!1:t&&t.capabilities.hasPosition};var p=function(){var t=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(t=!0),(o()||i())&&(t=!0)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return t}}();r.exports.isMobile=p,r.exports.isTablet=i,r.exports.isIOS=o,r.exports.isGearVR=n,r.exports.isLandscape=function(){return 90===window.orientation||-90===window.orientation},r.exports.isIOSOlderThan10=function(t){return /(iphone|ipod|ipad).*os.(7|8|9)/i.test(t)},r.exports.isBrowserEnvironment=!(a&&!a.browser),r.exports.isNodeEnvironment=!r.exports.isBrowserEnvironment}).call(this,t("_process"))},{"../lib/three":173,_process:6}],193:[function(t,r){r.exports.getComponentPropertyPath=function(t,r){return r=r||".",-1===t.indexOf(r)?t:t.split(r)},r.exports.getComponentProperty=function(t,r,a){var i;return a=a||".",-1===r.indexOf(a)?t.getAttribute(r):(i=r.split(a),t.getAttribute(i[0])[i[1]])},r.exports.setComponentProperty=function(t,r,a,i){var o={},n;return i=i||".",-1===r.indexOf(i)?void t.setAttribute(r,a):(n=r.split(i),o[n[1]]=a,void t.setAttribute(n[0],o))}},{}],194:[function(t,r){r.exports=function(t){var r=t.style.width,a=t.style.height;t.style.width=parseInt(r,10)+1+"px",t.style.height=parseInt(a,10)+1+"px",setTimeout(function(){t.style.width=r,t.style.height=a},200)}},{}],195:[function(t,r){function i(t,r){var a,o,n,s,l;if(void 0===t||void 0===r||null===t||null===r||!(t&&r&&t.constructor===Object&&r.constructor===Object||t.constructor===Array&&r.constructor===Array))return t===r;if(o=Object.keys(t),n=Object.keys(r),o.length!==n.length)return!1;for(a=0;a<o.length;++a)if(s=t[o[a]],l=r[o[a]],"object"===("undefined"===typeof s?"undefined":babelHelpers.typeof(s))||"object"===("undefined"===typeof l?"undefined":babelHelpers.typeof(l))||Array.isArray(s)&&Array.isArray(l)){if(s===l)continue;if(!i(s,l))return!1}else if(s!==l)return!1;return!0}var a=t("./debug"),o=t("deep-assign"),n=t("./device"),s=t("object-assign"),l=a("utils:warn");r.exports.bind=t("./bind"),r.exports.coordinates=t("./coordinates"),r.exports.debug=a,r.exports.device=n,r.exports.entity=t("./entity"),r.exports.forceCanvasResizeSafariMobile=t("./forceCanvasResizeSafariMobile"),r.exports.material=t("./material"),r.exports.styleParser=t("./styleParser"),r.exports.trackedControls=t("./tracked-controls"),r.exports.checkHeadsetConnected=function(){return l("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),n.checkHeadsetConnected(arguments)},r.exports.isGearVR=function(){return l("`utils.isGearVR` has moved to `utils.device.isGearVR`"),n.isGearVR(arguments)},r.exports.isIOS=function(){return l("`utils.isIOS` has moved to `utils.device.isIOS`"),n.isIOS(arguments)},r.exports.isMobile=function(){return l("`utils.isMobile has moved to `utils.device.isMobile`"),n.isMobile(arguments)},r.exports.throttle=function(t,a,i){var o;return i&&(t=r.exports.bind(t,i)),function(){var r=Date.now(),i="undefined"===typeof o?a:r-o;("undefined"===typeof o||i>=a)&&(o=r,t.apply(null,arguments))}},r.exports.throttleTick=function(t,a,i){var o;return i&&(t=r.exports.bind(t,i)),function(r,i){var n="undefined"===typeof o?i:r-o;("undefined"===typeof o||n>=a)&&(o=r,t(r,n))}},r.exports.debounce=function(t,r,a){var i;return function(){var o=this,n=arguments,s=a&&!i;clearTimeout(i),i=setTimeout(function(){i=null,a||t.apply(o,n)},r),s&&t.apply(o,n)}},r.exports.fireEvent=function(t,r,a){a=a||{},a.detail=a.detail||{},a.detail.target=a.detail.target||t;var i=new CustomEvent(r,a);t.dispatchEvent(i)},r.exports.extend=s,r.exports.extendDeep=o,r.exports.clone=function(t){return JSON.parse(JSON.stringify(t))},r.exports.deepEqual=i,r.exports.diff=function(t,r){var a={},o=Object.keys(t);return r?(Object.keys(r).forEach(function(t){-1===o.indexOf(t)&&o.push(t)}),o.forEach(function(o){var n=t[o],s=r[o],l=n&&s&&n.constructor===Object&&s.constructor===Object;(!l||i(n,s))&&(l||n===s)||(a[o]=s)}),a):a},r.exports.shouldCaptureKeyEvent=function(t){return!t.metaKey&&document.activeElement===document.body},r.exports.splitString=function(t,r){"undefined"===typeof r&&(r=" ");var a=new RegExp(r,"g");return t=(t||"").replace(a,r),t.split(r)},r.exports.getElData=function(t,r){r=r||{};var a={};return Object.keys(r).forEach(function(r){t.hasAttribute(r)&&(a[r]=t.getAttribute(r))}),a},r.exports.getUrlParameter=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)"),a=r.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},r.exports.isIframed=function(){return window.top!==window.self},r.exports.findAllScenes=function(t){for(var r=[],a=t.getElementsByTagName("*"),o=0,i=a.length;o<i;o++)a[o].isScene&&r.push(a[o]);return r},r.exports.srcLoader=t("./src-loader")},{"./bind":189,"./coordinates":190,"./debug":191,"./device":192,"./entity":193,"./forceCanvasResizeSafariMobile":194,"./material":196,"./src-loader":197,"./styleParser":198,"./tracked-controls":199,"deep-assign":12,"object-assign":26}],196:[function(t,r){function a(t,r){r&&(t.emit("materialtextureloaded",{src:r.image,texture:r}),r.image&&"VIDEO"===r.image.tagName&&(r.image.addEventListener("loadeddata",function(){t.components&&t.components.material&&(r.needsCorrectionBGRA&&r.needsCorrectionFlipY&&-1!==["standard","flat"].indexOf(t.components.material.data.shader)&&t.setAttribute("material","shader","ios10hls"),t.emit("materialvideoloadeddata",{src:r.image,texture:r}))}),r.image.addEventListener("ended",function(){t.emit("materialvideoended",{src:r.image,texture:r})})))}var i=t("../lib/three"),o=["application/x-mpegurl","application/vnd.apple.mpegurl"];r.exports.updateMapMaterialFromData=function(t,r,o,n){function s(r){d[t]=r,d.needsUpdate=!0,a(l,r)}var l=o.el,d=o.material,p=n[r];return o.materialSrcs||(o.materialSrcs={}),p?void(p===o.materialSrcs[t]||(o.materialSrcs[t]=p,p instanceof i.Texture?s(p):l.sceneEl.systems.material.loadTexture(p,{src:p,repeat:n.repeat,offset:n.offset,npot:n.npot},function(r){o.materialSrcs[t]!==p||s(r)}))):(delete o.materialSrcs[t],void s(null))},r.exports.updateMap=function(t,a){return r.exports.updateMapMaterialFromData("map","src",t,a)},r.exports.updateDistortionMap=function(t,r,i){function o(t){l[n+"Map"]=t,l.needsUpdate=!0,a(s,t)}var n=t;"ambientOcclusion"===t&&(n="ao");var s=r.el,l=r.material,d=i[t+"Map"],p={};return(p.src=d,p.offset=i[t+"TextureOffset"],p.repeat=i[t+"TextureRepeat"],p.wrap=i[t+"TextureWrap"],d)?d===r[t+"TextureSrc"]?void 0:(r[t+"TextureSrc"]=d,void s.sceneEl.systems.material.loadTexture(d,p,o)):void(!l.map||o(null))},r.exports.handleTextureEvents=a,r.exports.isHLS=function(t,r){return r&&o.includes(r.toLowerCase())||t&&0<t.toLowerCase().indexOf(".m3u8")}},{"../lib/three":173}],197:[function(t,r){function a(t,r,a){i(t,function(i){return i?void r(t):void a(t)})}function o(t){var r=t.match(/\url\((.+)\)/);return r?r[1]:void 0}function i(t,r){if(t.tagName)return void r("IMG"===t.tagName);var a=new Image;a.addEventListener("load",function(){r(!0)}),a.addEventListener("error",function(){r(!1)}),a.src=t}function n(t){try{var r=document.querySelector(t);return r||l("No element was found matching the selector: \"%s\"",t),r}catch(r){return void l("\"%s\" is not a valid selector",t)}}var s=t("./debug"),l=s("utils:src-loader:warn");r.exports={parseUrl:o,validateSrc:a,validateCubemapSrc:function(t,r){function s(t){p.push(t),6===p.length&&r(p)}var d="",p=[],c,u,i;for(u=0;5>u;u++)d+="(url\\((?:[^\\)]+)\\),\\s*)";if(d+="(url\\((?:[^\\)]+)\\)\\s*)",i=t.match(new RegExp(d)),i){for(u=1;7>u;u++)a(o(i[u]),s);return}return c=n(t),c?"A-CUBEMAP"===c.tagName&&c.srcs?r(c.srcs):void l("Selector \"%s\" does not point to <a-cubemap>",t):void 0}}},{"./debug":191}],198:[function(t,r){function a(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}function i(t){var r=Object.keys(t),i={};return r.forEach(function(r){var o=a(r);i[o]=t[r]}),i}var o=t("style-attr");r.exports.parse=function(t){var r;return"string"===typeof t?(r=o.parse(t),r[""]?t:i(r)):t},r.exports.stringify=function(t){return"string"===typeof t?t:o.stringify(t)},r.exports.toCamelCase=a,r.exports.transformKeysToCamelCase=i},{"style-attr":36}],199:[function(t,r){function a(t,r,a){var o=t.el.sceneEl,n=a.index||0,s,l;return!!r&&(l=o&&o.systems["tracked-controls"],!!l)&&(s=l.controllers,!!s.length&&!!i(s,null,r,a.hand,n))}function i(t,r,a,n,l){var d=0,p=l||0,c,u;for(u=0;u<t.length;u++)if((c=t[u],!(a&&-1===c.id.indexOf(a)))&&(a||c.id===r)&&!(n&&c.hand&&n!==c.hand)){if(n&&!c.hand&&(p=s*l+(n===o?0:1)),d===p)return c;++d}}var o=t("../constants").DEFAULT_HANDEDNESS,n=["x","y","z","w"],s=2;r.exports.checkControllerPresentAndSetup=function(t,r,i){var o=t.el,n=a(t,r,i);return t.controllerPresent&&!t.controllerEventsActive&&t.addEventListeners(),n===t.controllerPresent?n:void(t.controllerPresent=n,n?(t.injectTrackedControls(),t.addEventListeners(),o.emit("controllerconnected",{name:t.name,component:t})):(t.removeEventListeners(),o.emit("controllerdisconnected",{name:t.name,component:t})))},r.exports.isControllerPresent=a,r.exports.findMatchingController=i,r.exports.emitIfAxesChanged=function(t,r,a){var o,s,l,d,p,i;for(s=Object.keys(r),p=0;p<s.length;p++){for(o=r[s[p]],l=!1,i=0;i<o.length;i++)a.detail.changed[o[i]]&&(l=!0);if(l){for(d={},i=0;i<o.length;i++)d[n[i]]=a.detail.axis[o[i]];t.el.emit(s[p]+"moved",d)}}}},{"../constants":116}],200:[function(){THREE.VRControls=function(t,r){var a=this,i=new THREE.Matrix4,o=null,n,s;"VRFrameData"in window&&(o=new window.VRFrameData),window.addEventListener("vrdisplayconnect",function(t){n=t.display}),window.addEventListener("vrdisplaydisconnect",function(){n=void 0}),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(t){s=t,0<t.length?n=t[0]:r&&r("VR input not available.")}).catch(function(){console.warn("THREE.VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return n},this.setVRDisplay=function(t){n=t},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),s},this.getStandingMatrix=function(){return i},this.update=function(){if(n){var r;n.getFrameData?(n.getFrameData(o),r=o.pose):n.getPose&&(r=n.getPose()),null!==r.orientation&&t.quaternion.fromArray(r.orientation),null===r.position?t.position.set(0,0,0):t.position.fromArray(r.position),this.standing&&(n.stageParameters?(t.updateMatrix(),i.fromArray(n.stageParameters.sittingToStandingTransform),t.applyMatrix(i)):t.position.setY(t.position.y+this.userHeight)),t.position.multiplyScalar(a.scale)}},this.resetPose=function(){n&&n.resetPose()},this.resetSensor=function(){console.warn("THREE.VRControls: .resetSensor() is now .resetPose()."),this.resetPose()},this.zeroSensor=function(){console.warn("THREE.VRControls: .zeroSensor() is now .resetPose()."),this.resetPose()},this.dispose=function(){n=null}}},{}],201:[function(){THREE.VREffect=function(t,a){function i(){var r=y.isPresenting;if(y.isPresenting=void 0!==u&&u.isPresenting,y.isPresenting){var a=u.getEyeParameters("left"),i=a.renderWidth,o=a.renderHeight;r||(x=t.getPixelRatio(),f=t.getSize(),t.setPixelRatio(1),t.setSize(2*i,o,!1))}else r&&(t.setPixelRatio(x),t.setSize(f.width,f.height,M))}function o(t){var r=2/(t.leftTan+t.rightTan),a=0.5*((t.leftTan-t.rightTan)*r),i=2/(t.upTan+t.downTan),o=0.5*((t.upTan-t.downTan)*i);return{scale:[r,i],offset:[a,o]}}function s(t,r,a,i){r=void 0===r||r,a=void 0===a?0.01:a,i=void 0===i?1e4:i;var n=r?-1:1,s=new THREE.Matrix4,l=s.elements,d=o(t);return l[0]=d.scale[0],l[1]=0,l[2]=d.offset[0]*n,l[3]=0,l[4]=0,l[5]=d.scale[1],l[6]=-d.offset[1]*n,l[7]=0,l[8]=0,l[9]=0,l[10]=i/(a-i)*-n,l[11]=i*a/(a-i),l[12]=0,l[13]=0,l[14]=n,l[15]=0,s.transpose(),s}function l(t,a,i,o){var n=L/180,l={upTan:r(t.upDegrees*n),downTan:r(t.downDegrees*n),leftTan:r(t.leftDegrees*n),rightTan:r(t.rightDegrees*n)};return s(l,a,i,o)}var d=new THREE.Vector3,p=new THREE.Vector3,c=null,u,m,g,h;"VRFrameData"in window&&(c=new window.VRFrameData),window.addEventListener("vrdisplayconnect",function(t){u=t.display}),window.addEventListener("vrdisplaydisconnect",function(){var t;y.exitPresent(),t=y.cancelAnimationFrame(),u=void 0,y.requestAnimationFrame(t)}),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(t){m=t,0<t.length?u=t[0]:a&&a("HMD not available")}).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1;var y=this,f=t.getSize(),M=!1,x=t.getPixelRatio();this.getVRDisplay=function(){return u},this.setVRDisplay=function(t){u=t},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),m},this.setSize=function(r,a,i){if(f={width:r,height:a},M=i,y.isPresenting){var o=u.getEyeParameters("left");t.setPixelRatio(1),t.setSize(2*o.renderWidth,o.renderHeight,!1)}else t.setPixelRatio(x),t.setSize(r,a,i)};var E=t.domElement,v=[0,0,0.5,1],A=[0.5,0,0.5,1];window.addEventListener("vrdisplaypresentchange",i,!1),this.setFullScreen=function(t){return new Promise(function(r,a){return void 0===u?void a(new Error("No VR hardware found.")):y.isPresenting===t?void r():void(t?r(u.requestPresent([{source:E}])):r(u.exitPresent()))})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(t){var t=y.f=t||y.f;return t?void 0===u?window.requestAnimationFrame(t):u.requestAnimationFrame(t):void 0},this.cancelAnimationFrame=function(t){var r=y.f;return y.f=void 0,void 0===u?window.cancelAnimationFrame(t):u.cancelAnimationFrame(t),r},this.submitFrame=function(){u!==void 0&&y.isPresenting&&u.submitFrame()},this.autoSubmitFrame=!0;var T=new THREE.PerspectiveCamera;T.layers.enable(1);var b=new THREE.PerspectiveCamera;b.layers.enable(2),this.render=function(r,a,i,o){if(u&&y.isPresenting){var s=r.autoUpdate;s&&(r.updateMatrixWorld(),r.autoUpdate=!1);var m=u.getEyeParameters("left"),f=u.getEyeParameters("right");d.fromArray(m.offset),p.fromArray(f.offset),Array.isArray(r)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),r=r[0]);var M=t.getSize(),x=u.getLayers(),E,L;if(x.length){var N=x[0];E=null!==N.leftBounds&&4===N.leftBounds.length?N.leftBounds:v,L=null!==N.rightBounds&&4===N.rightBounds.length?N.rightBounds:A}else E=v,L=A;return g={x:n(M.width*E[0]),y:n(M.height*E[1]),width:n(M.width*E[2]),height:n(M.height*E[3])},h={x:n(M.width*L[0]),y:n(M.height*L[1]),width:n(M.width*L[2]),height:n(M.height*L[3])},i?(t.setRenderTarget(i),i.scissorTest=!0):(t.setRenderTarget(null),t.setScissorTest(!0)),(t.autoClear||o)&&t.clear(),null===a.parent&&a.updateMatrixWorld(),a.matrixWorld.decompose(T.position,T.quaternion,T.scale),b.position.copy(T.position),b.quaternion.copy(T.quaternion),b.scale.copy(T.scale),T.translateOnAxis(d,T.scale.x),b.translateOnAxis(p,b.scale.x),u.getFrameData?(u.depthNear=a.near,u.depthFar=a.far,u.getFrameData(c),T.projectionMatrix.elements=c.leftProjectionMatrix,b.projectionMatrix.elements=c.rightProjectionMatrix):(T.projectionMatrix=l(m.fieldOfView,!0,a.near,a.far),b.projectionMatrix=l(f.fieldOfView,!0,a.near,a.far)),i?(i.viewport.set(g.x,g.y,g.width,g.height),i.scissor.set(g.x,g.y,g.width,g.height)):(t.setViewport(g.x,g.y,g.width,g.height),t.setScissor(g.x,g.y,g.width,g.height)),t.render(r,T,i,o),i?(i.viewport.set(h.x,h.y,h.width,h.height),i.scissor.set(h.x,h.y,h.width,h.height)):(t.setViewport(h.x,h.y,h.width,h.height),t.setScissor(h.x,h.y,h.width,h.height)),t.render(r,b,i,o),i?(i.viewport.set(0,0,M.width,M.height),i.scissor.set(0,0,M.width,M.height),i.scissorTest=!1,t.setRenderTarget(null)):(t.setViewport(0,0,M.width,M.height),t.setScissorTest(!1)),s&&(r.autoUpdate=!0),void(y.autoSubmitFrame&&y.submitFrame())}t.render(r,a,i,o)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",i,!1)}}},{}],202:[function(t,r){window.glStats=function(){function t(t,r){return function(){r.apply(this,arguments),t.apply(this,arguments)}}var a=null,r=0,i=0,o=0,n=0,s=0,l=0,d=0;WebGLRenderingContext.prototype.drawArrays=t(WebGLRenderingContext.prototype.drawArrays,function(){r++,arguments[0]==this.POINTS?l+=arguments[2]:s+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=t(WebGLRenderingContext.prototype.drawElements,function(){i++,n+=arguments[1]/3,s+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=t(WebGLRenderingContext.prototype.useProgram,function(){o++}),WebGLRenderingContext.prototype.bindTexture=t(WebGLRenderingContext.prototype.bindTexture,function(){d++});return{update:function(){a("allcalls").set(r+i),a("drawElements").set(i),a("drawArrays").set(r),a("bindTexture").set(d),a("useProgram").set(o),a("glfaces").set(n),a("glvertices").set(s),a("glpoints").set(l)},start:function(){r=0,i=0,o=0,n=0,s=0,l=0,d=0},end:function(){},attach:function(t){a=t},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(t){var a=null;return{update:function(){a("renderer.info.memory.geometries").set(t.info.memory.geometries),a("renderer.info.programs").set(t.info.programs.length),a("renderer.info.memory.textures").set(t.info.memory.textures),a("renderer.info.render.calls").set(t.info.render.calls),a("renderer.info.render.faces").set(t.info.render.faces),a("renderer.info.render.points").set(t.info.render.points),a("renderer.info.render.vertices").set(t.info.render.vertices)},start:function(){},end:function(){},attach:function(t){a=t},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.faces":{caption:"Faces",over:1e3},"renderer.info.render.points":{caption:"Points"},"renderer.info.render.vertices":{caption:"Vertices"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.faces","renderer.info.render.points","renderer.info.render.vertices"]}],fractions:[]}},window.BrowserStats=function(){function t(t){var r=100,a=h(u(t)/o);return n(t*r/y(1024,a))/r}var a=null,r=0,i=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var o=6.931471805599453;return{update:function(){r=t(performance.memory.usedJSHeapSize),i=t(performance.memory.totalJSHeapSize),a("memory").set(r),a("total").set(i)},start:function(){r=0},end:function(){},attach:function(t){a=t},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},"object"===("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&(r.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats})},{}],203:[function(t,r){"use strict";(function(){!1=="performance"in window&&(window.performance={});var t=window.performance;if(!1=="now"in t){var r=Date.now();t.timing&&t.timing.navigationStart&&(r=t.timing.navigationStart),t.now=function(){return Date.now()-r}}t.mark||(t.mark=function(){}),t.measure||(t.measure=function(){})})(),window.rStats=function(t){function r(t,r){for(var a=Object.keys(t),i=0,o=a.length;i<o;i++)r(a[i])}function a(t){var r=document.createElement("link");r.href=t,r.rel="stylesheet",r.type="text/css",document.getElementsByTagName("head")[0].appendChild(r)}function i(t,r,a){var i=a||{},o=document.createElement("canvas"),n=o.getContext("2d"),s=0,l=0,d=i.color?i.color:"#666666",p=document.createElement("canvas"),c=p.getContext("2d");p.width=1,p.height=2*g,c.fillStyle="#444444",c.fillRect(0,0,1,2*g),c.fillStyle=d,c.fillRect(0,g,1,g),c.fillStyle="#ffffff",c.globalAlpha=0.5,c.fillRect(0,g,1,1),c.globalAlpha=1;var u=document.createElement("canvas"),m=u.getContext("2d");return u.width=1,u.height=2*g,m.fillStyle="#444444",m.fillRect(0,0,1,2*g),m.fillStyle="#b70000",m.fillRect(0,g,1,g),m.globalAlpha=0.5,m.fillStyle="#ffffff",m.fillRect(0,g,1,1),m.globalAlpha=1,function(){o.width=h,o.height=g,o.style.width=o.width+"px",o.style.height=o.height+"px",o.className="rs-canvas",t.appendChild(o),n.fillStyle="#444444",n.fillRect(0,0,o.width,o.height)}(),{draw:function(t,r){l+=0.1*(t-l),s*=0.99,l>s&&(s=l),n.drawImage(o,1,0,o.width-1,o.height,0,0,o.width-1,o.height),r?n.drawImage(u,o.width-1,o.height-l*o.height/s-g):n.drawImage(p,o.width-1,o.height-l*o.height/s-g)}}}function o(t,a){var i=document.createElement("canvas"),o=i.getContext("2d");return function(){i.width=h,i.height=g*a,i.style.width=i.width+"px",i.style.height=i.height+"px",i.className="rs-canvas",t.appendChild(i),o.fillStyle="#444444",o.fillRect(0,0,i.width,i.height)}(),{draw:function(t){o.drawImage(i,1,0,i.width-1,i.height,0,0,i.width-1,i.height);var a=0;r(t,function(r){var n=t[r]*i.height;o.fillStyle=u[r],o.fillRect(i.width-1,a,1,n),a+=n})}}}function s(t,r){function a(r){if(A&&A.average){m+=r,h++;var a=performance.now();a-g>=(A.avgMs||1e3)&&(u=m/h,m=0,g=a,h=0)}}function o(){b=performance.now(),c.userTimingAPI&&performance.mark(l+"-start"),v=!0}function s(){d=performance.now()-b,c.userTimingAPI&&(performance.mark(l+"-end"),v&&performance.measure(l,l+"-start",l+"-end")),a(d)}var l=t,d=0,p=0,u=0,m=0,g=performance.now(),h=0,y=document.createElement("div"),f=document.createElement("span"),x=document.createElement("div"),E=document.createTextNode(""),A=c?c.values[l.toLowerCase()]:null,T=new i(y,l,A),v=!1,b;return f.className="rs-counter-id",f.textContent=A&&A.caption?A.caption:l,x.className="rs-counter-value",x.appendChild(E),y.appendChild(f),y.appendChild(x),r?r.div.appendChild(y):M.appendChild(y),b=performance.now(),{set:function(t){d=t,a(d)},start:o,tick:function(){s(),o()},end:s,frame:function(){var r=performance.now(),t=r-b;p++,1e3<t&&(d=A&&!1===A.interpolate?p:1e3*p/t,p=0,b=r,a(d))},value:function(){return d},draw:function(){var t=A&&A.average?u:d;E.nodeValue=n(100*t)/100;var r=A&&(A.below&&d<A.below||A.over&&d>A.over);T.draw(d,r),y.className=r?"rs-counter-base alarm":"rs-counter-base"}}}function l(t){var a=t.toLowerCase();if(void 0===a&&(a="default"),y[a])return y[a];var i=null;c&&c.groups&&r(c.groups,function(t){var r=c.groups[parseInt(t,10)];i||-1===r.values.indexOf(a.toLowerCase())||(i=r)});var o=new s(a,i);return y[a]=o,o}function d(){r(c.plugins,function(t){c.plugins[t].update()}),r(y,function(t){y[t].draw()}),c&&c.fractions&&r(c.fractions,function(t){var a=c.fractions[parseInt(t,10)],i=[],o=y[a.base.toLowerCase()];o&&(o=o.value(),r(c.fractions[t].steps,function(r){var a=c.fractions[t].steps[parseInt(r,10)].toLowerCase(),n=y[a];n&&i.push(n.value()/o)})),a.graph.draw(i)})}var c=t||{},u=c.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],p=(c.CSSPath?c.CSSPath:"")+"rStats.css",m=c.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",p];m.forEach(function(t){a(t)}),c.values||(c.values={});var g=10,h=200,y={},f,M;return function(){if(c.plugins){c.values||(c.values={}),c.groups||(c.groups=[]),c.fractions||(c.fractions=[]);for(var t=0;t<c.plugins.length;t++)c.plugins[t].attach(l),r(c.plugins[t].values,function(r){c.values[r]=c.plugins[t].values[r]}),c.groups=c.groups.concat(c.plugins[t].groups),c.fractions=c.fractions.concat(c.plugins[t].fractions)}else c.plugins={};f=document.createElement("div"),f.className="rs-base",M=document.createElement("div"),M.className="rs-container",M.style.height="auto",f.appendChild(M),document.body.appendChild(f),c&&(c.groups&&r(c.groups,function(t){var r=c.groups[parseInt(t,10)],a=document.createElement("div");a.className="rs-group",r.div=a;var i=document.createElement("h1");i.textContent=r.caption,i.addEventListener("click",function(t){this.classList.toggle("hidden"),t.preventDefault()}.bind(a)),M.appendChild(i),M.appendChild(a)}),c.fractions&&r(c.fractions,function(t){var a=c.fractions[parseInt(t,10)],i=document.createElement("div");i.className="rs-fraction";var n=document.createElement("div");n.className="rs-legend";var s=0;r(c.fractions[t].steps,function(r){var a=document.createElement("p");a.textContent=c.fractions[t].steps[r],a.style.color=u[s],n.appendChild(a),s++}),i.appendChild(n),i.style.height=s*g+"px",a.div=i;var l=new o(i,s);a.graph=l,M.appendChild(i)}))}(),function(t){return t?l(t):{element:f,update:d}}},"object"===("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&(r.exports=window.rStats)},{}],204:[function(t,r){var a={};a.base64=function(t,r){return"data:"+t+";base64,"+r},a.isMobile=function(){var t=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},a.isIOS=function(){return /(iPad|iPhone|iPod)/g.test(navigator.userAgent)},a.isIFrame=function(){try{return window.self!==window.top}catch(t){return!0}},a.appendQueryParameter=function(t,r,a){var i=0>t.indexOf("?")?"?":"&";return t+=i+r+"="+a,t},a.getQueryParameter=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)"),a=r.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},a.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},r.exports=a},{}],205:[function(t,r){function a(){var t=document.createElement("video");t.addEventListener("ended",function(){t.play()}),this.request=function(){t.paused&&(t.src=o.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),t.play())},this.release=function(){t.pause(),t.src=""}}function i(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15000))},this.release=function(){t&&(clearInterval(t),t=null)}}var o=t("./util.js");r.exports=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return t.match(/iPhone/i)||t.match(/iPod/i)?i:a}()},{"./util.js":204}]},{},[171])(171)});